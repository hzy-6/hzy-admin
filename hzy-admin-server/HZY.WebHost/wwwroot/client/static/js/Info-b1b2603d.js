var j=Object.defineProperty;var z=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var F=(v,r,d)=>r in v?j(v,r,{enumerable:!0,configurable:!0,writable:!0,value:d}):v[r]=d,U=(v,r)=>{for(var d in r||(r={}))D.call(r,d)&&F(v,d,r[d]);if(z)for(var d of z(r))E.call(r,d)&&F(v,d,r[d]);return v};import{_ as H,r as W,a as A,c as s,j as p,q as y,w as l,f as a,l as t,d as T,x as N,F as S,n as _,aW as C,t as O,aS as G,k as R}from"./index-4af06715.js";import{o as J}from"./organizationService-9ffe5ed0.js";const K=_("\u63D0\u4EA4"),M=_("\u5173\u95ED"),Q=_("\u9501\u5B9A"),X=_("\u4E0D\u9501\u5B9A"),Y={emits:["onSuccess"],setup(v,{expose:r,emit:d}){const e=W({vm:{id:"",form:{},roleIds:[],allRoleList:[],allPostList:[]},visible:!1,saveLoading:!1,organizationTree:[]}),x=A(null),h={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u771F\u5B9E\u59D3\u540D",trigger:"blur"}],loginName:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u6237\u540D\u79F0",trigger:"blur"}]},g={findForm(){return e.saveLoading=!0,C.findForm(e.vm.id).then(m=>{e.saveLoading=!1,m.code==1&&(e.vm=m.data,e.vm.form.password="")})},saveForm(){if(!e.vm.form.organizationId)return O.message("\u8BF7\u9009\u62E9\u7EC4\u7EC7","\u8B66\u544A");x.value.validate().then(()=>{e.saveLoading=!0,C.saveForm(e.vm).then(m=>{m.code==1&&(O.message("\u64CD\u4F5C\u6210\u529F!","\u6210\u529F"),d("onSuccess",m.data),e.visible=!1)}).finally(()=>{e.saveLoading=!1})})},openForm({visible:m,key:o,organizationId:c}){e.visible=m,m&&(e.vm.id=o,G(()=>{x.value.resetFields(),g.sysOrganizationTree()}),g.findForm().then(f=>{o||(e.vm.form.organizationId=c)}))},sysOrganizationTree(){J.sysOrganizationTree().then(m=>{e.organizationTree=m.data.rows})}};return r(U({},g)),(m,o)=>{const c=s("a-button"),f=s("a-input"),u=s("a-form-item"),i=s("a-col"),q=s("a-tree-select"),w=s("a-radio"),B=s("a-radio-group"),L=s("a-checkbox"),b=s("a-row"),I=s("a-checkbox-group"),$=s("a-form"),P=s("a-spin"),V=s("a-modal");return p(),y(V,{visible:t(e).visible,"onUpdate:visible":o[11]||(o[11]=n=>t(e).visible=n),title:t(e).vm.id?"\u7F16\u8F91":"\u65B0\u5EFA",centered:"",onOk:o[12]||(o[12]=n=>t(e).visible=!1),width:800},{footer:l(()=>[a(c,{type:"primary",onClick:o[0]||(o[0]=n=>g.saveForm()),loading:t(e).saveLoading},{default:l(()=>[K]),_:1},8,["loading"]),a(c,{type:"danger",ghost:"",onClick:o[1]||(o[1]=n=>t(e).visible=!1),class:"ml-15"},{default:l(()=>[M]),_:1})]),default:l(()=>[a(P,{spinning:t(e).saveLoading},{default:l(()=>[a($,{ref_key:"formRef",ref:x,layout:"vertical",model:t(e).vm.form,rules:h},{default:l(()=>[a(b,{gutter:[15,15]},{default:l(()=>[a(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(u,{label:"\u771F\u5B9E\u59D3\u540D",ref:"name",name:"name"},{default:l(()=>[a(f,{value:t(e).vm.form.name,"onUpdate:value":o[2]||(o[2]=n=>t(e).vm.form.name=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1},512)]),_:1}),a(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(u,{label:"\u8D26\u6237\u540D\u79F0",ref:"loginName",name:"loginName"},{default:l(()=>[a(f,{value:t(e).vm.form.loginName,"onUpdate:value":o[3]||(o[3]=n=>t(e).vm.form.loginName=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1},512)]),_:1}),a(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(u,{label:"\u8D26\u6237\u5BC6\u7801"},{default:l(()=>[a(f,{value:t(e).vm.form.password,"onUpdate:value":o[4]||(o[4]=n=>t(e).vm.form.password=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),a(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(u,{label:"\u8054\u7CFB\u7535\u8BDD"},{default:l(()=>[a(f,{value:t(e).vm.form.phone,"onUpdate:value":o[5]||(o[5]=n=>t(e).vm.form.phone=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),a(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(u,{label:"\u90AE\u7BB1\u5730\u5740"},{default:l(()=>[a(f,{value:t(e).vm.form.email,"onUpdate:value":o[6]||(o[6]=n=>t(e).vm.form.email=n),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1}),a(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(u,{label:"\u6240\u5C5E\u7EC4\u7EC7"},{default:l(()=>[a(q,{value:t(e).vm.form.organizationId,"onUpdate:value":o[7]||(o[7]=n=>t(e).vm.form.organizationId=n),"dropdown-style":{maxHeight:"400px",overflow:"auto"},placeholder:"\u6240\u5C5E\u7EC4\u7EC7","allow-clear":"","tree-default-expand-all":"","tree-data":t(e).organizationTree,"field-names":{children:"children",label:"title",key:"key",value:"key"}},null,8,["value","tree-data"])]),_:1})]),_:1}),a(i,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[a(u,{label:"\u5220\u9664\u9501\u5B9A"},{default:l(()=>[a(B,{value:t(e).vm.form.deleteLock,"onUpdate:value":o[8]||(o[8]=n=>t(e).vm.form.deleteLock=n)},{default:l(()=>[a(w,{value:!0},{default:l(()=>[Q]),_:1}),a(w,{value:!1},{default:l(()=>[X]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(i,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[a(u,{label:"\u6240\u5C5E\u5C97\u4F4D"},{default:l(()=>[a(I,{value:t(e).vm.postIds,"onUpdate:value":o[9]||(o[9]=n=>t(e).vm.postIds=n),class:"w100"},{default:l(()=>[a(b,{gutter:[16,16]},{default:l(()=>[(p(!0),T(S,null,N(t(e).vm.allPostList,(n,k)=>(p(),y(i,{span:6,key:k},{default:l(()=>[a(L,{value:n.id},{default:l(()=>[_(R(n.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1}),a(i,{xs:24},{default:l(()=>[a(u,{label:"\u6240\u5C5E\u89D2\u8272"},{default:l(()=>[a(I,{value:t(e).vm.roleIds,"onUpdate:value":o[10]||(o[10]=n=>t(e).vm.roleIds=n),class:"w100"},{default:l(()=>[a(b,{gutter:[16,16]},{default:l(()=>[(p(!0),T(S,null,N(t(e).vm.allRoleList,(n,k)=>(p(),y(i,{span:6,key:k},{default:l(()=>[a(L,{value:n.id},{default:l(()=>[_(R(n.name),1)]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["visible","title"])}}};var le=H(Y,[["__scopeId","data-v-75567dde"]]);export{le as default};
