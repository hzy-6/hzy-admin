!function (t, e) { "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.G2 = e() : t.G2 = e() }(window, (function () {
    return function (t) { var e = {}; function n(i) { if (e[i]) return e[i].exports; var r = e[i] = { i: i, l: !1, exports: {} }; return t[i].call(r.exports, r, r.exports, n), r.l = !0, r.exports } return n.m = t, n.c = e, n.d = function (t, e, i) { n.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: i }) }, n.r = function (t) { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "__esModule", { value: !0 }) }, n.t = function (t, e) { if (1 & e && (t = n(t)), 8 & e) return t; if (4 & e && "object" == typeof t && t && t.__esModule) return t; var i = Object.create(null); if (n.r(i), Object.defineProperty(i, "default", { enumerable: !0, value: t }), 2 & e && "string" != typeof t) for (var r in t) n.d(i, r, function (e) { return t[e] }.bind(null, r)); return i }, n.n = function (t) { var e = t && t.__esModule ? function () { return t.default } : function () { return t }; return n.d(e, "a", e), e }, n.o = function (t, e) { return Object.prototype.hasOwnProperty.call(t, e) }, n.p = "", n(n.s = 157) }([function (t, e, n) { "use strict"; n.r(e), n.d(e, "contains", (function () { return r })), n.d(e, "includes", (function () { return r })), n.d(e, "difference", (function () { return a })), n.d(e, "find", (function () { return m })), n.d(e, "findIndex", (function () { return x })), n.d(e, "firstValue", (function () { return b })), n.d(e, "flatten", (function () { return C })), n.d(e, "flattenDeep", (function () { return O })), n.d(e, "getRange", (function () { return M })), n.d(e, "pull", (function () { return P })), n.d(e, "pullAt", (function () { return T })), n.d(e, "reduce", (function () { return E })), n.d(e, "remove", (function () { return j })), n.d(e, "sortBy", (function () { return B })), n.d(e, "union", (function () { return D })), n.d(e, "uniq", (function () { return k })), n.d(e, "valuesOfKey", (function () { return R })), n.d(e, "head", (function () { return F })), n.d(e, "last", (function () { return N })), n.d(e, "startsWith", (function () { return G })), n.d(e, "endsWith", (function () { return Y })), n.d(e, "filter", (function () { return o })), n.d(e, "every", (function () { return V })), n.d(e, "some", (function () { return X })), n.d(e, "group", (function () { return q })), n.d(e, "groupBy", (function () { return H })), n.d(e, "groupToMap", (function () { return W })), n.d(e, "getWrapBehavior", (function () { return U })), n.d(e, "wrapBehavior", (function () { return Z })), n.d(e, "number2color", (function () { return K })), n.d(e, "parseRadius", (function () { return $ })), n.d(e, "clamp", (function () { return J })), n.d(e, "fixedBase", (function () { return tt })), n.d(e, "isDecimal", (function () { return nt })), n.d(e, "isEven", (function () { return it })), n.d(e, "isInteger", (function () { return rt })), n.d(e, "isNegative", (function () { return ot })), n.d(e, "isNumberEqual", (function () { return at })), n.d(e, "isOdd", (function () { return st })), n.d(e, "isPositive", (function () { return ut })), n.d(e, "maxBy", (function () { return lt })), n.d(e, "minBy", (function () { return ct })), n.d(e, "mod", (function () { return ht })), n.d(e, "toDegree", (function () { return pt })), n.d(e, "toInteger", (function () { return dt })), n.d(e, "toRadian", (function () { return yt })), n.d(e, "forIn", (function () { return vt })), n.d(e, "has", (function () { return mt })), n.d(e, "hasKey", (function () { return xt })), n.d(e, "hasValue", (function () { return Ct })), n.d(e, "keys", (function () { return d })), n.d(e, "isMatch", (function () { return g })), n.d(e, "values", (function () { return bt })), n.d(e, "lowerCase", (function () { return Ot })), n.d(e, "lowerFirst", (function () { return Mt })), n.d(e, "substitute", (function () { return wt })), n.d(e, "upperCase", (function () { return St })), n.d(e, "upperFirst", (function () { return At })), n.d(e, "getType", (function () { return It })), n.d(e, "isArguments", (function () { return Tt })), n.d(e, "isArray", (function () { return h })), n.d(e, "isArrayLike", (function () { return i })), n.d(e, "isBoolean", (function () { return Et })), n.d(e, "isDate", (function () { return jt })), n.d(e, "isError", (function () { return Lt })), n.d(e, "isFunction", (function () { return l })), n.d(e, "isFinite", (function () { return Bt })), n.d(e, "isNil", (function () { return c })), n.d(e, "isNull", (function () { return kt })), n.d(e, "isNumber", (function () { return et })), n.d(e, "isObject", (function () { return f })), n.d(e, "isObjectLike", (function () { return y })), n.d(e, "isPlainObject", (function () { return v })), n.d(e, "isPrototype", (function () { return Rt })), n.d(e, "isRegExp", (function () { return Ft })), n.d(e, "isString", (function () { return L })), n.d(e, "isType", (function () { return u })), n.d(e, "isUndefined", (function () { return Nt })), n.d(e, "isElement", (function () { return Gt })), n.d(e, "requestAnimationFrame", (function () { return Yt })), n.d(e, "clearAnimationFrame", (function () { return Vt })), n.d(e, "augment", (function () { return Ht })), n.d(e, "clone", (function () { return qt })), n.d(e, "debounce", (function () { return Ut })), n.d(e, "memoize", (function () { return Zt })), n.d(e, "deepMix", (function () { return Kt })), n.d(e, "each", (function () { return p })), n.d(e, "extend", (function () { return $t })), n.d(e, "indexOf", (function () { return Jt })), n.d(e, "isEmpty", (function () { return ee })), n.d(e, "isEqual", (function () { return ie })), n.d(e, "isEqualWith", (function () { return re })), n.d(e, "map", (function () { return oe })), n.d(e, "mapValues", (function () { return se })), n.d(e, "mix", (function () { return zt })), n.d(e, "assign", (function () { return zt })), n.d(e, "get", (function () { return ue })), n.d(e, "set", (function () { return le })), n.d(e, "pick", (function () { return he })), n.d(e, "throttle", (function () { return fe })), n.d(e, "toArray", (function () { return pe })), n.d(e, "toString", (function () { return _t })), n.d(e, "uniqueId", (function () { return ge })), n.d(e, "noop", (function () { return ye })), n.d(e, "identity", (function () { return ve })), n.d(e, "size", (function () { return me })), n.d(e, "Cache", (function () { return xe })); var i = function (t) { return null !== t && "function" != typeof t && isFinite(t.length) }, r = function (t, e) { return !!i(t) && t.indexOf(e) > -1 }, o = function (t, e) { if (!i(t)) return t; for (var n = [], r = 0; r < t.length; r++) { var o = t[r]; e(o, r) && n.push(o) } return n }, a = function (t, e) { return void 0 === e && (e = []), o(t, (function (t) { return !r(e, t) })) }, s = {}.toString, u = function (t, e) { return s.call(t) === "[object " + e + "]" }, l = function (t) { return u(t, "Function") }, c = function (t) { return null == t }, h = function (t) { return Array.isArray ? Array.isArray(t) : u(t, "Array") }, f = function (t) { var e = typeof t; return null !== t && "object" === e || "function" === e }; var p = function (t, e) { if (t) if (h(t)) for (var n = 0, i = t.length; n < i && !1 !== e(t[n], n); n++); else if (f(t)) for (var r in t) if (t.hasOwnProperty(r) && !1 === e(t[r], r)) break }, d = Object.keys ? function (t) { return Object.keys(t) } : function (t) { var e = []; return p(t, (function (n, i) { l(t) && "prototype" === i || e.push(i) })), e }; var g = function (t, e) { var n = d(e), i = n.length; if (c(t)) return !i; for (var r = 0; r < i; r += 1) { var o = n[r]; if (e[o] !== t[o] || !(o in t)) return !1 } return !0 }, y = function (t) { return "object" == typeof t && null !== t }, v = function (t) { if (!y(t) || !u(t, "Object")) return !1; if (null === Object.getPrototypeOf(t)) return !0; for (var e = t; null !== Object.getPrototypeOf(e);)e = Object.getPrototypeOf(e); return Object.getPrototypeOf(t) === e }; var m = function (t, e) { if (!h(t)) return null; var n; if (l(e) && (n = e), v(e) && (n = function (t) { return g(t, e) }), n) for (var i = 0; i < t.length; i += 1)if (n(t[i])) return t[i]; return null }; var x = function (t, e, n) { void 0 === n && (n = 0); for (var i = n; i < t.length; i++)if (e(t[i], i)) return i; return -1 }, b = function (t, e) { for (var n = null, i = 0; i < t.length; i++) { var r = t[i][e]; if (!c(r)) { n = h(r) ? r[0] : r; break } } return n }, C = function (t) { if (!h(t)) return []; for (var e = [], n = 0; n < t.length; n++)e = e.concat(t[n]); return e }, _ = function (t, e) { if (void 0 === e && (e = []), h(t)) for (var n = 0; n < t.length; n += 1)_(t[n], e); else e.push(t); return e }, O = _, M = function (t) { var e = t.filter((function (t) { return !isNaN(t) })); if (!e.length) return { min: 0, max: 0 }; if (h(t[0])) { for (var n = [], i = 0; i < t.length; i++)n = n.concat(t[i]); e = n } var r = Math.max.apply(null, e); return { min: Math.min.apply(null, e), max: r } }, w = Array.prototype, S = w.splice, A = w.indexOf, P = function (t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; for (var i = 0; i < e.length; i++)for (var r = e[i], o = -1; (o = A.call(t, r)) > -1;)S.call(t, o, 1); return t }, I = Array.prototype.splice, T = function (t, e) { if (!i(t)) return []; for (var n = t ? e.length : 0, r = n - 1; n--;) { var o = void 0, a = e[n]; n !== r && a === o || (o = a, I.call(t, a, 1)) } return t }, E = function (t, e, n) { if (!h(t) && !v(t)) return t; var i = n; return p(t, (function (t, n) { i = e(i, t, n) })), i }, j = function (t, e) { var n = []; if (!i(t)) return n; for (var r = -1, o = [], a = t.length; ++r < a;) { var s = t[r]; e(s, r, t) && (n.push(s), o.push(r)) } return T(t, o), n }, L = function (t) { return u(t, "String") }; var B = function (t, e) { var n; if (l(e)) n = function (t, n) { return e(t) - e(n) }; else { var i = []; L(e) ? i.push(e) : h(e) && (i = e), n = function (t, e) { for (var n = 0; n < i.length; n += 1) { var r = i[n]; if (t[r] > e[r]) return 1; if (t[r] < e[r]) return -1 } return 0 } } return t.sort(n), t }, k = function (t) { var e = []; return p(t, (function (t) { r(e, t) || e.push(t) })), e }, D = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; return k([].concat.apply([], t)) }, R = function (t, e) { for (var n = [], i = {}, r = 0; r < t.length; r++) { var o = t[r][e]; if (!c(o)) { h(o) || (o = [o]); for (var a = 0; a < o.length; a++) { var s = o[a]; i[s] || (n.push(s), i[s] = !0) } } } return n }; function F(t) { if (i(t)) return t[0] } function N(t) { if (i(t)) { return t[t.length - 1] } } var G = function (t, e) { return !(!h(t) && !L(t)) && t[0] === e }; var Y = function (t, e) { return !(!h(t) && !L(t)) && t[t.length - 1] === e }, V = function (t, e) { for (var n = 0; n < t.length; n++)if (!e(t[n], n)) return !1; return !0 }, X = function (t, e) { for (var n = 0; n < t.length; n++)if (e(t[n], n)) return !0; return !1 }, z = Object.prototype.hasOwnProperty; var H = function (t, e) { if (!e || !h(t)) return {}; for (var n, i = {}, r = l(e) ? e : function (t) { return t[e] }, o = 0; o < t.length; o++) { var a = t[o]; n = r(a), z.call(i, n) ? i[n].push(a) : i[n] = [a] } return i }, W = function (t, e) { if (!e) return { 0: t }; if (!l(e)) { var n = h(e) ? e : e.replace(/\s+/g, "").split("*"); e = function (t) { for (var e = "_", i = 0, r = n.length; i < r; i++)e += t[n[i]] && t[n[i]].toString(); return e } } return H(t, e) }, q = function (t, e) { if (!e) return [t]; var n = W(t, e), i = []; for (var r in n) i.push(n[r]); return i }; var U = function (t, e) { return t["_wrap_" + e] }; var Z = function (t, e) { if (t["_wrap_" + e]) return t["_wrap_" + e]; var n = function (n) { t[e](n) }; return t["_wrap_" + e] = n, n }, Q = {}; var K = function (t) { var e = Q[t]; if (!e) { for (var n = t.toString(16), i = n.length; i < 6; i++)n = "0" + n; e = "#" + n, Q[t] = e } return e }; var $ = function (t) { var e = 0, n = 0, i = 0, r = 0; return h(t) ? 1 === t.length ? e = n = i = r = t[0] : 2 === t.length ? (e = i = t[0], n = r = t[1]) : 3 === t.length ? (e = t[0], n = r = t[1], i = t[2]) : (e = t[0], n = t[1], i = t[2], r = t[3]) : e = n = i = r = t, { r1: e, r2: n, r3: i, r4: r } }, J = function (t, e, n) { return t < e ? e : t > n ? n : t }, tt = function (t, e) { var n = e.toString(), i = n.indexOf("."); if (-1 === i) return Math.round(t); var r = n.substr(i + 1).length; return r > 20 && (r = 20), parseFloat(t.toFixed(r)) }, et = function (t) { return u(t, "Number") }, nt = function (t) { return et(t) && t % 1 != 0 }, it = function (t) { return et(t) && t % 2 == 0 }, rt = Number.isInteger ? Number.isInteger : function (t) { return et(t) && t % 1 == 0 }, ot = function (t) { return et(t) && t < 0 }; function at(t, e, n) { return void 0 === n && (n = 1e-5), Math.abs(t - e) < n } var st = function (t) { return et(t) && t % 2 != 0 }, ut = function (t) { return et(t) && t > 0 }, lt = function (t, e) { if (h(t)) { var n, i, r = t[0]; return n = l(e) ? e(t[0]) : t[0][e], p(t, (function (t) { (i = l(e) ? e(t) : t[e]) > n && (r = t, n = i) })), r } }, ct = function (t, e) { if (h(t)) { var n, i, r = t[0]; return n = l(e) ? e(t[0]) : t[0][e], p(t, (function (t) { (i = l(e) ? e(t) : t[e]) < n && (r = t, n = i) })), r } }, ht = function (t, e) { return (t % e + e) % e }, ft = 180 / Math.PI, pt = function (t) { return ft * t }, dt = parseInt, gt = Math.PI / 180, yt = function (t) { return gt * t }, vt = p, mt = function (t, e) { return t.hasOwnProperty(e) }, xt = mt, bt = Object.values ? function (t) { return Object.values(t) } : function (t) { var e = []; return p(t, (function (n, i) { l(t) && "prototype" === i || e.push(n) })), e }, Ct = function (t, e) { return r(bt(t), e) }, _t = function (t) { return c(t) ? "" : t.toString() }, Ot = function (t) { return _t(t).toLowerCase() }, Mt = function (t) { var e = _t(t); return e.charAt(0).toLowerCase() + e.substring(1) }; var wt = function (t, e) { return t && e ? t.replace(/\\?\{([^{}]+)\}/g, (function (t, n) { return "\\" === t.charAt(0) ? t.slice(1) : void 0 === e[n] ? "" : e[n] })) : t }, St = function (t) { return _t(t).toUpperCase() }, At = function (t) { var e = _t(t); return e.charAt(0).toUpperCase() + e.substring(1) }, Pt = {}.toString, It = function (t) { return Pt.call(t).replace(/^\[object /, "").replace(/]$/, "") }, Tt = function (t) { return u(t, "Arguments") }, Et = function (t) { return u(t, "Boolean") }, jt = function (t) { return u(t, "Date") }, Lt = function (t) { return u(t, "Error") }, Bt = function (t) { return et(t) && isFinite(t) }, kt = function (t) { return null === t }, Dt = Object.prototype, Rt = function (t) { var e = t && t.constructor; return t === ("function" == typeof e && e.prototype || Dt) }, Ft = function (t) { return u(t, "RegExp") }, Nt = function (t) { return void 0 === t }, Gt = function (t) { return t instanceof Element || t instanceof HTMLDocument }; function Yt(t) { return (window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || function (t) { return setTimeout(t, 16) })(t) } function Vt(t) { (window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.msCancelAnimationFrame || clearTimeout)(t) } function Xt(t, e) { for (var n in e) e.hasOwnProperty(n) && "constructor" !== n && void 0 !== e[n] && (t[n] = e[n]) } function zt(t, e, n, i) { return e && Xt(t, e), n && Xt(t, n), i && Xt(t, i), t } var Ht = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; for (var n = t[0], i = 1; i < t.length; i++) { var r = t[i]; l(r) && (r = r.prototype), zt(n.prototype, r) } }, Wt = function (t) { if ("object" != typeof t || null === t) return t; var e; if (h(t)) { e = []; for (var n = 0, i = t.length; n < i; n++)"object" == typeof t[n] && null != t[n] ? e[n] = Wt(t[n]) : e[n] = t[n] } else for (var r in e = {}, t) "object" == typeof t[r] && null != t[r] ? e[r] = Wt(t[r]) : e[r] = t[r]; return e }, qt = Wt; var Ut = function (t, e, n) { var i; return function () { var r = this, o = arguments, a = function () { i = null, n || t.apply(r, o) }, s = n && !i; clearTimeout(i), i = setTimeout(a, e), s && t.apply(r, o) } }, Zt = function (t, e) { if (!l(t)) throw new TypeError("Expected a function"); var n = function () { for (var i = [], r = 0; r < arguments.length; r++)i[r] = arguments[r]; var o = e ? e.apply(this, i) : i[0], a = n.cache; if (a.has(o)) return a.get(o); var s = t.apply(this, i); return a.set(o, s), s }; return n.cache = new Map, n }; function Qt(t, e, n, i) { for (var r in n = n || 0, i = i || 5, e) if (e.hasOwnProperty(r)) { var o = e[r]; null !== o && v(o) ? (v(t[r]) || (t[r] = {}), n < i ? Qt(t[r], o, n + 1, i) : t[r] = e[r]) : h(o) ? (t[r] = [], t[r] = t[r].concat(o)) : void 0 !== o && (t[r] = o) } } var Kt = function (t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; for (var i = 0; i < e.length; i += 1)Qt(t, e[i]); return t }, $t = function (t, e, n, i) { l(e) || (n = e, e = t, t = function () { }); var r = Object.create ? function (t, e) { return Object.create(t, { constructor: { value: e } }) } : function (t, e) { function n() { } n.prototype = t; var i = new n; return i.constructor = e, i }, o = r(e.prototype, t); return t.prototype = zt(o, t.prototype), t.superclass = r(e.prototype, e), zt(o, n), zt(t, i), t }, Jt = function (t, e) { if (!i(t)) return -1; var n = Array.prototype.indexOf; if (n) return n.call(t, e); for (var r = -1, o = 0; o < t.length; o++)if (t[o] === e) { r = o; break } return r }, te = Object.prototype.hasOwnProperty; var ee = function (t) { if (c(t)) return !0; if (i(t)) return !t.length; var e = It(t); if ("Map" === e || "Set" === e) return !t.size; if (Rt(t)) return !Object.keys(t).length; for (var n in t) if (te.call(t, n)) return !1; return !0 }, ne = function (t, e) { if (t === e) return !0; if (!t || !e) return !1; if (L(t) || L(e)) return !1; if (i(t) || i(e)) { if (t.length !== e.length) return !1; for (var n = !0, r = 0; r < t.length && (n = ne(t[r], e[r])); r++); return n } if (y(t) || y(e)) { var o = Object.keys(t), a = Object.keys(e); if (o.length !== a.length) return !1; for (n = !0, r = 0; r < o.length && (n = ne(t[o[r]], e[o[r]])); r++); return n } return !1 }, ie = ne, re = function (t, e, n) { return l(n) ? !!n(t, e) : ie(t, e) }, oe = function (t, e) { if (!i(t)) return t; for (var n = [], r = 0; r < t.length; r++) { var o = t[r]; n.push(e(o, r)) } return n }, ae = function (t) { return t }, se = function (t, e) { void 0 === e && (e = ae); var n = {}; return f(t) && !c(t) && Object.keys(t).forEach((function (i) { n[i] = e(t[i], i) })), n }, ue = function (t, e, n) { for (var i = 0, r = L(e) ? e.split(".") : e; t && i < r.length;)t = t[r[i++]]; return void 0 === t || i < r.length ? n : t }, le = function (t, e, n) { var i = t, r = L(e) ? e.split(".") : e; return r.forEach((function (t, e) { e < r.length - 1 ? (f(i[t]) || (i[t] = et(r[e + 1]) ? [] : {}), i = i[t]) : i[t] = n })), t }, ce = Object.prototype.hasOwnProperty, he = function (t, e) { if (null === t || !v(t)) return {}; var n = {}; return p(e, (function (e) { ce.call(t, e) && (n[e] = t[e]) })), n }, fe = function (t, e, n) { var i, r, o, a, s = 0; n || (n = {}); var u = function () { s = !1 === n.leading ? 0 : Date.now(), i = null, a = t.apply(r, o), i || (r = o = null) }, l = function () { var l = Date.now(); s || !1 !== n.leading || (s = l); var c = e - (l - s); return r = this, o = arguments, c <= 0 || c > e ? (i && (clearTimeout(i), i = null), s = l, a = t.apply(r, o), i || (r = o = null)) : i || !1 === n.trailing || (i = setTimeout(u, c)), a }; return l.cancel = function () { clearTimeout(i), s = 0, i = r = o = null }, l }, pe = function (t) { return i(t) ? Array.prototype.slice.call(t) : [] }, de = {}, ge = function (t) { return de[t = t || "g"] ? de[t] += 1 : de[t] = 1, t + de[t] }, ye = function () { }, ve = function (t) { return t }; function me(t) { return c(t) ? 0 : i(t) ? t.length : Object.keys(t).length } var xe = function () { function t() { this.map = {} } return t.prototype.has = function (t) { return void 0 !== this.map[t] }, t.prototype.get = function (t, e) { var n = this.map[t]; return void 0 === n ? e : n }, t.prototype.set = function (t, e) { this.map[t] = e }, t.prototype.clear = function () { this.map = {} }, t.prototype.delete = function (t) { delete this.map[t] }, t.prototype.size = function () { return Object.keys(this.map).length }, t }() }, function (t, e, n) {
        "use strict"; n.r(e), n.d(e, "__extends", (function () { return r })), n.d(e, "__assign", (function () { return o })), n.d(e, "__rest", (function () { return a })), n.d(e, "__decorate", (function () { return s })), n.d(e, "__param", (function () { return u })), n.d(e, "__metadata", (function () { return l })), n.d(e, "__awaiter", (function () { return c })), n.d(e, "__generator", (function () { return h })), n.d(e, "__createBinding", (function () { return f })), n.d(e, "__exportStar", (function () { return p })), n.d(e, "__values", (function () { return d })), n.d(e, "__read", (function () { return g })), n.d(e, "__spread", (function () { return y })), n.d(e, "__spreadArrays", (function () { return v })), n.d(e, "__spreadArray", (function () { return m })), n.d(e, "__await", (function () { return x })), n.d(e, "__asyncGenerator", (function () { return b })), n.d(e, "__asyncDelegator", (function () { return C })), n.d(e, "__asyncValues", (function () { return _ })), n.d(e, "__makeTemplateObject", (function () { return O })), n.d(e, "__importStar", (function () { return w })), n.d(e, "__importDefault", (function () { return S })), n.d(e, "__classPrivateFieldGet", (function () { return A })), n.d(e, "__classPrivateFieldSet", (function () { return P }));
        /*! *****************************************************************************
        Copyright (c) Microsoft Corporation.
        
        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.
        
        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */
        var i = function (t, e) { return (i = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]) })(t, e) }; function r(t, e) { if ("function" != typeof e && null !== e) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null"); function n() { this.constructor = t } i(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n) } var o = function () { return (o = Object.assign || function (t) { for (var e, n = 1, i = arguments.length; n < i; n++)for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) }; function a(t, e) { var n = {}; for (var i in t) Object.prototype.hasOwnProperty.call(t, i) && e.indexOf(i) < 0 && (n[i] = t[i]); if (null != t && "function" == typeof Object.getOwnPropertySymbols) { var r = 0; for (i = Object.getOwnPropertySymbols(t); r < i.length; r++)e.indexOf(i[r]) < 0 && Object.prototype.propertyIsEnumerable.call(t, i[r]) && (n[i[r]] = t[i[r]]) } return n } function s(t, e, n, i) { var r, o = arguments.length, a = o < 3 ? e : null === i ? i = Object.getOwnPropertyDescriptor(e, n) : i; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) a = Reflect.decorate(t, e, n, i); else for (var s = t.length - 1; s >= 0; s--)(r = t[s]) && (a = (o < 3 ? r(a) : o > 3 ? r(e, n, a) : r(e, n)) || a); return o > 3 && a && Object.defineProperty(e, n, a), a } function u(t, e) { return function (n, i) { e(n, i, t) } } function l(t, e) { if ("object" == typeof Reflect && "function" == typeof Reflect.metadata) return Reflect.metadata(t, e) } function c(t, e, n, i) { return new (n || (n = Promise))((function (r, o) { function a(t) { try { u(i.next(t)) } catch (t) { o(t) } } function s(t) { try { u(i.throw(t)) } catch (t) { o(t) } } function u(t) { var e; t.done ? r(t.value) : (e = t.value, e instanceof n ? e : new n((function (t) { t(e) }))).then(a, s) } u((i = i.apply(t, e || [])).next()) })) } function h(t, e) { var n, i, r, o, a = { label: 0, sent: function () { if (1 & r[0]) throw r[1]; return r[1] }, trys: [], ops: [] }; return o = { next: s(0), throw: s(1), return: s(2) }, "function" == typeof Symbol && (o[Symbol.iterator] = function () { return this }), o; function s(o) { return function (s) { return function (o) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, i && (r = 2 & o[0] ? i.return : o[0] ? i.throw || ((r = i.return) && r.call(i), 0) : i.next) && !(r = r.call(i, o[1])).done) return r; switch (i = 0, r && (o = [2 & o[0], r.value]), o[0]) { case 0: case 1: r = o; break; case 4: return a.label++, { value: o[1], done: !1 }; case 5: a.label++, i = o[1], o = [0]; continue; case 7: o = a.ops.pop(), a.trys.pop(); continue; default: if (!(r = a.trys, (r = r.length > 0 && r[r.length - 1]) || 6 !== o[0] && 2 !== o[0])) { a = 0; continue } if (3 === o[0] && (!r || o[1] > r[0] && o[1] < r[3])) { a.label = o[1]; break } if (6 === o[0] && a.label < r[1]) { a.label = r[1], r = o; break } if (r && a.label < r[2]) { a.label = r[2], a.ops.push(o); break } r[2] && a.ops.pop(), a.trys.pop(); continue }o = e.call(t, a) } catch (t) { o = [6, t], i = 0 } finally { n = r = 0 } if (5 & o[0]) throw o[1]; return { value: o[0] ? o[1] : void 0, done: !0 } }([o, s]) } } } var f = Object.create ? function (t, e, n, i) { void 0 === i && (i = n), Object.defineProperty(t, i, { enumerable: !0, get: function () { return e[n] } }) } : function (t, e, n, i) { void 0 === i && (i = n), t[i] = e[n] }; function p(t, e) { for (var n in t) "default" === n || Object.prototype.hasOwnProperty.call(e, n) || f(e, t, n) } function d(t) { var e = "function" == typeof Symbol && Symbol.iterator, n = e && t[e], i = 0; if (n) return n.call(t); if (t && "number" == typeof t.length) return { next: function () { return t && i >= t.length && (t = void 0), { value: t && t[i++], done: !t } } }; throw new TypeError(e ? "Object is not iterable." : "Symbol.iterator is not defined.") } function g(t, e) { var n = "function" == typeof Symbol && t[Symbol.iterator]; if (!n) return t; var i, r, o = n.call(t), a = []; try { for (; (void 0 === e || e-- > 0) && !(i = o.next()).done;)a.push(i.value) } catch (t) { r = { error: t } } finally { try { i && !i.done && (n = o.return) && n.call(o) } finally { if (r) throw r.error } } return a } function y() { for (var t = [], e = 0; e < arguments.length; e++)t = t.concat(g(arguments[e])); return t } function v() { for (var t = 0, e = 0, n = arguments.length; e < n; e++)t += arguments[e].length; var i = Array(t), r = 0; for (e = 0; e < n; e++)for (var o = arguments[e], a = 0, s = o.length; a < s; a++, r++)i[r] = o[a]; return i } function m(t, e) { for (var n = 0, i = e.length, r = t.length; n < i; n++, r++)t[r] = e[n]; return t } function x(t) { return this instanceof x ? (this.v = t, this) : new x(t) } function b(t, e, n) { if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined."); var i, r = n.apply(t, e || []), o = []; return i = {}, a("next"), a("throw"), a("return"), i[Symbol.asyncIterator] = function () { return this }, i; function a(t) { r[t] && (i[t] = function (e) { return new Promise((function (n, i) { o.push([t, e, n, i]) > 1 || s(t, e) })) }) } function s(t, e) { try { (n = r[t](e)).value instanceof x ? Promise.resolve(n.value.v).then(u, l) : c(o[0][2], n) } catch (t) { c(o[0][3], t) } var n } function u(t) { s("next", t) } function l(t) { s("throw", t) } function c(t, e) { t(e), o.shift(), o.length && s(o[0][0], o[0][1]) } } function C(t) { var e, n; return e = {}, i("next"), i("throw", (function (t) { throw t })), i("return"), e[Symbol.iterator] = function () { return this }, e; function i(i, r) { e[i] = t[i] ? function (e) { return (n = !n) ? { value: x(t[i](e)), done: "return" === i } : r ? r(e) : e } : r } } function _(t) { if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined."); var e, n = t[Symbol.asyncIterator]; return n ? n.call(t) : (t = d(t), e = {}, i("next"), i("throw"), i("return"), e[Symbol.asyncIterator] = function () { return this }, e); function i(n) { e[n] = t[n] && function (e) { return new Promise((function (i, r) { (function (t, e, n, i) { Promise.resolve(i).then((function (e) { t({ value: e, done: n }) }), e) })(i, r, (e = t[n](e)).done, e.value) })) } } } function O(t, e) { return Object.defineProperty ? Object.defineProperty(t, "raw", { value: e }) : t.raw = e, t } var M = Object.create ? function (t, e) { Object.defineProperty(t, "default", { enumerable: !0, value: e }) } : function (t, e) { t.default = e }; function w(t) { if (t && t.__esModule) return t; var e = {}; if (null != t) for (var n in t) "default" !== n && Object.prototype.hasOwnProperty.call(t, n) && f(e, t, n); return M(e, t), e } function S(t) { return t && t.__esModule ? t : { default: t } } function A(t, e) { if (!e.has(t)) throw new TypeError("attempted to get private field on non-instance"); return e.get(t) } function P(t, e, n) { if (!e.has(t)) throw new TypeError("attempted to set private field on non-instance"); return e.set(t, n), n }
    }, function (t, e, n) { "use strict"; n.d(e, "c", (function () { return r })), n.d(e, "a", (function () { return o })), n.d(e, "h", (function () { return a })), n.d(e, "k", (function () { return s })), n.d(e, "j", (function () { return u })), n.d(e, "b", (function () { return l })), n.d(e, "g", (function () { return c })), n.d(e, "e", (function () { return h })), n.d(e, "i", (function () { return f })), n.d(e, "d", (function () { return p })), n.d(e, "m", (function () { return d })), n.d(e, "l", (function () { return g })), n.d(e, "f", (function () { return y })); var i = n(0); function r(t) { var e = 0, n = 0, r = 0, o = 0; return Object(i.isNumber)(t) ? e = n = r = o = t : Object(i.isArray)(t) && (e = t[0], r = Object(i.isNil)(t[1]) ? t[0] : t[1], o = Object(i.isNil)(t[2]) ? t[0] : t[2], n = Object(i.isNil)(t[3]) ? r : t[3]), [e, r, o, n] } function o(t) { for (var e = t.childNodes, n = e.length - 1; n >= 0; n--)t.removeChild(e[n]) } function a(t, e) { return !!t.className.match(new RegExp("(\\s|^)" + e + "(\\s|$)")) } function s(t) { var e = t.start, n = t.end, i = Math.min(e.x, n.x), r = Math.min(e.y, n.y), o = Math.max(e.x, n.x), a = Math.max(e.y, n.y); return { x: i, y: r, minX: i, minY: r, maxX: o, maxY: a, width: o - i, height: a - r } } function u(t) { var e = t.map((function (t) { return t.x })), n = t.map((function (t) { return t.y })), i = Math.min.apply(Math, e), r = Math.min.apply(Math, n), o = Math.max.apply(Math, e), a = Math.max.apply(Math, n); return { x: i, y: r, minX: i, minY: r, maxX: o, maxY: a, width: o - i, height: a - r } } function l(t, e, n, i) { var r = t + n, o = e + i; return { x: t, y: e, width: n, height: i, minX: t, minY: e, maxX: isNaN(r) ? 0 : r, maxY: isNaN(o) ? 0 : o } } function c(t, e, n) { return (1 - n) * t + e * n } function h(t, e, n) { return { x: t.x + Math.cos(n) * e, y: t.y + Math.sin(n) * e } } var f = function (t, e, n) { return void 0 === n && (n = Math.pow(Number.EPSILON, .5)), [t, e].includes(1 / 0) ? Math.abs(t) === Math.abs(e) : Math.abs(t - e) < n }; function p(t) { var e, n, r, o, a, s = t.getClip(), u = s && s.getBBox(); if (t.isGroup()) { var c = 1 / 0, h = -1 / 0, f = 1 / 0, d = -1 / 0, g = t.getChildren(); g.length > 0 ? Object(i.each)(g, (function (t) { if (t.get("visible")) { if (t.isGroup() && 0 === t.get("children").length) return !0; var e = p(t), n = t.applyToMatrix([e.minX, e.minY, 1]), i = t.applyToMatrix([e.minX, e.maxY, 1]), r = t.applyToMatrix([e.maxX, e.minY, 1]), o = t.applyToMatrix([e.maxX, e.maxY, 1]), a = Math.min(n[0], i[0], r[0], o[0]), s = Math.max(n[0], i[0], r[0], o[0]), u = Math.min(n[1], i[1], r[1], o[1]), l = Math.max(n[1], i[1], r[1], o[1]); a < c && (c = a), s > h && (h = s), u < f && (f = u), l > d && (d = l) } })) : (c = 0, h = 0, f = 0, d = 0), e = l(c, f, h - c, d - f) } else e = t.getBBox(); return u ? (n = e, r = u, o = Math.max(n.minX, r.minX), a = Math.max(n.minY, r.minY), l(o, a, Math.min(n.maxX, r.maxX) - o, Math.min(n.maxY, r.maxY) - a)) : e } function d(t, e) { if (t.getClip() || e.getClip()) { var n = e.getClip(); if (n) { var i = { type: n.get("type"), attrs: n.attr() }; t.setClip(i) } else t.setClip(null) } } function g(t) { return t + "px" } function y(t, e, n, i) { var r, o, a, s, u = i / (r = t, a = (o = e).x - r.x, s = o.y - r.y, Math.sqrt(a * a + s * s)), l = 0; return "start" === n ? l = 0 - u : "end" === n && (l = 1 + u), { x: c(t.x, e.x, l), y: c(t.y, e.y, l) } } }, function (t, e, n) { "use strict"; e.a = { fontFamily: '\n  "-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue",\n  Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",\n  SimSun, "sans-serif"', textColor: "#2C3542", activeTextColor: "#333333", uncheckedColor: "#D8D8D8", lineColor: "#416180", regionColor: "#CCD7EB", verticalAxisRotate: -Math.PI / 4, horizontalAxisRotate: Math.PI / 4 } }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return i })), n.d(e, "b", (function () { return r })); var i = { rect: "path", circle: "circle", line: "line", path: "path", marker: "path", text: "text", polyline: "polyline", polygon: "polygon", image: "image", ellipse: "ellipse", dom: "foreignObject" }, r = { opacity: "opacity", fillStyle: "fill", fill: "fill", fillOpacity: "fill-opacity", strokeStyle: "stroke", strokeOpacity: "stroke-opacity", stroke: "stroke", x: "x", y: "y", r: "r", rx: "rx", ry: "ry", width: "width", height: "height", x1: "x1", x2: "x2", y1: "y1", y2: "y2", lineCap: "stroke-linecap", lineJoin: "stroke-linejoin", lineWidth: "stroke-width", lineDash: "stroke-dasharray", lineDashOffset: "stroke-dashoffset", miterLimit: "stroke-miterlimit", font: "font", fontSize: "font-size", fontStyle: "font-style", fontVariant: "font-variant", fontWeight: "font-weight", fontFamily: "font-family", startArrow: "marker-start", endArrow: "marker-end", path: "d", class: "class", id: "id", style: "style", preserveAspectRatio: "preserveAspectRatio" } }, function (t, e, n) { "use strict"; n.d(e, "d", (function () { return r })), n.d(e, "b", (function () { return o })), n.d(e, "e", (function () { return a })), n.d(e, "f", (function () { return s })), n.d(e, "l", (function () { return u })), n.d(e, "j", (function () { return l })); var i = n(0); function r() { return window ? window.devicePixelRatio : 1 } function o(t, e, n, i) { var r = t - n, o = e - i; return Math.sqrt(r * r + o * o) } function a(t, e, n, i, r, o) { return r >= t && r <= t + n && o >= e && o <= e + i } function s(t, e) { return !(e.minX > t.maxX || e.maxX < t.minX || e.minY > t.maxY || e.maxY < t.minY) } function u(t, e) { return t && e ? { minX: Math.min(t.minX, e.minX), minY: Math.min(t.minY, e.minY), maxX: Math.max(t.maxX, e.maxX), maxY: Math.max(t.maxY, e.maxY) } : t || e } function l(t, e) { return t[0] === e[0] && t[1] === e[1] } n.d(e, "i", (function () { return i.isNil })), n.d(e, "k", (function () { return i.isString })), n.d(e, "h", (function () { return i.isFunction })), n.d(e, "g", (function () { return i.isArray })), n.d(e, "c", (function () { return i.each })), n.d(e, "o", (function () { return i.toRadian })), n.d(e, "m", (function () { return i.mod })), n.d(e, "n", (function () { return i.requestAnimationFrame })), n.d(e, "a", (function () { return i.clearAnimationFrame })) }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "mat3", (function () { return i })), n.d(e, "vec2", (function () { return F })), n.d(e, "vec3", (function () { return N })), n.d(e, "ext", (function () { return r })); var i = {}; n.r(i), n.d(i, "create", (function () { return a })), n.d(i, "fromMat4", (function () { return s })), n.d(i, "clone", (function () { return u })), n.d(i, "copy", (function () { return l })), n.d(i, "fromValues", (function () { return c })), n.d(i, "set", (function () { return h })), n.d(i, "identity", (function () { return f })), n.d(i, "transpose", (function () { return p })), n.d(i, "invert", (function () { return d })), n.d(i, "adjoint", (function () { return g })), n.d(i, "determinant", (function () { return y })), n.d(i, "multiply", (function () { return v })), n.d(i, "translate", (function () { return m })), n.d(i, "rotate", (function () { return x })), n.d(i, "scale", (function () { return b })), n.d(i, "fromTranslation", (function () { return C })), n.d(i, "fromRotation", (function () { return _ })), n.d(i, "fromScaling", (function () { return O })), n.d(i, "fromMat2d", (function () { return M })), n.d(i, "fromQuat", (function () { return w })), n.d(i, "normalFromMat4", (function () { return S })), n.d(i, "projection", (function () { return A })), n.d(i, "str", (function () { return P })), n.d(i, "frob", (function () { return I })), n.d(i, "add", (function () { return T })), n.d(i, "subtract", (function () { return E })), n.d(i, "multiplyScalar", (function () { return j })), n.d(i, "multiplyScalarAndAdd", (function () { return L })), n.d(i, "exactEquals", (function () { return B })), n.d(i, "equals", (function () { return k })), n.d(i, "mul", (function () { return D })), n.d(i, "sub", (function () { return R })); var r = {}; n.r(r), n.d(r, "leftTranslate", (function () { return G })), n.d(r, "leftRotate", (function () { return Y })), n.d(r, "leftScale", (function () { return V })), n.d(r, "transform", (function () { return X })), n.d(r, "direction", (function () { return z })), n.d(r, "angleTo", (function () { return H })), n.d(r, "vertical", (function () { return W })); var o = n(13); function a() { var t = new o.a(9); return o.a != Float32Array && (t[1] = 0, t[2] = 0, t[3] = 0, t[5] = 0, t[6] = 0, t[7] = 0), t[0] = 1, t[4] = 1, t[8] = 1, t } function s(t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[4], t[4] = e[5], t[5] = e[6], t[6] = e[8], t[7] = e[9], t[8] = e[10], t } function u(t) { var e = new o.a(9); return e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], e[4] = t[4], e[5] = t[5], e[6] = t[6], e[7] = t[7], e[8] = t[8], e } function l(t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t[3] = e[3], t[4] = e[4], t[5] = e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t } function c(t, e, n, i, r, a, s, u, l) { var c = new o.a(9); return c[0] = t, c[1] = e, c[2] = n, c[3] = i, c[4] = r, c[5] = a, c[6] = s, c[7] = u, c[8] = l, c } function h(t, e, n, i, r, o, a, s, u, l) { return t[0] = e, t[1] = n, t[2] = i, t[3] = r, t[4] = o, t[5] = a, t[6] = s, t[7] = u, t[8] = l, t } function f(t) { return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t } function p(t, e) { if (t === e) { var n = e[1], i = e[2], r = e[5]; t[1] = e[3], t[2] = e[6], t[3] = n, t[5] = e[7], t[6] = i, t[7] = r } else t[0] = e[0], t[1] = e[3], t[2] = e[6], t[3] = e[1], t[4] = e[4], t[5] = e[7], t[6] = e[2], t[7] = e[5], t[8] = e[8]; return t } function d(t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8], h = c * a - s * l, f = -c * o + s * u, p = l * o - a * u, d = n * h + i * f + r * p; return d ? (d = 1 / d, t[0] = h * d, t[1] = (-c * i + r * l) * d, t[2] = (s * i - r * a) * d, t[3] = f * d, t[4] = (c * n - r * u) * d, t[5] = (-s * n + r * o) * d, t[6] = p * d, t[7] = (-l * n + i * u) * d, t[8] = (a * n - i * o) * d, t) : null } function g(t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8]; return t[0] = a * c - s * l, t[1] = r * l - i * c, t[2] = i * s - r * a, t[3] = s * u - o * c, t[4] = n * c - r * u, t[5] = r * o - n * s, t[6] = o * l - a * u, t[7] = i * u - n * l, t[8] = n * a - i * o, t } function y(t) { var e = t[0], n = t[1], i = t[2], r = t[3], o = t[4], a = t[5], s = t[6], u = t[7], l = t[8]; return e * (l * o - a * u) + n * (-l * r + a * s) + i * (u * r - o * s) } function v(t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], f = n[0], p = n[1], d = n[2], g = n[3], y = n[4], v = n[5], m = n[6], x = n[7], b = n[8]; return t[0] = f * i + p * a + d * l, t[1] = f * r + p * s + d * c, t[2] = f * o + p * u + d * h, t[3] = g * i + y * a + v * l, t[4] = g * r + y * s + v * c, t[5] = g * o + y * u + v * h, t[6] = m * i + x * a + b * l, t[7] = m * r + x * s + b * c, t[8] = m * o + x * u + b * h, t } function m(t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], f = n[0], p = n[1]; return t[0] = i, t[1] = r, t[2] = o, t[3] = a, t[4] = s, t[5] = u, t[6] = f * i + p * a + l, t[7] = f * r + p * s + c, t[8] = f * o + p * u + h, t } function x(t, e, n) { var i = e[0], r = e[1], o = e[2], a = e[3], s = e[4], u = e[5], l = e[6], c = e[7], h = e[8], f = Math.sin(n), p = Math.cos(n); return t[0] = p * i + f * a, t[1] = p * r + f * s, t[2] = p * o + f * u, t[3] = p * a - f * i, t[4] = p * s - f * r, t[5] = p * u - f * o, t[6] = l, t[7] = c, t[8] = h, t } function b(t, e, n) { var i = n[0], r = n[1]; return t[0] = i * e[0], t[1] = i * e[1], t[2] = i * e[2], t[3] = r * e[3], t[4] = r * e[4], t[5] = r * e[5], t[6] = e[6], t[7] = e[7], t[8] = e[8], t } function C(t, e) { return t[0] = 1, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = 1, t[5] = 0, t[6] = e[0], t[7] = e[1], t[8] = 1, t } function _(t, e) { var n = Math.sin(e), i = Math.cos(e); return t[0] = i, t[1] = n, t[2] = 0, t[3] = -n, t[4] = i, t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t } function O(t, e) { return t[0] = e[0], t[1] = 0, t[2] = 0, t[3] = 0, t[4] = e[1], t[5] = 0, t[6] = 0, t[7] = 0, t[8] = 1, t } function M(t, e) { return t[0] = e[0], t[1] = e[1], t[2] = 0, t[3] = e[2], t[4] = e[3], t[5] = 0, t[6] = e[4], t[7] = e[5], t[8] = 1, t } function w(t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = n + n, s = i + i, u = r + r, l = n * a, c = i * a, h = i * s, f = r * a, p = r * s, d = r * u, g = o * a, y = o * s, v = o * u; return t[0] = 1 - h - d, t[3] = c - v, t[6] = f + y, t[1] = c + v, t[4] = 1 - l - d, t[7] = p - g, t[2] = f - y, t[5] = p + g, t[8] = 1 - l - h, t } function S(t, e) { var n = e[0], i = e[1], r = e[2], o = e[3], a = e[4], s = e[5], u = e[6], l = e[7], c = e[8], h = e[9], f = e[10], p = e[11], d = e[12], g = e[13], y = e[14], v = e[15], m = n * s - i * a, x = n * u - r * a, b = n * l - o * a, C = i * u - r * s, _ = i * l - o * s, O = r * l - o * u, M = c * g - h * d, w = c * y - f * d, S = c * v - p * d, A = h * y - f * g, P = h * v - p * g, I = f * v - p * y, T = m * I - x * P + b * A + C * S - _ * w + O * M; return T ? (T = 1 / T, t[0] = (s * I - u * P + l * A) * T, t[1] = (u * S - a * I - l * w) * T, t[2] = (a * P - s * S + l * M) * T, t[3] = (r * P - i * I - o * A) * T, t[4] = (n * I - r * S + o * w) * T, t[5] = (i * S - n * P - o * M) * T, t[6] = (g * O - y * _ + v * C) * T, t[7] = (y * b - d * O - v * x) * T, t[8] = (d * _ - g * b + v * m) * T, t) : null } function A(t, e, n) { return t[0] = 2 / e, t[1] = 0, t[2] = 0, t[3] = 0, t[4] = -2 / n, t[5] = 0, t[6] = -1, t[7] = 1, t[8] = 1, t } function P(t) { return "mat3(" + t[0] + ", " + t[1] + ", " + t[2] + ", " + t[3] + ", " + t[4] + ", " + t[5] + ", " + t[6] + ", " + t[7] + ", " + t[8] + ")" } function I(t) { return Math.hypot(t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]) } function T(t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t[2] = e[2] + n[2], t[3] = e[3] + n[3], t[4] = e[4] + n[4], t[5] = e[5] + n[5], t[6] = e[6] + n[6], t[7] = e[7] + n[7], t[8] = e[8] + n[8], t } function E(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t[2] = e[2] - n[2], t[3] = e[3] - n[3], t[4] = e[4] - n[4], t[5] = e[5] - n[5], t[6] = e[6] - n[6], t[7] = e[7] - n[7], t[8] = e[8] - n[8], t } function j(t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t[3] = e[3] * n, t[4] = e[4] * n, t[5] = e[5] * n, t[6] = e[6] * n, t[7] = e[7] * n, t[8] = e[8] * n, t } function L(t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t[2] = e[2] + n[2] * i, t[3] = e[3] + n[3] * i, t[4] = e[4] + n[4] * i, t[5] = e[5] + n[5] * i, t[6] = e[6] + n[6] * i, t[7] = e[7] + n[7] * i, t[8] = e[8] + n[8] * i, t } function B(t, e) { return t[0] === e[0] && t[1] === e[1] && t[2] === e[2] && t[3] === e[3] && t[4] === e[4] && t[5] === e[5] && t[6] === e[6] && t[7] === e[7] && t[8] === e[8] } function k(t, e) { var n = t[0], i = t[1], r = t[2], a = t[3], s = t[4], u = t[5], l = t[6], c = t[7], h = t[8], f = e[0], p = e[1], d = e[2], g = e[3], y = e[4], v = e[5], m = e[6], x = e[7], b = e[8]; return Math.abs(n - f) <= o.b * Math.max(1, Math.abs(n), Math.abs(f)) && Math.abs(i - p) <= o.b * Math.max(1, Math.abs(i), Math.abs(p)) && Math.abs(r - d) <= o.b * Math.max(1, Math.abs(r), Math.abs(d)) && Math.abs(a - g) <= o.b * Math.max(1, Math.abs(a), Math.abs(g)) && Math.abs(s - y) <= o.b * Math.max(1, Math.abs(s), Math.abs(y)) && Math.abs(u - v) <= o.b * Math.max(1, Math.abs(u), Math.abs(v)) && Math.abs(l - m) <= o.b * Math.max(1, Math.abs(l), Math.abs(m)) && Math.abs(c - x) <= o.b * Math.max(1, Math.abs(c), Math.abs(x)) && Math.abs(h - b) <= o.b * Math.max(1, Math.abs(h), Math.abs(b)) } var D = v, R = E, F = n(56), N = n(69); function G(t, e, n) { var r = [0, 0, 0, 0, 0, 0, 0, 0, 0]; return i.fromTranslation(r, n), i.multiply(t, r, e) } function Y(t, e, n) { var r = [0, 0, 0, 0, 0, 0, 0, 0, 0]; return i.fromRotation(r, n), i.multiply(t, r, e) } function V(t, e, n) { var r = [0, 0, 0, 0, 0, 0, 0, 0, 0]; return i.fromScaling(r, n), i.multiply(t, r, e) } function X(t, e) { for (var n, r, o, a = t ? [].concat(t) : [1, 0, 0, 0, 1, 0, 0, 0, 1], s = 0, u = e.length; s < u; s++) { var l = e[s]; switch (l[0]) { case "t": G(a, a, [l[1], l[2]]); break; case "s": V(a, a, [l[1], l[2]]); break; case "r": Y(a, a, l[1]); break; case "m": n = a, r = a, o = l[1], i.multiply(n, o, r) } } return a } function z(t, e) { return t[0] * e[1] - e[0] * t[1] } function H(t, e, n) { var i = F.angle(t, e), r = z(t, e) >= 0; return n ? r ? 2 * Math.PI - i : i : r ? i : 2 * Math.PI - i } function W(t, e, n) { return n ? (t[0] = e[1], t[1] = -1 * e[0]) : (t[0] = -1 * e[1], t[1] = e[0]), t } }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "version", (function () { return v })); var i = n(35); n.d(e, "PathUtil", (function () { return i })); var r = n(104); for (var o in r) ["default", "Event", "Base", "AbstractCanvas", "AbstractGroup", "AbstractShape", "PathUtil", "getBBoxMethod", "getTextHeight", "assembleFont", "isAllowCapture", "multiplyVec2", "invert", "getOffScreenContext", "version"].indexOf(o) < 0 && function (t) { n.d(e, t, (function () { return r[t] })) }(o); var a = n(105); for (var o in a) ["default", "Event", "Base", "AbstractCanvas", "AbstractGroup", "AbstractShape", "PathUtil", "getBBoxMethod", "getTextHeight", "assembleFont", "isAllowCapture", "multiplyVec2", "invert", "getOffScreenContext", "version"].indexOf(o) < 0 && function (t) { n.d(e, t, (function () { return a[t] })) }(o); var s = n(67); n.d(e, "Event", (function () { return s.a })); var u = n(68); n.d(e, "Base", (function () { return u.a })); var l = n(134); n.d(e, "AbstractCanvas", (function () { return l.a })); var c = n(106); n.d(e, "AbstractGroup", (function () { return c.a })); var h = n(107); n.d(e, "AbstractShape", (function () { return h.a })); var f = n(136); n.d(e, "getBBoxMethod", (function () { return f.a })); var p = n(43); n.d(e, "getTextHeight", (function () { return p.b })), n.d(e, "assembleFont", (function () { return p.a })); var d = n(11); n.d(e, "isAllowCapture", (function () { return d.b })); var g = n(27); n.d(e, "multiplyVec2", (function () { return g.c })), n.d(e, "invert", (function () { return g.a })); var y = n(70); n.d(e, "getOffScreenContext", (function () { return y.a })); var v = "0.5.4" }, function (t, e, n) { "use strict"; var i = n(1), r = n(0), o = n(71), a = n(17), s = n(2), u = n(52), l = ["visible", "tip", "delegateObject"], c = ["container", "group", "shapesMap", "isRegister", "isUpdating", "destroyed"], h = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { container: null, shapesMap: {}, group: null, capture: !0, isRegister: !1, isUpdating: !1, isInit: !0 }) }, e.prototype.remove = function () { this.clear(), this.get("group").remove() }, e.prototype.clear = function () { this.get("group").clear(), this.set("shapesMap", {}), this.clearOffScreenCache(), this.set("isInit", !0) }, e.prototype.getChildComponentById = function (t) { var e = this.getElementById(t); return e && e.get("component") }, e.prototype.getElementById = function (t) { return this.get("shapesMap")[t] }, e.prototype.getElementByLocalId = function (t) { var e = this.getElementId(t); return this.getElementById(e) }, e.prototype.getElementsByName = function (t) { var e = []; return Object(r.each)(this.get("shapesMap"), (function (n) { n.get("name") === t && e.push(n) })), e }, e.prototype.getContainer = function () { return this.get("container") }, e.prototype.updateInner = function (t) { this.offScreenRender(), this.get("updateAutoRender") && this.render() }, e.prototype.render = function () { var t = this.get("offScreenGroup"); t || (t = this.offScreenRender()); var e = this.get("group"); this.updateElements(t, e), this.deleteElements(), this.applyOffset(), this.get("eventInitted") || (this.initEvent(), this.set("eventInitted", !0)), this.set("isInit", !1) }, e.prototype.show = function () { this.get("group").show(), this.set("visible", !0) }, e.prototype.hide = function () { this.get("group").hide(), this.set("visible", !1) }, e.prototype.setCapture = function (t) { this.get("group").set("capture", t), this.set("capture", t) }, e.prototype.destroy = function () { this.removeEvent(), this.remove(), t.prototype.destroy.call(this) }, e.prototype.getBBox = function () { return this.get("group").getCanvasBBox() }, e.prototype.getLayoutBBox = function () { var t = this.get("group"), e = this.getInnerLayoutBBox(), n = t.getTotalMatrix(); return n && (e = Object(a.a)(n, e)), e }, e.prototype.on = function (t, e, n) { return this.get("group").on(t, e, n), this }, e.prototype.off = function (t, e) { var n = this.get("group"); return n && n.off(t, e), this }, e.prototype.emit = function (t, e) { this.get("group").emit(t, e) }, e.prototype.init = function () { t.prototype.init.call(this), this.get("group") || this.initGroup(), this.offScreenRender() }, e.prototype.getInnerLayoutBBox = function () { return this.get("offScreenBBox") || this.get("group").getBBox() }, e.prototype.delegateEmit = function (t, e) { var n = this.get("group"); e.target = n, n.emit(t, e), Object(o.a)(n, t, e) }, e.prototype.createOffScreenGroup = function () { return new (this.get("group").getGroupBase())({ delegateObject: this.getDelegateObject() }) }, e.prototype.applyOffset = function () { var t = this.get("offsetX"), e = this.get("offsetY"); this.moveElementTo(this.get("group"), { x: t, y: e }) }, e.prototype.initGroup = function () { var t = this.get("container"); this.set("group", t.addGroup({ id: this.get("id"), name: this.get("name"), capture: this.get("capture"), visible: this.get("visible"), isComponent: !0, component: this, delegateObject: this.getDelegateObject() })) }, e.prototype.offScreenRender = function () { this.clearOffScreenCache(); var t = this.createOffScreenGroup(); return this.renderInner(t), this.set("offScreenGroup", t), this.set("offScreenBBox", Object(s.d)(t)), t }, e.prototype.addGroup = function (t, e) { this.appendDelegateObject(t, e); var n = t.addGroup(e); return this.get("isRegister") && this.registerElement(n), n }, e.prototype.addShape = function (t, e) { this.appendDelegateObject(t, e); var n = t.addShape(e); return this.get("isRegister") && this.registerElement(n), n }, e.prototype.addComponent = function (t, e) { var n = e.id, r = e.component, o = Object(i.__rest)(e, ["id", "component"]), a = new r(Object(i.__assign)(Object(i.__assign)({}, o), { id: n, container: t, updateAutoRender: this.get("updateAutoRender") })); return a.init(), a.render(), this.get("isRegister") && this.registerElement(a.get("group")), a }, e.prototype.initEvent = function () { }, e.prototype.removeEvent = function () { this.get("group").off() }, e.prototype.getElementId = function (t) { return this.get("id") + "-" + this.get("name") + "-" + t }, e.prototype.registerElement = function (t) { var e = t.get("id"); this.get("shapesMap")[e] = t }, e.prototype.unregisterElement = function (t) { var e = t.get("id"); delete this.get("shapesMap")[e] }, e.prototype.moveElementTo = function (t, e) { var n = Object(a.f)(e); t.attr("matrix", n) }, e.prototype.addAnimation = function (t, e, n) { var i = e.attr("opacity"); Object(r.isNil)(i) && (i = 1), e.attr("opacity", 0), e.animate({ opacity: i }, n) }, e.prototype.removeAnimation = function (t, e, n) { e.animate({ opacity: 0 }, n) }, e.prototype.updateAnimation = function (t, e, n, i) { e.animate(n, i) }, e.prototype.updateElements = function (t, e) { var n, i = this, o = this.get("animate"), a = this.get("animateOption"), u = t.getChildren().slice(0); Object(r.each)(u, (function (t) { var u = t.get("id"), h = i.getElementById(u), f = t.get("name"); if (h) if (t.get("isComponent")) { var p = t.get("component"), d = h.get("component"), g = Object(r.pick)(p.cfg, Object(r.difference)(Object(r.keys)(p.cfg), c)); d.update(g), h.set("update_status", "update") } else { var y = i.getReplaceAttrs(h, t); o && a.update ? i.updateAnimation(f, h, y, a.update) : h.attr(y), t.isGroup() && i.updateElements(t, h), Object(r.each)(l, (function (e) { h.set(e, t.get(e)) })), Object(s.m)(h, t), n = h, h.set("update_status", "update") } else { e.add(t); var v = e.getChildren(); if (v.splice(v.length - 1, 1), n) { var m = v.indexOf(n); v.splice(m + 1, 0, t) } else v.unshift(t); if (i.registerElement(t), t.set("update_status", "add"), t.get("isComponent")) (p = t.get("component")).set("container", e); else t.isGroup() && i.registerNewGroup(t); if (n = t, o) { var x = i.get("isInit") ? a.appear : a.enter; x && i.addAnimation(f, t, x) } } })) }, e.prototype.clearUpdateStatus = function (t) { var e = t.getChildren(); Object(r.each)(e, (function (t) { t.set("update_status", null) })) }, e.prototype.clearOffScreenCache = function () { var t = this.get("offScreenGroup"); t && t.destroy(), this.set("offScreenGroup", null), this.set("offScreenBBox", null) }, e.prototype.getDelegateObject = function () { var t; return (t = {})[this.get("name")] = this, t.component = this, t }, e.prototype.appendDelegateObject = function (t, e) { var n = t.get("delegateObject"); e.delegateObject || (e.delegateObject = {}), Object(r.mix)(e.delegateObject, n) }, e.prototype.getReplaceAttrs = function (t, e) { var n = t.attr(), i = e.attr(); return Object(r.each)(n, (function (t, e) { void 0 === i[e] && (i[e] = void 0) })), i }, e.prototype.registerNewGroup = function (t) { var e = this, n = t.getChildren(); Object(r.each)(n, (function (t) { e.registerElement(t), t.set("update_status", "add"), t.isGroup() && e.registerNewGroup(t) })) }, e.prototype.deleteElements = function () { var t = this, e = this.get("shapesMap"), n = []; Object(r.each)(e, (function (t, e) { !t.get("update_status") || t.destroyed ? n.push([e, t]) : t.set("update_status", null) })); var i = this.get("animate"), o = this.get("animateOption"); Object(r.each)(n, (function (n) { var a = n[0], s = n[1]; if (!s.destroyed) { var u = s.get("name"); if (i && o.leave) { var l = Object(r.mix)({ callback: function () { t.removeElement(s) } }, o.leave); t.removeAnimation(u, s, l) } else t.removeElement(s) } delete e[a] })) }, e.prototype.removeElement = function (t) { if (t.get("isGroup")) { var e = t.get("component"); e && e.destroy() } t.remove() }, e }(u.a); e.a = h }, function (t, e, n) { "use strict"; function i(t, e, n) { if (t) { if ("function" == typeof t.addEventListener) return t.addEventListener(e, n, !1), { remove: function () { t.removeEventListener(e, n, !1) } }; if ("function" == typeof t.attachEvent) return t.attachEvent("on" + e, n), { remove: function () { t.detachEvent("on" + e, n) } } } } var r, o, a, s; function u(t) { r || (r = document.createElement("table"), o = document.createElement("tr"), a = /^\s*<(\w+|!)[^>]*>/, s = { tr: document.createElement("tbody"), tbody: r, thead: r, tfoot: r, td: o, th: o, "*": document.createElement("div") }); var e = a.test(t) && RegExp.$1; e && e in s || (e = "*"); var n = s[e]; t = t.replace(/(^\s*)|(\s*$)/g, ""), n.innerHTML = "" + t; var i = n.childNodes[0]; return n.removeChild(i), i } function l(t, e, n) { var i; try { i = window.getComputedStyle ? window.getComputedStyle(t, null)[e] : t.style[e] } catch (t) { } finally { i = void 0 === i ? n : i } return i } function c(t, e) { var n = l(t, "height", e); return "auto" === n && (n = t.offsetHeight), parseFloat(n) } function h(t, e) { var n = c(t, e), i = parseFloat(l(t, "borderTopWidth")) || 0, r = parseFloat(l(t, "paddingTop")) || 0, o = parseFloat(l(t, "paddingBottom")) || 0; return n + i + (parseFloat(l(t, "borderBottomWidth")) || 0) + r + o + (parseFloat(l(t, "marginTop")) || 0) + (parseFloat(l(t, "marginBottom")) || 0) } function f(t, e) { var n = l(t, "width", e); return "auto" === n && (n = t.offsetWidth), parseFloat(n) } function p(t, e) { var n = f(t, e), i = parseFloat(l(t, "borderLeftWidth")) || 0, r = parseFloat(l(t, "paddingLeft")) || 0, o = parseFloat(l(t, "paddingRight")) || 0, a = parseFloat(l(t, "borderRightWidth")) || 0, s = parseFloat(l(t, "marginRight")) || 0; return n + i + a + r + o + (parseFloat(l(t, "marginLeft")) || 0) + s } function d() { return window.devicePixelRatio ? window.devicePixelRatio : 2 } function g(t, e) { if (t) for (var n in e) e.hasOwnProperty(n) && (t.style[n] = e[n]); return t } n.r(e), n.d(e, "addEventListener", (function () { return i })), n.d(e, "createDom", (function () { return u })), n.d(e, "getHeight", (function () { return c })), n.d(e, "getOuterHeight", (function () { return h })), n.d(e, "getOuterWidth", (function () { return p })), n.d(e, "getRatio", (function () { return d })), n.d(e, "getStyle", (function () { return l })), n.d(e, "getWidth", (function () { return f })), n.d(e, "modifyCSS", (function () { return g })) }, function (t, e, n) {
        "use strict"; n.d(e, "b", (function () { return r })), n.d(e, "a", (function () { return o })), n.d(e, "c", (function () { return a }));
        /*! *****************************************************************************
        Copyright (c) Microsoft Corporation.
        
        Permission to use, copy, modify, and/or distribute this software for any
        purpose with or without fee is hereby granted.
        
        THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
        REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
        AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
        INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
        LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
        OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
        PERFORMANCE OF THIS SOFTWARE.
        ***************************************************************************** */
        var i = function (t, e) { return (i = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, e) { t.__proto__ = e } || function (t, e) { for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]) })(t, e) }; function r(t, e) { function n() { this.constructor = t } i(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n) } var o = function () { return (o = Object.assign || function (t) { for (var e, n = 1, i = arguments.length; n < i; n++)for (var r in e = arguments[n]) Object.prototype.hasOwnProperty.call(e, r) && (t[r] = e[r]); return t }).apply(this, arguments) }; function a() { for (var t = 0, e = 0, n = arguments.length; e < n; e++)t += arguments[e].length; var i = Array(t), r = 0; for (e = 0; e < n; e++)for (var o = arguments[e], a = 0, s = o.length; a < s; a++, r++)i[r] = o[a]; return i }
    }, function (t, e, n) { "use strict"; n.d(e, "j", (function () { return r })), n.d(e, "c", (function () { return o })), n.d(e, "g", (function () { return a })), n.d(e, "b", (function () { return s })); var i = n(0); function r(t, e) { var n = t.indexOf(e); -1 !== n && t.splice(n, 1) } n.d(e, "e", (function () { return i.isNil })), n.d(e, "d", (function () { return i.isFunction })), n.d(e, "h", (function () { return i.isString })), n.d(e, "f", (function () { return i.isObject })), n.d(e, "i", (function () { return i.mix })), n.d(e, "a", (function () { return i.each })), n.d(e, "k", (function () { return i.upperFirst })); var o = "undefined" != typeof window && void 0 !== window.document; function a(t, e) { if (t.isCanvas()) return !0; for (var n = e.getParent(), i = !1; n;) { if (n === t) { i = !0; break } n = n.getParent() } return i } function s(t) { return t.cfg.visible && t.cfg.capture } }, function (t, e, n) { "use strict"; n.d(e, "e", (function () { return m })), n.d(e, "b", (function () { return M })), n.d(e, "a", (function () { return E })), n.d(e, "c", (function () { return f })), n.d(e, "d", (function () { return R })), n.d(e, "f", (function () { return i })); var i = {}; function r(t) { return Math.min.apply(null, t) } function o(t) { return Math.max.apply(null, t) } function a(t, e, n, i) { var r = t - n, o = e - i; return Math.sqrt(r * r + o * o) } function s(t, e) { return Math.abs(t - e) < .001 } function u(t, e) { var n = r(t), i = r(e); return { x: n, y: i, width: o(t) - n, height: o(e) - i } } function l(t, e, n, i) { return { minX: r([t, n]), maxX: o([t, n]), minY: r([e, i]), maxY: o([e, i]) } } function c(t) { return (t + 2 * Math.PI) % (2 * Math.PI) } n.r(i), n.d(i, "distance", (function () { return a })), n.d(i, "isNumberEqual", (function () { return s })), n.d(i, "getBBoxByArray", (function () { return u })), n.d(i, "getBBoxRange", (function () { return l })), n.d(i, "piMod", (function () { return c })); var h = n(56), f = { box: function (t, e, n, i) { return u([t, n], [e, i]) }, length: function (t, e, n, i) { return a(t, e, n, i) }, pointAt: function (t, e, n, i, r) { return { x: (1 - r) * t + r * n, y: (1 - r) * e + r * i } }, pointDistance: function (t, e, n, i, r, o) { var s = (n - t) * (r - t) + (i - e) * (o - e); return s < 0 ? a(t, e, r, o) : s > (n - t) * (n - t) + (i - e) * (i - e) ? a(n, i, r, o) : this.pointToLine(t, e, n, i, r, o) }, pointToLine: function (t, e, n, i, r, o) { var a = [n - t, i - e]; if (h.exactEquals(a, [0, 0])) return Math.sqrt((r - t) * (r - t) + (o - e) * (o - e)); var s = [-a[1], a[0]]; h.normalize(s, s); var u = [r - t, o - e]; return Math.abs(h.dot(u, s)) }, tangentAngle: function (t, e, n, i) { return Math.atan2(i - e, n - t) } }; function p(t, e, n, i, r, o) { var s, u = 1 / 0, l = [n, i], c = 20; o && o > 200 && (c = o / 10); for (var h = 1 / c, f = h / 10, p = 0; p <= c; p++) { var d = p * h, g = [r.apply(null, t.concat([d])), r.apply(null, e.concat([d]))]; (x = a(l[0], l[1], g[0], g[1])) < u && (s = d, u = x) } if (0 === s) return { x: t[0], y: e[0] }; if (1 === s) { var y = t.length; return { x: t[y - 1], y: e[y - 1] } } u = 1 / 0; for (p = 0; p < 32 && !(f < 1e-4); p++) { var v = s - f, m = s + f, x = (g = [r.apply(null, t.concat([v])), r.apply(null, e.concat([v]))], a(l[0], l[1], g[0], g[1])); if (v >= 0 && x < u) s = v, u = x; else { var b = [r.apply(null, t.concat([m])), r.apply(null, e.concat([m]))], C = a(l[0], l[1], b[0], b[1]); m <= 1 && C < u ? (s = m, u = C) : f *= .5 } } return { x: r.apply(null, t.concat([s])), y: r.apply(null, e.concat([s])) } } function d(t, e, n, i) { var r = 1 - i; return r * r * t + 2 * i * r * e + i * i * n } function g(t, e, n) { var i = t + n - 2 * e; if (s(i, 0)) return [.5]; var r = (t - e) / i; return r <= 1 && r >= 0 ? [r] : [] } function y(t, e, n, i) { return 2 * (1 - i) * (e - t) + 2 * i * (n - e) } function v(t, e, n, i, r, o, a) { var s = d(t, n, r, a), u = d(e, i, o, a), l = f.pointAt(t, e, n, i, a), c = f.pointAt(n, i, r, o, a); return [[t, e, l.x, l.y, s, u], [s, u, c.x, c.y, r, o]] } var m = { box: function (t, e, n, i, r, o) { var a = g(t, n, r)[0], s = g(e, i, o)[0], l = [t, r], c = [e, o]; return void 0 !== a && l.push(d(t, n, r, a)), void 0 !== s && c.push(d(e, i, o, s)), u(l, c) }, length: function (t, e, n, i, r, o) { return function t(e, n, i, r, o, s, u) { if (0 === u) return (a(e, n, i, r) + a(i, r, o, s) + a(e, n, o, s)) / 2; var l = v(e, n, i, r, o, s, .5), c = l[0], h = l[1]; return c.push(u - 1), h.push(u - 1), t.apply(null, c) + t.apply(null, h) }(t, e, n, i, r, o, 3) }, nearestPoint: function (t, e, n, i, r, o, a, s) { return p([t, n, r], [e, i, o], a, s, d) }, pointDistance: function (t, e, n, i, r, o, s, u) { var l = this.nearestPoint(t, e, n, i, r, o, s, u); return a(l.x, l.y, s, u) }, interpolationAt: d, pointAt: function (t, e, n, i, r, o, a) { return { x: d(t, n, r, a), y: d(e, i, o, a) } }, divide: function (t, e, n, i, r, o, a) { return v(t, e, n, i, r, o, a) }, tangentAngle: function (t, e, n, i, r, o, a) { var s = y(t, n, r, a), u = y(e, i, o, a); return c(Math.atan2(u, s)) } }; function x(t, e, n, i, r) { var o = 1 - r; return o * o * o * t + 3 * e * r * o * o + 3 * n * r * r * o + i * r * r * r } function b(t, e, n, i, r) { var o = 1 - r; return 3 * (o * o * (e - t) + 2 * o * r * (n - e) + r * r * (i - n)) } function C(t, e, n, i) { var r, o, a, u = -3 * t + 9 * e - 9 * n + 3 * i, l = 6 * t - 12 * e + 6 * n, c = 3 * e - 3 * t, h = []; if (s(u, 0)) s(l, 0) || (r = -c / l) >= 0 && r <= 1 && h.push(r); else { var f = l * l - 4 * u * c; s(f, 0) ? h.push(-l / (2 * u)) : f > 0 && (o = (-l - (a = Math.sqrt(f))) / (2 * u), (r = (-l + a) / (2 * u)) >= 0 && r <= 1 && h.push(r), o >= 0 && o <= 1 && h.push(o)) } return h } function _(t, e, n, i, r, o, a, s, u) { var l = x(t, n, r, a, u), c = x(e, i, o, s, u), h = f.pointAt(t, e, n, i, u), p = f.pointAt(n, i, r, o, u), d = f.pointAt(r, o, a, s, u), g = f.pointAt(h.x, h.y, p.x, p.y, u), y = f.pointAt(p.x, p.y, d.x, d.y, u); return [[t, e, h.x, h.y, g.x, g.y, l, c], [l, c, y.x, y.y, d.x, d.y, a, s]] } function O(t, e, n, i, r, o, s, u, l) { if (0 === l) return function (t, e) { for (var n = 0, i = t.length, r = 0; r < i; r++) { n += a(t[r], e[r], t[(r + 1) % i], e[(r + 1) % i]) } return n / 2 }([t, n, r, s], [e, i, o, u]); var c = _(t, e, n, i, r, o, s, u, .5), h = c[0], f = c[1]; return h.push(l - 1), f.push(l - 1), O.apply(null, h) + O.apply(null, f) } var M = { extrema: C, box: function (t, e, n, i, r, o, a, s) { for (var l = [t, a], c = [e, s], h = C(t, n, r, a), f = C(e, i, o, s), p = 0; p < h.length; p++)l.push(x(t, n, r, a, h[p])); for (p = 0; p < f.length; p++)c.push(x(e, i, o, s, f[p])); return u(l, c) }, length: function (t, e, n, i, r, o, a, s) { return O(t, e, n, i, r, o, a, s, 3) }, nearestPoint: function (t, e, n, i, r, o, a, s, u, l, c) { return p([t, n, r, a], [e, i, o, s], u, l, x, c) }, pointDistance: function (t, e, n, i, r, o, s, u, l, c, h) { var f = this.nearestPoint(t, e, n, i, r, o, s, u, l, c, h); return a(f.x, f.y, l, c) }, interpolationAt: x, pointAt: function (t, e, n, i, r, o, a, s, u) { return { x: x(t, n, r, a, u), y: x(e, i, o, s, u) } }, divide: function (t, e, n, i, r, o, a, s, u) { return _(t, e, n, i, r, o, a, s, u) }, tangentAngle: function (t, e, n, i, r, o, a, s, u) { var l = b(t, n, r, a, u), h = b(e, i, o, s, u); return c(Math.atan2(h, l)) } }; function w(t, e) { var n = Math.abs(t); return e > 0 ? n : -1 * n } var S = function (t, e, n, i, r, o) { var a = n, s = i; if (0 === a || 0 === s) return { x: t, y: e }; for (var u, l, c = r - t, h = o - e, f = Math.abs(c), p = Math.abs(h), d = a * a, g = s * s, y = Math.PI / 4, v = 0; v < 4; v++) { u = a * Math.cos(y), l = s * Math.sin(y); var m = (d - g) * Math.pow(Math.cos(y), 3) / a, x = (g - d) * Math.pow(Math.sin(y), 3) / s, b = u - m, C = l - x, _ = f - m, O = p - x, M = Math.hypot(C, b), S = Math.hypot(O, _); y += M * Math.asin((b * O - C * _) / (M * S)) / Math.sqrt(d + g - u * u - l * l), y = Math.min(Math.PI / 2, Math.max(0, y)) } return { x: t + w(u, c), y: e + w(l, h) } }; function A(t, e, n, i, r, o) { return n * Math.cos(r) * Math.cos(o) - i * Math.sin(r) * Math.sin(o) + t } function P(t, e, n, i, r, o) { return n * Math.sin(r) * Math.cos(o) + i * Math.cos(r) * Math.sin(o) + e } function I(t, e, n) { return { x: t * Math.cos(n), y: e * Math.sin(n) } } function T(t, e, n) { var i = Math.cos(n), r = Math.sin(n); return [t * i - e * r, t * r + e * i] } var E = { box: function (t, e, n, i, r, o, a) { for (var s = function (t, e, n) { return Math.atan(-e / t * Math.tan(n)) }(n, i, r), u = 1 / 0, l = -1 / 0, c = [o, a], h = 2 * -Math.PI; h <= 2 * Math.PI; h += Math.PI) { var f = s + h; o < a ? o < f && f < a && c.push(f) : a < f && f < o && c.push(f) } for (h = 0; h < c.length; h++) { var p = A(t, 0, n, i, r, c[h]); p < u && (u = p), p > l && (l = p) } var d = function (t, e, n) { return Math.atan(e / (t * Math.tan(n))) }(n, i, r), g = 1 / 0, y = -1 / 0, v = [o, a]; for (h = 2 * -Math.PI; h <= 2 * Math.PI; h += Math.PI) { var m = d + h; o < a ? o < m && m < a && v.push(m) : a < m && m < o && v.push(m) } for (h = 0; h < v.length; h++) { var x = P(0, e, n, i, r, v[h]); x < g && (g = x), x > y && (y = x) } return { x: u, y: g, width: l - u, height: y - g } }, length: function (t, e, n, i, r, o, a) { }, nearestPoint: function (t, e, n, i, r, o, a, s, u) { var l = T(s - t, u - e, -r), c = l[0], h = l[1], f = S(0, 0, n, i, c, h), p = function (t, e, n, i) { return (Math.atan2(i * t, n * e) + 2 * Math.PI) % (2 * Math.PI) }(n, i, f.x, f.y); p < o ? f = I(n, i, o) : p > a && (f = I(n, i, a)); var d = T(f.x, f.y, r); return { x: d[0] + t, y: d[1] + e } }, pointDistance: function (t, e, n, i, r, o, s, u, l) { var c = this.nearestPoint(t, e, n, i, u, l); return a(c.x, c.y, u, l) }, pointAt: function (t, e, n, i, r, o, a, s) { var u = (a - o) * s + o; return { x: A(t, 0, n, i, r, u), y: P(0, e, n, i, r, u) } }, tangentAngle: function (t, e, n, i, r, o, a, s) { var u = (a - o) * s + o, l = function (t, e, n, i, r, o, a, s) { return -1 * n * Math.cos(r) * Math.sin(s) - i * Math.sin(r) * Math.cos(s) }(0, 0, n, i, r, 0, 0, u), h = function (t, e, n, i, r, o, a, s) { return -1 * n * Math.sin(r) * Math.sin(s) + i * Math.cos(r) * Math.cos(s) }(0, 0, n, i, r, 0, 0, u); return c(Math.atan2(h, l)) } }; function j(t) { for (var e = 0, n = [], i = 0; i < t.length - 1; i++) { var r = t[i], o = t[i + 1], s = a(r[0], r[1], o[0], o[1]), u = { from: r, to: o, length: s }; n.push(u), e += s } return { segments: n, totalLength: e } } function L(t) { if (t.length < 2) return 0; for (var e = 0, n = 0; n < t.length - 1; n++) { var i = t[n], r = t[n + 1]; e += a(i[0], i[1], r[0], r[1]) } return e } function B(t, e) { if (e > 1 || e < 0 || t.length < 2) return null; var n = j(t), i = n.segments, r = n.totalLength; if (0 === r) return { x: t[0][0], y: t[0][1] }; for (var o = 0, a = null, s = 0; s < i.length; s++) { var u = i[s], l = u.from, c = u.to, h = u.length / r; if (e >= o && e <= o + h) { var p = (e - o) / h; a = f.pointAt(l[0], l[1], c[0], c[1], p); break } o += h } return a } function k(t, e) { if (e > 1 || e < 0 || t.length < 2) return 0; for (var n = j(t), i = n.segments, r = n.totalLength, o = 0, a = 0, s = 0; s < i.length; s++) { var u = i[s], l = u.from, c = u.to, h = u.length / r; if (e >= o && e <= o + h) { a = Math.atan2(c[1] - l[1], c[0] - l[0]); break } o += h } return a } function D(t, e, n) { for (var i = 1 / 0, r = 0; r < t.length - 1; r++) { var o = t[r], a = t[r + 1], s = f.pointDistance(o[0], o[1], a[0], a[1], e, n); s < i && (i = s) } return i } var R = { box: function (t) { for (var e = [], n = [], i = 0; i < t.length; i++) { var r = t[i]; e.push(r[0]), n.push(r[1]) } return u(e, n) }, length: function (t) { return L(t) }, pointAt: function (t, e) { return B(t, e) }, pointDistance: function (t, e, n) { return D(t, e, n) }, tangentAngle: function (t, e) { return k(t, e) } } }, function (t, e, n) { "use strict"; n.d(e, "b", (function () { return i })), n.d(e, "a", (function () { return r })), n.d(e, "c", (function () { return o })); var i = 1e-6, r = "undefined" != typeof Float32Array ? Float32Array : Array, o = Math.random; Math.PI; Math.hypot || (Math.hypot = function () { for (var t = 0, e = arguments.length; e--;)t += arguments[e] * arguments[e]; return Math.sqrt(t) }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.COMPONENT_MAX_VIEW_PERCENTAGE = e.MIN_CHART_HEIGHT = e.MIN_CHART_WIDTH = e.FIELD_ORIGIN = e.GROUP_ATTRS = e.ELEMENT_STATE = e.PLOT_EVENTS = e.GEOMETRY_LIFE_CIRCLE = e.VIEW_LIFE_CIRCLE = e.GROUP_Z_INDEX = e.COMPONENT_TYPE = e.DIRECTION = e.LAYER = void 0, function (t) { t.FORE = "fore", t.MID = "mid", t.BG = "bg" }(e.LAYER || (e.LAYER = {})), function (t) { t.TOP = "top", t.TOP_LEFT = "top-left", t.TOP_RIGHT = "top-right", t.RIGHT = "right", t.RIGHT_TOP = "right-top", t.RIGHT_BOTTOM = "right-bottom", t.LEFT = "left", t.LEFT_TOP = "left-top", t.LEFT_BOTTOM = "left-bottom", t.BOTTOM = "bottom", t.BOTTOM_LEFT = "bottom-left", t.BOTTOM_RIGHT = "bottom-right", t.RADIUS = "radius", t.CIRCLE = "circle", t.NONE = "none" }(e.DIRECTION || (e.DIRECTION = {})), function (t) { t.AXIS = "axis", t.GRID = "grid", t.LEGEND = "legend", t.TOOLTIP = "tooltip", t.ANNOTATION = "annotation", t.SLIDER = "slider", t.SCROLLBAR = "scrollbar", t.OTHER = "other" }(e.COMPONENT_TYPE || (e.COMPONENT_TYPE = {})), e.GROUP_Z_INDEX = { FORE: 3, MID: 2, BG: 1 }, function (t) { t.BEFORE_RENDER = "beforerender", t.AFTER_RENDER = "afterrender", t.BEFORE_PAINT = "beforepaint", t.AFTER_PAINT = "afterpaint", t.BEFORE_CHANGE_DATA = "beforechangedata", t.AFTER_CHANGE_DATA = "afterchangedata", t.BEFORE_CLEAR = "beforeclear", t.AFTER_CLEAR = "afterclear", t.BEFORE_DESTROY = "beforedestroy", t.BEFORE_CHANGE_SIZE = "beforechangesize", t.AFTER_CHANGE_SIZE = "afterchangesize" }(e.VIEW_LIFE_CIRCLE || (e.VIEW_LIFE_CIRCLE = {})), function (t) { t.BEFORE_DRAW_ANIMATE = "beforeanimate", t.AFTER_DRAW_ANIMATE = "afteranimate" }(e.GEOMETRY_LIFE_CIRCLE || (e.GEOMETRY_LIFE_CIRCLE = {})), function (t) { t.MOUSE_ENTER = "plot:mouseenter", t.MOUSE_DOWN = "plot:mousedown", t.MOUSE_MOVE = "plot:mousemove", t.MOUSE_UP = "plot:mouseup", t.MOUSE_LEAVE = "plot:mouseleave", t.TOUCH_START = "plot:touchstart", t.TOUCH_MOVE = "plot:touchmove", t.TOUCH_END = "plot:touchend", t.TOUCH_CANCEL = "plot:touchcancel", t.CLICK = "plot:click", t.DBLCLICK = "plot:dblclick", t.CONTEXTMENU = "plot:contextmenu", t.LEAVE = "plot:leave", t.ENTER = "plot:enter" }(e.PLOT_EVENTS || (e.PLOT_EVENTS = {})), function (t) { t.ACTIVE = "active", t.INACTIVE = "inactive", t.SELECTED = "selected", t.DEFAULT = "default" }(e.ELEMENT_STATE || (e.ELEMENT_STATE = {})), e.GROUP_ATTRS = ["color", "shape", "size"], e.FIELD_ORIGIN = "_origin", e.MIN_CHART_WIDTH = 1, e.MIN_CHART_HEIGHT = 1, e.COMPONENT_MAX_VIEW_PERCENTAGE = .25 }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getShapeFactory = e.registerShape = e.registerShapeFactory = void 0; var i = n(1), r = n(32), o = n(0), a = n(59), s = { coordinate: null, defaultShapeType: null, theme: null, getShapePoints: function (t, e) { var n = this.getShape(t); return n.getPoints ? n.getPoints(e) : this.getDefaultPoints(e) }, getShape: function (t) { var e = this[t] || this[this.defaultShapeType]; return e.coordinate = this.coordinate, e }, getDefaultPoints: function () { return [] }, getDefaultStyle: function (t) { return o.get(t, [this.defaultShapeType, "default", "style"], {}) }, getMarker: function (t, e) { var n = this.getShape(t); if (!n.getMarker) { var i = this.defaultShapeType; n = this.getShape(i) } var r = this.theme, a = o.get(r, [t, "default"], {}), s = n.getMarker(e); return o.deepMix({}, a, s) }, drawShape: function (t, e, n) { return this.getShape(t).draw(e, n) } }, u = { coordinate: null, parsePath: function (t) { var e = this.coordinate, n = r.parsePathString(t); return n = e.isPolar ? a.convertPolarPath(e, n) : a.convertNormalPath(e, n) }, parsePoint: function (t) { return this.coordinate.convert(t) }, parsePoints: function (t) { var e = this.coordinate; return t.map((function (t) { return e.convert(t) })) }, draw: function (t, e) { } }, l = {}; e.registerShapeFactory = function (t, e) { var n = o.upperFirst(t), r = i.__assign(i.__assign(i.__assign({}, s), e), { geometryType: t }); return l[n] = r, r }, e.registerShape = function (t, e, n) { var r = o.upperFirst(t), a = l[r], s = i.__assign(i.__assign({}, u), n); return a[e] = s, s }, e.getShapeFactory = function (t) { var e = o.upperFirst(t); return l[e] } }, function (t, e, n) { "use strict"; n.d(e, "b", (function () { return o })), n.d(e, "a", (function () { return a })), n.d(e, "d", (function () { return s })), n.d(e, "c", (function () { return u })); var i = n(0), r = n(4); function o(t) { return document.createElementNS("http://www.w3.org/2000/svg", t) } function a(t) { var e = r.a[t.type], n = t.getParent(); if (!e) throw new Error("the type " + t.type + " is not supported by svg"); var i = o(e); if (t.get("id") && (i.id = t.get("id")), t.set("el", i), t.set("attrs", {}), n) { var a = n.get("el"); a || (a = n.createDom(), n.set("el", a)), a.appendChild(i) } return i } function s(t, e) { var n = t.get("el"), r = Object(i.toArray)(n.children).sort(e), o = document.createDocumentFragment(); r.forEach((function (t) { o.appendChild(t) })), n.appendChild(o) } function u(t, e) { var n = t.parentNode, i = Array.from(n.childNodes).filter((function (t) { return 1 === t.nodeType && "defs" !== t.nodeName.toLowerCase() })), r = i[e], o = i.indexOf(t); if (r) { if (o > e) n.insertBefore(t, r); else if (o < e) { var a = i[e + 1]; a ? n.insertBefore(t, a) : n.appendChild(t) } } else n.appendChild(t) } }, function (t, e, n) { "use strict"; n.d(e, "e", (function () { return o })), n.d(e, "f", (function () { return a })), n.d(e, "d", (function () { return s })), n.d(e, "a", (function () { return l })), n.d(e, "b", (function () { return c })), n.d(e, "c", (function () { return h })); var i = n(6), r = [1, 0, 0, 0, 1, 0, 0, 0, 1]; function o(t, e, n) { return void 0 === n && (n = r), e ? i.ext.transform(n, [["t", -t.x, -t.y], ["r", e], ["t", t.x, t.y]]) : null } function a(t, e) { return t.x || t.y ? i.ext.transform(e || r, [["t", t.x, t.y]]) : null } function s(t) { var e = [0, 0, 0]; return i.vec3.transformMat3(e, [1, 0, 0], t), Math.atan2(e[1], e[0]) } function u(t, e) { var n = [0, 0]; return i.vec2.transformMat3(n, e, t), n } function l(t, e) { var n = u(t, [e.minX, e.minY]), i = u(t, [e.maxX, e.minY]), r = u(t, [e.minX, e.maxY]), o = u(t, [e.maxX, e.maxY]), a = Math.min(n[0], i[0], r[0], o[0]), s = Math.max(n[0], i[0], r[0], o[0]), l = Math.min(n[1], i[1], r[1], o[1]), c = Math.max(n[1], i[1], r[1], o[1]); return { x: a, y: l, minX: a, minY: l, maxX: s, maxY: c, width: s - a, height: c - l } } function c(t, e, n, i) { if (e) { var r = o({ x: n, y: i }, e, t.getMatrix()); t.setMatrix(r) } } function h(t, e, n) { var i = a({ x: e, y: n }); t.attr("matrix", i) } }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "CONTAINER_CLASS", (function () { return i })), n.d(e, "TITLE_CLASS", (function () { return r })), n.d(e, "LIST_CLASS", (function () { return o })), n.d(e, "LIST_ITEM_CLASS", (function () { return a })), n.d(e, "MARKER_CLASS", (function () { return s })), n.d(e, "VALUE_CLASS", (function () { return u })), n.d(e, "NAME_CLASS", (function () { return l })), n.d(e, "CROSSHAIR_X", (function () { return c })), n.d(e, "CROSSHAIR_Y", (function () { return h })); var i = "g2-tooltip", r = "g2-tooltip-title", o = "g2-tooltip-list", a = "g2-tooltip-list-item", s = "g2-tooltip-marker", u = "g2-tooltip-value", l = "g2-tooltip-name", c = "g2-tooltip-crosshair-x", h = "g2-tooltip-crosshair-y" }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getScaleByField = e.isInRecords = e.getSiblingPoint = e.getSilbings = e.isInBox = e.getSpline = e.distance = e.getComponents = e.getElementsByPath = e.getIntersectElements = e.intersectRect = e.getElementValue = e.getElementsByState = e.getElementsByField = e.getElements = e.getSiblingMaskElements = e.getMaskedElements = e.isMask = e.isSlider = e.isList = e.isElementChange = e.getDelegationObject = e.getCurrentElement = void 0; var i = n(0), r = n(59), o = n(34), a = n(32); function s(t, e) { var n = t.event.target.getCanvasBBox(); return n.width >= e || n.height >= e ? n : null } function u(t) { var e = t.geometries, n = []; return i.each(e, (function (t) { var e = t.elements; n = n.concat(e) })), t.views && t.views.length && i.each(t.views, (function (t) { n = n.concat(u(t)) })), n } function l(t, e) { var n = t.getModel().data; return i.isArray(n) ? n[0][e] : n[e] } function c(t, e) { return !(e.minX > t.maxX || e.maxX < t.minX || e.minY > t.maxY || e.maxY < t.minY) } function h(t, e) { var n = u(t), r = []; return i.each(n, (function (t) { var n = t.shape.getCanvasBBox(); c(e, n) && r.push(t) })), r } function f(t) { var e = []; return i.each(t, (function (t) { if ("A" !== t[0]) for (var n = 1; n < t.length; n += 2)e.push([t[n], t[n + 1]]); else { var i = t.length; e.push([t[i - 2], t[i - 1]]) } })), e } function p(t, e) { var n = u(t), i = f(e); return n.filter((function (t) { var e, n = t.shape; if ("path" === n.get("type")) e = f(n.attr("path")); else { var r = n.getCanvasBBox(); e = o.toPoints(r) } return a.isPolygonsIntersect(i, e) })) } function d(t, e, n) { var i = function (t, e) { return t.getCoordinate().invert(e) }(t, n); return e.getCoordinate().convert(i) } e.getCurrentElement = function (t) { var e, n = t.event.target; return n && (e = n.get("element")), e }, e.getDelegationObject = function (t) { var e, n = t.event.target; return n && (e = n.get("delegateObject")), e }, e.isElementChange = function (t) { var e = t.event.gEvent; return !(e && e.fromShape && e.toShape && e.fromShape.get("element") === e.toShape.get("element")) }, e.isList = function (t) { return t && t.component && t.component.isList() }, e.isSlider = function (t) { return t && t.component && t.component.isSlider() }, e.isMask = function (t) { var e = t.event.target; return e && "mask" === e.get("name") }, e.getMaskedElements = function (t, e) { if ("path" === t.event.target.get("type")) { var n = function (t, e) { var n = t.event.target, i = n.getCanvasBBox(); return i.width >= e || i.height >= e ? n.attr("path") : null }(t, e); if (!n) return; return p(t.view, n) } var i = s(t, e); return i ? h(t.view, i) : null }, e.getSiblingMaskElements = function (t, e, n) { var i = s(t, n); if (!i) return null; var r = t.view, o = d(r, e, { x: i.x, y: i.y }), a = d(r, e, { x: i.maxX, y: i.maxY }); return h(e, { minX: o.x, minY: o.y, maxX: a.x, maxY: a.y }) }, e.getElements = u, e.getElementsByField = function (t, e, n) { return u(t).filter((function (t) { return l(t, e) === n })) }, e.getElementsByState = function (t, e) { var n = t.geometries, r = []; return i.each(n, (function (t) { var n = t.getElementsBy((function (t) { return t.hasState(e) })); r = r.concat(n) })), r }, e.getElementValue = l, e.intersectRect = c, e.getIntersectElements = h, e.getElementsByPath = p, e.getComponents = function (t) { return t.getComponents().map((function (t) { return t.component })) }, e.distance = function (t, e) { var n = e.x - t.x, i = e.y - t.y; return Math.sqrt(n * n + i * i) }, e.getSpline = function (t, e) { if (t.length <= 2) return r.getLinePath(t, !1); var n = t[0], o = []; i.each(t, (function (t) { o.push(t.x), o.push(t.y) })); var a = r.catmullRom2bezier(o, e, null); return a.unshift(["M", n.x, n.y]), a }, e.isInBox = function (t, e) { return t.x <= e.x && t.maxX >= e.x && t.y <= e.y && t.maxY > e.y }, e.getSilbings = function (t) { var e = t.parent, n = null; return e && (n = e.views.filter((function (e) { return e !== t }))), n }, e.getSiblingPoint = d, e.isInRecords = function (t, e, n, r) { var o = !1; return i.each(t, (function (t) { if (t[n] === e[n] && t[r] === e[r]) return o = !0, !1 })), o }, e.getScaleByField = function t(e, n) { var r = e.getScaleByField(n); return !r && e.views && i.each(e.views, (function (e) { if (r = t(e, n)) return !1 })), r } }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return l })), n.d(e, "d", (function () { return c })), n.d(e, "b", (function () { return h })), n.d(e, "c", (function () { return f })), n.d(e, "e", (function () { return g })), n.d(e, "h", (function () { return y })), n.d(e, "f", (function () { return v })), n.d(e, "g", (function () { return m })); var i = n(0), r = n(75), o = n(62), a = n(5), s = n(23), u = { fill: "fillStyle", stroke: "strokeStyle", opacity: "globalAlpha" }; function l(t, e) { var n = e.attr(); for (var o in n) { var a = n[o], s = u[o] ? u[o] : o; "matrix" === s && a ? t.transform(a[0], a[1], a[3], a[4], a[6], a[7]) : "lineDash" === s && t.setLineDash ? Object(i.isArray)(a) && t.setLineDash(a) : ("strokeStyle" === s || "fillStyle" === s ? a = Object(r.b)(t, e, a) : "globalAlpha" === s && (a *= t.globalAlpha), t[s] = a) } } function c(t, e, n) { for (var i = 0; i < e.length; i++) { var r = e[i]; r.cfg.visible ? r.draw(t, n) : r.skipDraw() } } function h(t, e, n) { var r = t.get("refreshElements"); Object(i.each)(r, (function (e) { if (e !== t) for (var n = e.cfg.parent; n && n !== t && !n.cfg.refresh;)n.cfg.refresh = !0, n = n.cfg.parent })), r[0] === t ? p(e, n) : function t(e, n) { for (var i = 0; i < e.length; i++) { var r = e[i]; if (r.cfg.visible) if (r.cfg.hasChanged) r.cfg.refresh = !0, r.isGroup() && p(r.cfg.children, n); else if (r.cfg.refresh) r.isGroup() && t(r.cfg.children, n); else { var o = d(r, n); r.cfg.refresh = o, o && r.isGroup() && t(r.cfg.children, n) } } }(e, n) } function f(t) { for (var e = 0; e < t.length; e++) { var n = t[e]; n.cfg.hasChanged = !1, n.isGroup() && !n.destroyed && f(n.cfg.children) } } function p(t, e) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.cfg.refresh = !0, i.isGroup() && p(i.get("children"), e) } } function d(t, e) { var n = t.cfg.cacheCanvasBBox; return t.cfg.isInView && n && Object(a.f)(n, e) } function g(t, e, n, i) { var r = n.path, a = n.startArrow, u = n.endArrow; if (r) { var l = [0, 0], c = [0, 0], h = { dx: 0, dy: 0 }; e.beginPath(); for (var f = 0; f < r.length; f++) { var p = r[f], d = p[0]; if (0 === f && a && a.d) { var g = t.getStartTangent(); h = s.c(g[0][0], g[0][1], g[1][0], g[1][1], a.d) } else if (f === r.length - 2 && "Z" === r[f + 1][0] && u && u.d) { if ("Z" === r[f + 1][0]) { g = t.getEndTangent(); h = s.c(g[0][0], g[0][1], g[1][0], g[1][1], u.d) } } else if (f === r.length - 1 && u && u.d && "Z" !== r[0]) { g = t.getEndTangent(); h = s.c(g[0][0], g[0][1], g[1][0], g[1][1], u.d) } var y = h.dx, v = h.dy; switch (d) { case "M": e.moveTo(p[1] - y, p[2] - v), c = [p[1], p[2]]; break; case "L": e.lineTo(p[1] - y, p[2] - v); break; case "Q": e.quadraticCurveTo(p[1], p[2], p[3] - y, p[4] - v); break; case "C": e.bezierCurveTo(p[1], p[2], p[3], p[4], p[5] - y, p[6] - v); break; case "A": var m = void 0; i ? (m = i[f]) || (m = Object(o.a)(l, p), i[f] = m) : m = Object(o.a)(l, p); var x = m.cx, b = m.cy, C = m.rx, _ = m.ry, O = m.startAngle, M = m.endAngle, w = m.xRotation, S = m.sweepFlag; if (e.ellipse) e.ellipse(x, b, C, _, w, O, M, 1 - S); else { var A = C > _ ? C : _, P = C > _ ? 1 : C / _, I = C > _ ? _ / C : 1; e.translate(x, b), e.rotate(w), e.scale(P, I), e.arc(0, 0, A, O, M, 1 - S), e.scale(1 / P, 1 / I), e.rotate(-w), e.translate(-x, -b) } break; case "Z": e.closePath() }if ("Z" === d) l = c; else { var T = p.length; l = [p[T - 2], p[T - 1]] } } } } function y(t, e) { var n = t.get("canvas"); n && ("remove" === e && (t._cacheCanvasBBox = t.get("cacheCanvasBBox")), t.get("hasChanged") || (t.set("hasChanged", !0), t.cfg.parent && t.cfg.parent.get("hasChanged") || (n.refreshElement(t, e, n), n.get("autoDraw") && n.draw()))) } function v(t) { if (!t.length) return null; var e = [], n = [], r = [], o = []; return Object(i.each)(t, (function (t) { var i = function (t) { var e; if (t.destroyed) e = t._cacheCanvasBBox; else { var n = t.get("cacheCanvasBBox"), i = n && !(!n.width || !n.height), r = t.getCanvasBBox(), o = r && !(!r.width || !r.height); i && o ? e = Object(a.l)(n, r) : i ? e = n : o && (e = r) } return e }(t); i && (e.push(i.minX), n.push(i.minY), r.push(i.maxX), o.push(i.maxY)) })), { minX: Math.min.apply(null, e), minY: Math.min.apply(null, n), maxX: Math.max.apply(null, r), maxY: Math.max.apply(null, o) } } function m(t, e) { return t && e && Object(a.f)(t, e) ? { minX: Math.max(t.minX, e.minX), minY: Math.max(t.minY, e.minY), maxX: Math.min(t.maxX, e.maxX), maxY: Math.min(t.maxY, e.maxY) } : null } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getBackgroundRectStyle = e.getStyle = void 0; var i = n(1), r = n(0); e.getStyle = function (t, e, n, o) { void 0 === o && (o = ""); var a = t.style, s = void 0 === a ? {} : a, u = t.defaultStyle, l = t.color, c = t.size, h = i.__assign(i.__assign({}, u), s); return l && (e && (s.stroke || (h.stroke = l)), n && (s.fill || (h.fill = l))), o && r.isNil(s[o]) && !r.isNil(c) && (h[o] = c), h }, e.getBackgroundRectStyle = function (t) { return r.deepMix({}, { fill: "#CCD6EC", fillOpacity: .3 }, r.get(t, ["background", "style"])) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = function () { function t(t, e) { this.context = t, this.cfg = e, t.addAction(this) } return t.prototype.applyCfg = function (t) { i.assign(this, t) }, t.prototype.init = function () { this.applyCfg(this.cfg) }, t.prototype.destroy = function () { this.context.removeAction(this), this.context = null }, t }(); e.default = r }, function (t, e, n) { "use strict"; n.d(e, "c", (function () { return h })), n.d(e, "b", (function () { return f })), n.d(e, "a", (function () { return p })); var i = n(1), r = n(36), o = Math.sin, a = Math.cos, s = Math.atan2, u = Math.PI; function l(t, e, n, i, l, c, h) { var f = e.stroke, p = e.lineWidth, d = s(i - c, n - l), g = new r.Path({ type: "path", canvas: t.get("canvas"), isArrowShape: !0, attrs: { path: "M" + 10 * a(u / 6) + "," + 10 * o(u / 6) + " L0,0 L" + 10 * a(u / 6) + ",-" + 10 * o(u / 6), stroke: f, lineWidth: p } }); g.translate(l, c), g.rotateAtPoint(l, c, d), t.set(h ? "startArrowShape" : "endArrowShape", g) } function c(t, e, n, u, l, c, h) { var f = e.startArrow, p = e.endArrow, d = e.stroke, g = e.lineWidth, y = h ? f : p, v = y.d, m = y.fill, x = y.stroke, b = y.lineWidth, C = Object(i.__rest)(y, ["d", "fill", "stroke", "lineWidth"]), _ = s(u - c, n - l); v && (l -= a(_) * v, c -= o(_) * v); var O = new r.Path({ type: "path", canvas: t.get("canvas"), isArrowShape: !0, attrs: Object(i.__assign)(Object(i.__assign)({}, C), { stroke: x || d, lineWidth: b || g, fill: m }) }); O.translate(l, c), O.rotateAtPoint(l, c, _), t.set(h ? "startArrowShape" : "endArrowShape", O) } function h(t, e, n, i, r) { var u = s(i - e, n - t); return { dx: a(u) * r, dy: o(u) * r } } function f(t, e, n, i, r, o) { "object" == typeof e.startArrow ? c(t, e, n, i, r, o, !0) : e.startArrow ? l(t, e, n, i, r, o, !0) : t.set("startArrowShape", null) } function p(t, e, n, i, r, o) { "object" == typeof e.endArrow ? c(t, e, n, i, r, o, !1) : e.endArrow ? l(t, e, n, i, r, o, !1) : t.set("startArrowShape", null) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getReplaceAttrs = e.getPolygonCentroid = e.getAngle = e.getArcPath = e.getSectorPath = e.polarToCartesian = void 0; var i = n(0); function r(t, e, n, i) { return { x: t + n * Math.cos(i), y: e + n * Math.sin(i) } } e.polarToCartesian = r, e.getSectorPath = function (t, e, n, i, o, a) { void 0 === a && (a = 0); var s = r(t, e, n, i), u = r(t, e, n, o), l = r(t, e, a, i), c = r(t, e, a, o); if (o - i == 2 * Math.PI) { var h = r(t, e, n, i + Math.PI), f = r(t, e, a, i + Math.PI), p = [["M", s.x, s.y], ["A", n, n, 0, 1, 1, h.x, h.y], ["A", n, n, 0, 1, 1, u.x, u.y], ["M", l.x, l.y]]; return a && (p.push(["A", a, a, 0, 1, 0, f.x, f.y]), p.push(["A", a, a, 0, 1, 0, c.x, c.y])), p.push(["M", s.x, s.y]), p.push(["Z"]), p } var d = o - i <= Math.PI ? 0 : 1, g = [["M", s.x, s.y], ["A", n, n, 0, d, 1, u.x, u.y], ["L", c.x, c.y]]; return a && g.push(["A", a, a, 0, d, 0, l.x, l.y]), g.push(["L", s.x, s.y]), g.push(["Z"]), g }, e.getArcPath = function (t, e, n, o, a) { var s = r(t, e, n, o), u = r(t, e, n, a); if (i.isNumberEqual(a - o, 2 * Math.PI)) { var l = r(t, e, n, o + Math.PI); return [["M", s.x, s.y], ["A", n, n, 0, 1, 1, l.x, l.y], ["A", n, n, 0, 1, 1, s.x, s.y], ["A", n, n, 0, 1, 0, l.x, l.y], ["A", n, n, 0, 1, 0, s.x, s.y], ["Z"]] } var c = a - o <= Math.PI ? 0 : 1; return [["M", s.x, s.y], ["A", n, n, 0, c, 1, u.x, u.y]] }, e.getAngle = function (t, e) { var n, r, o = function (t) { if (i.isEmpty(t)) return null; var e = t[0].x, n = t[0].x, r = t[0].y, o = t[0].y; return i.each(t, (function (t) { e = e > t.x ? t.x : e, n = n < t.x ? t.x : n, r = r > t.y ? t.y : r, o = o < t.y ? t.y : o })), { minX: e, maxX: n, minY: r, maxY: o, centerX: (e + n) / 2, centerY: (r + o) / 2 } }(t.points), a = e.startAngle, s = e.endAngle - a; return e.isTransposed ? (n = o.maxY * s, r = o.minY * s) : (n = o.maxX * s, r = o.minX * s), { startAngle: r += a, endAngle: n += a } }, e.getPolygonCentroid = function (t, e) { if (i.isNumber(t) && i.isNumber(e)) return [t, e]; for (var n, r, o = -1, a = 0, s = 0, u = t.length - 1, l = 0; ++o < t.length;)n = u, u = o, l += r = t[n] * e[u] - t[u] * e[n], a += (t[n] + t[u]) * r, s += (e[n] + e[u]) * r; return [a / (l *= 3), s / l] }, e.getReplaceAttrs = function (t, e) { var n = t.attr(), r = e.attr(); return i.each(n, (function (t, e) { void 0 === r[e] && (r[e] = void 0) })), r } }, function (t, e, n) { "use strict"; n.d(e, "b", (function () { return r })), n.d(e, "c", (function () { return o })), n.d(e, "a", (function () { return a })); var i = n(16); function r(t, e) { var n = t.cfg.el, i = t.attr(), r = { dx: i.shadowOffsetX, dy: i.shadowOffsetY, blur: i.shadowBlur, color: i.shadowColor }; if (r.dx || r.dy || r.blur || r.color) { var o = e.find("filter", r); o || (o = e.addShadow(r)), n.setAttribute("filter", "url(#" + o + ")") } else n.removeAttribute("filter") } function o(t) { var e = t.attr().matrix; if (e) { for (var n = t.cfg.el, i = [], r = 0; r < 9; r += 3)i.push(e[r] + "," + e[r + 1]); -1 === (i = i.join(",")).indexOf("NaN") ? n.setAttribute("transform", "matrix(" + i + ")") : console.warn("invalid matrix:", e) } } function a(t, e) { var n = t.getClip(), r = t.get("el"); if (n) { if (n && !r.hasAttribute("clip-path")) { Object(i.a)(n), n.createPath(e); var o = e.addClip(n); r.setAttribute("clip-path", "url(#" + o + ")") } } else r.removeAttribute("clip-path") } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getCoordinateBBox = e.getCoordinateClipCfg = e.getAngleByPoint = e.isPointInCoordinate = e.getDistanceToCenter = e.isFullCircle = e.getXDimensionLength = void 0; var i = n(24), r = n(33), o = n(34); e.getXDimensionLength = function (t) { if (t.isPolar && !t.isTransposed) return (t.endAngle - t.startAngle) * t.getRadius(); var e = t.convert({ x: 0, y: 0 }), n = t.convert({ x: 1, y: 0 }); return Math.sqrt(Math.pow(n.x - e.x, 2) + Math.pow(n.y - e.y, 2)) }, e.isFullCircle = function (t) { if (t.isPolar) { var e = t.startAngle; return t.endAngle - e == 2 * Math.PI } return !1 }, e.getDistanceToCenter = function (t, e) { var n = t.getCenter(); return Math.sqrt(Math.pow(e.x - n.x, 2) + Math.pow(e.y - n.y, 2)) }, e.isPointInCoordinate = function (t, e) { var n = !1; if (t) if ("theta" === t.type) { var i = t.start, o = t.end; n = r.isBetween(e.x, i.x, o.x) && r.isBetween(e.y, i.y, o.y) } else { var a = t.invert(e); n = r.isBetween(a.x, 0, 1) && r.isBetween(a.y, 0, 1) } return n }, e.getAngleByPoint = function (t, e) { var n = t.getCenter(); return Math.atan2(e.y - n.y, e.x - n.x) }, e.getCoordinateClipCfg = function (t, e) { void 0 === e && (e = 0); var n, r = t.start, o = t.end, a = t.getWidth(), s = t.getHeight(); if (t.isPolar) { var u = t.startAngle, l = t.endAngle, c = t.getCenter(), h = t.getRadius(); return { type: "path", startState: { path: i.getSectorPath(c.x, c.y, h + e, u, u) }, endState: function (t) { var n = (l - u) * t + u; return { path: i.getSectorPath(c.x, c.y, h + e, u, n) } }, attrs: { path: i.getSectorPath(c.x, c.y, h + e, u, l) } } } return n = t.isTransposed ? { height: s + 2 * e } : { width: a + 2 * e }, { type: "rect", startState: { x: r.x - e, y: o.y - e, width: t.isTransposed ? a + 2 * e : 0, height: t.isTransposed ? 0 : s + 2 * e }, endState: n, attrs: { x: r.x - e, y: o.y - e, width: a + 2 * e, height: s + 2 * e } } }, e.getCoordinateBBox = function (t, e) { void 0 === e && (e = 0); var n = t.start, i = t.end, r = t.getWidth(), a = t.getHeight(), s = Math.min(n.x, i.x), u = Math.min(n.y, i.y); return o.BBox.fromRange(s - e, u - e, s + r + e, u + a + e) } }, function (t, e, n) { "use strict"; function i(t, e) { var n = [], i = t[0], r = t[1], o = t[2], a = t[3], s = t[4], u = t[5], l = t[6], c = t[7], h = t[8], f = e[0], p = e[1], d = e[2], g = e[3], y = e[4], v = e[5], m = e[6], x = e[7], b = e[8]; return n[0] = f * i + p * a + d * l, n[1] = f * r + p * s + d * c, n[2] = f * o + p * u + d * h, n[3] = g * i + y * a + v * l, n[4] = g * r + y * s + v * c, n[5] = g * o + y * u + v * h, n[6] = m * i + x * a + b * l, n[7] = m * r + x * s + b * c, n[8] = m * o + x * u + b * h, n } function r(t, e) { var n = [], i = e[0], r = e[1]; return n[0] = t[0] * i + t[3] * r + t[6], n[1] = t[1] * i + t[4] * r + t[7], n } function o(t) { var e = [], n = t[0], i = t[1], r = t[2], o = t[3], a = t[4], s = t[5], u = t[6], l = t[7], c = t[8], h = c * a - s * l, f = -c * o + s * u, p = l * o - a * u, d = n * h + i * f + r * p; return d ? (d = 1 / d, e[0] = h * d, e[1] = (-c * i + r * l) * d, e[2] = (s * i - r * a) * d, e[3] = f * d, e[4] = (c * n - r * u) * d, e[5] = (-s * n + r * o) * d, e[6] = p * d, e[7] = (-l * n + i * u) * d, e[8] = (a * n - i * o) * d, e) : null } n.d(e, "b", (function () { return i })), n.d(e, "c", (function () { return r })), n.d(e, "a", (function () { return o })) }, function (t, e, n) { "use strict"; n.d(e, "b", (function () { return o })), n.d(e, "a", (function () { return a })); var i = n(0); function r(t, e) { return t.charCodeAt(e) > 0 && t.charCodeAt(e) < 128 ? 1 : 2 } function o(t) { if (t.length > 400) return function (t) { for (var e = t.map((function (t) { var e = t.attr("text"); return Object(i.isNil)(e) ? "" : "" + e })), n = 0, r = 0, o = 0; o < e.length; o += 1) { for (var a = 0, s = 0; s <= e[o].length; s += 1) { var u = e[o].charCodeAt(s); a += u >= 19968 && u <= 40869 ? 2 : 1 } a > n && (n = a, r = o) } return t[r].getBBox().width }(t); var e = 0; return Object(i.each)(t, (function (t) { var n = t.getBBox().width; e < n && (e = n) })), e } function a(t, e, n, i) { void 0 === i && (i = "tail"); var o = e.attr("text"), a = function (t, e) { var n = e.getCanvasBBox(); return t ? n.width : n.height }(t, e), s = function (t) { for (var e = 0, n = 0; n < t.length; n++)e += r(t, n); return e }(o), u = !1; if (n < a) { var l = Math.floor(n / a * s) - 2, c = void 0; (c = l >= 0 ? function (t, e, n) { void 0 === n && (n = "tail"); var i = t.length, o = ""; if ("tail" === n) { for (var a = 0, s = 0; a < e;) { if (!(a + r(t, s) <= e)) break; o += t[s], a += r(t, s), s++ } o += "" } else if ("head" === n) { for (a = 0, s = i - 1; a < e;) { if (!(a + r(t, s) <= e)) break; o += t[s], a += r(t, s), s-- } o = "" + o } else { for (var u = "", l = "", c = (a = 0, 0), h = i - 1; a < e;) { var f = r(t, c), p = !1; f + a <= e && (u += t[c], c++, a += f, p = !0); var d = r(t, h); if (d + a <= e && (l = t[h] + l, a += d, h--, p = !0), !p) break } o = u + "" + l } return o }(o, l, i) : "") && (e.attr("text", c), u = !0) } return u ? e.set("tip", o) : e.set("tip", null), u } }, function (t, e, n) { "use strict"; var i = n(0), r = n(40), o = function () { function t(t) { var e = t.xField, n = t.yField, i = t.adjustNames, r = void 0 === i ? ["x", "y"] : i; this.adjustNames = r, this.xField = e, this.yField = n } return t.prototype.isAdjust = function (t) { return this.adjustNames.indexOf(t) >= 0 }, t.prototype.getAdjustRange = function (t, e, n) { var i, r, o = this.yField, a = n.indexOf(e), s = n.length; return !o && this.isAdjust("y") ? (i = 0, r = 1) : s > 1 ? (i = n[0 === a ? 0 : a - 1], r = n[a === s - 1 ? s - 1 : a + 1], 0 !== a ? i += (e - i) / 2 : i -= (r - e) / 2, a !== s - 1 ? r -= (r - e) / 2 : r += (e - n[s - 2]) / 2) : (i = 0 === e ? 0 : e - .5, r = 0 === e ? 1 : e + .5), { pre: i, next: r } }, t.prototype.adjustData = function (t, e) { var n = this, r = this.getDimValues(e); i.each(t, (function (t, e) { i.each(r, (function (i, r) { n.adjustDim(r, i, t, e) })) })) }, t.prototype.groupData = function (t, e) { return i.each(t, (function (t) { void 0 === t[e] && (t[e] = r.a) })), i.groupBy(t, e) }, t.prototype.adjustDim = function (t, e, n, i) { }, t.prototype.getDimValues = function (t) { var e = this.xField, n = this.yField, o = {}, a = []; if (e && this.isAdjust("x") && a.push(e), n && this.isAdjust("y") && a.push(n), a.forEach((function (e) { o[e] = i.valuesOfKey(t, e).sort((function (t, e) { return t - e })) })), !n && this.isAdjust("y")) { o.y = [r.a, 1] } return o }, t }(); e.a = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.Util = e.Types = e.VERSION = void 0; var i = n(1); e.VERSION = "4.1.7"; var r = n(76); Object.defineProperty(e, "Chart", { enumerable: !0, get: function () { return r.Chart } }), Object.defineProperty(e, "View", { enumerable: !0, get: function () { return r.View } }), Object.defineProperty(e, "Event", { enumerable: !0, get: function () { return r.Event } }); var o = n(42); Object.defineProperty(e, "ComponentController", { enumerable: !0, get: function () { return o.Controller } }); var a = n(118); Object.defineProperty(e, "TooltipController", { enumerable: !0, get: function () { return a.default } }); var s = n(37); Object.defineProperty(e, "Geometry", { enumerable: !0, get: function () { return s.default } }); var u = n(85); Object.defineProperty(e, "Element", { enumerable: !0, get: function () { return u.default } }); var l = n(64); Object.defineProperty(e, "GeometryLabel", { enumerable: !0, get: function () { return l.default } }); var c = n(80); Object.defineProperty(e, "Interaction", { enumerable: !0, get: function () { return c.Interaction } }), Object.defineProperty(e, "Action", { enumerable: !0, get: function () { return c.Action } }); var h = n(78); Object.defineProperty(e, "Facet", { enumerable: !0, get: function () { return h.Facet } }); var f = n(22); Object.defineProperty(e, "InteractionAction", { enumerable: !0, get: function () { return f.default } }); var p = n(76); Object.defineProperty(e, "registerComponentController", { enumerable: !0, get: function () { return p.registerComponentController } }); var d = n(76); Object.defineProperty(e, "registerGeometry", { enumerable: !0, get: function () { return d.registerGeometry } }); var g = n(15); Object.defineProperty(e, "registerShape", { enumerable: !0, get: function () { return g.registerShape } }), Object.defineProperty(e, "registerShapeFactory", { enumerable: !0, get: function () { return g.registerShapeFactory } }), Object.defineProperty(e, "getShapeFactory", { enumerable: !0, get: function () { return g.getShapeFactory } }); var y = n(87); Object.defineProperty(e, "registerGeometryLabel", { enumerable: !0, get: function () { return y.registerGeometryLabel } }), Object.defineProperty(e, "registerGeometryLabelLayout", { enumerable: !0, get: function () { return y.registerGeometryLabelLayout } }), Object.defineProperty(e, "getGeometryLabel", { enumerable: !0, get: function () { return y.getGeometryLabel } }), Object.defineProperty(e, "getGeometryLabelLayout", { enumerable: !0, get: function () { return y.getGeometryLabelLayout } }); var v = n(80); Object.defineProperty(e, "getInteraction", { enumerable: !0, get: function () { return v.getInteraction } }), Object.defineProperty(e, "registerInteraction", { enumerable: !0, get: function () { return v.registerInteraction } }), Object.defineProperty(e, "registerAction", { enumerable: !0, get: function () { return v.registerAction } }), Object.defineProperty(e, "getActionClass", { enumerable: !0, get: function () { return v.getActionClass } }); var m = n(78); Object.defineProperty(e, "getFacet", { enumerable: !0, get: function () { return m.getFacet } }), Object.defineProperty(e, "registerFacet", { enumerable: !0, get: function () { return m.registerFacet } }); var x = n(113); Object.defineProperty(e, "getTheme", { enumerable: !0, get: function () { return x.getTheme } }), Object.defineProperty(e, "registerTheme", { enumerable: !0, get: function () { return x.registerTheme } }); var b = n(102); Object.defineProperty(e, "registerEngine", { enumerable: !0, get: function () { return b.registerEngine } }), Object.defineProperty(e, "getEngine", { enumerable: !0, get: function () { return b.getEngine } }); var C = n(119); Object.defineProperty(e, "registerAnimation", { enumerable: !0, get: function () { return C.registerAnimation } }), Object.defineProperty(e, "getAnimation", { enumerable: !0, get: function () { return C.getAnimation } }); var _ = n(14); Object.defineProperty(e, "LAYER", { enumerable: !0, get: function () { return _.LAYER } }), Object.defineProperty(e, "DIRECTION", { enumerable: !0, get: function () { return _.DIRECTION } }); var O = i.__importStar(n(175)); e.Types = O; var M = n(31); Object.defineProperty(e, "IGroup", { enumerable: !0, get: function () { return M.IGroup } }), Object.defineProperty(e, "ShapeAttrs", { enumerable: !0, get: function () { return M.ShapeAttrs } }), Object.defineProperty(e, "Coordinate", { enumerable: !0, get: function () { return M.Coordinate } }), Object.defineProperty(e, "Scale", { enumerable: !0, get: function () { return M.Scale } }), Object.defineProperty(e, "ScaleConfig", { enumerable: !0, get: function () { return M.ScaleConfig } }); var w = n(121), S = n(24), A = n(49), P = n(82), I = n(19); e.Util = { getLegendItems: w.getLegendItems, translate: A.translate, rotate: A.rotate, zoom: A.zoom, transform: A.transform, getAngle: S.getAngle, polarToCartesian: S.polarToCartesian, getDelegationObject: I.getDelegationObject, getTooltipItems: P.getTooltipItems } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.Scrollbar = e.Slider = e.HtmlTooltip = e.ContinuousLegend = e.CategoryLegend = e.CircleGrid = e.LineGrid = e.CircleAxis = e.LineAxis = e.Annotation = e.Crosshair = e.Component = e.GroupComponent = e.HtmlComponent = void 0; var i = n(7); Object.defineProperty(e, "ICanvas", { enumerable: !0, get: function () { return i.ICanvas } }), Object.defineProperty(e, "IElement", { enumerable: !0, get: function () { return i.IElement } }), Object.defineProperty(e, "IGroup", { enumerable: !0, get: function () { return i.IGroup } }), Object.defineProperty(e, "IShape", { enumerable: !0, get: function () { return i.IShape } }), Object.defineProperty(e, "PathCommand", { enumerable: !0, get: function () { return i.PathCommand } }), Object.defineProperty(e, "BBox", { enumerable: !0, get: function () { return i.BBox } }), Object.defineProperty(e, "Point", { enumerable: !0, get: function () { return i.Point } }), Object.defineProperty(e, "ShapeAttrs", { enumerable: !0, get: function () { return i.ShapeAttrs } }), Object.defineProperty(e, "Event", { enumerable: !0, get: function () { return i.Event } }), Object.defineProperty(e, "AbstractGroup", { enumerable: !0, get: function () { return i.AbstractGroup } }), Object.defineProperty(e, "AbstractShape", { enumerable: !0, get: function () { return i.AbstractShape } }); var r = n(108); Object.defineProperty(e, "registerAdjust", { enumerable: !0, get: function () { return r.registerAdjust } }), Object.defineProperty(e, "getAdjust", { enumerable: !0, get: function () { return r.getAdjust } }), Object.defineProperty(e, "Adjust", { enumerable: !0, get: function () { return r.Adjust } }); var o = n(100); Object.defineProperty(e, "getAttribute", { enumerable: !0, get: function () { return o.getAttribute } }), Object.defineProperty(e, "Attribute", { enumerable: !0, get: function () { return o.Attribute } }); var a = n(100); Object.defineProperty(e, "Color", { enumerable: !0, get: function () { return a.Color } }); var s = n(285); Object.defineProperty(e, "getCoordinate", { enumerable: !0, get: function () { return s.getCoordinate } }), Object.defineProperty(e, "registerCoordinate", { enumerable: !0, get: function () { return s.registerCoordinate } }), Object.defineProperty(e, "Coordinate", { enumerable: !0, get: function () { return s.Coordinate } }), Object.defineProperty(e, "CoordinateCfg", { enumerable: !0, get: function () { return s.CoordinateCfg } }); var u = n(44); Object.defineProperty(e, "getScale", { enumerable: !0, get: function () { return u.getScale } }), Object.defineProperty(e, "registerScale", { enumerable: !0, get: function () { return u.registerScale } }), Object.defineProperty(e, "Scale", { enumerable: !0, get: function () { return u.Scale } }), Object.defineProperty(e, "ScaleConfig", { enumerable: !0, get: function () { return u.ScaleConfig } }), Object.defineProperty(e, "Tick", { enumerable: !0, get: function () { return u.Tick } }); var l = n(58); Object.defineProperty(e, "Annotation", { enumerable: !0, get: function () { return l.Annotation } }), Object.defineProperty(e, "Component", { enumerable: !0, get: function () { return l.Component } }), Object.defineProperty(e, "Crosshair", { enumerable: !0, get: function () { return l.Crosshair } }), Object.defineProperty(e, "GroupComponent", { enumerable: !0, get: function () { return l.GroupComponent } }), Object.defineProperty(e, "HtmlComponent", { enumerable: !0, get: function () { return l.HtmlComponent } }), Object.defineProperty(e, "Slider", { enumerable: !0, get: function () { return l.Slider } }), Object.defineProperty(e, "Scrollbar", { enumerable: !0, get: function () { return l.Scrollbar } }); var c = n(58); Object.defineProperty(e, "CategoryLegendCfg", { enumerable: !0, get: function () { return c.CategoryLegendCfg } }), Object.defineProperty(e, "CircleAxisCfg", { enumerable: !0, get: function () { return c.CircleAxisCfg } }), Object.defineProperty(e, "LineAxisCfg", { enumerable: !0, get: function () { return c.LineAxisCfg } }), Object.defineProperty(e, "GroupComponentCfg", { enumerable: !0, get: function () { return c.GroupComponentCfg } }), Object.defineProperty(e, "ListItem", { enumerable: !0, get: function () { return c.ListItem } }), Object.defineProperty(e, "AxisLineCfg", { enumerable: !0, get: function () { return c.AxisLineCfg } }), Object.defineProperty(e, "AxisTickLineCfg", { enumerable: !0, get: function () { return c.AxisTickLineCfg } }), Object.defineProperty(e, "AxisSubTickLineCfg", { enumerable: !0, get: function () { return c.AxisSubTickLineCfg } }), Object.defineProperty(e, "AxisTitleCfg", { enumerable: !0, get: function () { return c.AxisTitleCfg } }), Object.defineProperty(e, "AxisLabelCfg", { enumerable: !0, get: function () { return c.AxisLabelCfg } }), Object.defineProperty(e, "GridLineCfg", { enumerable: !0, get: function () { return c.GridLineCfg } }), Object.defineProperty(e, "LegendMarkerCfg", { enumerable: !0, get: function () { return c.LegendMarkerCfg } }), Object.defineProperty(e, "LegendTitleCfg", { enumerable: !0, get: function () { return c.LegendTitleCfg } }), Object.defineProperty(e, "LegendBackgroundCfg", { enumerable: !0, get: function () { return c.LegendBackgroundCfg } }), Object.defineProperty(e, "LegendItemNameCfg", { enumerable: !0, get: function () { return c.LegendItemNameCfg } }), Object.defineProperty(e, "LegendItemValueCfg", { enumerable: !0, get: function () { return c.LegendItemValueCfg } }), Object.defineProperty(e, "ContinueLegendCfg", { enumerable: !0, get: function () { return c.ContinueLegendCfg } }), Object.defineProperty(e, "ContinueLegendTrackCfg", { enumerable: !0, get: function () { return c.ContinueLegendTrackCfg } }), Object.defineProperty(e, "ContinueLegendRailCfg", { enumerable: !0, get: function () { return c.ContinueLegendRailCfg } }), Object.defineProperty(e, "ContinueLegendLabelCfg", { enumerable: !0, get: function () { return c.ContinueLegendLabelCfg } }), Object.defineProperty(e, "ContinueLegendHandlerCfg", { enumerable: !0, get: function () { return c.ContinueLegendHandlerCfg } }), Object.defineProperty(e, "CrosshairLineCfg", { enumerable: !0, get: function () { return c.CrosshairLineCfg } }), Object.defineProperty(e, "CrosshairTextCfg", { enumerable: !0, get: function () { return c.CrosshairTextCfg } }), Object.defineProperty(e, "CrosshairTextBackgroundCfg", { enumerable: !0, get: function () { return c.CrosshairTextBackgroundCfg } }), Object.defineProperty(e, "SliderCfg", { enumerable: !0, get: function () { return c.SliderCfg } }), Object.defineProperty(e, "TrendCfg", { enumerable: !0, get: function () { return c.TrendCfg } }), Object.defineProperty(e, "EnhancedTextCfg", { enumerable: !0, get: function () { return c.EnhancedTextCfg } }), Object.defineProperty(e, "LineAnnotationTextCfg", { enumerable: !0, get: function () { return c.LineAnnotationTextCfg } }), Object.defineProperty(e, "IComponent", { enumerable: !0, get: function () { return c.IComponent } }), Object.defineProperty(e, "IList", { enumerable: !0, get: function () { return c.IList } }); var h = l.Axis.Line, f = l.Axis.Circle; e.LineAxis = h, e.CircleAxis = f; var p = l.Grid.Line, d = l.Grid.Circle; e.LineGrid = p, e.CircleGrid = d; var g = l.Legend.Category, y = l.Legend.Continuous; e.CategoryLegend = g, e.ContinuousLegend = y; var v = l.Tooltip.Html; e.HtmlTooltip = v }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "parsePath", (function () { return a })), n.d(e, "catmullRom2Bezier", (function () { return s })), n.d(e, "fillPath", (function () { return c })), n.d(e, "fillPathByDiff", (function () { return f })), n.d(e, "formatPath", (function () { return g })), n.d(e, "pathIntersection", (function () { return R })), n.d(e, "parsePathArray", (function () { return N })), n.d(e, "parsePathString", (function () { return b })), n.d(e, "path2Curve", (function () { return A })), n.d(e, "path2Absolute", (function () { return O })), n.d(e, "reactPath", (function () { return y })), n.d(e, "getArcParams", (function () { return z })), n.d(e, "path2Segments", (function () { return W })), n.d(e, "getLineIntersect", (function () { return U })), n.d(e, "isPolygonsIntersect", (function () { return tt })), n.d(e, "isPointInPolygon", (function () { return K })); var i = n(0), r = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi, o = /[^\s\,]+/gi; var a = function (t) { var e = t || []; return Object(i.isArray)(e) ? e : Object(i.isString)(e) ? (e = e.match(r), Object(i.each)(e, (function (t, n) { if ((t = t.match(o))[0].length > 1) { var r = t[0].charAt(0); t.splice(1, 0, t[0].substr(1)), t[0] = r } Object(i.each)(t, (function (e, n) { isNaN(e) || (t[n] = +e) })), e[n] = t })), e) : void 0 }; function s(t, e) { for (var n = [], i = 0, r = t.length; r - 2 * !e > i; i += 2) { var o = [{ x: +t[i - 2], y: +t[i - 1] }, { x: +t[i], y: +t[i + 1] }, { x: +t[i + 2], y: +t[i + 3] }, { x: +t[i + 4], y: +t[i + 5] }]; e ? i ? r - 4 === i ? o[3] = { x: +t[0], y: +t[1] } : r - 2 === i && (o[2] = { x: +t[0], y: +t[1] }, o[3] = { x: +t[2], y: +t[3] }) : o[0] = { x: +t[r - 2], y: +t[r - 1] } : r - 4 === i ? o[3] = o[2] : i || (o[0] = { x: +t[i], y: +t[i + 1] }), n.push(["C", (-o[0].x + 6 * o[1].x + o[2].x) / 6, (-o[0].y + 6 * o[1].y + o[2].y) / 6, (o[1].x + 6 * o[2].x - o[3].x) / 6, (o[1].y + 6 * o[2].y - o[3].y) / 6, o[2].x, o[2].y]) } return n } function u(t, e) { var n = [], i = []; return t.length && function t(e, r) { if (1 === e.length) n.push(e[0]), i.push(e[0]); else { for (var o = [], a = 0; a < e.length - 1; a++)0 === a && n.push(e[0]), a === e.length - 2 && i.push(e[a + 1]), o[a] = [(1 - r) * e[a][0] + r * e[a + 1][0], (1 - r) * e[a][1] + r * e[a + 1][1]]; t(o, r) } }(t, e), { left: n, right: i.reverse() } } function l(t, e, n) { if (1 === n) return [[].concat(t)]; var i = []; if ("L" === e[0] || "C" === e[0] || "Q" === e[0]) i = i.concat(function (t, e, n) { var i = [[t[1], t[2]]]; n = n || 2; var r = []; "A" === e[0] ? (i.push(e[6]), i.push(e[7])) : "C" === e[0] ? (i.push([e[1], e[2]]), i.push([e[3], e[4]]), i.push([e[5], e[6]])) : "S" === e[0] || "Q" === e[0] ? (i.push([e[1], e[2]]), i.push([e[3], e[4]])) : i.push([e[1], e[2]]); for (var o = i, a = 1 / n, s = 0; s < n - 1; s++) { var l = u(o, a / (1 - a * s)); r.push(l.left), o = l.right } return r.push(o), r.map((function (t) { var e = []; return 4 === t.length && (e.push("C"), e = e.concat(t[2])), t.length >= 3 && (3 === t.length && e.push("Q"), e = e.concat(t[1])), 2 === t.length && e.push("L"), e = e.concat(t[t.length - 1]) })) }(t, e, n)); else { var r = [].concat(t); "M" === r[0] && (r[0] = "L"); for (var o = 0; o <= n - 1; o++)i.push(r) } return i } function c(t, e) { if (1 === t.length) return t; var n = t.length - 1, i = e.length - 1, r = n / i, o = []; if (1 === t.length && "M" === t[0][0]) { for (var a = 0; a < i - n; a++)t.push(t[0]); return t } for (a = 0; a < i; a++) { var s = Math.floor(r * a); o[s] = (o[s] || 0) + 1 } var u = o.reduce((function (e, i, r) { return r === n ? e.concat(t[n]) : e.concat(l(t[r], t[r + 1], i)) }), []); return u.unshift(t[0]), "Z" !== e[i] && "z" !== e[i] || u.push("Z"), u } function h(t, e, n) { var i = null, r = n; return e < r && (r = e, i = "add"), t < r && (r = t, i = "del"), { type: i, min: r } } function f(t, e) { var n = function (t, e) { var n, r, o = t.length, a = e.length, s = 0; if (0 === o || 0 === a) return null; for (var u = [], l = 0; l <= o; l++)u[l] = [], u[l][0] = { min: l }; for (var c = 0; c <= a; c++)u[0][c] = { min: c }; for (l = 1; l <= o; l++) { n = t[l - 1]; for (c = 1; c <= a; c++) { r = e[c - 1], s = Object(i.isEqual)(n, r) ? 0 : 1; var f = u[l - 1][c].min + 1, p = u[l][c - 1].min + 1, d = u[l - 1][c - 1].min + s; u[l][c] = h(f, p, d) } } return u }(t, e), r = t.length, o = e.length, a = [], s = 1, u = 1; if (n[r][o] !== r) { for (var l = 1; l <= r; l++) { var c = n[l][l].min; u = l; for (var f = s; f <= o; f++)n[l][f].min < c && (c = n[l][f].min, u = f); s = u, n[l][s].type && a.push({ index: l - 1, type: n[l][s].type }) } for (l = a.length - 1; l >= 0; l--)s = a[l].index, "add" === a[l].type ? t.splice(s, 0, [].concat(t[s])) : t.splice(s, 1) } if ((r = t.length) < o) for (l = 0; l < o - r; l++)"z" === t[r - 1][0] || "Z" === t[r - 1][0] ? t.splice(r - 2, 0, t[r - 2]) : t.push(t[r - 1]); return t } function p(t) { var e = []; switch (t[0]) { case "M": case "L": e.push([t[1], t[2]]); break; case "A": e.push([t[6], t[7]]); break; case "Q": e.push([t[3], t[4]]), e.push([t[1], t[2]]); break; case "T": e.push([t[1], t[2]]); break; case "C": e.push([t[5], t[6]]), e.push([t[1], t[2]]), e.push([t[3], t[4]]); break; case "S": e.push([t[3], t[4]]), e.push([t[1], t[2]]); break; case "H": case "V": e.push([t[1], t[1]]) }return e } function d(t, e, n) { for (var i, r = [].concat(t), o = 1 / (n + 1), a = p(e)[0], s = 1; s <= n; s++)o *= s, 0 === (i = Math.floor(t.length * o)) ? r.unshift([a[0] * o + t[i][0] * (1 - o), a[1] * o + t[i][1] * (1 - o)]) : r.splice(i, 0, [a[0] * o + t[i][0] * (1 - o), a[1] * o + t[i][1] * (1 - o)]); return r } function g(t, e) { if (t.length <= 1) return t; for (var n, i = 0; i < e.length; i++)if (t[i][0] !== e[i][0]) switch (n = p(t[i]), e[i][0]) { case "M": t[i] = ["M"].concat(n[0]); break; case "L": t[i] = ["L"].concat(n[0]); break; case "A": t[i] = [].concat(e[i]), t[i][6] = n[0][0], t[i][7] = n[0][1]; break; case "Q": if (n.length < 2) { if (!(i > 0)) { t[i] = e[i]; break } n = d(n, t[i - 1], 1) } t[i] = ["Q"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; case "T": t[i] = ["T"].concat(n[0]); break; case "C": if (n.length < 3) { if (!(i > 0)) { t[i] = e[i]; break } n = d(n, t[i - 1], 2) } t[i] = ["C"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; case "S": if (n.length < 2) { if (!(i > 0)) { t[i] = e[i]; break } n = d(n, t[i - 1], 1) } t[i] = ["S"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; default: t[i] = e[i] }return t } function y(t, e, n, i, r) { return r ? [["M", +t + +r, e], ["l", n - 2 * r, 0], ["a", r, r, 0, 0, 1, r, r], ["l", 0, i - 2 * r], ["a", r, r, 0, 0, 1, -r, r], ["l", 2 * r - n, 0], ["a", r, r, 0, 0, 1, -r, -r], ["l", 0, 2 * r - i], ["a", r, r, 0, 0, 1, r, -r], ["z"]] : [["M", t, e], ["l", n, 0], ["l", 0, i], ["l", -n, 0], ["z"]] } var v = "\t\n\v\f\r   \u2028\u2029", m = new RegExp("([a-z])[" + v + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + v + "]*,?[" + v + "]*)+)", "ig"), x = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + v + "]*,?[" + v + "]*", "ig"); function b(t) { if (!t) return null; if (Object(i.isArray)(t)) return t; var e = { a: 7, c: 6, o: 2, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, u: 3, z: 0 }, n = []; return String(t).replace(m, (function (t, i, r) { var o = [], a = i.toLowerCase(); if (r.replace(x, (function (t, e) { e && o.push(+e) })), "m" === a && o.length > 2 && (n.push([i].concat(o.splice(0, 2))), a = "l", i = "m" === i ? "l" : "L"), "o" === a && 1 === o.length && n.push([i, o[0]]), "r" === a) n.push([i].concat(o)); else for (; o.length >= e[a] && (n.push([i].concat(o.splice(0, e[a]))), e[a]);); return "" })), n } var C = /[a-z]/; function _(t, e) { return [e[0] + (e[0] - t[0]), e[1] + (e[1] - t[1])] } function O(t) { var e = b(t); if (!e || !e.length) return [["M", 0, 0]]; for (var n = !1, i = 0; i < e.length; i++) { var r = e[i][0]; if (C.test(r) || ["V", "H", "T", "S"].indexOf(r) >= 0) { n = !0; break } } if (!n) return e; var o = [], a = 0, s = 0, u = 0, l = 0, c = 0, h = e[0]; "M" !== h[0] && "m" !== h[0] || (u = a = +h[1], l = s = +h[2], c++, o[0] = ["M", a, s]); i = c; for (var f = e.length; i < f; i++) { var p = e[i], d = o[i - 1], g = [], y = (r = p[0]).toUpperCase(); if (r !== y) switch (g[0] = y, y) { case "A": g[1] = p[1], g[2] = p[2], g[3] = p[3], g[4] = p[4], g[5] = p[5], g[6] = +p[6] + a, g[7] = +p[7] + s; break; case "V": g[1] = +p[1] + s; break; case "H": g[1] = +p[1] + a; break; case "M": u = +p[1] + a, l = +p[2] + s; break; default: for (var v = 1, m = p.length; v < m; v++)g[v] = +p[v] + (v % 2 ? a : s) } else g = e[i]; switch (y) { case "Z": a = +u, s = +l; break; case "H": g = ["L", a = g[1], s]; break; case "V": g = ["L", a, s = g[1]]; break; case "T": a = g[1], s = g[2]; var x = _([d[1], d[2]], [d[3], d[4]]); g = ["Q", x[0], x[1], a, s]; break; case "S": a = g[g.length - 2], s = g[g.length - 1]; var O = d.length, M = _([d[O - 4], d[O - 3]], [d[O - 2], d[O - 1]]); g = ["C", M[0], M[1], g[1], g[2], a, s]; break; case "M": u = g[g.length - 2], l = g[g.length - 1]; break; default: a = g[g.length - 2], s = g[g.length - 1] }o.push(g) } return o } var M = function (t, e, n, i, r, o, a, s, u, l) { n === i && (n += 1); var c, h, f, p, d, g = 120 * Math.PI / 180, y = Math.PI / 180 * (+r || 0), v = [], m = function (t, e, n) { return { x: t * Math.cos(n) - e * Math.sin(n), y: t * Math.sin(n) + e * Math.cos(n) } }; if (l) h = l[0], f = l[1], p = l[2], d = l[3]; else { t = (c = m(t, e, -y)).x, e = c.y, s = (c = m(s, u, -y)).x, u = c.y, t === s && e === u && (s += 1, u += 1); var x = (t - s) / 2, b = (e - u) / 2, C = x * x / (n * n) + b * b / (i * i); C > 1 && (n *= C = Math.sqrt(C), i *= C); var _ = n * n, O = i * i, w = (o === a ? -1 : 1) * Math.sqrt(Math.abs((_ * O - _ * b * b - O * x * x) / (_ * b * b + O * x * x))); p = w * n * b / i + (t + s) / 2, d = w * -i * x / n + (e + u) / 2, h = Math.asin(Number(((e - d) / i).toFixed(9))), f = Math.asin(Number(((u - d) / i).toFixed(9))), h = t < p ? Math.PI - h : h, f = s < p ? Math.PI - f : f, h < 0 && (h = 2 * Math.PI + h), f < 0 && (f = 2 * Math.PI + f), a && h > f && (h -= 2 * Math.PI), !a && f > h && (f -= 2 * Math.PI) } var S = f - h; if (Math.abs(S) > g) { var A = f, P = s, I = u; f = h + g * (a && f > h ? 1 : -1), s = p + n * Math.cos(f), u = d + i * Math.sin(f), v = M(s, u, n, i, r, 0, a, P, I, [f, A, p, d]) } S = f - h; var T = Math.cos(h), E = Math.sin(h), j = Math.cos(f), L = Math.sin(f), B = Math.tan(S / 4), k = 4 / 3 * n * B, D = 4 / 3 * i * B, R = [t, e], F = [t + k * E, e - D * T], N = [s + k * L, u - D * j], G = [s, u]; if (F[0] = 2 * R[0] - F[0], F[1] = 2 * R[1] - F[1], l) return [F, N, G].concat(v); for (var Y = [], V = 0, X = (v = [F, N, G].concat(v).join().split(",")).length; V < X; V++)Y[V] = V % 2 ? m(v[V - 1], v[V], y).y : m(v[V], v[V + 1], y).x; return Y }, w = function (t, e, n, i) { return [t, e, n, i, n, i] }, S = function (t, e, n, i, r, o) { return [1 / 3 * t + 2 / 3 * n, 1 / 3 * e + 2 / 3 * i, 1 / 3 * r + 2 / 3 * n, 1 / 3 * o + 2 / 3 * i, r, o] }; function A(t, e) { var n, i = O(t), r = e && O(e), o = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, a = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, s = [], u = [], l = "", c = "", h = function (t, e, n) { var i, r; if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y]; switch (!(t[0] in { T: 1, Q: 1 }) && (e.qx = e.qy = null), t[0]) { case "M": e.X = t[1], e.Y = t[2]; break; case "A": t = ["C"].concat(M.apply(0, [e.x, e.y].concat(t.slice(1)))); break; case "S": "C" === n || "S" === n ? (i = 2 * e.x - e.bx, r = 2 * e.y - e.by) : (i = e.x, r = e.y), t = ["C", i, r].concat(t.slice(1)); break; case "T": "Q" === n || "T" === n ? (e.qx = 2 * e.x - e.qx, e.qy = 2 * e.y - e.qy) : (e.qx = e.x, e.qy = e.y), t = ["C"].concat(S(e.x, e.y, e.qx, e.qy, t[1], t[2])); break; case "Q": e.qx = t[1], e.qy = t[2], t = ["C"].concat(S(e.x, e.y, t[1], t[2], t[3], t[4])); break; case "L": t = ["C"].concat(w(e.x, e.y, t[1], t[2])); break; case "H": t = ["C"].concat(w(e.x, e.y, t[1], e.y)); break; case "V": t = ["C"].concat(w(e.x, e.y, e.x, t[1])); break; case "Z": t = ["C"].concat(w(e.x, e.y, e.X, e.Y)) }return t }, f = function (t, e) { if (t[e].length > 7) { t[e].shift(); for (var o = t[e]; o.length;)s[e] = "A", r && (u[e] = "A"), t.splice(e++, 0, ["C"].concat(o.splice(0, 6))); t.splice(e, 1), n = Math.max(i.length, r && r.length || 0) } }, p = function (t, e, o, a, s) { t && e && "M" === t[s][0] && "M" !== e[s][0] && (e.splice(s, 0, ["M", a.x, a.y]), o.bx = 0, o.by = 0, o.x = t[s][1], o.y = t[s][2], n = Math.max(i.length, r && r.length || 0)) }; n = Math.max(i.length, r && r.length || 0); for (var d = 0; d < n; d++) { i[d] && (l = i[d][0]), "C" !== l && (s[d] = l, d && (c = s[d - 1])), i[d] = h(i[d], o, c), "A" !== s[d] && "C" === l && (s[d] = "C"), f(i, d), r && (r[d] && (l = r[d][0]), "C" !== l && (u[d] = l, d && (c = u[d - 1])), r[d] = h(r[d], a, c), "A" !== u[d] && "C" === l && (u[d] = "C"), f(r, d)), p(i, r, o, a, d), p(r, i, a, o, d); var g = i[d], y = r && r[d], v = g.length, m = r && y.length; o.x = g[v - 2], o.y = g[v - 1], o.bx = parseFloat(g[v - 4]) || o.x, o.by = parseFloat(g[v - 3]) || o.y, a.bx = r && (parseFloat(y[m - 4]) || a.x), a.by = r && (parseFloat(y[m - 3]) || a.y), a.x = r && y[m - 2], a.y = r && y[m - 1] } return r ? [i, r] : i } var P = function (t, e, n, i, r) { return t * (t * (-3 * e + 9 * n - 9 * i + 3 * r) + 6 * e - 12 * n + 6 * i) - 3 * e + 3 * n }, I = function (t, e, n, i, r, o, a, s, u) { null === u && (u = 1); for (var l = (u = u > 1 ? 1 : u < 0 ? 0 : u) / 2, c = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], h = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], f = 0, p = 0; p < 12; p++) { var d = l * c[p] + l, g = P(d, t, n, r, a), y = P(d, e, i, o, s), v = g * g + y * y; f += h[p] * Math.sqrt(v) } return l * f }, T = function (t, e, n, i, r, o, a, s) { for (var u, l, c, h, f = [], p = [[], []], d = 0; d < 2; ++d)if (0 === d ? (l = 6 * t - 12 * n + 6 * r, u = -3 * t + 9 * n - 9 * r + 3 * a, c = 3 * n - 3 * t) : (l = 6 * e - 12 * i + 6 * o, u = -3 * e + 9 * i - 9 * o + 3 * s, c = 3 * i - 3 * e), Math.abs(u) < 1e-12) { if (Math.abs(l) < 1e-12) continue; (h = -c / l) > 0 && h < 1 && f.push(h) } else { var g = l * l - 4 * c * u, y = Math.sqrt(g); if (!(g < 0)) { var v = (-l + y) / (2 * u); v > 0 && v < 1 && f.push(v); var m = (-l - y) / (2 * u); m > 0 && m < 1 && f.push(m) } } for (var x, b = f.length, C = b; b--;)x = 1 - (h = f[b]), p[0][b] = x * x * x * t + 3 * x * x * h * n + 3 * x * h * h * r + h * h * h * a, p[1][b] = x * x * x * e + 3 * x * x * h * i + 3 * x * h * h * o + h * h * h * s; return p[0][C] = t, p[1][C] = e, p[0][C + 1] = a, p[1][C + 1] = s, p[0].length = p[1].length = C + 2, { min: { x: Math.min.apply(0, p[0]), y: Math.min.apply(0, p[1]) }, max: { x: Math.max.apply(0, p[0]), y: Math.max.apply(0, p[1]) } } }, E = function (t, e, n, i, r, o, a, s) { if (!(Math.max(t, n) < Math.min(r, a) || Math.min(t, n) > Math.max(r, a) || Math.max(e, i) < Math.min(o, s) || Math.min(e, i) > Math.max(o, s))) { var u = (t - n) * (o - s) - (e - i) * (r - a); if (u) { var l = ((t * i - e * n) * (r - a) - (t - n) * (r * s - o * a)) / u, c = ((t * i - e * n) * (o - s) - (e - i) * (r * s - o * a)) / u, h = +l.toFixed(2), f = +c.toFixed(2); if (!(h < +Math.min(t, n).toFixed(2) || h > +Math.max(t, n).toFixed(2) || h < +Math.min(r, a).toFixed(2) || h > +Math.max(r, a).toFixed(2) || f < +Math.min(e, i).toFixed(2) || f > +Math.max(e, i).toFixed(2) || f < +Math.min(o, s).toFixed(2) || f > +Math.max(o, s).toFixed(2))) return { x: l, y: c } } } }, j = function (t, e, n) { return e >= t.x && e <= t.x + t.width && n >= t.y && n <= t.y + t.height }, L = function (t, e, n, i) { return null === t && (t = e = n = i = 0), null === e && (e = t.y, n = t.width, i = t.height, t = t.x), { x: t, y: e, width: n, w: n, height: i, h: i, x2: t + n, y2: e + i, cx: t + n / 2, cy: e + i / 2, r1: Math.min(n, i) / 2, r2: Math.max(n, i) / 2, r0: Math.sqrt(n * n + i * i) / 2, path: y(t, e, n, i), vb: [t, e, n, i].join(" ") } }, B = function (t, e, n, r, o, a, s, u) { Object(i.isArray)(t) || (t = [t, e, n, r, o, a, s, u]); var l = T.apply(null, t); return L(l.min.x, l.min.y, l.max.x - l.min.x, l.max.y - l.min.y) }, k = function (t, e, n, i, r, o, a, s, u) { var l = 1 - u, c = Math.pow(l, 3), h = Math.pow(l, 2), f = u * u, p = f * u, d = t + 2 * u * (n - t) + f * (r - 2 * n + t), g = e + 2 * u * (i - e) + f * (o - 2 * i + e), y = n + 2 * u * (r - n) + f * (a - 2 * r + n), v = i + 2 * u * (o - i) + f * (s - 2 * o + i); return { x: c * t + 3 * h * u * n + 3 * l * u * u * r + p * a, y: c * e + 3 * h * u * i + 3 * l * u * u * o + p * s, m: { x: d, y: g }, n: { x: y, y: v }, start: { x: l * t + u * n, y: l * e + u * i }, end: { x: l * r + u * a, y: l * o + u * s }, alpha: 90 - 180 * Math.atan2(d - y, g - v) / Math.PI } }, D = function (t, e, n) { if (!function (t, e) { return t = L(t), e = L(e), j(e, t.x, t.y) || j(e, t.x2, t.y) || j(e, t.x, t.y2) || j(e, t.x2, t.y2) || j(t, e.x, e.y) || j(t, e.x2, e.y) || j(t, e.x, e.y2) || j(t, e.x2, e.y2) || (t.x < e.x2 && t.x > e.x || e.x < t.x2 && e.x > t.x) && (t.y < e.y2 && t.y > e.y || e.y < t.y2 && e.y > t.y) }(B(t), B(e))) return n ? 0 : []; for (var i = ~~(I.apply(0, t) / 8), r = ~~(I.apply(0, e) / 8), o = [], a = [], s = {}, u = n ? 0 : [], l = 0; l < i + 1; l++) { var c = k.apply(0, t.concat(l / i)); o.push({ x: c.x, y: c.y, t: l / i }) } for (l = 0; l < r + 1; l++) { c = k.apply(0, e.concat(l / r)); a.push({ x: c.x, y: c.y, t: l / r }) } for (l = 0; l < i; l++)for (var h = 0; h < r; h++) { var f = o[l], p = o[l + 1], d = a[h], g = a[h + 1], y = Math.abs(p.x - f.x) < .001 ? "y" : "x", v = Math.abs(g.x - d.x) < .001 ? "y" : "x", m = E(f.x, f.y, p.x, p.y, d.x, d.y, g.x, g.y); if (m) { if (s[m.x.toFixed(4)] === m.y.toFixed(4)) continue; s[m.x.toFixed(4)] = m.y.toFixed(4); var x = f.t + Math.abs((m[y] - f[y]) / (p[y] - f[y])) * (p.t - f.t), b = d.t + Math.abs((m[v] - d[v]) / (g[v] - d[v])) * (g.t - d.t); x >= 0 && x <= 1 && b >= 0 && b <= 1 && (n ? u++ : u.push({ x: m.x, y: m.y, t1: x, t2: b })) } } return u }; function R(t, e) { return function (t, e, n) { var i, r, o, a, s, u, l, c, h, f; t = A(t), e = A(e); for (var p = n ? 0 : [], d = 0, g = t.length; d < g; d++) { var y = t[d]; if ("M" === y[0]) i = s = y[1], r = u = y[2]; else { "C" === y[0] ? (h = [i, r].concat(y.slice(1)), i = h[6], r = h[7]) : (h = [i, r, i, r, s, u, s, u], i = s, r = u); for (var v = 0, m = e.length; v < m; v++) { var x = e[v]; if ("M" === x[0]) o = l = x[1], a = c = x[2]; else { "C" === x[0] ? (f = [o, a].concat(x.slice(1)), o = f[6], a = f[7]) : (f = [o, a, o, a, l, c, l, c], o = l, a = c); var b = D(h, f, n); if (n) p += b; else { for (var C = 0, _ = b.length; C < _; C++)b[C].segment1 = d, b[C].segment2 = v, b[C].bez1 = h, b[C].bez2 = f; p = p.concat(b) } } } } } return p }(t, e) } var F = /,?([a-z]),?/gi; function N(t) { return t.join(",").replace(F, "$1") } function G(t) { return Math.sqrt(t[0] * t[0] + t[1] * t[1]) } function Y(t, e) { return G(t) * G(e) ? (t[0] * e[0] + t[1] * e[1]) / (G(t) * G(e)) : 1 } function V(t, e) { return (t[0] * e[1] < t[1] * e[0] ? -1 : 1) * Math.acos(Y(t, e)) } function X(t, e) { return t[0] === e[0] && t[1] === e[1] } function z(t, e) { var n = e[1], r = e[2], o = Object(i.mod)(Object(i.toRadian)(e[3]), 2 * Math.PI), a = e[4], s = e[5], u = t[0], l = t[1], c = e[6], h = e[7], f = Math.cos(o) * (u - c) / 2 + Math.sin(o) * (l - h) / 2, p = -1 * Math.sin(o) * (u - c) / 2 + Math.cos(o) * (l - h) / 2, d = f * f / (n * n) + p * p / (r * r); d > 1 && (n *= Math.sqrt(d), r *= Math.sqrt(d)); var g = n * n * (p * p) + r * r * (f * f), y = g ? Math.sqrt((n * n * (r * r) - g) / g) : 1; a === s && (y *= -1), isNaN(y) && (y = 0); var v = r ? y * n * p / r : 0, m = n ? y * -r * f / n : 0, x = (u + c) / 2 + Math.cos(o) * v - Math.sin(o) * m, b = (l + h) / 2 + Math.sin(o) * v + Math.cos(o) * m, C = [(f - v) / n, (p - m) / r], _ = [(-1 * f - v) / n, (-1 * p - m) / r], O = V([1, 0], C), M = V(C, _); return Y(C, _) <= -1 && (M = Math.PI), Y(C, _) >= 1 && (M = 0), 0 === s && M > 0 && (M -= 2 * Math.PI), 1 === s && M < 0 && (M += 2 * Math.PI), { cx: x, cy: b, rx: X(t, [c, h]) ? 0 : n, ry: X(t, [c, h]) ? 0 : r, startAngle: O, endAngle: O + M, xRotation: o, arcFlag: a, sweepFlag: s } } function H(t, e) { return [e[0] + (e[0] - t[0]), e[1] + (e[1] - t[1])] } function W(t) { for (var e = [], n = null, i = null, r = null, o = 0, s = (t = a(t)).length, u = 0; u < s; u++) { var l = t[u]; i = t[u + 1]; var c = l[0], h = { command: c, prePoint: n, params: l, startTangent: null, endTangent: null }; switch (c) { case "M": r = [l[1], l[2]], o = u; break; case "A": var f = z(n, l); h.arcParams = f }if ("Z" === c) n = r, i = t[o + 1]; else { var p = l.length; n = [l[p - 2], l[p - 1]] } i && "Z" === i[0] && (i = t[o], e[o] && (e[o].prePoint = n)), h.currentPoint = n, e[o] && X(n, e[o].currentPoint) && (e[o].prePoint = h.prePoint); var d = i ? [i[i.length - 2], i[i.length - 1]] : null; h.nextPoint = d; var g = h.prePoint; if (["L", "H", "V"].includes(c)) h.startTangent = [g[0] - n[0], g[1] - n[1]], h.endTangent = [n[0] - g[0], n[1] - g[1]]; else if ("Q" === c) { var y = [l[1], l[2]]; h.startTangent = [g[0] - y[0], g[1] - y[1]], h.endTangent = [n[0] - y[0], n[1] - y[1]] } else if ("T" === c) { y = H((x = e[u - 1]).currentPoint, g); "Q" === x.command ? (h.command = "Q", h.startTangent = [g[0] - y[0], g[1] - y[1]], h.endTangent = [n[0] - y[0], n[1] - y[1]]) : (h.command = "TL", h.startTangent = [g[0] - n[0], g[1] - n[1]], h.endTangent = [n[0] - g[0], n[1] - g[1]]) } else if ("C" === c) { var v = [l[1], l[2]], m = [l[3], l[4]]; h.startTangent = [g[0] - v[0], g[1] - v[1]], h.endTangent = [n[0] - m[0], n[1] - m[1]] } else if ("S" === c) { var x; v = H((x = e[u - 1]).currentPoint, g), m = [l[1], l[2]]; "C" === x.command ? (h.command = "C", h.startTangent = [g[0] - v[0], g[1] - v[1]], h.endTangent = [n[0] - m[0], n[1] - m[1]]) : (h.command = "SQ", h.startTangent = [g[0] - m[0], g[1] - m[1]], h.endTangent = [n[0] - m[0], n[1] - m[1]]) } else if ("A" === c) { var b = .001, C = h.arcParams || {}, _ = C.cx, O = void 0 === _ ? 0 : _, M = C.cy, w = void 0 === M ? 0 : M, S = C.rx, A = void 0 === S ? 0 : S, P = C.ry, I = void 0 === P ? 0 : P, T = C.sweepFlag, E = void 0 === T ? 0 : T, j = C.startAngle, L = void 0 === j ? 0 : j, B = C.endAngle, k = void 0 === B ? 0 : B; 0 === E && (b *= -1); var D = A * Math.cos(L - b) + O, R = I * Math.sin(L - b) + w; h.startTangent = [D - r[0], R - r[1]]; var F = A * Math.cos(L + k + b) + O, N = I * Math.sin(L + k - b) + w; h.endTangent = [g[0] - F, g[1] - N] } e.push(h) } return e } var q = function (t, e, n) { return t >= e && t <= n }; function U(t, e, n, i) { var r = n.x - t.x, o = n.y - t.y, a = e.x - t.x, s = e.y - t.y, u = i.x - n.x, l = i.y - n.y, c = a * l - s * u, h = null; if (c * c > .001 * (a * a + s * s) * (u * u + l * l)) { var f = (r * l - o * u) / c, p = (r * s - o * a) / c; q(f, 0, 1) && q(p, 0, 1) && (h = { x: t.x + f * a, y: t.y + f * s }) } return h } function Z(t) { return Math.abs(t) < 1e-6 ? 0 : t < 0 ? -1 : 1 } function Q(t, e, n) { return (n[0] - t[0]) * (e[1] - t[1]) == (e[0] - t[0]) * (n[1] - t[1]) && Math.min(t[0], e[0]) <= n[0] && n[0] <= Math.max(t[0], e[0]) && Math.min(t[1], e[1]) <= n[1] && n[1] <= Math.max(t[1], e[1]) } function K(t, e, n) { var i = !1, r = t.length; if (r <= 2) return !1; for (var o = 0; o < r; o++) { var a = t[o], s = t[(o + 1) % r]; if (Q(a, s, [e, n])) return !0; Z(a[1] - n) > 0 != Z(s[1] - n) > 0 && Z(e - (n - a[1]) * (a[0] - s[0]) / (a[1] - s[1]) - a[0]) < 0 && (i = !i) } return i } function $(t) { for (var e = [], n = t.length, i = 0; i < n - 1; i++) { var r = t[i], o = t[i + 1]; e.push({ from: { x: r[0], y: r[1] }, to: { x: o[0], y: o[1] } }) } if (e.length > 1) { var a = t[0], s = t[n - 1]; e.push({ from: { x: s[0], y: s[1] }, to: { x: a[0], y: a[1] } }) } return e } function J(t) { var e = t.map((function (t) { return t[0] })), n = t.map((function (t) { return t[1] })); return { minX: Math.min.apply(null, e), maxX: Math.max.apply(null, e), minY: Math.min.apply(null, n), maxY: Math.max.apply(null, n) } } function tt(t, e) { if (t.length < 2 || e.length < 2) return !1; var n, r, o = J(t), a = J(e); if (n = o, (r = a).minX > n.maxX || r.maxX < n.minX || r.minY > n.maxY || r.maxY < n.minY) return !1; var s = !1; if (Object(i.each)(e, (function (e) { if (K(t, e[0], e[1])) return s = !0, !1 })), s) return !0; if (Object(i.each)(t, (function (t) { if (K(e, t[0], t[1])) return s = !0, !1 })), s) return !0; var u = $(t), l = $(e), c = !1; return Object(i.each)(l, (function (t) { if (function (t, e) { var n = !1; return Object(i.each)(t, (function (t) { if (U(t.from, t.to, e.from, e.to)) return n = !0, !1 })), n }(u, t)) return c = !0, !1 })), c } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.uniq = e.omit = e.padEnd = e.isBetween = void 0; var i = n(0); e.isBetween = function (t, e, n) { var i = Math.min(e, n), r = Math.max(e, n); return t >= i && t <= r }, e.padEnd = function (t, e, n) { if (i.isString(t)) return t.padEnd(e, n); if (i.isArray(t)) { var r = t.length; if (r < e) for (var o = e - r, a = 0; a < o; a++)t.push(n) } return t }, e.omit = function (t, e) { return e.forEach((function (e) { delete t[e] })), t }, e.uniq = function (t, e, n) { void 0 === e && (e = []), void 0 === n && (n = {}); for (var i = 0, r = t; i < r.length; i++) { var o = r[i]; n[o] || (e.push(o), n[o] = !0) } return e } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.toPoints = e.getRegionBBox = e.BBox = void 0; var i = n(0), r = n(14), o = function () { function t(t, e, n, i) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === i && (i = 0), this.x = t, this.y = e, this.height = i, this.width = n } return t.fromRange = function (e, n, i, r) { return new t(e, n, i - e, r - n) }, t.fromObject = function (e) { return new t(e.minX, e.minY, e.width, e.height) }, Object.defineProperty(t.prototype, "minX", { get: function () { return this.x }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "maxX", { get: function () { return this.x + this.width }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "minY", { get: function () { return this.y }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "maxY", { get: function () { return this.y + this.height }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "tl", { get: function () { return { x: this.x, y: this.y } }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "tr", { get: function () { return { x: this.maxX, y: this.y } }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "bl", { get: function () { return { x: this.x, y: this.maxY } }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "br", { get: function () { return { x: this.maxX, y: this.maxY } }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "top", { get: function () { return { x: this.x + this.width / 2, y: this.minY } }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "right", { get: function () { return { x: this.maxX, y: this.y + this.height / 2 } }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "bottom", { get: function () { return { x: this.x + this.width / 2, y: this.maxY } }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "left", { get: function () { return { x: this.minX, y: this.y + this.height / 2 } }, enumerable: !1, configurable: !0 }), t.prototype.isEqual = function (t) { return this.x === t.x && this.y === t.y && this.width === t.width && this.height === t.height }, t.prototype.contains = function (t) { return t.minX >= this.minX && t.maxX <= this.maxX && t.minY >= this.minY && t.maxY <= this.maxY }, t.prototype.clone = function () { return new t(this.x, this.y, this.width, this.height) }, t.prototype.add = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; var n = this.clone(); return i.each(t, (function (t) { n.x = Math.min(t.x, n.x), n.y = Math.min(t.y, n.y), n.width = Math.max(t.maxX, n.maxX) - n.x, n.height = Math.max(t.maxY, n.maxY) - n.y })), n }, t.prototype.merge = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; var n = this.clone(); return i.each(t, (function (t) { n.x = Math.max(t.x, n.x), n.y = Math.max(t.y, n.y), n.width = Math.min(t.maxX, n.maxX) - n.x, n.height = Math.min(t.maxY, n.maxY) - n.y })), n }, t.prototype.cut = function (e, n) { var i = e.width, o = e.height; switch (n) { case r.DIRECTION.TOP: case r.DIRECTION.TOP_LEFT: case r.DIRECTION.TOP_RIGHT: return t.fromRange(this.minX, this.minY + o, this.maxX, this.maxY); case r.DIRECTION.RIGHT: case r.DIRECTION.RIGHT_TOP: case r.DIRECTION.RIGHT_BOTTOM: return t.fromRange(this.minX, this.minY, this.maxX - i, this.maxY); case r.DIRECTION.BOTTOM: case r.DIRECTION.BOTTOM_LEFT: case r.DIRECTION.BOTTOM_RIGHT: return t.fromRange(this.minX, this.minY, this.maxX, this.maxY - o); case r.DIRECTION.LEFT: case r.DIRECTION.LEFT_TOP: case r.DIRECTION.LEFT_BOTTOM: return t.fromRange(this.minX + i, this.minY, this.maxX, this.maxY); default: return this } }, t.prototype.shrink = function (e) { var n = e[0], i = e[1], r = e[2], o = e[3]; return new t(this.x + o, this.y + n, this.width - o - i, this.height - n - r) }, t.prototype.expand = function (e) { var n = e[0], i = e[1], r = e[2], o = e[3]; return new t(this.x - o, this.y - n, this.width + o + i, this.height + n + r) }, t.prototype.exceed = function (t) { return [Math.max(-this.minY + t.minY, 0), Math.max(this.maxX - t.maxX, 0), Math.max(this.maxY - t.maxY, 0), Math.max(-this.minX + t.minX, 0)] }, t.prototype.collide = function (t) { return this.minX < t.maxX && this.maxX > t.minX && this.minY < t.maxY && this.maxY > t.minY }, t.prototype.size = function () { return this.width * this.height }, t.prototype.isPointIn = function (t) { return t.x >= this.minX && t.x <= this.maxX && t.y >= this.minY && t.y <= this.maxY }, t }(); e.BBox = o, e.getRegionBBox = function (t, e) { var n = e.start, i = e.end; return new o(t.x + t.width * n.x, t.y + t.height * n.y, t.width * Math.abs(i.x - n.x), t.height * Math.abs(i.y - n.y)) }, e.toPoints = function (t) { return [[t.minX, t.minY], [t.maxX, t.minY], [t.maxX, t.maxY], [t.minX, t.maxY]] } }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "catmullRomToBezier", (function () { return u })), n.d(e, "fillPath", (function () { return T })), n.d(e, "fillPathByDiff", (function () { return L })), n.d(e, "formatPath", (function () { return D })), n.d(e, "intersection", (function () { return A })), n.d(e, "parsePathArray", (function () { return y })), n.d(e, "parsePathString", (function () { return s })), n.d(e, "pathToAbsolute", (function () { return c })), n.d(e, "pathToCurve", (function () { return d })), n.d(e, "rectPath", (function () { return _ })); var i = n(0), r = "\t\n\v\f\r   \u2028\u2029", o = new RegExp("([a-z])[" + r + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + r + "]*,?[" + r + "]*)+)", "ig"), a = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + r + "]*,?[" + r + "]*", "ig"), s = function (t) { if (!t) return null; if (Object(i.isArray)(t)) return t; var e = { a: 7, c: 6, o: 2, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, u: 3, z: 0 }, n = []; return String(t).replace(o, (function (i, r, o) { var s = [], u = r.toLowerCase(); if (o.replace(a, (function (t, e) { e && s.push(+e) })), "m" === u && s.length > 2 && (n.push([r].concat(s.splice(0, 2))), u = "l", r = "m" === r ? "l" : "L"), "o" === u && 1 === s.length && n.push([r, s[0]]), "r" === u) n.push([r].concat(s)); else for (; s.length >= e[u] && (n.push([r].concat(s.splice(0, e[u]))), e[u]);); return t })), n }, u = function (t, e) { for (var n = [], i = 0, r = t.length; r - 2 * !e > i; i += 2) { var o = [{ x: +t[i - 2], y: +t[i - 1] }, { x: +t[i], y: +t[i + 1] }, { x: +t[i + 2], y: +t[i + 3] }, { x: +t[i + 4], y: +t[i + 5] }]; e ? i ? r - 4 === i ? o[3] = { x: +t[0], y: +t[1] } : r - 2 === i && (o[2] = { x: +t[0], y: +t[1] }, o[3] = { x: +t[2], y: +t[3] }) : o[0] = { x: +t[r - 2], y: +t[r - 1] } : r - 4 === i ? o[3] = o[2] : i || (o[0] = { x: +t[i], y: +t[i + 1] }), n.push(["C", (-o[0].x + 6 * o[1].x + o[2].x) / 6, (-o[0].y + 6 * o[1].y + o[2].y) / 6, (o[1].x + 6 * o[2].x - o[3].x) / 6, (o[1].y + 6 * o[2].y - o[3].y) / 6, o[2].x, o[2].y]) } return n }, l = function (t, e, n, i, r) { var o = []; if (null === r && null === i && (i = n), t = +t, e = +e, n = +n, i = +i, null !== r) { var a = Math.PI / 180, s = t + n * Math.cos(-i * a), u = t + n * Math.cos(-r * a); o = [["M", s, e + n * Math.sin(-i * a)], ["A", n, n, 0, +(r - i > 180), 0, u, e + n * Math.sin(-r * a)]] } else o = [["M", t, e], ["m", 0, -i], ["a", n, i, 0, 1, 1, 0, 2 * i], ["a", n, i, 0, 1, 1, 0, -2 * i], ["z"]]; return o }, c = function (t) { if (!(t = s(t)) || !t.length) return [["M", 0, 0]]; var e, n, i = [], r = 0, o = 0, a = 0, c = 0, h = 0; "M" === t[0][0] && (a = r = +t[0][1], c = o = +t[0][2], h++, i[0] = ["M", r, o]); for (var f = 3 === t.length && "M" === t[0][0] && "R" === t[1][0].toUpperCase() && "Z" === t[2][0].toUpperCase(), p = void 0, d = void 0, g = h, y = t.length; g < y; g++) { if (i.push(p = []), (e = (d = t[g])[0]) !== e.toUpperCase()) switch (p[0] = e.toUpperCase(), p[0]) { case "A": p[1] = d[1], p[2] = d[2], p[3] = d[3], p[4] = d[4], p[5] = d[5], p[6] = +d[6] + r, p[7] = +d[7] + o; break; case "V": p[1] = +d[1] + o; break; case "H": p[1] = +d[1] + r; break; case "R": for (var v = 2, m = (n = [r, o].concat(d.slice(1))).length; v < m; v++)n[v] = +n[v] + r, n[++v] = +n[v] + o; i.pop(), i = i.concat(u(n, f)); break; case "O": i.pop(), (n = l(r, o, d[1], d[2])).push(n[0]), i = i.concat(n); break; case "U": i.pop(), i = i.concat(l(r, o, d[1], d[2], d[3])), p = ["U"].concat(i[i.length - 1].slice(-2)); break; case "M": a = +d[1] + r, c = +d[2] + o; break; default: for (v = 1, m = d.length; v < m; v++)p[v] = +d[v] + (v % 2 ? r : o) } else if ("R" === e) n = [r, o].concat(d.slice(1)), i.pop(), i = i.concat(u(n, f)), p = ["R"].concat(d.slice(-2)); else if ("O" === e) i.pop(), (n = l(r, o, d[1], d[2])).push(n[0]), i = i.concat(n); else if ("U" === e) i.pop(), i = i.concat(l(r, o, d[1], d[2], d[3])), p = ["U"].concat(i[i.length - 1].slice(-2)); else for (var x = 0, b = d.length; x < b; x++)p[x] = d[x]; if ("O" !== (e = e.toUpperCase())) switch (p[0]) { case "Z": r = +a, o = +c; break; case "H": r = p[1]; break; case "V": o = p[1]; break; case "M": a = p[p.length - 2], c = p[p.length - 1]; break; default: r = p[p.length - 2], o = p[p.length - 1] } } return i }, h = function (t, e, n, i) { return [t, e, n, i, n, i] }, f = function (t, e, n, i, r, o) { return [1 / 3 * t + 2 / 3 * n, 1 / 3 * e + 2 / 3 * i, 1 / 3 * r + 2 / 3 * n, 1 / 3 * o + 2 / 3 * i, r, o] }, p = function (t, e, n, i, r, o, a, s, u, l) { n === i && (n += 1); var c, h, f, d, g, y = 120 * Math.PI / 180, v = Math.PI / 180 * (+r || 0), m = [], x = function (t, e, n) { return { x: t * Math.cos(n) - e * Math.sin(n), y: t * Math.sin(n) + e * Math.cos(n) } }; if (l) h = l[0], f = l[1], d = l[2], g = l[3]; else { t = (c = x(t, e, -v)).x, e = c.y, s = (c = x(s, u, -v)).x, u = c.y, t === s && e === u && (s += 1, u += 1); var b = (t - s) / 2, C = (e - u) / 2, _ = b * b / (n * n) + C * C / (i * i); _ > 1 && (n *= _ = Math.sqrt(_), i *= _); var O = n * n, M = i * i, w = (o === a ? -1 : 1) * Math.sqrt(Math.abs((O * M - O * C * C - M * b * b) / (O * C * C + M * b * b))); d = w * n * C / i + (t + s) / 2, g = w * -i * b / n + (e + u) / 2, h = Math.asin(((e - g) / i).toFixed(9)), f = Math.asin(((u - g) / i).toFixed(9)), h = t < d ? Math.PI - h : h, f = s < d ? Math.PI - f : f, h < 0 && (h = 2 * Math.PI + h), f < 0 && (f = 2 * Math.PI + f), a && h > f && (h -= 2 * Math.PI), !a && f > h && (f -= 2 * Math.PI) } var S = f - h; if (Math.abs(S) > y) { var A = f, P = s, I = u; f = h + y * (a && f > h ? 1 : -1), s = d + n * Math.cos(f), u = g + i * Math.sin(f), m = p(s, u, n, i, r, 0, a, P, I, [f, A, d, g]) } S = f - h; var T = Math.cos(h), E = Math.sin(h), j = Math.cos(f), L = Math.sin(f), B = Math.tan(S / 4), k = 4 / 3 * n * B, D = 4 / 3 * i * B, R = [t, e], F = [t + k * E, e - D * T], N = [s + k * L, u - D * j], G = [s, u]; if (F[0] = 2 * R[0] - F[0], F[1] = 2 * R[1] - F[1], l) return [F, N, G].concat(m); for (var Y = [], V = 0, X = (m = [F, N, G].concat(m).join().split(",")).length; V < X; V++)Y[V] = V % 2 ? x(m[V - 1], m[V], v).y : x(m[V], m[V + 1], v).x; return Y }, d = function (t, e) { var n, i = c(t), r = e && c(e), o = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, a = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, s = [], u = [], l = "", d = "", g = function (t, e, n) { var i, r; if (!t) return ["C", e.x, e.y, e.x, e.y, e.x, e.y]; switch (!(t[0] in { T: 1, Q: 1 }) && (e.qx = e.qy = null), t[0]) { case "M": e.X = t[1], e.Y = t[2]; break; case "A": t = ["C"].concat(p.apply(0, [e.x, e.y].concat(t.slice(1)))); break; case "S": "C" === n || "S" === n ? (i = 2 * e.x - e.bx, r = 2 * e.y - e.by) : (i = e.x, r = e.y), t = ["C", i, r].concat(t.slice(1)); break; case "T": "Q" === n || "T" === n ? (e.qx = 2 * e.x - e.qx, e.qy = 2 * e.y - e.qy) : (e.qx = e.x, e.qy = e.y), t = ["C"].concat(f(e.x, e.y, e.qx, e.qy, t[1], t[2])); break; case "Q": e.qx = t[1], e.qy = t[2], t = ["C"].concat(f(e.x, e.y, t[1], t[2], t[3], t[4])); break; case "L": t = ["C"].concat(h(e.x, e.y, t[1], t[2])); break; case "H": t = ["C"].concat(h(e.x, e.y, t[1], e.y)); break; case "V": t = ["C"].concat(h(e.x, e.y, e.x, t[1])); break; case "Z": t = ["C"].concat(h(e.x, e.y, e.X, e.Y)) }return t }, y = function (t, e) { if (t[e].length > 7) { t[e].shift(); for (var o = t[e]; o.length;)s[e] = "A", r && (u[e] = "A"), t.splice(e++, 0, ["C"].concat(o.splice(0, 6))); t.splice(e, 1), n = Math.max(i.length, r && r.length || 0) } }, v = function (t, e, o, a, s) { t && e && "M" === t[s][0] && "M" !== e[s][0] && (e.splice(s, 0, ["M", a.x, a.y]), o.bx = 0, o.by = 0, o.x = t[s][1], o.y = t[s][2], n = Math.max(i.length, r && r.length || 0)) }; n = Math.max(i.length, r && r.length || 0); for (var m = 0; m < n; m++) { i[m] && (l = i[m][0]), "C" !== l && (s[m] = l, m && (d = s[m - 1])), i[m] = g(i[m], o, d), "A" !== s[m] && "C" === l && (s[m] = "C"), y(i, m), r && (r[m] && (l = r[m][0]), "C" !== l && (u[m] = l, m && (d = u[m - 1])), r[m] = g(r[m], a, d), "A" !== u[m] && "C" === l && (u[m] = "C"), y(r, m)), v(i, r, o, a, m), v(r, i, a, o, m); var x = i[m], b = r && r[m], C = x.length, _ = r && b.length; o.x = x[C - 2], o.y = x[C - 1], o.bx = parseFloat(x[C - 4]) || o.x, o.by = parseFloat(x[C - 3]) || o.y, a.bx = r && (parseFloat(b[_ - 4]) || a.x), a.by = r && (parseFloat(b[_ - 3]) || a.y), a.x = r && b[_ - 2], a.y = r && b[_ - 1] } return r ? [i, r] : i }, g = /,?([a-z]),?/gi, y = function (t) { return t.join(",").replace(g, "$1") }, v = function (t, e, n, i, r) { return t * (t * (-3 * e + 9 * n - 9 * i + 3 * r) + 6 * e - 12 * n + 6 * i) - 3 * e + 3 * n }, m = function (t, e, n, i, r, o, a, s, u) { null === u && (u = 1); for (var l = (u = u > 1 ? 1 : u < 0 ? 0 : u) / 2, c = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], h = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], f = 0, p = 0; p < 12; p++) { var d = l * c[p] + l, g = v(d, t, n, r, a), y = v(d, e, i, o, s), m = g * g + y * y; f += h[p] * Math.sqrt(m) } return l * f }, x = function (t, e, n, i, r, o, a, s) { for (var u, l, c, h, f = [], p = [[], []], d = 0; d < 2; ++d)if (0 === d ? (l = 6 * t - 12 * n + 6 * r, u = -3 * t + 9 * n - 9 * r + 3 * a, c = 3 * n - 3 * t) : (l = 6 * e - 12 * i + 6 * o, u = -3 * e + 9 * i - 9 * o + 3 * s, c = 3 * i - 3 * e), Math.abs(u) < 1e-12) { if (Math.abs(l) < 1e-12) continue; (h = -c / l) > 0 && h < 1 && f.push(h) } else { var g = l * l - 4 * c * u, y = Math.sqrt(g); if (!(g < 0)) { var v = (-l + y) / (2 * u); v > 0 && v < 1 && f.push(v); var m = (-l - y) / (2 * u); m > 0 && m < 1 && f.push(m) } } for (var x, b = f.length, C = b; b--;)x = 1 - (h = f[b]), p[0][b] = x * x * x * t + 3 * x * x * h * n + 3 * x * h * h * r + h * h * h * a, p[1][b] = x * x * x * e + 3 * x * x * h * i + 3 * x * h * h * o + h * h * h * s; return p[0][C] = t, p[1][C] = e, p[0][C + 1] = a, p[1][C + 1] = s, p[0].length = p[1].length = C + 2, { min: { x: Math.min.apply(0, p[0]), y: Math.min.apply(0, p[1]) }, max: { x: Math.max.apply(0, p[0]), y: Math.max.apply(0, p[1]) } } }, b = function (t, e, n, i, r, o, a, s) { if (!(Math.max(t, n) < Math.min(r, a) || Math.min(t, n) > Math.max(r, a) || Math.max(e, i) < Math.min(o, s) || Math.min(e, i) > Math.max(o, s))) { var u = (t - n) * (o - s) - (e - i) * (r - a); if (u) { var l = ((t * i - e * n) * (r - a) - (t - n) * (r * s - o * a)) / u, c = ((t * i - e * n) * (o - s) - (e - i) * (r * s - o * a)) / u, h = +l.toFixed(2), f = +c.toFixed(2); if (!(h < +Math.min(t, n).toFixed(2) || h > +Math.max(t, n).toFixed(2) || h < +Math.min(r, a).toFixed(2) || h > +Math.max(r, a).toFixed(2) || f < +Math.min(e, i).toFixed(2) || f > +Math.max(e, i).toFixed(2) || f < +Math.min(o, s).toFixed(2) || f > +Math.max(o, s).toFixed(2))) return { x: l, y: c } } } }, C = function (t, e, n) { return e >= t.x && e <= t.x + t.width && n >= t.y && n <= t.y + t.height }, _ = function (t, e, n, i, r) { if (r) return [["M", +t + +r, e], ["l", n - 2 * r, 0], ["a", r, r, 0, 0, 1, r, r], ["l", 0, i - 2 * r], ["a", r, r, 0, 0, 1, -r, r], ["l", 2 * r - n, 0], ["a", r, r, 0, 0, 1, -r, -r], ["l", 0, 2 * r - i], ["a", r, r, 0, 0, 1, r, -r], ["z"]]; var o = [["M", t, e], ["l", n, 0], ["l", 0, i], ["l", -n, 0], ["z"]]; return o.parsePathArray = y, o }, O = function (t, e, n, i) { return null === t && (t = e = n = i = 0), null === e && (e = t.y, n = t.width, i = t.height, t = t.x), { x: t, y: e, width: n, w: n, height: i, h: i, x2: t + n, y2: e + i, cx: t + n / 2, cy: e + i / 2, r1: Math.min(n, i) / 2, r2: Math.max(n, i) / 2, r0: Math.sqrt(n * n + i * i) / 2, path: _(t, e, n, i), vb: [t, e, n, i].join(" ") } }, M = function (t, e, n, r, o, a, s, u) { Object(i.isArray)(t) || (t = [t, e, n, r, o, a, s, u]); var l = x.apply(null, t); return O(l.min.x, l.min.y, l.max.x - l.min.x, l.max.y - l.min.y) }, w = function (t, e, n, i, r, o, a, s, u) { var l = 1 - u, c = Math.pow(l, 3), h = Math.pow(l, 2), f = u * u, p = f * u, d = t + 2 * u * (n - t) + f * (r - 2 * n + t), g = e + 2 * u * (i - e) + f * (o - 2 * i + e), y = n + 2 * u * (r - n) + f * (a - 2 * r + n), v = i + 2 * u * (o - i) + f * (s - 2 * o + i); return { x: c * t + 3 * h * u * n + 3 * l * u * u * r + p * a, y: c * e + 3 * h * u * i + 3 * l * u * u * o + p * s, m: { x: d, y: g }, n: { x: y, y: v }, start: { x: l * t + u * n, y: l * e + u * i }, end: { x: l * r + u * a, y: l * o + u * s }, alpha: 90 - 180 * Math.atan2(d - y, g - v) / Math.PI } }, S = function (t, e, n) { if (!function (t, e) { return t = O(t), e = O(e), C(e, t.x, t.y) || C(e, t.x2, t.y) || C(e, t.x, t.y2) || C(e, t.x2, t.y2) || C(t, e.x, e.y) || C(t, e.x2, e.y) || C(t, e.x, e.y2) || C(t, e.x2, e.y2) || (t.x < e.x2 && t.x > e.x || e.x < t.x2 && e.x > t.x) && (t.y < e.y2 && t.y > e.y || e.y < t.y2 && e.y > t.y) }(M(t), M(e))) return n ? 0 : []; for (var i = ~~(m.apply(0, t) / 8), r = ~~(m.apply(0, e) / 8), o = [], a = [], s = {}, u = n ? 0 : [], l = 0; l < i + 1; l++) { var c = w.apply(0, t.concat(l / i)); o.push({ x: c.x, y: c.y, t: l / i }) } for (l = 0; l < r + 1; l++) { c = w.apply(0, e.concat(l / r)); a.push({ x: c.x, y: c.y, t: l / r }) } for (l = 0; l < i; l++)for (var h = 0; h < r; h++) { var f = o[l], p = o[l + 1], d = a[h], g = a[h + 1], y = Math.abs(p.x - f.x) < .001 ? "y" : "x", v = Math.abs(g.x - d.x) < .001 ? "y" : "x", x = b(f.x, f.y, p.x, p.y, d.x, d.y, g.x, g.y); if (x) { if (s[x.x.toFixed(4)] === x.y.toFixed(4)) continue; s[x.x.toFixed(4)] = x.y.toFixed(4); var _ = f.t + Math.abs((x[y] - f[y]) / (p[y] - f[y])) * (p.t - f.t), S = d.t + Math.abs((x[v] - d[v]) / (g[v] - d[v])) * (g.t - d.t); _ >= 0 && _ <= 1 && S >= 0 && S <= 1 && (n ? u += 1 : u.push({ x: x.x, y: x.y, t1: _, t2: S })) } } return u }, A = function (t, e) { return function (t, e, n) { var i, r, o, a, s, u, l, c, h, f; t = d(t), e = d(e); for (var p = n ? 0 : [], g = 0, y = t.length; g < y; g++) { var v = t[g]; if ("M" === v[0]) i = s = v[1], r = u = v[2]; else { "C" === v[0] ? (h = [i, r].concat(v.slice(1)), i = h[6], r = h[7]) : (h = [i, r, i, r, s, u, s, u], i = s, r = u); for (var m = 0, x = e.length; m < x; m++) { var b = e[m]; if ("M" === b[0]) o = l = b[1], a = c = b[2]; else { "C" === b[0] ? (f = [o, a].concat(b.slice(1)), o = f[6], a = f[7]) : (f = [o, a, o, a, l, c, l, c], o = l, a = c); var C = S(h, f, n); if (n) p += C; else { for (var _ = 0, O = C.length; _ < O; _++)C[_].segment1 = g, C[_].segment2 = m, C[_].bez1 = h, C[_].bez2 = f; p = p.concat(C) } } } } } return p }(t, e) }; function P(t, e) { var n = [], i = []; return t.length && function t(e, r) { if (1 === e.length) n.push(e[0]), i.push(e[0]); else { for (var o = [], a = 0; a < e.length - 1; a++)0 === a && n.push(e[0]), a === e.length - 2 && i.push(e[a + 1]), o[a] = [(1 - r) * e[a][0] + r * e[a + 1][0], (1 - r) * e[a][1] + r * e[a + 1][1]]; t(o, r) } }(t, e), { left: n, right: i.reverse() } } var I = function (t, e, n) { if (1 === n) return [[].concat(t)]; var i = []; if ("L" === e[0] || "C" === e[0] || "Q" === e[0]) i = i.concat(function (t, e, n) { var i = [[t[1], t[2]]]; n = n || 2; var r = []; "A" === e[0] ? (i.push(e[6]), i.push(e[7])) : "C" === e[0] ? (i.push([e[1], e[2]]), i.push([e[3], e[4]]), i.push([e[5], e[6]])) : "S" === e[0] || "Q" === e[0] ? (i.push([e[1], e[2]]), i.push([e[3], e[4]])) : i.push([e[1], e[2]]); for (var o = i, a = 1 / n, s = 0; s < n - 1; s++) { var u = P(o, a / (1 - a * s)); r.push(u.left), o = u.right } return r.push(o), r.map((function (t) { var e = []; return 4 === t.length && (e.push("C"), e = e.concat(t[2])), t.length >= 3 && (3 === t.length && e.push("Q"), e = e.concat(t[1])), 2 === t.length && e.push("L"), e = e.concat(t[t.length - 1]) })) }(t, e, n)); else { var r = [].concat(t); "M" === r[0] && (r[0] = "L"); for (var o = 0; o <= n - 1; o++)i.push(r) } return i }, T = function (t, e) { if (1 === t.length) return t; var n = t.length - 1, i = e.length - 1, r = n / i, o = []; if (1 === t.length && "M" === t[0][0]) { for (var a = 0; a < i - n; a++)t.push(t[0]); return t } for (a = 0; a < i; a++) { var s = Math.floor(r * a); o[s] = (o[s] || 0) + 1 } var u = o.reduce((function (e, i, r) { return r === n ? e.concat(t[n]) : e.concat(I(t[r], t[r + 1], i)) }), []); return u.unshift(t[0]), "Z" !== e[i] && "z" !== e[i] || u.push("Z"), u }, E = function (t, e) { if (t.length !== e.length) return !1; var n = !0; return Object(i.each)(t, (function (t, i) { if (t !== e[i]) return n = !1, !1 })), n }; function j(t, e, n) { var i = null, r = n; return e < r && (r = e, i = "add"), t < r && (r = t, i = "del"), { type: i, min: r } } var L = function (t, e) { var n = function (t, e) { var n, i, r = t.length, o = e.length, a = 0; if (0 === r || 0 === o) return null; for (var s = [], u = 0; u <= r; u++)s[u] = [], s[u][0] = { min: u }; for (var l = 0; l <= o; l++)s[0][l] = { min: l }; for (u = 1; u <= r; u++) { n = t[u - 1]; for (l = 1; l <= o; l++) { i = e[l - 1], a = E(n, i) ? 0 : 1; var c = s[u - 1][l].min + 1, h = s[u][l - 1].min + 1, f = s[u - 1][l - 1].min + a; s[u][l] = j(c, h, f) } } return s }(t, e), i = t.length, r = e.length, o = [], a = 1, s = 1; if (n[i][r].min !== i) { for (var u = 1; u <= i; u++) { var l = n[u][u].min; s = u; for (var c = a; c <= r; c++)n[u][c].min < l && (l = n[u][c].min, s = c); a = s, n[u][a].type && o.push({ index: u - 1, type: n[u][a].type }) } for (u = o.length - 1; u >= 0; u--)a = o[u].index, "add" === o[u].type ? t.splice(a, 0, [].concat(t[a])) : t.splice(a, 1) } var h = r - (i = t.length); if (i < r) for (u = 0; u < h; u++)"z" === t[i - 1][0] || "Z" === t[i - 1][0] ? t.splice(i - 2, 0, t[i - 2]) : t.push(t[i - 1]), i += 1; return t }; function B(t, e, n) { for (var i, r = [].concat(t), o = 1 / (n + 1), a = k(e)[0], s = 1; s <= n; s++)o *= s, 0 === (i = Math.floor(t.length * o)) ? r.unshift([a[0] * o + t[i][0] * (1 - o), a[1] * o + t[i][1] * (1 - o)]) : r.splice(i, 0, [a[0] * o + t[i][0] * (1 - o), a[1] * o + t[i][1] * (1 - o)]); return r } function k(t) { var e = []; switch (t[0]) { case "M": case "L": e.push([t[1], t[2]]); break; case "A": e.push([t[6], t[7]]); break; case "Q": e.push([t[3], t[4]]), e.push([t[1], t[2]]); break; case "T": e.push([t[1], t[2]]); break; case "C": e.push([t[5], t[6]]), e.push([t[1], t[2]]), e.push([t[3], t[4]]); break; case "S": e.push([t[3], t[4]]), e.push([t[1], t[2]]); break; case "H": case "V": e.push([t[1], t[1]]) }return e } var D = function (t, e) { if (t.length <= 1) return t; for (var n, i = 0; i < e.length; i++)if (t[i][0] !== e[i][0]) switch (n = k(t[i]), e[i][0]) { case "M": t[i] = ["M"].concat(n[0]); break; case "L": t[i] = ["L"].concat(n[0]); break; case "A": t[i] = [].concat(e[i]), t[i][6] = n[0][0], t[i][7] = n[0][1]; break; case "Q": if (n.length < 2) { if (!(i > 0)) { t[i] = e[i]; break } n = B(n, t[i - 1], 1) } t[i] = ["Q"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; case "T": t[i] = ["T"].concat(n[0]); break; case "C": if (n.length < 3) { if (!(i > 0)) { t[i] = e[i]; break } n = B(n, t[i - 1], 2) } t[i] = ["C"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; case "S": if (n.length < 2) { if (!(i > 0)) { t[i] = e[i]; break } n = B(n, t[i - 1], 1) } t[i] = ["S"].concat(n.reduce((function (t, e) { return t.concat(e) }), [])); break; default: t[i] = e[i] }return t } }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Base", (function () { return l })), n.d(e, "Circle", (function () { return c })), n.d(e, "Ellipse", (function () { return f })), n.d(e, "Image", (function () { return d })), n.d(e, "Line", (function () { return m })), n.d(e, "Marker", (function () { return _ })), n.d(e, "Path", (function () { return L })), n.d(e, "Polygon", (function () { return k })), n.d(e, "Polyline", (function () { return D })), n.d(e, "Rect", (function () { return F })), n.d(e, "Text", (function () { return N })); var i = {}; n.r(i), n.d(i, "Base", (function () { return l })), n.d(i, "Circle", (function () { return c })), n.d(i, "Ellipse", (function () { return f })), n.d(i, "Image", (function () { return d })), n.d(i, "Line", (function () { return m })), n.d(i, "Marker", (function () { return _ })), n.d(i, "Path", (function () { return L })), n.d(i, "Polygon", (function () { return k })), n.d(i, "Polyline", (function () { return D })), n.d(i, "Rect", (function () { return F })), n.d(i, "Text", (function () { return N })); var r = n(1), o = n(7), a = n(5), s = n(20), u = n(53), l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 }) }, e.prototype.getShapeBase = function () { return i }, e.prototype.getGroupBase = function () { return u.a }, e.prototype.onCanvasChange = function (t) { Object(s.h)(this, t) }, e.prototype.calculateBBox = function () { var t = this.get("type"), e = this.getHitLineWidth(), n = Object(o.getBBoxMethod)(t)(this), i = e / 2, r = n.x - i, a = n.y - i, s = n.x + n.width + i, u = n.y + n.height + i; return { x: r, minX: r, y: a, minY: a, width: n.width + e, height: n.height + e, maxX: s, maxY: u } }, e.prototype.isFill = function () { return !!this.attrs.fill || this.isClipShape() }, e.prototype.isStroke = function () { return !!this.attrs.stroke }, e.prototype._applyClip = function (t, e) { e && (t.save(), Object(s.a)(t, e), e.createPath(t), t.restore(), t.clip(), e._afterDraw()) }, e.prototype.draw = function (t, e) { var n = this.cfg.clipShape; if (e) { if (!1 === this.cfg.refresh) return void this.set("hasChanged", !1); var i = this.getCanvasBBox(); if (!Object(a.f)(e, i)) return this.set("hasChanged", !1), void (this.cfg.isInView && this._afterDraw()) } t.save(), Object(s.a)(t, this), this._applyClip(t, n), this.drawPath(t), t.restore(), this._afterDraw() }, e.prototype.getCanvasViewBox = function () { var t = this.cfg.canvas; return t ? t.getViewRange() : null }, e.prototype.cacheCanvasBBox = function () { var t = this.getCanvasViewBox(); if (t) { var e = this.getCanvasBBox(), n = Object(a.f)(e, t); this.set("isInView", n), n ? this.set("cacheCanvasBBox", e) : this.set("cacheCanvasBBox", null) } }, e.prototype._afterDraw = function () { this.cacheCanvasBBox(), this.set("hasChanged", !1), this.set("refresh", null) }, e.prototype.skipDraw = function () { this.set("cacheCanvasBBox", null), this.set("isInView", null), this.set("hasChanged", !1) }, e.prototype.drawPath = function (t) { this.createPath(t), this.strokeAndFill(t), this.afterDrawPath(t) }, e.prototype.fill = function (t) { t.fill() }, e.prototype.stroke = function (t) { t.stroke() }, e.prototype.strokeAndFill = function (t) { var e = this.attrs, n = e.lineWidth, i = e.opacity, r = e.strokeOpacity, o = e.fillOpacity; this.isFill() && (Object(a.i)(o) || 1 === o ? this.fill(t) : (t.globalAlpha = o, this.fill(t), t.globalAlpha = i)), this.isStroke() && n > 0 && (Object(a.i)(r) || 1 === r || (t.globalAlpha = r), this.stroke(t)), this.afterDrawPath(t) }, e.prototype.createPath = function (t) { }, e.prototype.afterDrawPath = function (t) { }, e.prototype.isInShape = function (t, e) { var n = this.isStroke(), i = this.isFill(), r = this.getHitLineWidth(); return this.isInStrokeOrPath(t, e, n, i, r) }, e.prototype.isInStrokeOrPath = function (t, e, n, i, r) { return !1 }, e.prototype.getHitLineWidth = function () { if (!this.isStroke()) return 0; var t = this.attrs; return t.lineWidth + t.lineAppendWidth }, e }(o.AbstractShape), c = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, r: 0 }) }, e.prototype.isInStrokeOrPath = function (t, e, n, i, r) { var o = this.attr(), s = o.x, u = o.y, l = o.r, c = r / 2, h = Object(a.b)(s, u, t, e); return i && n ? h <= l + c : i ? h <= l : !!n && (h >= l - c && h <= l + c) }, e.prototype.createPath = function (t) { var e = this.attr(), n = e.x, i = e.y, r = e.r; t.beginPath(), t.arc(n, i, r, 0, 2 * Math.PI, !1), t.closePath() }, e }(l); function h(t, e, n, i) { return t / (n * n) + e / (i * i) } var f = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, rx: 0, ry: 0 }) }, e.prototype.isInStrokeOrPath = function (t, e, n, i, r) { var o = this.attr(), a = r / 2, s = o.x, u = o.y, l = o.rx, c = o.ry, f = (t - s) * (t - s), p = (e - u) * (e - u); return i && n ? h(f, p, l + a, c + a) <= 1 : i ? h(f, p, l, c) <= 1 : !!n && (h(f, p, l - a, c - a) >= 1 && h(f, p, l + a, c + a) <= 1) }, e.prototype.createPath = function (t) { var e = this.attr(), n = e.x, i = e.y, r = e.rx, o = e.ry; if (t.beginPath(), t.ellipse) t.ellipse(n, i, r, o, 0, 0, 2 * Math.PI, !1); else { var a = r > o ? r : o, s = r > o ? 1 : r / o, u = r > o ? o / r : 1; t.save(), t.translate(n, i), t.scale(s, u), t.arc(0, 0, a, 0, 2 * Math.PI), t.restore(), t.closePath() } }, e }(l); function p(t) { return t instanceof HTMLElement && Object(a.k)(t.nodeName) && "CANVAS" === t.nodeName.toUpperCase() } var d = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, width: 0, height: 0 }) }, e.prototype.initAttrs = function (t) { this._setImage(t.img) }, e.prototype.isStroke = function () { return !1 }, e.prototype.isOnlyHitBox = function () { return !0 }, e.prototype._afterLoading = function () { if (!0 === this.get("toDraw")) { var t = this.get("canvas"); t ? t.draw() : this.createPath(this.get("context")) } }, e.prototype._setImage = function (t) { var e = this, n = this.attrs; if (Object(a.k)(t)) { var i = new Image; i.onload = function () { if (e.destroyed) return !1; e.attr("img", i), e.set("loading", !1), e._afterLoading(); var t = e.get("callback"); t && t.call(e) }, i.crossOrigin = "Anonymous", i.src = t, this.set("loading", !0) } else t instanceof Image ? (n.width || (n.width = t.width), n.height || (n.height = t.height)) : p(t) && (n.width || (n.width = Number(t.getAttribute("width"))), n.height || (n.height, Number(t.getAttribute("height")))) }, e.prototype.onAttrChange = function (e, n, i) { t.prototype.onAttrChange.call(this, e, n, i), "img" === e && this._setImage(n) }, e.prototype.createPath = function (t) { if (this.get("loading")) return this.set("toDraw", !0), void this.set("context", t); var e = this.attr(), n = e.x, i = e.y, r = e.width, o = e.height, s = e.sx, u = e.sy, l = e.swidth, c = e.sheight, h = e.img; (h instanceof Image || p(h)) && (Object(a.i)(s) || Object(a.i)(u) || Object(a.i)(l) || Object(a.i)(c) ? t.drawImage(h, n, i, r, o) : t.drawImage(h, s, u, l, c, n, i, r, o)) }, e }(l), g = n(12); function y(t, e, n, i, r, o, a) { var s = Math.min(t, n), u = Math.max(t, n), l = Math.min(e, i), c = Math.max(e, i), h = r / 2; return o >= s - h && o <= u + h && a >= l - h && a <= c + h && g.c.pointToLine(t, e, n, i, o, a) <= r / 2 } var v = n(23), m = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: !1, endArrow: !1 }) }, e.prototype.initAttrs = function (t) { this.setArrow() }, e.prototype.onAttrChange = function (e, n, i) { t.prototype.onAttrChange.call(this, e, n, i), this.setArrow() }, e.prototype.setArrow = function () { var t = this.attr(), e = t.x1, n = t.y1, i = t.x2, r = t.y2, o = t.startArrow, a = t.endArrow; o && v.b(this, t, i, r, e, n), a && v.a(this, t, e, n, i, r) }, e.prototype.isInStrokeOrPath = function (t, e, n, i, r) { if (!n || !r) return !1; var o = this.attr(); return y(o.x1, o.y1, o.x2, o.y2, r, t, e) }, e.prototype.createPath = function (t) { var e = this.attr(), n = e.x1, i = e.y1, r = e.x2, o = e.y2, a = e.startArrow, s = e.endArrow, u = { dx: 0, dy: 0 }, l = { dx: 0, dy: 0 }; a && a.d && (u = v.c(n, i, r, o, e.startArrow.d)), s && s.d && (l = v.c(n, i, r, o, e.endArrow.d)), t.beginPath(), t.moveTo(n + u.dx, i + u.dy), t.lineTo(r - l.dx, o - l.dy) }, e.prototype.afterDrawPath = function (t) { var e = this.get("startArrowShape"), n = this.get("endArrowShape"); e && e.draw(t), n && n.draw(t) }, e.prototype.getTotalLength = function () { var t = this.attr(), e = t.x1, n = t.y1, i = t.x2, r = t.y2; return g.c.length(e, n, i, r) }, e.prototype.getPoint = function (t) { var e = this.attr(), n = e.x1, i = e.y1, r = e.x2, o = e.y2; return g.c.pointAt(n, i, r, o, t) }, e }(l), x = n(0), b = n(32), C = { circle: function (t, e, n) { return [["M", t - n, e], ["A", n, n, 0, 1, 0, t + n, e], ["A", n, n, 0, 1, 0, t - n, e]] }, square: function (t, e, n) { return [["M", t - n, e - n], ["L", t + n, e - n], ["L", t + n, e + n], ["L", t - n, e + n], ["Z"]] }, diamond: function (t, e, n) { return [["M", t - n, e], ["L", t, e - n], ["L", t + n, e], ["L", t, e + n], ["Z"]] }, triangle: function (t, e, n) { var i = n * Math.sin(1 / 3 * Math.PI); return [["M", t - n, e + i], ["L", t, e - i], ["L", t + n, e + i], ["Z"]] }, "triangle-down": function (t, e, n) { var i = n * Math.sin(1 / 3 * Math.PI); return [["M", t - n, e - i], ["L", t + n, e - i], ["L", t, e + i], ["Z"]] } }, _ = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.initAttrs = function (t) { this._resetParamsCache() }, e.prototype._resetParamsCache = function () { this.set("paramsCache", {}) }, e.prototype.onAttrChange = function (e, n, i) { t.prototype.onAttrChange.call(this, e, n, i), -1 !== ["symbol", "x", "y", "r", "radius"].indexOf(e) && this._resetParamsCache() }, e.prototype.isOnlyHitBox = function () { return !0 }, e.prototype._getR = function (t) { return Object(x.isNil)(t.r) ? t.radius : t.r }, e.prototype._getPath = function () { var t, n, i = this.attr(), r = i.x, o = i.y, s = i.symbol || "circle", u = this._getR(i); if (Object(a.h)(s)) n = (t = s)(r, o, u), n = Object(b.path2Absolute)(n); else { if (!(t = e.Symbols[s])) return console.warn(s + " marker is not supported."), null; n = t(r, o, u) } return n }, e.prototype.createPath = function (t) { var e = this._getPath(), n = this.get("paramsCache"); Object(s.e)(this, t, { path: e }, n) }, e.Symbols = C, e }(l); function O(t, e, n) { var i = Object(o.getOffScreenContext)(); return t.createPath(i), i.isPointInPath(e, n) } function M(t) { return Math.abs(t) < 1e-6 ? 0 : t < 0 ? -1 : 1 } function w(t, e, n) { return (n[0] - t[0]) * (e[1] - t[1]) == (e[0] - t[0]) * (n[1] - t[1]) && Math.min(t[0], e[0]) <= n[0] && n[0] <= Math.max(t[0], e[0]) && Math.min(t[1], e[1]) <= n[1] && n[1] <= Math.max(t[1], e[1]) } function S(t, e, n) { var i = !1, r = t.length; if (r <= 2) return !1; for (var o = 0; o < r; o++) { var a = t[o], s = t[(o + 1) % r]; if (w(a, s, [e, n])) return !0; M(a[1] - n) > 0 != M(s[1] - n) > 0 && M(e - (n - a[1]) * (a[0] - s[0]) / (a[1] - s[1]) - a[0]) < 0 && (i = !i) } return i } var A = n(6), P = n(69); function I(t, e, n, i, r, o, s, u) { var l = (Math.atan2(u - e, s - t) + 2 * Math.PI) % (2 * Math.PI); if (l < i || l > r) return !1; var c = { x: t + n * Math.cos(l), y: e + n * Math.sin(l) }; return Object(a.b)(c.x, c.y, s, u) <= o / 2 } var T = A.ext.transform; var E = Object(r.__assign)({ hasArc: function (t) { for (var e = !1, n = t.length, i = 0; i < n; i++) { var r = t[i][0]; if ("C" === r || "A" === r || "Q" === r) { e = !0; break } } return e }, extractPolygons: function (t) { for (var e = t.length, n = [], i = [], r = [], o = 0; o < e; o++) { var a = t[o], s = a[0]; "M" === s ? (r.length && (i.push(r), r = []), r.push([a[1], a[2]])) : "Z" === s ? r.length && (n.push(r), r = []) : r.push([a[1], a[2]]) } return r.length > 0 && i.push(r), { polygons: n, polylines: i } }, isPointInStroke: function (t, e, n, i, r) { for (var o = !1, s = e / 2, u = 0; u < t.length; u++) { var l = t[u], c = l.currentPoint, h = l.params, f = l.prePoint, p = l.box; if (!p || Object(a.e)(p.x - s, p.y - s, p.width + e, p.height + e, n, i)) { switch (l.command) { case "L": case "Z": o = y(f[0], f[1], c[0], c[1], e, n, i); break; case "Q": o = g.e.pointDistance(f[0], f[1], h[1], h[2], h[3], h[4], n, i) <= e / 2; break; case "C": o = g.b.pointDistance(f[0], f[1], h[1], h[2], h[3], h[4], h[5], h[6], n, i, r) <= e / 2; break; case "A": var d = l.arcParams, v = d.cx, m = d.cy, x = d.rx, b = d.ry, C = d.startAngle, _ = d.endAngle, O = d.xRotation, M = [n, i, 1], w = x > b ? x : b, S = T(null, [["t", -v, -m], ["r", -O], ["s", 1 / (x > b ? 1 : x / b), 1 / (x > b ? b / x : 1)]]); P.transformMat3(M, M, S), o = I(0, 0, w, C, _, e, M[0], M[1]) }if (o) break } } return o } }, o.PathUtil); function j(t, e, n) { for (var i = !1, r = 0; r < t.length; r++) { if (i = S(t[r], e, n)) break } return i } var L = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { startArrow: !1, endArrow: !1 }) }, e.prototype.initAttrs = function (t) { this._setPathArr(t.path), this.setArrow() }, e.prototype.onAttrChange = function (e, n, i) { t.prototype.onAttrChange.call(this, e, n, i), "path" === e && this._setPathArr(n), this.setArrow() }, e.prototype._setPathArr = function (t) { this.attrs.path = Object(b.path2Absolute)(t); var e = E.hasArc(t); this.set("hasArc", e), this.set("paramsCache", {}), this.set("segments", null), this.set("curve", null), this.set("tCache", null), this.set("totalLength", null) }, e.prototype.getSegments = function () { var t = this.get("segements"); return t || (t = Object(b.path2Segments)(this.attr("path")), this.set("segments", t)), t }, e.prototype.setArrow = function () { var t = this.attr(), e = t.startArrow, n = t.endArrow; if (e) { var i = this.getStartTangent(); v.b(this, t, i[0][0], i[0][1], i[1][0], i[1][1]) } if (n) { i = this.getEndTangent(); v.a(this, t, i[0][0], i[0][1], i[1][0], i[1][1]) } }, e.prototype.isInStrokeOrPath = function (t, e, n, i, r) { var o = this.getSegments(), a = this.get("hasArc"), s = !1; if (n) { var u = this.getTotalLength(); s = E.isPointInStroke(o, r, t, e, u) } if (!s && i) if (a) s = O(this, t, e); else { var l = this.attr("path"), c = E.extractPolygons(l); s = j(c.polygons, t, e) || j(c.polylines, t, e) } return s }, e.prototype.createPath = function (t) { var e = this.attr(), n = this.get("paramsCache"); Object(s.e)(this, t, e, n) }, e.prototype.afterDrawPath = function (t) { var e = this.get("startArrowShape"), n = this.get("endArrowShape"); e && e.draw(t), n && n.draw(t) }, e.prototype.getTotalLength = function () { var t = this.get("totalLength"); return Object(x.isNil)(t) ? (this._calculateCurve(), this._setTcache(), this.get("totalLength")) : t }, e.prototype.getPoint = function (t) { var e, n, i = this.get("tCache"); i || (this._calculateCurve(), this._setTcache(), i = this.get("tCache")); var r = this.get("curve"); if (!i || 0 === i.length) return r ? { x: r[0][1], y: r[0][2] } : null; Object(x.each)(i, (function (i, r) { t >= i[0] && t <= i[1] && (e = (t - i[0]) / (i[1] - i[0]), n = r) })); var o = r[n]; if (Object(x.isNil)(o) || Object(x.isNil)(n)) return null; var a = o.length, s = r[n + 1]; return g.b.pointAt(o[a - 2], o[a - 1], s[1], s[2], s[3], s[4], s[5], s[6], e) }, e.prototype._calculateCurve = function () { var t = this.attr().path; this.set("curve", E.pathToCurve(t)) }, e.prototype._setTcache = function () { var t, e, n, i, r = 0, o = 0, a = [], s = this.get("curve"); s && (Object(x.each)(s, (function (t, e) { n = s[e + 1], i = t.length, n && (r += g.b.length(t[i - 2], t[i - 1], n[1], n[2], n[3], n[4], n[5], n[6]) || 0) })), this.set("totalLength", r), 0 !== r ? (Object(x.each)(s, (function (u, l) { n = s[l + 1], i = u.length, n && ((t = [])[0] = o / r, e = g.b.length(u[i - 2], u[i - 1], n[1], n[2], n[3], n[4], n[5], n[6]), o += e || 0, t[1] = o / r, a.push(t)) })), this.set("tCache", a)) : this.set("tCache", [])) }, e.prototype.getStartTangent = function () { var t, e = this.getSegments(); if (e.length > 1) { var n = e[0].currentPoint, i = e[1].currentPoint, r = e[1].startTangent; t = [], r ? (t.push([n[0] - r[0], n[1] - r[1]]), t.push([n[0], n[1]])) : (t.push([i[0], i[1]]), t.push([n[0], n[1]])) } return t }, e.prototype.getEndTangent = function () { var t, e = this.getSegments(), n = e.length; if (n > 1) { var i = e[n - 2].currentPoint, r = e[n - 1].currentPoint, o = e[n - 1].endTangent; t = [], o ? (t.push([r[0] - o[0], r[1] - o[1]]), t.push([r[0], r[1]])) : (t.push([i[0], i[1]]), t.push([r[0], r[1]])) } return t }, e }(l); function B(t, e, n, i, r) { var o = t.length; if (o < 2) return !1; for (var a = 0; a < o - 1; a++) { if (y(t[a][0], t[a][1], t[a + 1][0], t[a + 1][1], e, n, i)) return !0 } if (r) { var s = t[0], u = t[o - 1]; if (y(s[0], s[1], u[0], u[1], e, n, i)) return !0 } return !1 } var k = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.isInStrokeOrPath = function (t, e, n, i, r) { var o = this.attr().points, a = !1; return n && (a = B(o, r, t, e, !0)), !a && i && (a = S(o, t, e)), a }, e.prototype.createPath = function (t) { var e = this.attr().points; if (!(e.length < 2)) { t.beginPath(); for (var n = 0; n < e.length; n++) { var i = e[n]; 0 === n ? t.moveTo(i[0], i[1]) : t.lineTo(i[0], i[1]) } t.closePath() } }, e }(l), D = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { startArrow: !1, endArrow: !1 }) }, e.prototype.initAttrs = function (t) { this.setArrow() }, e.prototype.onAttrChange = function (e, n, i) { t.prototype.onAttrChange.call(this, e, n, i), this.setArrow(), -1 !== ["points"].indexOf(e) && this._resetCache() }, e.prototype._resetCache = function () { this.set("totalLength", null), this.set("tCache", null) }, e.prototype.setArrow = function () { var t = this.attr(), e = this.attrs, n = e.points, i = e.startArrow, r = e.endArrow, o = n.length, a = n[0][0], s = n[0][1], u = n[o - 1][0], l = n[o - 1][1]; i && v.b(this, t, n[1][0], n[1][1], a, s), r && v.a(this, t, n[o - 2][0], n[o - 2][1], u, l) }, e.prototype.isFill = function () { return !1 }, e.prototype.isInStrokeOrPath = function (t, e, n, i, r) { return !(!n || !r) && B(this.attr().points, r, t, e, !1) }, e.prototype.isStroke = function () { return !0 }, e.prototype.createPath = function (t) { var e = this.attr(), n = e.points, i = e.startArrow, r = e.endArrow, o = n.length; if (!(n.length < 2)) { var a, s = n[0][0], u = n[0][1], l = n[o - 1][0], c = n[o - 1][1]; if (i && i.d) s += (a = v.c(s, u, n[1][0], n[1][1], i.d)).dx, u += a.dy; if (r && r.d) l -= (a = v.c(n[o - 2][0], n[o - 2][1], l, c, r.d)).dx, c -= a.dy; t.beginPath(), t.moveTo(s, u); for (var h = 0; h < o - 1; h++) { var f = n[h]; t.lineTo(f[0], f[1]) } t.lineTo(l, c) } }, e.prototype.afterDrawPath = function (t) { var e = this.get("startArrowShape"), n = this.get("endArrowShape"); e && e.draw(t), n && n.draw(t) }, e.prototype.getTotalLength = function () { var t = this.attr().points, e = this.get("totalLength"); return Object(x.isNil)(e) ? (this.set("totalLength", g.d.length(t)), this.get("totalLength")) : e }, e.prototype.getPoint = function (t) { var e, n, i = this.attr().points, r = this.get("tCache"); return r || (this._setTcache(), r = this.get("tCache")), Object(x.each)(r, (function (i, r) { t >= i[0] && t <= i[1] && (e = (t - i[0]) / (i[1] - i[0]), n = r) })), g.c.pointAt(i[n][0], i[n][1], i[n + 1][0], i[n + 1][1], e) }, e.prototype._setTcache = function () { var t = this.attr().points; if (t && 0 !== t.length) { var e = this.getTotalLength(); if (!(e <= 0)) { var n, i, r = 0, o = []; Object(x.each)(t, (function (a, s) { t[s + 1] && ((n = [])[0] = r / e, i = g.c.length(a[0], a[1], t[s + 1][0], t[s + 1][1]), r += i, n[1] = r / e, o.push(n)) })), this.set("tCache", o) } } }, e.prototype.getStartTangent = function () { var t = this.attr().points, e = []; return e.push([t[1][0], t[1][1]]), e.push([t[0][0], t[0][1]]), e }, e.prototype.getEndTangent = function () { var t = this.attr().points, e = t.length - 1, n = []; return n.push([t[e - 1][0], t[e - 1][1]]), n.push([t[e][0], t[e][1]]), n }, e }(l), R = n(75); var F = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, width: 0, height: 0, radius: 0 }) }, e.prototype.isInStrokeOrPath = function (t, e, n, i, r) { var o = this.attr(), s = o.x, u = o.y, l = o.width, c = o.height, h = o.radius; if (h) { var f = !1; return n && (f = function (t, e, n, i, r, o, a, s) { return y(t + r, e, t + n - r, e, o, a, s) || y(t + n, e + r, t + n, e + i - r, o, a, s) || y(t + n - r, e + i, t + r, e + i, o, a, s) || y(t, e + i - r, t, e + r, o, a, s) || I(t + n - r, e + r, r, 1.5 * Math.PI, 2 * Math.PI, o, a, s) || I(t + n - r, e + i - r, r, 0, .5 * Math.PI, o, a, s) || I(t + r, e + i - r, r, .5 * Math.PI, Math.PI, o, a, s) || I(t + r, e + r, r, Math.PI, 1.5 * Math.PI, o, a, s) }(s, u, l, c, h, r, t, e)), !f && i && (f = O(this, t, e)), f } var p = r / 2; return i && n ? Object(a.e)(s - p, u - p, l + p, c + p, t, e) : i ? Object(a.e)(s, u, l, c, t, e) : n ? function (t, e, n, i, r, o, s) { var u = r / 2; return Object(a.e)(t - u, e - u, n, r, o, s) || Object(a.e)(t + n - u, e - u, r, i, o, s) || Object(a.e)(t + u, e + i - u, n, r, o, s) || Object(a.e)(t - u, e + u, r, i, o, s) }(s, u, l, c, r, t, e) : void 0 }, e.prototype.createPath = function (t) { var e = this.attr(), n = e.x, i = e.y, r = e.width, o = e.height, a = e.radius; if (t.beginPath(), 0 === a) t.rect(n, i, r, o); else { var s = Object(R.a)(a), u = s[0], l = s[1], c = s[2], h = s[3]; t.moveTo(n + u, i), t.lineTo(n + r - l, i), 0 !== l && t.arc(n + r - l, i + l, l, -Math.PI / 2, 0), t.lineTo(n + r, i + o - c), 0 !== c && t.arc(n + r - c, i + o - c, c, 0, Math.PI / 2), t.lineTo(n + h, i + o), 0 !== h && t.arc(n + h, i + o - h, h, Math.PI / 2, Math.PI), t.lineTo(n, i + u), 0 !== u && t.arc(n + u, i + u, u, Math.PI, 1.5 * Math.PI), t.closePath() } }, e }(l), N = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: "sans-serif", fontStyle: "normal", fontWeight: "normal", fontVariant: "normal", textAlign: "start", textBaseline: "bottom" }) }, e.prototype.isOnlyHitBox = function () { return !0 }, e.prototype.initAttrs = function (t) { this._assembleFont(), t.text && this._setText(t.text) }, e.prototype._assembleFont = function () { var t = this.attrs; t.font = Object(o.assembleFont)(t) }, e.prototype._setText = function (t) { var e = null; Object(a.k)(t) && -1 !== t.indexOf("\n") && (e = t.split("\n")), this.set("textArr", e) }, e.prototype.onAttrChange = function (e, n, i) { t.prototype.onAttrChange.call(this, e, n, i), e.startsWith("font") && this._assembleFont(), "text" === e && this._setText(n) }, e.prototype._getSpaceingY = function () { var t = this.attrs, e = t.lineHeight, n = 1 * t.fontSize; return e ? e - n : .14 * n }, e.prototype._drawTextArr = function (t, e, n) { var i, r = this.attrs, s = r.textBaseline, u = r.x, l = r.y, c = 1 * r.fontSize, h = this._getSpaceingY(), f = Object(o.getTextHeight)(r.text, r.fontSize, r.lineHeight); Object(a.c)(e, (function (e, r) { i = l + r * (h + c) - f + c, "middle" === s && (i += f - c - (f - c) / 2), "top" === s && (i += f - c), n ? t.fillText(e, u, i) : t.strokeText(e, u, i) })) }, e.prototype._drawText = function (t, e) { var n = this.attr(), i = n.x, r = n.y, o = this.get("textArr"); if (o) this._drawTextArr(t, o, e); else { var a = n.text; e ? t.fillText(a, i, r) : t.strokeText(a, i, r) } }, e.prototype.strokeAndFill = function (t) { var e = this.attrs, n = e.lineWidth, i = e.opacity, r = e.strokeOpacity, o = e.fillOpacity; this.isStroke() && n > 0 && (Object(a.i)(r) || 1 === r || (t.globalAlpha = i), this.stroke(t)), this.isFill() && (Object(a.i)(o) || 1 === o ? this.fill(t) : (t.globalAlpha = o, this.fill(t), t.globalAlpha = i)), this.afterDrawPath(t) }, e.prototype.fill = function (t) { this._drawText(t, !0) }, e.prototype.stroke = function (t) { this._drawText(t, !1) }, e }(l) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(108), o = n(100), a = n(0), s = n(38), u = i.__importDefault(n(77)), l = n(14), c = n(33), h = i.__importDefault(n(85)), f = n(87), p = n(15), d = n(171), g = n(120), y = n(172), v = n(26); var m = function (t) { function e(e) { var n = t.call(this, e) || this; n.type = "base", n.attributes = {}, n.elements = [], n.elementsMap = {}, n.animateOption = !0, n.attributeOption = {}, n.lastElementsMap = {}, n.generatePoints = !1, n.beforeMappingData = null, n.adjusts = {}, n.idFields = [], n.hasSorted = !1, n.isCoordinateChanged = !1; var i = e.container, r = e.labelsContainer, o = e.coordinate, a = e.data, s = e.sortable, u = void 0 !== s && s, l = e.visible, c = void 0 === l || l, h = e.theme, f = e.scales, p = void 0 === f ? {} : f, d = e.scaleDefs, g = void 0 === d ? {} : d, y = e.intervalPadding, v = e.dodgePadding, m = e.maxColumnWidth, x = e.minColumnWidth, b = e.columnWidthRatio, C = e.roseWidthRatio, _ = e.multiplePieWidthRatio, O = e.zIndexReversed; return n.container = i, n.labelsContainer = r, n.coordinate = o, n.data = a, n.sortable = u, n.visible = c, n.userTheme = h, n.scales = p, n.scaleDefs = g, n.intervalPadding = y, n.dodgePadding = v, n.maxColumnWidth = m, n.minColumnWidth = x, n.columnWidthRatio = b, n.roseWidthRatio = C, n.multiplePieWidthRatio = _, n.zIndexReversed = O, n } return i.__extends(e, t), e.prototype.position = function (t) { var e = t; a.isPlainObject(t) || (e = { fields: y.parseFields(t) }); var n = a.get(e, "fields"); return 1 === n.length && (n.unshift("1"), a.set(e, "fields", n)), a.set(this.attributeOption, "position", e), this }, e.prototype.color = function (t, e) { return this.createAttrOption("color", t, e), this }, e.prototype.shape = function (t, e) { return this.createAttrOption("shape", t, e), this }, e.prototype.size = function (t, e) { return this.createAttrOption("size", t, e), this }, e.prototype.adjust = function (t) { var e = t; return (a.isString(t) || a.isPlainObject(t)) && (e = [t]), a.each(e, (function (t, n) { a.isObject(t) || (e[n] = { type: t }) })), this.adjustOption = e, this }, e.prototype.style = function (t, e) { if (a.isString(t)) { var n = y.parseFields(t); this.styleOption = { fields: n, callback: e } } else { var i = t, r = (n = i.fields, i.callback), o = i.cfg; this.styleOption = n || r || o ? t : { cfg: t } } return this }, e.prototype.tooltip = function (t, e) { if (a.isString(t)) { var n = y.parseFields(t); this.tooltipOption = { fields: n, callback: e } } else this.tooltipOption = t; return this }, e.prototype.animate = function (t) { return this.animateOption = t, this }, e.prototype.label = function (t, e, n) { if (a.isString(t)) { var i = {}, r = y.parseFields(t); i.fields = r, a.isFunction(e) ? i.callback = e : a.isPlainObject(e) && (i.cfg = e), n && (i.cfg = n), this.labelOption = i } else this.labelOption = t; return this }, e.prototype.state = function (t) { return this.stateOption = t, this }, e.prototype.customInfo = function (t) { return this.customOption = t, this }, e.prototype.init = function (t) { void 0 === t && (t = {}), this.setCfg(t), this.initAttributes(), this.processData(this.data), this.adjustScale() }, e.prototype.update = function (t) { void 0 === t && (t = {}); var e = t.data, n = t.isDataChanged, i = t.isCoordinateChanged, r = this.attributeOption, o = this.lastAttributeOption; a.isEqual(r, o) ? !e || !n && a.isEqual(e, this.data) ? this.setCfg(t) : (this.setCfg(t), this.initAttributes(), this.processData(e)) : this.init(t), this.adjustScale(), this.isCoordinateChanged = i }, e.prototype.paint = function (t) { var e = this; void 0 === t && (t = !1), this.animateOption && (this.animateOption = a.deepMix({}, s.getDefaultAnimateCfg(this.type, this.coordinate), this.animateOption)), this.defaultSize = void 0, this.elements = [], this.elementsMap = {}, this.getOffscreenGroup().clear(); for (var n = this.beforeMappingData, r = this.beforeMapping(n), o = [], u = 0, l = r.length; u < l; u++) { var c = r[u], h = this.mapping(c); o.push(h), this.createElements(h, u, t) } if (this.canDoGroupAnimation(t)) { var f = this.container, p = this.type, d = this.coordinate, g = a.get(this.animateOption, "appear"), y = this.getYScale(), v = d.convert({ x: 0, y: y.scale(this.getYMinValue()) }); s.doGroupAppearAnimate(f, g, p, d, v) } this.labelOption && this.renderLabels(a.flatten(o), t), this.dataArray = o, a.each(this.lastElementsMap, (function (t) { t.animate = e.animateOption, t.destroy() })), this.lastElementsMap = this.elementsMap, this.lastAttributeOption = i.__assign({}, this.attributeOption), !1 === this.visible && this.changeVisible(!1) }, e.prototype.clear = function () { var t = this.container, e = this.geometryLabel, n = this.offscreenGroup; t && t.clear(), e && e.clear(), n && n.clear(), this.scaleDefs = void 0, this.attributes = {}, this.scales = {}, this.elementsMap = {}, this.lastElementsMap = {}, this.elements = [], this.adjusts = {}, this.dataArray = null, this.beforeMappingData = null, this.lastAttributeOption = void 0, this.defaultSize = void 0, this.idFields = [], this.groupScales = void 0, this.hasSorted = !1, this.isCoordinateChanged = !1 }, e.prototype.destroy = function () { this.clear(), this.container.remove(!0), this.offscreenGroup && (this.offscreenGroup.remove(!0), this.offscreenGroup = null), this.geometryLabel && (this.geometryLabel.destroy(), this.geometryLabel = null), this.theme = void 0, this.shapeFactory = void 0, t.prototype.destroy.call(this) }, e.prototype.getGroupScales = function () { return this.groupScales }, e.prototype.getAttribute = function (t) { return this.attributes[t] }, e.prototype.getXScale = function () { return this.getAttribute("position").scales[0] }, e.prototype.getYScale = function () { return this.getAttribute("position").scales[1] }, e.prototype.getGroupAttributes = function () { var t = []; return a.each(this.attributes, (function (e) { l.GROUP_ATTRS.includes(e.type) && t.push(e) })), t }, e.prototype.getDefaultValue = function (t) { var e, n = this.getAttribute(t); return n && a.isEmpty(n.scales) && (e = n.values[0]), e }, e.prototype.getAttributeValues = function (t, e) { for (var n = [], i = t.scales, r = 0, o = i.length; r < o; r++) { var a = i[r], s = a.field; a.isIdentity ? n.push(a.values) : n.push(e[s]) } return t.mapping.apply(t, n) }, e.prototype.getAdjust = function (t) { return this.adjusts[t] }, e.prototype.getShapeMarker = function (t, e) { return this.getShapeFactory().getMarker(t, e) }, e.prototype.getElementsBy = function (t) { return this.elements.filter((function (e) { return t(e) })) }, e.prototype.getElementId = function (t) { var e = (t = a.isArray(t) ? t[0] : t)[l.FIELD_ORIGIN]; if (this.idFields.length) { for (var n = e[this.idFields[0]], i = 1; i < this.idFields.length; i++)n += "-" + e[this.idFields[i]]; return n } var r, o, s = this.type, u = this.getXScale(), c = this.getYScale(), h = u.field || "x", f = e[c.field || "y"]; r = "identity" === u.type ? u.values[0] : e[h], o = "interval" === s || "schema" === s ? "" + r : "line" === s || "area" === s || "path" === s ? s : r + "-" + f; for (var p = this.groupScales, d = (i = 0, p.length); i < d; i++) { o = o + "-" + e[p[i].field] } var g = this.getAdjust("dodge"); if (g) { var y = g.dodgeBy; y && (o = o + "-" + e[y]) } return this.getAdjust("jitter") && (o = o + "-" + t.x + "-" + t.y), o }, e.prototype.getScaleFields = function () { var t = [], e = {}, n = this.attributeOption, i = this.labelOption, r = this.tooltipOption; for (var o in n) if (n.hasOwnProperty(o)) { var s = n[o]; s.fields ? c.uniq(s.fields, t, e) : s.values && c.uniq(s.values, t, e) } return i && i.fields && c.uniq(i.fields, t, e), a.isObject(r) && r.fields && c.uniq(r.fields, t, e), t }, e.prototype.changeVisible = function (e) { t.prototype.changeVisible.call(this, e); for (var n = this.elements, i = 0, r = n.length; i < r; i++) { n[i].changeVisible(e) } e ? (this.container && this.container.show(), this.labelsContainer && this.labelsContainer.show()) : (this.container && this.container.hide(), this.labelsContainer && this.labelsContainer.hide()) }, e.prototype.getGroupFields = function () { for (var t = [], e = {}, n = 0, i = l.GROUP_ATTRS.length; n < i; n++) { var r = l.GROUP_ATTRS[n], o = this.attributeOption[r]; o && o.fields && c.uniq(o.fields, t, e) } return t }, e.prototype.getXYFields = function () { var t = this.attributeOption.position.fields; return [t[0], t[1]] }, e.prototype.getShapes = function () { return this.elements.map((function (t) { return t.shape })) }, e.prototype.getOffscreenGroup = function () { if (!this.offscreenGroup) { var t = this.container.getGroupBase(); this.offscreenGroup = new t({}) } return this.offscreenGroup }, e.prototype.sort = function (t) { if (!this.hasSorted) for (var e = this.getXScale(), n = e.field, i = 0; i < t.length; i++) { t[i].sort((function (t, i) { return e.translate(t[l.FIELD_ORIGIN][n]) - e.translate(i[l.FIELD_ORIGIN][n]) })) } this.hasSorted = !0 }, e.prototype.adjustScale = function () { var t = this.getYScale(); t && this.getAdjust("stack") && this.updateStackRange(t, this.beforeMappingData) }, e.prototype.getShapeFactory = function () { var t = this.shapeType; if (p.getShapeFactory(t)) return this.shapeFactory || (this.shapeFactory = a.clone(p.getShapeFactory(t))), this.shapeFactory.coordinate = this.coordinate, this.shapeFactory.theme = this.theme.geometries[t] || {}, this.shapeFactory }, e.prototype.createShapePointsCfg = function (t) { var e = this.getXScale(), n = this.getYScale(); return { x: this.normalizeValues(t[e.field], e), y: n ? this.normalizeValues(t[n.field], n) : t.y ? t.y : .1, y0: n ? n.scale(this.getYMinValue()) : void 0 } }, e.prototype.createElement = function (t, e) { void 0 === e && (e = !1); var n = this.container, i = this.getDrawCfg(t), r = this.getShapeFactory(), o = new h.default({ shapeFactory: r, container: n, offscreenGroup: this.getOffscreenGroup() }); return o.animate = this.animateOption, o.geometry = this, o.draw(i, e), o }, e.prototype.getDrawCfg = function (t) { var e = t[l.FIELD_ORIGIN], n = { mappingData: t, data: e, x: t.x, y: t.y, color: t.color, size: t.size, isInCircle: this.coordinate.isPolar, customInfo: this.customOption }, i = t.shape; !i && this.getShapeFactory() && (i = this.getShapeFactory().defaultShapeType), n.shape = i; var r = this.theme.geometries[this.shapeType]; n.defaultStyle = a.get(r, [i, "default"], {}).style, !n.defaultStyle && this.getShapeFactory() && (n.defaultStyle = this.getShapeFactory().getDefaultStyle(r)); var o = this.styleOption; return o && (n.style = this.getStyleCfg(o, e)), this.generatePoints && (n.points = t.points, n.nextPoints = t.nextPoints), n }, e.prototype.createElements = function (t, e, n) { void 0 === n && (n = !1); for (var i = this.lastElementsMap, r = this.elementsMap, o = this.elements, a = 0, s = t.length; a < s; a++) { var u = t[a], l = this.getElementId(u); r[l] && (l = l + "-" + e + "-" + a); var c = i[l]; if (c) { var h = this.getDrawCfg(u), f = c.getModel(); (this.isCoordinateChanged || g.isModelChange(h, f)) && (c.animate = this.animateOption, c.update(h)), delete i[l] } else c = this.createElement(u, n); o.push(c), r[l] = c } if (this.zIndexReversed) { var p = o.length; o.forEach((function (t, e) { t.shape.setZIndex(p - e) })) } return o }, e.prototype.getLabelType = function () { var t = this.labelOption, e = this.coordinate, n = this.type, i = e.type, r = e.isTransposed, o = a.get(t, ["cfg", "type"]); return o || (o = "polar" === i ? r ? "pie" : "polar" : "theta" === i ? "pie" : "interval" === n || "polygon" === n ? "interval" : "base"), o }, e.prototype.getYMinValue = function () { var t = this.getYScale(), e = t.min, n = t.max; return e >= 0 ? e : n <= 0 ? n : 0 }, e.prototype.createAttrOption = function (t, e, n) { if (a.isNil(e) || a.isObject(e)) a.isObject(e) && a.isEqual(Object.keys(e), ["values"]) ? a.set(this.attributeOption, t, { fields: e.values }) : a.set(this.attributeOption, t, e); else { var i = {}; a.isNumber(e) ? i.values = [e] : i.fields = y.parseFields(e), n && (a.isFunction(n) ? i.callback = n : i.values = n), a.set(this.attributeOption, t, i) } }, e.prototype.initAttributes = function () { var t = this, e = this.attributes, n = this.attributeOption, r = this.theme, a = this.shapeType; this.groupScales = []; var s = {}, u = function (u) { if (n.hasOwnProperty(u)) { var c = n[u]; if (!c) return { value: void 0 }; var h = i.__assign({}, c), f = h.callback, p = h.values, d = h.fields, g = (void 0 === d ? [] : d).map((function (e) { var n = t.scales[e]; return n.isCategory && !s[e] && l.GROUP_ATTRS.includes(u) && (t.groupScales.push(n), s[e] = !0), n })); h.scales = g, "position" !== u && 1 === g.length && "identity" === g[0].type ? h.values = g[0].values : f || p || ("size" === u ? h.values = r.sizes : "shape" === u ? h.values = r.shapes[a] || [] : "color" === u && (g.length ? h.values = g[0].values.length <= 10 ? r.colors10 : r.colors20 : h.values = r.colors10)); var y = o.getAttribute(u); e[u] = new y(h) } }; for (var c in n) { var h = u(c); if ("object" == typeof h) return h.value } }, e.prototype.processData = function (t) { this.hasSorted = !1; for (var e = this.getAttribute("position").scales.filter((function (t) { return t.isCategory })), n = this.groupData(t), i = [], r = 0, o = n.length; r < o; r++) { for (var a = n[r], s = [], u = 0, c = a.length; u < c; u++) { var h = a[u], f = {}; for (var p in h) f[p] = h[p]; f[l.FIELD_ORIGIN] = h; for (var d = 0, g = e; d < g.length; d++) { var y = g[d], v = y.field; f[v] = y.translate(f[v]) } s.push(f) } i.push(s) } var m = this.adjustData(i); return this.beforeMappingData = m, m }, e.prototype.adjustData = function (t) { var e = this.adjustOption, n = this.intervalPadding, o = this.dodgePadding, s = this.theme, u = this.maxColumnWidth || s.maxColumnWidth, l = this.minColumnWidth || s.minColumnWidth, c = this.columnWidthRatio || s.columnWidthRatio, h = t; if (e) { var f = this.getXScale(), p = this.getYScale(), d = f.field, g = p ? p.field : null, y = v.getXDimensionLength(this.coordinate), m = f.values.length, x = this.getAttribute("size"), b = void 0; x && (b = x.values[0]); for (var C = 0, _ = e.length; C < _; C++) { var O = e[C], M = i.__assign({ xField: d, yField: g, intervalPadding: n, dodgePadding: o, xDimensionLength: y, groupNum: m, defaultSize: b, maxColumnWidth: u, minColumnWidth: l, columnWidthRatio: c }, O), w = O.type; if ("dodge" === w) { var S = []; if (f.isCategory || "identity" === f.type) S.push("x"); else { if (p) throw new Error("dodge is not support linear attribute, please use category attribute!"); S.push("y") } M.adjustNames = S, M.dodgeRatio = c } else if ("stack" === w) { var A = this.coordinate; if (!p) { M.height = A.getHeight(); var P = this.getDefaultValue("size") || 3; M.size = P } !A.isTransposed && a.isNil(M.reverseOrder) && (M.reverseOrder = !0) } var I = new (r.getAdjust(w))(M); h = I.process(h), this.adjusts[w] = I } } return h }, e.prototype.groupData = function (t) { for (var e = this.getGroupScales(), n = this.scaleDefs, i = {}, r = [], o = 0; o < e.length; o++) { var s = e[o].field; r.push(s), a.get(n, [s, "values"]) && (i[s] = n[s].values) } return d.group(t, r, i) }, e.prototype.updateStackRange = function (t, e) { for (var n = a.flatten(e), i = t.field, r = t.min, o = t.max, s = 0; s < n.length; s++) { var u = n[s], l = Math.min.apply(null, u[i]), c = Math.max.apply(null, u[i]); l < r && (r = l), c > o && (o = c) } var h = this.scaleDefs, f = {}; r < t.min && !a.get(h, [i, "min"]) && (f.min = r), o > t.max && !a.get(h, [i, "max"]) && (f.max = o), t.change(f) }, e.prototype.beforeMapping = function (t) { var e = t; if (this.sortable && this.sort(e), this.generatePoints) for (var n = 0, i = e.length; n < i; n++) { var r = e[n]; this.generateShapePoints(r); var o = e[n + 1]; o && (this.generateShapePoints(o), r[0].nextPoints = o[0].points) } return e }, e.prototype.generateShapePoints = function (t) { for (var e = this.getShapeFactory(), n = this.getAttribute("shape"), i = 0; i < t.length; i++) { var r = t[i], o = this.createShapePointsCfg(r), a = n ? this.getAttributeValues(n, r) : null, s = e.getShapePoints(a, o); r.points = s } }, e.prototype.normalizeValues = function (t, e) { var n = []; if (a.isArray(t)) for (var i = 0; i < t.length; i++) { var r = t[i]; n.push(e.scale(r)) } else n = e.scale(t); return n }, e.prototype.mapping = function (t) { for (var e = this.attributes, n = [], i = 0; i < t.length; i++) { var r = t[i], o = { _origin: r[l.FIELD_ORIGIN], points: r.points, nextPoints: r.nextPoints }; for (var s in e) if (e.hasOwnProperty(s)) { var u = e[s], c = u.names, h = this.getAttributeValues(u, r); if (c.length > 1) for (var f = 0; f < h.length; f += 1) { var p = h[f]; o[c[f]] = a.isArray(p) && 1 === p.length ? p[0] : p } else o[c[0]] = 1 === h.length ? h[0] : h } this.convertPoint(o), n.push(o) } return n }, e.prototype.convertPoint = function (t) { var e, n, i, r = t.x, o = t.y, s = this.coordinate; if (a.isArray(r) && a.isArray(o)) { e = [], n = []; for (var u = 0, l = 0, c = r.length, h = o.length; u < c && l < h; u += 1, l += 1)i = s.convert({ x: r[u], y: o[l] }), e.push(i.x), n.push(i.y) } else if (a.isArray(o)) { n = []; for (var f = 0; f < o.length; f++) { var p = o[f]; i = s.convert({ x: r, y: p }), e && e !== i.x ? (a.isArray(e) || (e = [e]), e.push(i.x)) : e = i.x, n.push(i.y) } } else if (a.isArray(r)) { e = []; for (f = 0; f < r.length; f++) { var d = r[f]; i = s.convert({ x: d, y: o }), n && n !== i.y ? (a.isArray(n) || (n = [n]), n.push(i.y)) : n = i.y, e.push(i.x) } } else { var g = s.convert({ x: r, y: o }); e = g.x, n = g.y } t.x = e, t.y = n }, e.prototype.getStyleCfg = function (t, e) { var n = t.fields, i = void 0 === n ? [] : n, r = t.callback, o = t.cfg; if (o) return o; var a = i.map((function (t) { return e[t] })); return r.apply(void 0, a) }, e.prototype.setCfg = function (t) { var e = this, n = t.coordinate, i = t.data, r = t.theme, o = t.scaleDefs; n && (this.coordinate = n), i && (this.data = i), o && (this.scaleDefs = o, this.idFields = [], a.each(o, (function (t, n) { t && t.key && e.idFields.push(n) }))), r && (this.theme = this.userTheme ? a.deepMix({}, r, this.userTheme) : r) }, e.prototype.renderLabels = function (t, e) { void 0 === e && (e = !1); var n = this.geometryLabel; if (!n) { var i = this.getLabelType(); n = new (f.getGeometryLabel(i))(this), this.geometryLabel = n } n.render(t, e); var r = n.labelsRenderer.shapesMap; a.each(this.elementsMap, (function (t, e) { var n = function (t, e) { var n = []; return a.each(e, (function (e, i) { i.split(" ")[0] === t && n.push(e) })), n }(e, r); if (n.length) { t.labelShape = n; for (var i = 0; i < n.length; i++)for (var o = n[i].getChildren(), s = 0; s < o.length; s++) { var u = o[s]; u.cfg.name = ["element", "label"], u.cfg.element = t } } })) }, e.prototype.canDoGroupAnimation = function (t) { return !t && this.animateOption && (void 0 === a.get(this.animateOption, "appear") || a.get(this.animateOption, "appear") && void 0 === a.get(this.animateOption, ["appear", "animation"])) }, e }(u.default); e.default = m }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.doGroupAppearAnimate = e.doAnimate = e.getDefaultAnimateCfg = e.DEFAULT_ANIMATE_CFG = void 0; var i = n(1), r = n(0), o = n(14), a = n(119); e.DEFAULT_ANIMATE_CFG = { appear: { duration: 450, easing: "easeQuadOut" }, update: { duration: 400, easing: "easeQuadInOut" }, enter: { duration: 400, easing: "easeQuadInOut" }, leave: { duration: 350, easing: "easeQuadIn" } }; var s = { interval: function (t) { return { enter: { animation: t.isRect ? t.isTransposed ? "scale-in-x" : "scale-in-y" : "fade-in" }, update: { animation: t.isPolar && t.isTransposed ? "sector-path-update" : null }, leave: { animation: "fade-out" } } }, line: { enter: { animation: "fade-in" }, leave: { animation: "fade-out" } }, path: { enter: { animation: "fade-in" }, leave: { animation: "fade-out" } }, point: { appear: { animation: "zoom-in" }, enter: { animation: "zoom-in" }, leave: { animation: "zoom-out" } }, area: { enter: { animation: "fade-in" }, leave: { animation: "fade-out" } }, polygon: { enter: { animation: "fade-in" }, leave: { animation: "fade-out" } }, schema: { enter: { animation: "fade-in" }, leave: { animation: "fade-out" } }, edge: { enter: { animation: "fade-in" }, leave: { animation: "fade-out" } }, label: { appear: { animation: "fade-in", delay: 450 }, enter: { animation: "fade-in" }, update: { animation: "position-update" }, leave: { animation: "fade-out" } } }, u = { line: function () { return { animation: "wave-in" } }, area: function () { return { animation: "wave-in" } }, path: function () { return { animation: "fade-in" } }, interval: function (t) { var e; return t.isRect ? e = t.isTransposed ? "grow-in-x" : "grow-in-y" : (e = "grow-in-xy", t.isPolar && t.isTransposed && (e = "wave-in")), { animation: e } }, schema: function (t) { return { animation: t.isRect ? t.isTransposed ? "grow-in-x" : "grow-in-y" : "grow-in-xy" } }, polygon: function () { return { animation: "fade-in", duration: 500 } }, edge: function () { return { animation: "fade-in" } } }; e.getDefaultAnimateCfg = function (t, n, i) { var o = s[t]; return o && (r.isFunction(o) && (o = o(n)), o = r.deepMix({}, e.DEFAULT_ANIMATE_CFG, o), i) ? o[i] : o }, e.doAnimate = function (t, e, n) { var i = r.get(t.get("origin"), "data", o.FIELD_ORIGIN), s = e.animation, u = function (t, e) { return { delay: r.isFunction(t.delay) ? t.delay(e) : t.delay, easing: r.isFunction(t.easing) ? t.easing(e) : t.easing, duration: r.isFunction(t.duration) ? t.duration(e) : t.duration, callback: t.callback } }(e, i); if (s) { var l = a.getAnimation(s); l && l(t, u, n) } else t.animate(n.toAttrs, u) }, e.doGroupAppearAnimate = function (t, n, o, s, l) { if (u[o]) { var c = u[o](s), h = a.getAnimation(r.get(c, "animation", "")); if (h) { var f = i.__assign(i.__assign(i.__assign({}, e.DEFAULT_ANIMATE_CFG.appear), c), n); t.stopAnimate(), h(t, f, { coordinate: s, minYPoint: l, toAttrs: null }) } } } }, function (t, e, n) { "use strict"; var i = n(1), r = n(9), o = n(0), a = n(2), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { container: null, containerTpl: "<div></div>", updateAutoRender: !0, containerClassName: "", parent: null }) }, e.prototype.getContainer = function () { return this.get("container") }, e.prototype.show = function () { this.get("container").style.display = "", this.set("visible", !0) }, e.prototype.hide = function () { this.get("container").style.display = "none", this.set("visible", !1) }, e.prototype.setCapture = function (t) { var e = t ? "auto" : "none"; this.getContainer().style.pointerEvents = e, this.set("capture", t) }, e.prototype.getBBox = function () { var t = this.getContainer(), e = parseFloat(t.style.left) || 0, n = parseFloat(t.style.top) || 0; return Object(a.b)(e, n, t.clientWidth, t.clientHeight) }, e.prototype.clear = function () { var t = this.get("container"); Object(a.a)(t) }, e.prototype.destroy = function () { this.removeEvent(), this.removeDom(), t.prototype.destroy.call(this) }, e.prototype.init = function () { t.prototype.init.call(this), this.initContainer(), this.initDom(), this.resetStyles(), this.applyStyles(), this.initEvent(), this.initCapture(), this.initVisible() }, e.prototype.initCapture = function () { this.setCapture(this.get("capture")) }, e.prototype.initVisible = function () { this.get("visible") ? this.show() : this.hide() }, e.prototype.initDom = function () { }, e.prototype.initContainer = function () { var t = this.get("container"); if (Object(o.isNil)(t)) { t = this.createDom(); var e = this.get("parent"); Object(o.isString)(e) && (e = document.getElementById(e), this.set("parent", e)), e.appendChild(t), this.set("container", t) } else Object(o.isString)(t) && (t = document.getElementById(t), this.set("container", t)); this.get("parent") || this.set("parent", t.parentNode) }, e.prototype.resetStyles = function () { var t = this.get("domStyles"), e = this.get("defaultStyles"); t = t ? Object(o.deepMix)({}, e, t) : e, this.set("domStyles", t) }, e.prototype.applyStyles = function () { var t = this.get("domStyles"); if (t) { var e = this.getContainer(); this.applyChildrenStyles(e, t); var n = this.get("containerClassName"); if (n && Object(a.h)(e, n)) { var i = t[n]; Object(r.modifyCSS)(e, i) } } }, e.prototype.applyChildrenStyles = function (t, e) { Object(o.each)(e, (function (e, n) { var i = t.getElementsByClassName(n); Object(o.each)(i, (function (t) { Object(r.modifyCSS)(t, e) })) })) }, e.prototype.applyStyle = function (t, e) { var n = this.get("domStyles"); Object(r.modifyCSS)(e, n[t]) }, e.prototype.createDom = function () { var t = this.get("containerTpl"); return Object(r.createDom)(t) }, e.prototype.initEvent = function () { }, e.prototype.removeDom = function () { var t = this.get("container"); t && t.parentNode && t.parentNode.removeChild(t) }, e.prototype.removeEvent = function () { }, e.prototype.updateInner = function (t) { Object(o.hasKey)(t, "domStyles") && (this.resetStyles(), this.applyStyles()), this.resetPosition() }, e.prototype.resetPosition = function () { }, e }(n(52).a); e.a = s }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return i })), n.d(e, "d", (function () { return r })), n.d(e, "b", (function () { return o })), n.d(e, "c", (function () { return a })); var i = 0, r = .5, o = .5, a = .05 }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.Facet = void 0; var i = n(0), r = n(14), o = n(79), a = function () { function t(t, e) { this.destroyed = !1, this.facets = [], this.view = t, this.cfg = i.deepMix({}, this.getDefaultCfg(), e) } return t.prototype.init = function () { this.container || (this.container = this.createContainer()); var t = this.view.getData(); this.facets = this.generateFacets(t) }, t.prototype.render = function () { this.renderViews() }, t.prototype.update = function () { }, t.prototype.clear = function () { this.clearFacetViews() }, t.prototype.destroy = function () { this.clear(), this.container && (this.container.remove(!0), this.container = void 0), this.destroyed = !0, this.view = void 0, this.facets = [] }, t.prototype.facetToView = function (t) { var e = t.region, n = t.data, i = t.padding, r = void 0 === i ? this.cfg.padding : i, o = this.view.createView({ region: e, padding: r }); o.data(n || []), t.view = o, this.beforeEachView(o, t); var a = this.cfg.eachView; return a && a(o, t), this.afterEachView(o, t), o }, t.prototype.createContainer = function () { return this.view.getLayer(r.LAYER.FORE).addGroup() }, t.prototype.renderViews = function () { this.createFacetViews() }, t.prototype.createFacetViews = function () { var t = this; return this.facets.map((function (e) { return t.facetToView(e) })) }, t.prototype.clearFacetViews = function () { var t = this; i.each(this.facets, (function (e) { e.view && (t.view.removeView(e.view), e.view = void 0) })) }, t.prototype.getFieldValues = function (t, e) { var n = [], r = {}; return i.each(t, (function (t) { var o = t[e]; i.isNil(o) || r[o] || (n.push(o), r[o] = !0) })), n }, t.prototype.getRegion = function (t, e, n, i) { var r = 1 / (0 === e ? 1 : e), o = 1 / (0 === t ? 1 : t); return { start: { x: r * n, y: o * i }, end: { x: r * (n + 1), y: o * (i + 1) } } }, t.prototype.getDefaultCfg = function () { return { eachView: void 0, showTitle: !0, padding: 10, fields: [] } }, t.prototype.getDefaultTitleCfg = function () { return { style: { fontSize: 14, fill: "#666", fontFamily: this.view.getTheme().fontFamily } } }, t.prototype.processAxis = function (t, e) { var n = t.getOptions(), r = n.coordinate, a = t.geometries; if ("rect" === i.get(r, "type", "rect") && a.length) { i.isNil(n.axes) && (n.axes = {}); var s = n.axes, u = a[0].getXYFields(), l = u[0], c = u[1], h = o.getAxisOption(s, l), f = o.getAxisOption(s, c); !1 !== h && (n.axes[l] = this.getXAxisOption(l, s, h, e)), !1 !== f && (n.axes[c] = this.getYAxisOption(c, s, f, e)) } }, t.prototype.getFacetDataFilter = function (t) { return function (e) { return i.every(t, (function (t) { var n = t.field, r = t.value; return !(!i.isNil(r) && n) || e[n] === r })) } }, t }(); e.Facet = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.Controller = void 0; var i = n(0), r = function () { function t(t) { this.visible = !0, this.components = [], this.view = t } return t.prototype.clear = function (t) { i.each(this.components, (function (t) { t.component.destroy() })), this.components = [] }, t.prototype.destroy = function () { this.clear() }, t.prototype.getComponents = function () { return this.components }, t.prototype.changeVisible = function (t) { this.visible !== t && (this.components.forEach((function (e) { t ? e.component.show() : e.component.hide() })), this.visible = t) }, t }(); e.Controller = r }, function (t, e, n) { "use strict"; n.d(e, "b", (function () { return o })), n.d(e, "c", (function () { return a })), n.d(e, "a", (function () { return s })); var i = n(11), r = n(70); function o(t, e, n) { var r = 1; return Object(i.h)(t) && (r = t.split("\n").length), r > 1 ? e * r + function (t, e) { return e ? e - t : .14 * t }(e, n) * (r - 1) : e } function a(t, e) { var n = Object(r.a)(), o = 0; if (Object(i.e)(t) || "" === t) return o; if (n.save(), n.font = e, Object(i.h)(t) && t.includes("\n")) { var a = t.split("\n"); Object(i.a)(a, (function (t) { var e = n.measureText(t).width; o < e && (o = e) })) } else o = n.measureText(t).width; return n.restore(), o } function s(t) { var e = t.fontSize, n = t.fontFamily, i = t.fontWeight; return [t.fontStyle, t.fontVariant, i, e + "px", n].join(" ").trim() } }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Category", (function () { return c })), n.d(e, "Identity", (function () { return rt })), n.d(e, "Linear", (function () { return W })), n.d(e, "Log", (function () { return Q })), n.d(e, "Pow", (function () { return K })), n.d(e, "Time", (function () { return $ })), n.d(e, "TimeCat", (function () { return z })), n.d(e, "Quantile", (function () { return tt })), n.d(e, "Quantize", (function () { return J })), n.d(e, "Scale", (function () { return u })), n.d(e, "getScale", (function () { return nt })), n.d(e, "registerScale", (function () { return it })), n.d(e, "getTickMethod", (function () { return a })), n.d(e, "registerTickMethod", (function () { return s })); var i = {}; n.r(i), n.d(i, "default", (function () { return D })), n.d(i, "assign", (function () { return y })), n.d(i, "format", (function () { return B })), n.d(i, "parse", (function () { return k })), n.d(i, "defaultI18n", (function () { return b })), n.d(i, "setGlobalDateI18n", (function () { return _ })), n.d(i, "setGlobalDateMasks", (function () { return L })); var r = n(0), o = {}; function a(t) { return o[t] } function s(t, e) { o[t] = e } var u = function () { function t(t) { this.type = "base", this.isCategory = !1, this.isLinear = !1, this.isContinuous = !1, this.isIdentity = !1, this.values = [], this.range = [0, 1], this.ticks = [], this.__cfg__ = t, this.initCfg(), this.init() } return t.prototype.translate = function (t) { return t }, t.prototype.change = function (t) { Object(r.assign)(this.__cfg__, t), this.init() }, t.prototype.clone = function () { return this.constructor(this.__cfg__) }, t.prototype.getTicks = function () { var t = this; return Object(r.map)(this.ticks, (function (e, n) { return Object(r.isObject)(e) ? e : { text: t.getText(e, n), tickValue: e, value: t.scale(e) } })) }, t.prototype.getText = function (t, e) { var n = this.formatter, i = n ? n(t, e) : t; return Object(r.isNil)(i) || !Object(r.isFunction)(i.toString) ? "" : i.toString() }, t.prototype.getConfig = function (t) { return this.__cfg__[t] }, t.prototype.init = function () { Object(r.assign)(this, this.__cfg__), this.setDomain(), Object(r.isEmpty)(this.getConfig("ticks")) && (this.ticks = this.calculateTicks()) }, t.prototype.initCfg = function () { }, t.prototype.setDomain = function () { }, t.prototype.calculateTicks = function () { var t = this.tickMethod, e = []; if (Object(r.isString)(t)) { var n = a(t); if (!n) throw new Error("There is no method to to calculate ticks!"); e = n(this) } else Object(r.isFunction)(t) && (e = t(this)); return e }, t.prototype.rangeMin = function () { return Object(r.head)(this.range) }, t.prototype.rangeMax = function () { return Object(r.last)(this.range) }, t.prototype.calcPercent = function (t, e, n) { return Object(r.isNumber)(t) ? (t - e) / (n - e) : NaN }, t.prototype.calcValue = function (t, e, n) { return e + t * (n - e) }, t }(), l = n(1), c = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "cat", e.isCategory = !0, e.cache = new Map, e } return Object(l.__extends)(e, t), e.prototype.translate = function (t) { if (this.cache.has(t)) return this.cache.get(t); var e = Object(r.indexOf)(this.values, t); return -1 === e && (e = Object(r.isNumber)(t) ? t : NaN), this.cache.set(t, e), e }, e.prototype.scale = function (t) { var e = this.translate(t), n = this.calcPercent(e, this.min, this.max); return this.calcValue(n, this.rangeMin(), this.rangeMax()) }, e.prototype.invert = function (t) { var e = this.max - this.min, n = this.calcPercent(t, this.rangeMin(), this.rangeMax()), i = Math.round(e * n) + this.min; return i < this.min || i > this.max ? NaN : this.values[i] }, e.prototype.getText = function (e) { for (var n = [], i = 1; i < arguments.length; i++)n[i - 1] = arguments[i]; var o = e; return Object(r.isNumber)(e) && !this.values.includes(e) && (o = this.values[o]), t.prototype.getText.apply(this, Object(l.__spreadArrays)([o], n)) }, e.prototype.initCfg = function () { this.tickMethod = "cat" }, e.prototype.setDomain = function () { if (Object(r.isNil)(this.getConfig("min")) && (this.min = 0), Object(r.isNil)(this.getConfig("max"))) { var t = this.values.length; this.max = t > 1 ? t - 1 : t } this.cache && this.cache.clear() }, e }(u), h = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g, f = "[^\\s]+", p = /\[([^]*?)\]/gm; function d(t, e) { for (var n = [], i = 0, r = t.length; i < r; i++)n.push(t[i].substr(0, e)); return n } var g = function (t) { return function (e, n) { var i = n[t].map((function (t) { return t.toLowerCase() })).indexOf(e.toLowerCase()); return i > -1 ? i : null } }; function y(t) { for (var e = [], n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; for (var i = 0, r = e; i < r.length; i++) { var o = r[i]; for (var a in o) t[a] = o[a] } return t } var v = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], m = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], x = d(m, 3), b = { dayNamesShort: d(v, 3), dayNames: v, monthNamesShort: x, monthNames: m, amPm: ["am", "pm"], DoFn: function (t) { return t + ["th", "st", "nd", "rd"][t % 10 > 3 ? 0 : (t - t % 10 != 10 ? 1 : 0) * t % 10] } }, C = y({}, b), _ = function (t) { return C = y(C, t) }, O = function (t) { return t.replace(/[|\\{()[^$+*?.-]/g, "\\$&") }, M = function (t, e) { for (void 0 === e && (e = 2), t = String(t); t.length < e;)t = "0" + t; return t }, w = { D: function (t) { return String(t.getDate()) }, DD: function (t) { return M(t.getDate()) }, Do: function (t, e) { return e.DoFn(t.getDate()) }, d: function (t) { return String(t.getDay()) }, dd: function (t) { return M(t.getDay()) }, ddd: function (t, e) { return e.dayNamesShort[t.getDay()] }, dddd: function (t, e) { return e.dayNames[t.getDay()] }, M: function (t) { return String(t.getMonth() + 1) }, MM: function (t) { return M(t.getMonth() + 1) }, MMM: function (t, e) { return e.monthNamesShort[t.getMonth()] }, MMMM: function (t, e) { return e.monthNames[t.getMonth()] }, YY: function (t) { return M(String(t.getFullYear()), 4).substr(2) }, YYYY: function (t) { return M(t.getFullYear(), 4) }, h: function (t) { return String(t.getHours() % 12 || 12) }, hh: function (t) { return M(t.getHours() % 12 || 12) }, H: function (t) { return String(t.getHours()) }, HH: function (t) { return M(t.getHours()) }, m: function (t) { return String(t.getMinutes()) }, mm: function (t) { return M(t.getMinutes()) }, s: function (t) { return String(t.getSeconds()) }, ss: function (t) { return M(t.getSeconds()) }, S: function (t) { return String(Math.round(t.getMilliseconds() / 100)) }, SS: function (t) { return M(Math.round(t.getMilliseconds() / 10), 2) }, SSS: function (t) { return M(t.getMilliseconds(), 3) }, a: function (t, e) { return t.getHours() < 12 ? e.amPm[0] : e.amPm[1] }, A: function (t, e) { return t.getHours() < 12 ? e.amPm[0].toUpperCase() : e.amPm[1].toUpperCase() }, ZZ: function (t) { var e = t.getTimezoneOffset(); return (e > 0 ? "-" : "+") + M(100 * Math.floor(Math.abs(e) / 60) + Math.abs(e) % 60, 4) }, Z: function (t) { var e = t.getTimezoneOffset(); return (e > 0 ? "-" : "+") + M(Math.floor(Math.abs(e) / 60), 2) + ":" + M(Math.abs(e) % 60, 2) } }, S = function (t) { return +t - 1 }, A = [null, "[1-9]\\d?"], P = [null, f], I = ["isPm", f, function (t, e) { var n = t.toLowerCase(); return n === e.amPm[0] ? 0 : n === e.amPm[1] ? 1 : null }], T = ["timezoneOffset", "[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?", function (t) { var e = (t + "").match(/([+-]|\d\d)/gi); if (e) { var n = 60 * +e[1] + parseInt(e[2], 10); return "+" === e[0] ? n : -n } return 0 }], E = { D: ["day", "[1-9]\\d?"], DD: ["day", "\\d\\d"], Do: ["day", "[1-9]\\d?" + f, function (t) { return parseInt(t, 10) }], M: ["month", "[1-9]\\d?", S], MM: ["month", "\\d\\d", S], YY: ["year", "\\d\\d", function (t) { var e = +("" + (new Date).getFullYear()).substr(0, 2); return +("" + (+t > 68 ? e - 1 : e) + t) }], h: ["hour", "[1-9]\\d?", void 0, "isPm"], hh: ["hour", "\\d\\d", void 0, "isPm"], H: ["hour", "[1-9]\\d?"], HH: ["hour", "\\d\\d"], m: ["minute", "[1-9]\\d?"], mm: ["minute", "\\d\\d"], s: ["second", "[1-9]\\d?"], ss: ["second", "\\d\\d"], YYYY: ["year", "\\d{4}"], S: ["millisecond", "\\d", function (t) { return 100 * +t }], SS: ["millisecond", "\\d\\d", function (t) { return 10 * +t }], SSS: ["millisecond", "\\d{3}"], d: A, dd: A, ddd: P, dddd: P, MMM: ["month", f, g("monthNamesShort")], MMMM: ["month", f, g("monthNames")], a: I, A: I, ZZ: T, Z: T }, j = { default: "ddd MMM DD YYYY HH:mm:ss", shortDate: "M/D/YY", mediumDate: "MMM D, YYYY", longDate: "MMMM D, YYYY", fullDate: "dddd, MMMM D, YYYY", isoDate: "YYYY-MM-DD", isoDateTime: "YYYY-MM-DDTHH:mm:ssZ", shortTime: "HH:mm", mediumTime: "HH:mm:ss", longTime: "HH:mm:ss.SSS" }, L = function (t) { return y(j, t) }, B = function (t, e, n) { if (void 0 === e && (e = j.default), void 0 === n && (n = {}), "number" == typeof t && (t = new Date(t)), "[object Date]" !== Object.prototype.toString.call(t) || isNaN(t.getTime())) throw new Error("Invalid Date pass to format"); var i = []; e = (e = j[e] || e).replace(p, (function (t, e) { return i.push(e), "@@@" })); var r = y(y({}, C), n); return (e = e.replace(h, (function (e) { return w[e](t, r) }))).replace(/@@@/g, (function () { return i.shift() })) }; function k(t, e, n) { if (void 0 === n && (n = {}), "string" != typeof e) throw new Error("Invalid format in fecha parse"); if (e = j[e] || e, t.length > 1e3) return null; var i = { year: (new Date).getFullYear(), month: 0, day: 1, hour: 0, minute: 0, second: 0, millisecond: 0, isPm: null, timezoneOffset: null }, r = [], o = [], a = e.replace(p, (function (t, e) { return o.push(O(e)), "@@@" })), s = {}, u = {}; a = O(a).replace(h, (function (t) { var e = E[t], n = e[0], i = e[1], o = e[3]; if (s[n]) throw new Error("Invalid format. " + n + " specified twice in format"); return s[n] = !0, o && (u[o] = !0), r.push(e), "(" + i + ")" })), Object.keys(u).forEach((function (t) { if (!s[t]) throw new Error("Invalid format. " + t + " is required in specified format") })), a = a.replace(/@@@/g, (function () { return o.shift() })); var l = t.match(new RegExp(a, "i")); if (!l) return null; for (var c = y(y({}, C), n), f = 1; f < l.length; f++) { var d = r[f - 1], g = d[0], v = d[2], m = v ? v(l[f], c) : +l[f]; if (null == m) return null; i[g] = m } 1 === i.isPm && null != i.hour && 12 != +i.hour ? i.hour = +i.hour + 12 : 0 === i.isPm && 12 == +i.hour && (i.hour = 0); for (var x = new Date(i.year, i.month, i.day, i.hour, i.minute, i.second, i.millisecond), b = [["month", "getMonth"], ["day", "getDate"], ["hour", "getHours"], ["minute", "getMinutes"], ["second", "getSeconds"]], _ = (f = 0, b.length); f < _; f++)if (s[b[f][0]] && i[b[f][0]] !== x[b[f][1]]()) return null; return null == i.timezoneOffset ? x : new Date(Date.UTC(i.year, i.month, i.day, i.hour, i.minute - i.timezoneOffset, i.second, i.millisecond)) } var D = { format: B, parse: k, defaultI18n: b, setGlobalDateI18n: _, setGlobalDateMasks: L }; function R(t, e) { return (i.format || D.format)(t, e) } function F(t) { return Object(r.isString)(t) && (t = t.indexOf("T") > 0 ? new Date(t).getTime() : new Date(t.replace(/-/gi, "/")).getTime()), Object(r.isDate)(t) && (t = t.getTime()), t } var N = 36e5, G = 24 * N, Y = 31 * G, V = [["HH:mm:ss", 1e3], ["HH:mm:ss", 1e4], ["HH:mm:ss", 3e4], ["HH:mm", 6e4], ["HH:mm", 6e5], ["HH:mm", 18e5], ["HH", N], ["HH", 6 * N], ["HH", 12 * N], ["YYYY-MM-DD", G], ["YYYY-MM-DD", 4 * G], ["YYYY-WW", 7 * G], ["YYYY-MM", Y], ["YYYY-MM", 4 * Y], ["YYYY-MM", 6 * Y], ["YYYY", 380 * G]]; function X(t, e, n) { var i, o = (i = function (t) { return t[1] }, function (t, e, n, o) { for (var a = Object(r.isNil)(n) ? 0 : n, s = Object(r.isNil)(o) ? t.length : o; a < s;) { var u = a + s >>> 1; i(t[u]) > e ? s = u : a = u + 1 } return a })(V, (e - t) / n) - 1, a = V[o]; return o < 0 ? a = V[0] : o >= V.length && (a = Object(r.last)(V)), a } var z = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "timeCat", e } return Object(l.__extends)(e, t), e.prototype.translate = function (t) { t = F(t); var e = this.values.indexOf(t); return -1 === e && (e = Object(r.isNumber)(t) && t < this.values.length ? t : NaN), e }, e.prototype.getText = function (t, e) { var n = this.translate(t); if (n > -1) { var i = this.values[n], r = this.formatter; return i = r ? r(i, e) : R(i, this.mask) } return t }, e.prototype.initCfg = function () { this.tickMethod = "time-cat", this.mask = "YYYY-MM-DD", this.tickCount = 7 }, e.prototype.setDomain = function () { var e = this.values; Object(r.each)(e, (function (t, n) { e[n] = F(t) })), e.sort((function (t, e) { return t - e })), t.prototype.setDomain.call(this) }, e }(c), H = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.isContinuous = !0, e } return Object(l.__extends)(e, t), e.prototype.scale = function (t) { if (Object(r.isNil)(t)) return NaN; var e = this.rangeMin(), n = this.rangeMax(); return this.max === this.min ? e : e + this.getScalePercent(t) * (n - e) }, e.prototype.init = function () { t.prototype.init.call(this); var e = this.ticks, n = Object(r.head)(e), i = Object(r.last)(e); n < this.min && (this.min = n), i > this.max && (this.max = i), Object(r.isNil)(this.minLimit) || (this.min = n), Object(r.isNil)(this.maxLimit) || (this.max = i) }, e.prototype.setDomain = function () { var t = Object(r.getRange)(this.values), e = t.min, n = t.max; Object(r.isNil)(this.min) && (this.min = e), Object(r.isNil)(this.max) && (this.max = n), this.min > this.max && (this.min = e, this.max = n) }, e.prototype.calculateTicks = function () { var e = this, n = t.prototype.calculateTicks.call(this); return this.nice || (n = Object(r.filter)(n, (function (t) { return t >= e.min && t <= e.max }))), n }, e.prototype.getScalePercent = function (t) { var e = this.max, n = this.min; return (t - n) / (e - n) }, e.prototype.getInvertPercent = function (t) { return (t - this.rangeMin()) / (this.rangeMax() - this.rangeMin()) }, e }(u), W = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "linear", e.isLinear = !0, e } return Object(l.__extends)(e, t), e.prototype.invert = function (t) { var e = this.getInvertPercent(t); return this.min + e * (this.max - this.min) }, e.prototype.initCfg = function () { this.tickMethod = "wilkinson-extended", this.nice = !1 }, e }(H); function q(t, e) { var n = Math.E; return e >= 0 ? Math.pow(n, Math.log(e) / t) : -1 * Math.pow(n, Math.log(-e) / t) } function U(t, e) { return 1 === t ? 1 : Math.log(e) / Math.log(t) } function Z(t, e, n) { Object(r.isNil)(n) && (n = Math.max.apply(null, t)); var i = n; return Object(r.each)(t, (function (t) { t > 0 && t < i && (i = t) })), i === n && (i = n / e), i > 1 && (i = 1), i } var Q = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "log", e } return Object(l.__extends)(e, t), e.prototype.invert = function (t) { var e, n = this.base, i = U(n, this.max), r = this.rangeMin(), o = this.rangeMax() - r, a = this.positiveMin; if (a) { if (0 === t) return 0; var s = 1 / (i - (e = U(n, a / n))) * o; if (t < s) return t / s * a } else e = U(n, this.min); var u = (t - r) / o * (i - e) + e; return Math.pow(n, u) }, e.prototype.initCfg = function () { this.tickMethod = "log", this.base = 10, this.tickCount = 6, this.nice = !0 }, e.prototype.setDomain = function () { t.prototype.setDomain.call(this); var e = this.min; if (e < 0) throw new Error("When you use log scale, the minimum value must be greater than zero!"); 0 === e && (this.positiveMin = Z(this.values, this.base, this.max)) }, e.prototype.getScalePercent = function (t) { var e = this.max, n = this.min; if (e === n) return 0; if (t <= 0) return 0; var i = this.base, r = this.positiveMin; return r && (n = 1 * r / i), t < r ? t / r / (U(i, e) - U(i, n)) : (U(i, t) - U(i, n)) / (U(i, e) - U(i, n)) }, e }(H), K = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "pow", e } return Object(l.__extends)(e, t), e.prototype.invert = function (t) { var e = this.getInvertPercent(t), n = this.exponent, i = q(n, this.max), r = q(n, this.min), o = e * (i - r) + r, a = o >= 0 ? 1 : -1; return Math.pow(o, n) * a }, e.prototype.initCfg = function () { this.tickMethod = "pow", this.exponent = 2, this.tickCount = 5, this.nice = !0 }, e.prototype.getScalePercent = function (t) { var e = this.max, n = this.min; if (e === n) return 0; var i = this.exponent; return (q(i, t) - q(i, n)) / (q(i, e) - q(i, n)) }, e }(H), $ = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "time", e } return Object(l.__extends)(e, t), e.prototype.getText = function (t, e) { var n = this.translate(t), i = this.formatter; return i ? i(n, e) : R(n, this.mask) }, e.prototype.scale = function (e) { var n = e; return (Object(r.isString)(n) || Object(r.isDate)(n)) && (n = this.translate(n)), t.prototype.scale.call(this, n) }, e.prototype.translate = function (t) { return F(t) }, e.prototype.initCfg = function () { this.tickMethod = "time-pretty", this.mask = "YYYY-MM-DD", this.tickCount = 7, this.nice = !1 }, e.prototype.setDomain = function () { var t = this.values, e = this.getConfig("min"), n = this.getConfig("max"); if (Object(r.isNil)(e) && Object(r.isNumber)(e) || (this.min = this.translate(this.min)), Object(r.isNil)(n) && Object(r.isNumber)(n) || (this.max = this.translate(this.max)), t && t.length) { var i = [], o = 1 / 0, a = o, s = 0; Object(r.each)(t, (function (t) { var e = F(t); if (isNaN(e)) throw new TypeError("Invalid Time: " + t + " in time scale!"); o > e ? (a = o, o = e) : a > e && (a = e), s < e && (s = e), i.push(e) })), t.length > 1 && (this.minTickInterval = a - o), Object(r.isNil)(e) && (this.min = o), Object(r.isNil)(n) && (this.max = s) } }, e }(W), J = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "quantize", e } return Object(l.__extends)(e, t), e.prototype.invert = function (t) { var e = this.ticks, n = e.length, i = this.getInvertPercent(t), o = Math.floor(i * (n - 1)); if (o >= n - 1) return Object(r.last)(e); if (o < 0) return Object(r.head)(e); var a = e[o], s = o / (n - 1); return a + (i - s) / ((o + 1) / (n - 1) - s) * (e[o + 1] - a) }, e.prototype.initCfg = function () { this.tickMethod = "r-pretty", this.tickCount = 5, this.nice = !0 }, e.prototype.calculateTicks = function () { var e = t.prototype.calculateTicks.call(this); return this.nice || (Object(r.last)(e) !== this.max && e.push(this.max), Object(r.head)(e) !== this.min && e.unshift(this.min)), e }, e.prototype.getScalePercent = function (t) { var e = this.ticks; if (t < Object(r.head)(e)) return 0; if (t > Object(r.last)(e)) return 1; var n = 0; return Object(r.each)(e, (function (e, i) { if (!(t >= e)) return !1; n = i })), n / (e.length - 1) }, e }(H), tt = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "quantile", e } return Object(l.__extends)(e, t), e.prototype.initCfg = function () { this.tickMethod = "quantile", this.tickCount = 5, this.nice = !0 }, e }(J), et = {}; function nt(t) { return et[t] } function it(t, e) { if (nt(t)) throw new Error("type '" + t + "' existed."); et[t] = e } var rt = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "identity", e.isIdentity = !0, e } return Object(l.__extends)(e, t), e.prototype.calculateTicks = function () { return this.values }, e.prototype.scale = function (t) { return this.values[0] !== t && Object(r.isNumber)(t) ? t : this.range[0] }, e.prototype.invert = function (t) { var e = this.range; return t < e[0] || t > e[1] ? NaN : this.values[0] }, e }(u), ot = [1, 5, 2, 2.5, 4, 3], at = 100 * Number.EPSILON; function st(t, e, n, i, o, a) { var s = Object(r.size)(e), u = Object(r.indexOf)(e, t), l = 0, c = function (t, e) { return (t % e + e) % e }(i, a); return (c < at || a - c < at) && i <= 0 && o >= 0 && (l = 1), 1 - u / (s - 1) - n + l } function ut(t, e, n) { var i = Object(r.size)(e); return 1 - Object(r.indexOf)(e, t) / (i - 1) - n + 1 } function lt(t, e, n, i, r, o) { var a = (t - 1) / (o - r), s = (e - 1) / (Math.max(o, i) - Math.min(n, r)); return 2 - Math.max(a / s, s / a) } function ct(t, e) { return t >= e ? 2 - (t - 1) / (e - 1) : 1 } function ht(t, e, n, i) { var r = e - t; return 1 - .5 * (Math.pow(e - i, 2) + Math.pow(t - n, 2)) / Math.pow(.1 * r, 2) } function ft(t, e, n) { var i = e - t; if (n > i) { var r = (n - i) / 2; return 1 - Math.pow(r, 2) / Math.pow(.1 * i, 2) } return 1 } function pt(t, e, n, i, o, a) { if (void 0 === n && (n = 5), void 0 === i && (i = !0), void 0 === o && (o = ot), void 0 === a && (a = [.25, .2, .5, .05]), "number" != typeof t || "number" != typeof e) return { min: 0, max: 0, ticks: [] }; if (t === e || 1 === n) return { min: t, max: e, ticks: [t] }; for (var s = { score: -2, lmin: 0, lmax: 0, lstep: 0 }, u = 1; u < 1 / 0;) { for (var l = 0, c = o; l < c.length; l++) { var h = c[l], f = ut(h, o, u); if (Number.isNaN(f)) throw new Error("NaN"); if (a[0] * f + a[1] + a[2] + a[3] < s.score) { u = 1 / 0; break } for (var p = 2; p < 1 / 0;) { var d = ct(p, n); if (a[0] * f + a[1] + a[2] * d + a[3] < s.score) break; for (var g = (e - t) / (p + 1) / u / h, y = Math.ceil(Math.log10(g)); y < 1 / 0;) { var v = u * h * Math.pow(10, y), m = ft(t, e, v * (p - 1)); if (a[0] * f + a[1] * m + a[2] * d + a[3] < s.score) break; var x = Math.floor(e / v) * u - (p - 1) * u, b = Math.ceil(t / v) * u; if (x > b) y += 1; else { for (var C = x; C <= b; C += 1) { var _ = C * (v / u), O = _ + v * (p - 1), M = v, w = st(h, o, u, _, O, M), S = ht(t, e, _, O), A = lt(p, n, t, e, _, O), P = a[0] * w + a[1] * S + a[2] * A + 1 * a[3]; P > s.score && (!i || _ <= t && O >= e) && (s.lmin = _, s.lmax = O, s.lstep = M, s.score = P) } y += 1 } } p += 1 } } u += 1 } for (var I = Number.isInteger(s.lstep) ? 0 : Math.ceil(Math.abs(Math.log10(s.lstep))), T = [], E = s.lmin; E <= s.lmax; E += s.lstep)T.push(E); var j = I ? Object(r.map)(T, (function (t) { return Number.parseFloat(t.toFixed(I)) })) : T; return { min: Math.min(t, Object(r.head)(j)), max: Math.max(e, Object(r.last)(j)), ticks: j } } function dt(t) { var e = t.values, n = t.tickInterval, i = t.tickCount, o = e; if (Object(r.isNumber)(n)) return Object(r.filter)(o, (function (t, e) { return e % n == 0 })); var a = t.min, s = t.max; if (Object(r.isNil)(a) && (a = 0), Object(r.isNil)(s) && (s = e.length - 1), Object(r.isNumber)(i) && i < s - a) { var u = pt(a, s, i, !1, [1, 2, 5, 3, 4, 7, 6, 8, 9]).ticks; return Object(r.filter)(u, (function (t) { return t >= a && t <= s })).map((function (t) { return e[t] })) } return e.slice(a, s + 1) } var gt = Math.sqrt(50), yt = Math.sqrt(10), vt = Math.sqrt(2), mt = function () { function t() { this._domain = [0, 1] } return t.prototype.domain = function (t) { return t ? (this._domain = Array.from(t, Number), this) : this._domain.slice() }, t.prototype.nice = function (t) { var e, n; void 0 === t && (t = 5); var i, r = this._domain.slice(), o = 0, a = this._domain.length - 1, s = this._domain[o], u = this._domain[a]; return u < s && (s = (e = [u, s])[0], u = e[1], o = (n = [a, o])[0], a = n[1]), (i = xt(s, u, t)) > 0 ? i = xt(s = Math.floor(s / i) * i, u = Math.ceil(u / i) * i, t) : i < 0 && (i = xt(s = Math.ceil(s * i) / i, u = Math.floor(u * i) / i, t)), i > 0 ? (r[o] = Math.floor(s / i) * i, r[a] = Math.ceil(u / i) * i, this.domain(r)) : i < 0 && (r[o] = Math.ceil(s * i) / i, r[a] = Math.floor(u * i) / i, this.domain(r)), this }, t.prototype.ticks = function (t) { return void 0 === t && (t = 5), function (t, e, n) { var i, r, o, a, s = -1; if (n = +n, (t = +t) === (e = +e) && n > 0) return [t]; (i = e < t) && (r = t, t = e, e = r); if (0 === (a = xt(t, e, n)) || !isFinite(a)) return []; if (a > 0) for (t = Math.ceil(t / a), e = Math.floor(e / a), o = new Array(r = Math.ceil(e - t + 1)); ++s < r;)o[s] = (t + s) * a; else for (t = Math.floor(t * a), e = Math.ceil(e * a), o = new Array(r = Math.ceil(t - e + 1)); ++s < r;)o[s] = (t - s) / a; i && o.reverse(); return o }(this._domain[0], this._domain[this._domain.length - 1], t || 5) }, t }(); function xt(t, e, n) { var i = (e - t) / Math.max(0, n), r = Math.floor(Math.log(i) / Math.LN10), o = i / Math.pow(10, r); return r >= 0 ? (o >= gt ? 10 : o >= yt ? 5 : o >= vt ? 2 : 1) * Math.pow(10, r) : -Math.pow(10, -r) / (o >= gt ? 10 : o >= yt ? 5 : o >= vt ? 2 : 1) } function bt(t, e, n) { return ("ceil" === n ? Math.ceil(t / e) : "floor" === n ? Math.floor(t / e) : Math.round(t / e)) * e } function Ct(t, e, n) { var i = bt(t, n, "floor"), o = bt(e, n, "ceil"); i = Object(r.fixedBase)(i, n), o = Object(r.fixedBase)(o, n); for (var a = [], s = i; s <= o; s += n) { var u = Object(r.fixedBase)(s, n); a.push(u) } return { min: i, max: o, ticks: a } } function _t(t, e, n) { var i, o = t.minLimit, a = t.maxLimit, s = t.min, u = t.max, l = t.tickCount, c = void 0 === l ? 5 : l, h = Object(r.isNil)(o) ? Object(r.isNil)(e) ? s : e : o, f = Object(r.isNil)(a) ? Object(r.isNil)(n) ? u : n : a; if (h > f && (f = (i = [h, f])[0], h = i[1]), c <= 2) return [h, f]; for (var p = (f - h) / (c - 1), d = [], g = 0; g < c; g++)d.push(h + p * g); return d } function Ot(t, e, n) { void 0 === n && (n = 5); var i = { max: 0, min: 0, ticks: [] }; if (t === e) return { max: e, min: t, ticks: [t] }; var r = (e - t) / n, o = Math.pow(10, Math.floor(Math.log10(r))), a = o < 1 ? Math.ceil(Math.abs(Math.log10(o))) : 0, s = o; 2 * o - r < 1.5 * (r - s) && 5 * o - r < 2.75 * (r - (s = 2 * o)) && 10 * o - r < 1.5 * (r - (s = 5 * o)) && (s = 10 * o); var u = Math.ceil(e / s), l = Math.floor(t / s); i.max = Math.max(u * s, e), i.min = Math.min(l * s, t); for (var c = Number.parseFloat((l * s).toFixed(a)); c < e;)i.ticks.push(c), c += s, a && (c = Number.parseFloat(c.toFixed(a))); return i.ticks.push(c), i } function Mt(t, e) { var n = t.length * e; return 1 === e ? t[t.length - 1] : 0 === e ? t[0] : n % 1 != 0 ? t[Math.ceil(n) - 1] : t.length % 2 == 0 ? (t[n - 1] + t[n]) / 2 : t[n] } function wt(t) { return new Date(t).getFullYear() } function St(t) { return new Date(t, 0, 1).getTime() } function At(t) { return new Date(t).getMonth() } function Pt(t, e) { return new Date(t, e, 1).getTime() } s("cat", dt), s("time-cat", (function (t) { var e = dt(t), n = Object(r.last)(t.values); return n !== Object(r.last)(e) && e.push(n), e })), s("wilkinson-extended", (function (t) { var e = t.min, n = t.max, i = t.tickCount, o = t.nice, a = t.tickInterval, s = t.minLimit, u = t.maxLimit, l = pt(e, n, i, o).ticks; return Object(r.isNil)(s) && Object(r.isNil)(u) ? a ? Ct(e, n, a).ticks : l : _t(t, Object(r.head)(l), Object(r.last)(l)) })), s("r-pretty", (function (t) { var e = t.min, n = t.max, i = t.tickCount, o = t.tickInterval, a = t.minLimit, s = t.maxLimit, u = Ot(e, n, i).ticks; return Object(r.isNil)(a) && Object(r.isNil)(s) ? o ? Ct(e, n, o).ticks : u : _t(t, Object(r.head)(u), Object(r.last)(u)) })), s("time", (function (t) { var e = t.min, n = t.max, i = t.minTickInterval, r = t.tickInterval, o = t.tickCount; if (r) o = Math.ceil((n - e) / r); else { var a = (n - e) / (r = X(e, n, o)[1]) / o; a > 1 && (r *= Math.ceil(a)), i && r < i && (r = i) } for (var s = [], u = e; u < n + r; u += r)s.push(u); return s })), s("time-pretty", (function (t) { var e = t.min, n = t.max, i = t.minTickInterval, r = t.tickCount, o = t.tickInterval, a = []; o || (o = (n - e) / r, i && o < i && (o = i)); var s = wt(e); if (o > 31536e6) for (var u = wt(n), l = Math.ceil(o / 31536e6), c = s; c <= u + l; c += l)a.push(St(c)); else if (o > Y) { var h = Math.ceil(o / Y), f = At(e), p = function (t, e) { var n = wt(t), i = wt(e), r = At(t); return 12 * (i - n) + (At(e) - r) % 12 }(e, n); for (c = 0; c <= p + h; c += h)a.push(Pt(s, c + f)) } else if (o > G) { var d = (x = new Date(e)).getFullYear(), g = x.getMonth(), y = x.getDate(), v = Math.ceil(o / G), m = function (t, e) { return Math.ceil((e - t) / G) }(e, n); for (c = 0; c < m + v; c += v)a.push(new Date(d, g, y + c).getTime()) } else if (o > N) { d = (x = new Date(e)).getFullYear(), g = x.getMonth(), v = x.getDate(); var x, b = x.getHours(), C = Math.ceil(o / N), _ = function (t, e) { return Math.ceil((e - t) / N) }(e, n); for (c = 0; c <= _ + C; c += C)a.push(new Date(d, g, v, b + c).getTime()) } else if (o > 6e4) { var O = function (t, e) { return Math.ceil((e - t) / 6e4) }(e, n), M = Math.ceil(o / 6e4); for (c = 0; c <= O + M; c += M)a.push(e + 6e4 * c) } else { var w = o; w < 1e3 && (w = 1e3); var S = 1e3 * Math.floor(e / 1e3), A = Math.ceil((n - e) / 1e3), P = Math.ceil(w / 1e3); for (c = 0; c < A + P; c += P)a.push(S + 1e3 * c) } return a.length >= 512 && console.warn("Notice: current ticks length(" + a.length + ') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is ' + o + ") is too small, increase the value to solve the problem!"), a })), s("log", (function (t) { var e, n = t.base, i = t.tickCount, r = t.min, o = t.max, a = t.values, s = U(n, o); if (r > 0) e = Math.floor(U(n, r)); else { var u = Z(a, n, o); e = Math.floor(U(n, u)) } for (var l = s - e, c = Math.ceil(l / i), h = [], f = e; f < s + c; f += c)h.push(Math.pow(n, f)); return r <= 0 && h.unshift(0), h })), s("pow", (function (t) { var e = t.exponent, n = t.tickCount, i = Math.ceil(q(e, t.max)); return Ot(Math.floor(q(e, t.min)), i, n).ticks.map((function (t) { var n = t >= 0 ? 1 : -1; return Math.pow(t, e) * n })) })), s("quantile", (function (t) { var e = t.tickCount, n = t.values; if (!n || !n.length) return []; for (var i = n.slice().sort((function (t, e) { return t - e })), r = [], o = 0; o < e; o++) { var a = o / (e - 1); r.push(Mt(i, a)) } return r })), s("d3-linear", (function (t) { var e = t.min, n = t.max, i = t.tickInterval, o = t.minLimit, a = t.maxLimit, s = function (t) { var e = t.min, n = t.max, i = t.nice, r = t.tickCount, o = new mt; return o.domain([e, n]), i && o.nice(r), o.ticks(r) }(t); return Object(r.isNil)(o) && Object(r.isNil)(a) ? i ? Ct(e, n, i).ticks : s : _t(t, Object(r.head)(s), Object(r.last)(s)) })), it("cat", c), it("category", c), it("identity", rt), it("linear", W), it("log", Q), it("pow", K), it("time", $), it("timeCat", z), it("quantize", J), it("quantile", tt) }, function (t, e, n) { "use strict"; n.d(e, "getAdjust", (function () { return r })), n.d(e, "registerAdjust", (function () { return o })); n(29), n(63); var i = {}, r = function (t) { return i[t.toLowerCase()] }, o = function (t, e) { if (r(t)) throw new Error("Adjust type '" + t + "' existed."); i[t.toLowerCase()] = e } }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return o })), n.d(e, "b", (function () { return a })); var i = n(25), r = n(16); function o(t, e) { e.forEach((function (e) { e.draw(t) })) } function a(t, e) { var n = t.get("canvas"); if (n && n.get("autoDraw")) { var o = n.get("context"), a = t.getParent(), s = a ? a.getChildren() : [n], u = t.get("el"); if ("remove" === e) if (t.get("isClipShape")) { var l = u && u.parentNode, c = l && l.parentNode; l && c && c.removeChild(l) } else u && u.parentNode && u.parentNode.removeChild(u); else if ("show" === e) u.setAttribute("visibility", "visible"); else if ("hide" === e) u.setAttribute("visibility", "hidden"); else if ("zIndex" === e) Object(r.c)(u, s.indexOf(t)); else if ("sort" === e) { var h = t.get("children"); h && h.length && Object(r.d)(t, (function (t, e) { return h.indexOf(t) - h.indexOf(e) ? 1 : 0 })) } else "clear" === e ? u && (u.innerHTML = "") : "matrix" === e ? Object(i.c)(t) : "clip" === e ? Object(i.a)(t, o) : "attr" === e || "add" === e && t.draw(o) } } }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return r })); var i = n(0); function r(t, e, n) { var r = e + "Style", o = null; return Object(i.each)(n, (function (e, n) { t[n] && e[r] && (o || (o = {}), Object(i.mix)(o, e[r])) })), o } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.checkShapeOverlap = e.getOverlapArea = e.getlLabelBackgroundInfo = e.findLabelTextShape = void 0; var i = n(0), r = n(49); function o(t, e, n) { return void 0 === n && (n = 0), Math.max(0, Math.min(t.x + t.width + n, e.x + e.width + n) - Math.max(t.x - n, e.x - n)) * Math.max(0, Math.min(t.y + t.height + n, e.y + e.height + n) - Math.max(t.y - n, e.y - n)) } e.findLabelTextShape = function (t) { return t.find((function (t) { return "text" === t.get("type") })) }, e.getlLabelBackgroundInfo = function (t, e, n) { void 0 === n && (n = [0, 0, 0, 0]); var o = t.getChildren()[0]; if (o) { var a = o.clone(); e.rotate && r.rotate(a, -e.rotate); var s = a.getCanvasBBox(), u = s.x, l = s.y, c = s.width, h = s.height; a.destroy(); var f = n; return i.isNil(f) ? f = [2, 2, 2, 2] : i.isNumber(f) && (f = new Array(4).fill(f)), { x: u - f[3], y: l - f[0], width: c + f[1] + f[3], height: h + f[0] + f[2], rotation: e.rotate || 0 } } }, e.getOverlapArea = o, e.checkShapeOverlap = function (t, e) { var n = t.getBBox(); return i.some(e, (function (t) { var e = t.getBBox(); return o(n, e, 2) > 0 })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.zoom = e.getIdentityMatrix = e.rotate = e.getRotateMatrix = e.translate = e.transform = void 0; var i = n(6).ext.transform; function r(t, e) { var n = t.attr(), r = n.x, o = n.y; return i(t.getMatrix(), [["t", -r, -o], ["r", e], ["t", r, o]]) } e.transform = i, e.translate = function (t, e, n) { var r = i(t.getMatrix(), [["t", e, n]]); t.setMatrix(r) }, e.getRotateMatrix = r, e.rotate = function (t, e) { var n = r(t, e); t.setMatrix(n) }, e.getIdentityMatrix = function () { return [1, 0, 0, 0, 1, 0, 0, 0, 1] }, e.zoom = function (t, e) { var n = t.getBBox(), r = (n.minX + n.maxX) / 2, o = (n.minY + n.maxY) / 2; t.applyToMatrix([r, o, 1]); var a = i(t.getMatrix(), [["t", -r, -o], ["s", e, e], ["t", r, o]]); t.setMatrix(a) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getAnglePoint = e.getFactTitleConfig = void 0; var i = n(14); e.getFactTitleConfig = function (t) { return [i.DIRECTION.TOP, i.DIRECTION.BOTTOM].includes(t) ? { offsetX: 0, offsetY: t === i.DIRECTION.TOP ? -8 : 8, style: { textAlign: "center", textBaseline: t === i.DIRECTION.TOP ? "bottom" : "top" } } : [i.DIRECTION.LEFT, i.DIRECTION.RIGHT].includes(t) ? { offsetX: t === i.DIRECTION.LEFT ? -8 : 8, offsetY: 0, style: { textAlign: t === i.DIRECTION.LEFT ? "right" : "left", textBaseline: "middle", rotate: Math.PI / 2 } } : {} }, e.getAnglePoint = function (t, e, n) { return { x: t.x + e * Math.cos(n), y: t.y + e * Math.sin(n) } } }, function (t, e, n) { "use strict"; n.r(e); var i = n(0), r = /rgba?\(([\s.,0-9]+)\)/, o = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, a = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, s = /[\d.]+:(#[^\s]+|[^\)]+\))/gi, u = function (t, e, n, i) { return t[i] + (e[i] - t[i]) * n }; function l(t) { return "#" + f(t[0]) + f(t[1]) + f(t[2]) } var c, h = function (t) { return [parseInt(t.substr(1, 2), 16), parseInt(t.substr(3, 2), 16), parseInt(t.substr(5, 2), 16)] }, f = function (t) { var e = Math.round(t).toString(16); return 1 === e.length ? "0" + e : e }, p = function (t) { if ("#" === t[0] && 7 === t.length) return t; var e; c || ((e = document.createElement("i")).title = "Web Colour Picker", e.style.display = "none", document.body.appendChild(e), c = e), c.style.color = t; var n = document.defaultView.getComputedStyle(c, "").getPropertyValue("color"); return n = l(r.exec(n)[1].split(/\s*,\s*/).map((function (t) { return Number(t) }))) }; e.default = { rgb2arr: h, gradient: function (t) { var e = Object(i.isString)(t) ? t.split("-") : t, n = Object(i.map)(e, (function (t) { return h(-1 === t.indexOf("#") ? p(t) : t) })); return function (t) { return function (t, e) { var n = isNaN(Number(e)) || e < 0 ? 0 : e > 1 ? 1 : Number(e), i = t.length - 1, r = Math.floor(i * n), o = i * n - r, a = t[r], s = r === i ? a : t[r + 1]; return l([u(a, s, o, 0), u(a, s, o, 1), u(a, s, o, 2)]) }(n, t) } }, toRGB: Object(i.memoize)(p), toCSSGradient: function (t) { if (/^[r,R,L,l]{1}[\s]*\(/.test(t)) { var e, n = void 0; if ("l" === t[0]) { var r = +(u = o.exec(t))[1] + 90; n = u[2], e = "linear-gradient(" + r + "deg, " } else if ("r" === t[0]) { var u; e = "radial-gradient(", n = (u = a.exec(t))[4] } var l = n.match(s); return Object(i.each)(l, (function (t, n) { var i = t.split(":"); e += i[1] + " " + 100 * i[0] + "%", n !== l.length - 1 && (e += ", ") })), e += ")" } return t } } }, function (t, e, n) { "use strict"; var i = n(1), r = n(7), o = n(0), a = { none: [], point: ["x", "y"], region: ["start", "end"], points: ["points"], circle: ["center", "radius", "startAngle", "endAngle"] }, s = function (t) { function e(e) { var n = t.call(this, e) || this; return n.initCfg(), n } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { return { id: "", name: "", type: "", locationType: "none", offsetX: 0, offsetY: 0, animate: !1, capture: !0, updateAutoRender: !1, animateOption: { appear: null, update: { duration: 400, easing: "easeQuadInOut" }, enter: { duration: 400, easing: "easeQuadInOut" }, leave: { duration: 350, easing: "easeQuadIn" } }, events: null, defaultCfg: {}, visible: !0 } }, e.prototype.clear = function () { }, e.prototype.update = function (t) { var e = this, n = this.get("defaultCfg"); Object(o.each)(t, (function (t, i) { var r = t; e.get(i) !== t && (Object(o.isObject)(t) && n[i] && (r = Object(o.deepMix)({}, n[i], t)), e.set(i, r)) })), this.updateInner(t), this.afterUpdate(t) }, e.prototype.updateInner = function (t) { }, e.prototype.afterUpdate = function (t) { Object(o.hasKey)(t, "visible") && (t.visible ? this.show() : this.hide()), Object(o.hasKey)(t, "capture") && this.setCapture(t.capture) }, e.prototype.getLayoutBBox = function () { return this.getBBox() }, e.prototype.getLocationType = function () { return this.get("locationType") }, e.prototype.getOffset = function () { return { offsetX: this.get("offsetX"), offsetY: this.get("offsetY") } }, e.prototype.setOffset = function (t, e) { this.update({ offsetX: t, offsetY: e }) }, e.prototype.setLocation = function (t) { var e = Object(i.__assign)({}, t); this.update(e) }, e.prototype.getLocation = function () { var t = this, e = {}, n = this.get("locationType"), i = a[n]; return Object(o.each)(i, (function (n) { e[n] = t.get(n) })), e }, e.prototype.isList = function () { return !1 }, e.prototype.isSlider = function () { return !1 }, e.prototype.init = function () { }, e.prototype.initCfg = function () { var t = this, e = this.get("defaultCfg"); Object(o.each)(e, (function (e, n) { var i = t.get(n); if (Object(o.isObject)(i)) { var r = Object(o.deepMix)({}, e, i); t.set(n, r) } })) }, e }(r.Base); e.a = s }, function (t, e, n) { "use strict"; var i = n(1), r = n(7), o = n(36), a = n(20), s = n(0), u = n(5), l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.onCanvasChange = function (t) { Object(a.h)(this, t) }, e.prototype.getShapeBase = function () { return o }, e.prototype.getGroupBase = function () { return e }, e.prototype._applyClip = function (t, e) { e && (t.save(), Object(a.a)(t, e), e.createPath(t), t.restore(), t.clip(), e._afterDraw()) }, e.prototype.cacheCanvasBBox = function () { var t = this.cfg.children, e = [], n = []; Object(s.each)(t, (function (t) { var i = t.cfg.cacheCanvasBBox; i && t.cfg.isInView && (e.push(i.minX, i.maxX), n.push(i.minY, i.maxY)) })); var i = null; if (e.length) { var r = Math.min.apply(null, e), o = Math.max.apply(null, e), a = Math.min.apply(null, n), l = Math.max.apply(null, n); i = { minX: r, minY: a, x: r, y: a, maxX: o, maxY: l, width: o - r, height: l - a }; var c = this.cfg.canvas; if (c) { var h = c.getViewRange(); this.set("isInView", Object(u.f)(i, h)) } } else this.set("isInView", !1); this.set("cacheCanvasBBox", i) }, e.prototype.draw = function (t, e) { var n = this.cfg.children, i = !e || this.cfg.refresh; n.length && i && (t.save(), Object(a.a)(t, this), this._applyClip(t, this.getClip()), Object(a.d)(t, n, e), t.restore(), this.cacheCanvasBBox()), this.cfg.refresh = null, this.set("hasChanged", !1) }, e.prototype.skipDraw = function () { this.set("cacheCanvasBBox", null), this.set("hasChanged", !1) }, e }(r.AbstractGroup); e.a = l }, function (t, e, n) { "use strict"; var i = n(1), r = n(7), o = n(0), a = n(55), s = n(46), u = n(25), l = n(4), c = n(16), h = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.isEntityGroup = function () { return !0 }, e.prototype.createDom = function () { var t = Object(c.b)("g"); this.set("el", t); var e = this.getParent(); if (e) { var n = e.get("el"); n || (n = e.createDom(), e.set("el", n)), n.appendChild(t) } return t }, e.prototype.afterAttrsChange = function (e) { t.prototype.afterAttrsChange.call(this, e); var n = this.get("canvas"); if (n && n.get("autoDraw")) { var i = n.get("context"); this.createPath(i, e) } }, e.prototype.onCanvasChange = function (t) { Object(s.b)(this, t) }, e.prototype.getShapeBase = function () { return a }, e.prototype.getGroupBase = function () { return e }, e.prototype.draw = function (t) { var e = this.getChildren(), n = this.get("el"); this.get("destroyed") ? n && n.parentNode.removeChild(n) : (n || this.createDom(), Object(u.a)(this, t), this.createPath(t), e.length && Object(s.a)(t, e)) }, e.prototype.createPath = function (t, e) { var n = this.attr(), i = this.get("el"); Object(o.each)(e || n, (function (t, e) { l.b[e] && i.setAttribute(l.b[e], t) })), Object(u.c)(this) }, e }(r.AbstractGroup); e.a = h }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Base", (function () { return h })), n.d(e, "Circle", (function () { return p })), n.d(e, "Dom", (function () { return d })), n.d(e, "Ellipse", (function () { return g })), n.d(e, "Image", (function () { return y })), n.d(e, "Line", (function () { return m })), n.d(e, "Marker", (function () { return C })), n.d(e, "Path", (function () { return _ })), n.d(e, "Polygon", (function () { return O })), n.d(e, "Polyline", (function () { return M })), n.d(e, "Rect", (function () { return w })), n.d(e, "Text", (function () { return T })); var i = {}; n.r(i), n.d(i, "Base", (function () { return h })), n.d(i, "Circle", (function () { return p })), n.d(i, "Dom", (function () { return d })), n.d(i, "Ellipse", (function () { return g })), n.d(i, "Image", (function () { return y })), n.d(i, "Line", (function () { return m })), n.d(i, "Marker", (function () { return C })), n.d(i, "Path", (function () { return _ })), n.d(i, "Polygon", (function () { return O })), n.d(i, "Polyline", (function () { return M })), n.d(i, "Rect", (function () { return w })), n.d(i, "Text", (function () { return T })); var r = n(1), o = n(7), a = n(25), s = n(16), u = n(46), l = n(4), c = n(54), h = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "svg", e.canFill = !1, e.canStroke = !1, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 }) }, e.prototype.afterAttrsChange = function (e) { t.prototype.afterAttrsChange.call(this, e); var n = this.get("canvas"); if (n && n.get("autoDraw")) { var i = n.get("context"); this.draw(i, e) } }, e.prototype.getShapeBase = function () { return i }, e.prototype.getGroupBase = function () { return c.a }, e.prototype.onCanvasChange = function (t) { Object(u.b)(this, t) }, e.prototype.calculateBBox = function () { var t = this.get("el"), e = null; if (t) e = t.getBBox(); else { var n = Object(o.getBBoxMethod)(this.get("type")); n && (e = n(this)) } if (e) { var i = e.x, r = e.y, a = e.width, s = e.height, u = this.getHitLineWidth(), l = u / 2, c = i - l, h = r - l; return { x: c, y: h, minX: c, minY: h, maxX: i + a + l, maxY: r + s + l, width: a + u, height: s + u } } return { x: 0, y: 0, minX: 0, minY: 0, maxX: 0, maxY: 0, width: 0, height: 0 } }, e.prototype.isFill = function () { var t = this.attr(), e = t.fill, n = t.fillStyle; return (e || n || this.isClipShape()) && this.canFill }, e.prototype.isStroke = function () { var t = this.attr(), e = t.stroke, n = t.strokeStyle; return (e || n) && this.canStroke }, e.prototype.draw = function (t, e) { var n = this.get("el"); this.get("destroyed") ? n && n.parentNode.removeChild(n) : (n || Object(s.a)(this), Object(a.a)(this, t), this.createPath(t, e), this.shadow(t, e), this.strokeAndFill(t, e), this.transform(e)) }, e.prototype.createPath = function (t, e) { }, e.prototype.strokeAndFill = function (t, e) { var n = e || this.attr(), i = n.fill, r = n.fillStyle, o = n.stroke, a = n.strokeStyle, s = n.fillOpacity, u = n.strokeOpacity, c = n.lineWidth, h = this.get("el"); this.canFill && (e ? "fill" in n ? this._setColor(t, "fill", i) : "fillStyle" in n && this._setColor(t, "fill", r) : this._setColor(t, "fill", i || r), s && h.setAttribute(l.b.fillOpacity, s)), this.canStroke && c > 0 && (e ? "stroke" in n ? this._setColor(t, "stroke", o) : "strokeStyle" in n && this._setColor(t, "stroke", a) : this._setColor(t, "stroke", o || a), u && h.setAttribute(l.b.strokeOpacity, u), c && h.setAttribute(l.b.lineWidth, c)) }, e.prototype._setColor = function (t, e, n) { var i = this.get("el"); if (n) if (n = n.trim(), /^[r,R,L,l]{1}[\s]*\(/.test(n)) (r = t.find("gradient", n)) || (r = t.addGradient(n)), i.setAttribute(l.b[e], "url(#" + r + ")"); else if (/^[p,P]{1}[\s]*\(/.test(n)) { var r; (r = t.find("pattern", n)) || (r = t.addPattern(n)), i.setAttribute(l.b[e], "url(#" + r + ")") } else i.setAttribute(l.b[e], n); else i.setAttribute(l.b[e], "none") }, e.prototype.shadow = function (t, e) { var n = this.attr(), i = e || n, r = i.shadowOffsetX, o = i.shadowOffsetY, s = i.shadowBlur, u = i.shadowColor; (r || o || s || u) && Object(a.b)(this, t) }, e.prototype.transform = function (t) { var e = this.attr(); (t || e).matrix && Object(a.c)(this) }, e.prototype.isInShape = function (t, e) { return this.isPointInPath(t, e) }, e.prototype.isPointInPath = function (t, e) { var n = this.get("el"), i = this.get("canvas").get("el").getBoundingClientRect(), r = t + i.left, o = e + i.top, a = document.elementFromPoint(r, o); return !(!a || !a.isEqualNode(n)) }, e.prototype.getHitLineWidth = function () { var t = this.attrs, e = t.lineWidth, n = t.lineAppendWidth; return this.isStroke() ? e + n : 0 }, e }(o.AbstractShape), f = n(0), p = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "circle", e.canFill = !0, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, r: 0 }) }, e.prototype.createPath = function (t, e) { var n = this.attr(), i = this.get("el"); Object(f.each)(e || n, (function (t, e) { "x" === e || "y" === e ? i.setAttribute("c" + e, t) : l.b[e] && i.setAttribute(l.b[e], t) })) }, e }(h), d = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "dom", e.canFill = !1, e.canStroke = !1, e } return Object(r.__extends)(e, t), e.prototype.createPath = function (t, e) { var n = this.attr(), i = this.get("el"); if (Object(f.each)(e || n, (function (t, e) { l.b[e] && i.setAttribute(l.b[e], t) })), "function" == typeof n.html) { var r = n.html.call(this, n); if (r instanceof Element || r instanceof HTMLDocument) { for (var o = i.childNodes, a = o.length - 1; a >= 0; a--)i.removeChild(o[a]); i.appendChild(r) } else i.innerHTML = r } else i.innerHTML = n.html }, e }(h), g = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "ellipse", e.canFill = !0, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, rx: 0, ry: 0 }) }, e.prototype.createPath = function (t, e) { var n = this.attr(), i = this.get("el"); Object(f.each)(e || n, (function (t, e) { "x" === e || "y" === e ? i.setAttribute("c" + e, t) : l.b[e] && i.setAttribute(l.b[e], t) })) }, e }(h), y = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "image", e.canFill = !1, e.canStroke = !1, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, width: 0, height: 0 }) }, e.prototype.createPath = function (t, e) { var n = this, i = this.attr(), r = this.get("el"); Object(f.each)(e || i, (function (t, e) { "img" === e ? n._setImage(i.img) : l.b[e] && r.setAttribute(l.b[e], t) })) }, e.prototype.setAttr = function (t, e) { this.attrs[t] = e, "img" === t && this._setImage(e) }, e.prototype._setImage = function (t) { var e = this.attr(), n = this.get("el"); if (Object(f.isString)(t)) n.setAttribute("href", t); else if (t instanceof window.Image) e.width || (n.setAttribute("width", t.width), this.attr("width", t.width)), e.height || (n.setAttribute("height", t.height), this.attr("height", t.height)), n.setAttribute("href", t.src); else if (t instanceof HTMLElement && Object(f.isString)(t.nodeName) && "CANVAS" === t.nodeName.toUpperCase()) n.setAttribute("href", t.toDataURL()); else if (t instanceof ImageData) { var i = document.createElement("canvas"); i.setAttribute("width", "" + t.width), i.setAttribute("height", "" + t.height), i.getContext("2d").putImageData(t, 0, 0), e.width || (n.setAttribute("width", "" + t.width), this.attr("width", t.width)), e.height || (n.setAttribute("height", "" + t.height), this.attr("height", t.height)), n.setAttribute("href", i.toDataURL()) } }, e }(h), v = n(12), m = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "line", e.canFill = !1, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: !1, endArrow: !1 }) }, e.prototype.createPath = function (t, e) { var n = this.attr(), i = this.get("el"); Object(f.each)(e || n, (function (e, r) { if ("startArrow" === r || "endArrow" === r) if (e) { var o = Object(f.isObject)(e) ? t.addArrow(n, l.b[r]) : t.getDefaultArrow(n, l.b[r]); i.setAttribute(l.b[r], "url(#" + o + ")") } else i.removeAttribute(l.b[r]); else l.b[r] && i.setAttribute(l.b[r], e) })) }, e.prototype.getTotalLength = function () { var t = this.attr(), e = t.x1, n = t.y1, i = t.x2, r = t.y2; return v.c.length(e, n, i, r) }, e.prototype.getPoint = function (t) { var e = this.attr(), n = e.x1, i = e.y1, r = e.x2, o = e.y2; return v.c.pointAt(n, i, r, o, t) }, e }(h), x = { circle: function (t, e, n) { return [["M", t, e], ["m", -n, 0], ["a", n, n, 0, 1, 0, 2 * n, 0], ["a", n, n, 0, 1, 0, 2 * -n, 0]] }, square: function (t, e, n) { return [["M", t - n, e - n], ["L", t + n, e - n], ["L", t + n, e + n], ["L", t - n, e + n], ["Z"]] }, diamond: function (t, e, n) { return [["M", t - n, e], ["L", t, e - n], ["L", t + n, e], ["L", t, e + n], ["Z"]] }, triangle: function (t, e, n) { var i = n * Math.sin(1 / 3 * Math.PI); return [["M", t - n, e + i], ["L", t, e - i], ["L", t + n, e + i], ["z"]] }, triangleDown: function (t, e, n) { var i = n * Math.sin(1 / 3 * Math.PI); return [["M", t - n, e - i], ["L", t + n, e - i], ["L", t, e + i], ["Z"]] } }, b = { get: function (t) { return x[t] }, register: function (t, e) { x[t] = e }, remove: function (t) { delete x[t] }, getAll: function () { return x } }, C = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "marker", e.canFill = !0, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.createPath = function (t) { this.get("el").setAttribute("d", this._assembleMarker()) }, e.prototype._assembleMarker = function () { var t = this._getPath(); return Object(f.isArray)(t) ? t.map((function (t) { return t.join(" ") })).join("") : t }, e.prototype._getPath = function () { var t, e = this.attr(), n = e.x, i = e.y, r = e.r || e.radius, o = e.symbol || "circle"; return (t = Object(f.isFunction)(o) ? o : b.get(o)) ? t(n, i, r) : (console.warn(t + " symbol is not exist."), null) }, e.symbolsFactory = b, e }(h), _ = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "path", e.canFill = !0, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { startArrow: !1, endArrow: !1 }) }, e.prototype.createPath = function (t, e) { var n = this, i = this.attr(), r = this.get("el"); Object(f.each)(e || i, (function (e, o) { if ("path" === o && Object(f.isArray)(e)) r.setAttribute("d", n._formatPath(e)); else if ("startArrow" === o || "endArrow" === o) if (e) { var a = Object(f.isObject)(e) ? t.addArrow(i, l.b[o]) : t.getDefaultArrow(i, l.b[o]); r.setAttribute(l.b[o], "url(#" + a + ")") } else r.removeAttribute(l.b[o]); else l.b[o] && r.setAttribute(l.b[o], e) })) }, e.prototype._formatPath = function (t) { var e = t.map((function (t) { return t.join(" ") })).join(""); return ~e.indexOf("NaN") ? "" : e }, e.prototype.getTotalLength = function () { var t = this.get("el"); return t ? t.getTotalLength() : null }, e.prototype.getPoint = function (t) { var e = this.get("el"), n = this.getTotalLength(); if (0 === n) return null; var i = e ? e.getPointAtLength(t * n) : null; return i ? { x: i.x, y: i.y } : null }, e }(h), O = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "polygon", e.canFill = !0, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.createPath = function (t, e) { var n = this.attr(), i = this.get("el"); Object(f.each)(e || n, (function (t, e) { "points" === e && Object(f.isArray)(t) && t.length >= 2 ? i.setAttribute("points", t.map((function (t) { return t[0] + "," + t[1] })).join(" ")) : l.b[e] && i.setAttribute(l.b[e], t) })) }, e }(h), M = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "polyline", e.canFill = !0, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { startArrow: !1, endArrow: !1 }) }, e.prototype.onAttrChange = function (e, n, i) { t.prototype.onAttrChange.call(this, e, n, i), -1 !== ["points"].indexOf(e) && this._resetCache() }, e.prototype._resetCache = function () { this.set("totalLength", null), this.set("tCache", null) }, e.prototype.createPath = function (t, e) { var n = this.attr(), i = this.get("el"); Object(f.each)(e || n, (function (t, e) { "points" === e && Object(f.isArray)(t) && t.length >= 2 ? i.setAttribute("points", t.map((function (t) { return t[0] + "," + t[1] })).join(" ")) : l.b[e] && i.setAttribute(l.b[e], t) })) }, e.prototype.getTotalLength = function () { var t = this.attr().points, e = this.get("totalLength"); return Object(f.isNil)(e) ? (this.set("totalLength", v.d.length(t)), this.get("totalLength")) : e }, e.prototype.getPoint = function (t) { var e, n, i = this.attr().points, r = this.get("tCache"); return r || (this._setTcache(), r = this.get("tCache")), Object(f.each)(r, (function (i, r) { t >= i[0] && t <= i[1] && (e = (t - i[0]) / (i[1] - i[0]), n = r) })), v.c.pointAt(i[n][0], i[n][1], i[n + 1][0], i[n + 1][1], e) }, e.prototype._setTcache = function () { var t = this.attr().points; if (t && 0 !== t.length) { var e = this.getTotalLength(); if (!(e <= 0)) { var n, i, r = 0, o = []; Object(f.each)(t, (function (a, s) { t[s + 1] && ((n = [])[0] = r / e, i = v.c.length(a[0], a[1], t[s + 1][0], t[s + 1][1]), r += i, n[1] = r / e, o.push(n)) })), this.set("tCache", o) } } }, e.prototype.getStartTangent = function () { var t = this.attr().points, e = []; return e.push([t[1][0], t[1][1]]), e.push([t[0][0], t[0][1]]), e }, e.prototype.getEndTangent = function () { var t = this.attr().points, e = t.length - 1, n = []; return n.push([t[e - 1][0], t[e - 1][1]]), n.push([t[e][0], t[e][1]]), n }, e }(h); var w = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "rect", e.canFill = !0, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, width: 0, height: 0, radius: 0 }) }, e.prototype.createPath = function (t, e) { var n = this, i = this.attr(), r = this.get("el"), o = !1, a = ["x", "y", "width", "height", "radius"]; Object(f.each)(e || i, (function (t, e) { -1 === a.indexOf(e) || o ? -1 === a.indexOf(e) && l.b[e] && r.setAttribute(l.b[e], t) : (r.setAttribute("d", n._assembleRect(i)), o = !0) })) }, e.prototype._assembleRect = function (t) { var e = t.x, n = t.y, i = t.width, r = t.height, o = t.radius; if (!o) return "M " + e + "," + n + " l " + i + ",0 l 0," + r + " l" + -i + " 0 z"; var a = function (t) { var e = 0, n = 0, i = 0, r = 0; return Object(f.isArray)(t) ? 1 === t.length ? e = n = i = r = t[0] : 2 === t.length ? (e = i = t[0], n = r = t[1]) : 3 === t.length ? (e = t[0], n = r = t[1], i = t[2]) : (e = t[0], n = t[1], i = t[2], r = t[3]) : e = n = i = r = t, { r1: e, r2: n, r3: i, r4: r } }(o); return Object(f.isArray)(o) ? 1 === o.length ? a.r1 = a.r2 = a.r3 = a.r4 = o[0] : 2 === o.length ? (a.r1 = a.r3 = o[0], a.r2 = a.r4 = o[1]) : 3 === o.length ? (a.r1 = o[0], a.r2 = a.r4 = o[1], a.r3 = o[2]) : (a.r1 = o[0], a.r2 = o[1], a.r3 = o[2], a.r4 = o[3]) : a.r1 = a.r2 = a.r3 = a.r4 = o, [["M " + (e + a.r1) + "," + n], ["l " + (i - a.r1 - a.r2) + ",0"], ["a " + a.r2 + "," + a.r2 + ",0,0,1," + a.r2 + "," + a.r2], ["l 0," + (r - a.r2 - a.r3)], ["a " + a.r3 + "," + a.r3 + ",0,0,1," + -a.r3 + "," + a.r3], ["l " + (a.r3 + a.r4 - i) + ",0"], ["a " + a.r4 + "," + a.r4 + ",0,0,1," + -a.r4 + "," + -a.r4], ["l 0," + (a.r4 + a.r1 - r)], ["a " + a.r1 + "," + a.r1 + ",0,0,1," + a.r1 + "," + -a.r1], ["z"]].join(" ") }, e }(h), S = n(74), A = { top: "before-edge", middle: "central", bottom: "after-edge", alphabetic: "baseline", hanging: "hanging" }, P = { top: "text-before-edge", middle: "central", bottom: "text-after-edge", alphabetic: "alphabetic", hanging: "hanging" }, I = { left: "left", start: "left", center: "middle", right: "end", end: "end" }, T = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "text", e.canFill = !0, e.canStroke = !0, e } return Object(r.__extends)(e, t), e.prototype.getDefaultAttrs = function () { var e = t.prototype.getDefaultAttrs.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: "sans-serif", fontStyle: "normal", fontWeight: "normal", fontVariant: "normal", textAlign: "start", textBaseline: "bottom" }) }, e.prototype.createPath = function (t, e) { var n = this, i = this.attr(), r = this.get("el"); this._setFont(), Object(f.each)(e || i, (function (t, e) { "text" === e ? n._setText("" + t) : "matrix" === e && t ? Object(a.c)(n) : l.b[e] && r.setAttribute(l.b[e], t) })), r.setAttribute("paint-order", "stroke"), r.setAttribute("style", "stroke-linecap:butt; stroke-linejoin:miter;") }, e.prototype._setFont = function () { var t = this.get("el"), e = this.attr(), n = e.textBaseline, i = e.textAlign, r = Object(S.a)(); r && "firefox" === r.name ? t.setAttribute("dominant-baseline", P[n] || "alphabetic") : t.setAttribute("alignment-baseline", A[n] || "baseline"), t.setAttribute("text-anchor", I[i] || "left") }, e.prototype._setText = function (t) { var e = this.get("el"), n = this.attr(), i = n.x, r = n.textBaseline, o = void 0 === r ? "bottom" : r; if (t) if (~t.indexOf("\n")) { var a = t.split("\n"), s = a.length - 1, u = ""; Object(f.each)(a, (function (t, e) { 0 === e ? "alphabetic" === o ? u += '<tspan x="' + i + '" dy="' + -s + 'em">' + t + "</tspan>" : "top" === o ? u += '<tspan x="' + i + '" dy="0.9em">' + t + "</tspan>" : "middle" === o ? u += '<tspan x="' + i + '" dy="' + -(s - 1) / 2 + 'em">' + t + "</tspan>" : "bottom" === o ? u += '<tspan x="' + i + '" dy="-' + (s + .3) + 'em">' + t + "</tspan>" : "hanging" === o && (u += '<tspan x="' + i + '" dy="' + (-(s - 1) - .3) + 'em">' + t + "</tspan>") : u += '<tspan x="' + i + '" dy="1em">' + t + "</tspan>" })), e.innerHTML = u } else e.innerHTML = t; else e.innerHTML = "" }, e }(h) }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "create", (function () { return r })), n.d(e, "clone", (function () { return o })), n.d(e, "fromValues", (function () { return a })), n.d(e, "copy", (function () { return s })), n.d(e, "set", (function () { return u })), n.d(e, "add", (function () { return l })), n.d(e, "subtract", (function () { return c })), n.d(e, "multiply", (function () { return h })), n.d(e, "divide", (function () { return f })), n.d(e, "ceil", (function () { return p })), n.d(e, "floor", (function () { return d })), n.d(e, "min", (function () { return g })), n.d(e, "max", (function () { return y })), n.d(e, "round", (function () { return v })), n.d(e, "scale", (function () { return m })), n.d(e, "scaleAndAdd", (function () { return x })), n.d(e, "distance", (function () { return b })), n.d(e, "squaredDistance", (function () { return C })), n.d(e, "length", (function () { return _ })), n.d(e, "squaredLength", (function () { return O })), n.d(e, "negate", (function () { return M })), n.d(e, "inverse", (function () { return w })), n.d(e, "normalize", (function () { return S })), n.d(e, "dot", (function () { return A })), n.d(e, "cross", (function () { return P })), n.d(e, "lerp", (function () { return I })), n.d(e, "random", (function () { return T })), n.d(e, "transformMat2", (function () { return E })), n.d(e, "transformMat2d", (function () { return j })), n.d(e, "transformMat3", (function () { return L })), n.d(e, "transformMat4", (function () { return B })), n.d(e, "rotate", (function () { return k })), n.d(e, "angle", (function () { return D })), n.d(e, "zero", (function () { return R })), n.d(e, "str", (function () { return F })), n.d(e, "exactEquals", (function () { return N })), n.d(e, "equals", (function () { return G })), n.d(e, "len", (function () { return V })), n.d(e, "sub", (function () { return X })), n.d(e, "mul", (function () { return z })), n.d(e, "div", (function () { return H })), n.d(e, "dist", (function () { return W })), n.d(e, "sqrDist", (function () { return q })), n.d(e, "sqrLen", (function () { return U })), n.d(e, "forEach", (function () { return Z })); var i = n(13); function r() { var t = new i.a(2); return i.a != Float32Array && (t[0] = 0, t[1] = 0), t } function o(t) { var e = new i.a(2); return e[0] = t[0], e[1] = t[1], e } function a(t, e) { var n = new i.a(2); return n[0] = t, n[1] = e, n } function s(t, e) { return t[0] = e[0], t[1] = e[1], t } function u(t, e, n) { return t[0] = e, t[1] = n, t } function l(t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t } function c(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t } function h(t, e, n) { return t[0] = e[0] * n[0], t[1] = e[1] * n[1], t } function f(t, e, n) { return t[0] = e[0] / n[0], t[1] = e[1] / n[1], t } function p(t, e) { return t[0] = Math.ceil(e[0]), t[1] = Math.ceil(e[1]), t } function d(t, e) { return t[0] = Math.floor(e[0]), t[1] = Math.floor(e[1]), t } function g(t, e, n) { return t[0] = Math.min(e[0], n[0]), t[1] = Math.min(e[1], n[1]), t } function y(t, e, n) { return t[0] = Math.max(e[0], n[0]), t[1] = Math.max(e[1], n[1]), t } function v(t, e) { return t[0] = Math.round(e[0]), t[1] = Math.round(e[1]), t } function m(t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t } function x(t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t } function b(t, e) { var n = e[0] - t[0], i = e[1] - t[1]; return Math.hypot(n, i) } function C(t, e) { var n = e[0] - t[0], i = e[1] - t[1]; return n * n + i * i } function _(t) { var e = t[0], n = t[1]; return Math.hypot(e, n) } function O(t) { var e = t[0], n = t[1]; return e * e + n * n } function M(t, e) { return t[0] = -e[0], t[1] = -e[1], t } function w(t, e) { return t[0] = 1 / e[0], t[1] = 1 / e[1], t } function S(t, e) { var n = e[0], i = e[1], r = n * n + i * i; return r > 0 && (r = 1 / Math.sqrt(r)), t[0] = e[0] * r, t[1] = e[1] * r, t } function A(t, e) { return t[0] * e[0] + t[1] * e[1] } function P(t, e, n) { var i = e[0] * n[1] - e[1] * n[0]; return t[0] = t[1] = 0, t[2] = i, t } function I(t, e, n, i) { var r = e[0], o = e[1]; return t[0] = r + i * (n[0] - r), t[1] = o + i * (n[1] - o), t } function T(t, e) { e = e || 1; var n = 2 * i.c() * Math.PI; return t[0] = Math.cos(n) * e, t[1] = Math.sin(n) * e, t } function E(t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[2] * r, t[1] = n[1] * i + n[3] * r, t } function j(t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[2] * r + n[4], t[1] = n[1] * i + n[3] * r + n[5], t } function L(t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[3] * r + n[6], t[1] = n[1] * i + n[4] * r + n[7], t } function B(t, e, n) { var i = e[0], r = e[1]; return t[0] = n[0] * i + n[4] * r + n[12], t[1] = n[1] * i + n[5] * r + n[13], t } function k(t, e, n, i) { var r = e[0] - n[0], o = e[1] - n[1], a = Math.sin(i), s = Math.cos(i); return t[0] = r * s - o * a + n[0], t[1] = r * a + o * s + n[1], t } function D(t, e) { var n = t[0], i = t[1], r = e[0], o = e[1], a = Math.sqrt(n * n + i * i) * Math.sqrt(r * r + o * o), s = a && (n * r + i * o) / a; return Math.acos(Math.min(Math.max(s, -1), 1)) } function R(t) { return t[0] = 0, t[1] = 0, t } function F(t) { return "vec2(" + t[0] + ", " + t[1] + ")" } function N(t, e) { return t[0] === e[0] && t[1] === e[1] } function G(t, e) { var n = t[0], r = t[1], o = e[0], a = e[1]; return Math.abs(n - o) <= i.b * Math.max(1, Math.abs(n), Math.abs(o)) && Math.abs(r - a) <= i.b * Math.max(1, Math.abs(r), Math.abs(a)) } var Y, V = _, X = c, z = h, H = f, W = b, q = C, U = O, Z = (Y = r(), function (t, e, n, i, r, o) { var a, s; for (e || (e = 2), n || (n = 0), s = i ? Math.min(i * e + n, t.length) : t.length, a = n; a < s; a += e)Y[0] = t[a], Y[1] = t[a + 1], r(Y, Y, o), t[a] = Y[0], t[a + 1] = Y[1]; return t }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getDefaultCategoryScaleRange = e.getName = e.syncScale = e.createScaleByField = void 0; var i = n(1), r = n(0), o = n(31), a = n(26), s = /^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]+)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/; e.createScaleByField = function (t, e, n) { var a = e || []; if (r.isNumber(t) || r.isNil(r.firstValue(a, t)) && r.isEmpty(n)) return new (o.getScale("identity"))({ field: t.toString(), values: [t] }); var u = r.valuesOfKey(a, t), l = r.get(n, "type", function (t) { var e = "linear"; return s.test(t) ? e = "timeCat" : r.isString(t) && (e = "cat"), e }(u[0])); return new (o.getScale(l))(i.__assign({ field: t, values: u }, n)) }, e.syncScale = function (t, e) { if ("identity" !== t.type && "identity" !== e.type) { var n = {}; for (var i in e) Object.prototype.hasOwnProperty.call(e, i) && (n[i] = e[i]); t.change(n) } }, e.getName = function (t) { return t.alias || t.field }, e.getDefaultCategoryScaleRange = function (t, e, n) { var i, o = t.values.length; if (1 === o) i = [.5, 1]; else { var s = 0; i = a.isFullCircle(e) ? e.isTransposed ? [(s = 1 / o * r.get(n, "widthRatio.multiplePie", 1 / 1.3)) / 2, 1 - s / 2] : [0, 1 - 1 / o] : [s = 1 / o / 2, 1 - s] } return i } }, function (t, e, n) { "use strict"; n.r(e); var i = n(135); n.d(e, "Annotation", (function () { return i })); var r = n(137); n.d(e, "Axis", (function () { return r })); var o = n(139); n.d(e, "Crosshair", (function () { return o })); var a = n(141); n.d(e, "Grid", (function () { return a })); var s = n(142); n.d(e, "Legend", (function () { return s })); var u = n(143); n.d(e, "Tooltip", (function () { return u })); var l = n(52); n.d(e, "Component", (function () { return l.a })); var c = n(8); n.d(e, "GroupComponent", (function () { return c.a })); var h = n(39); n.d(e, "HtmlComponent", (function () { return h.a })); var f = n(140); n.d(e, "Slider", (function () { return f.a })); var p = n(145); n.d(e, "Scrollbar", (function () { return p.a })); var d = n(109); for (var g in d) ["default", "Component", "GroupComponent", "HtmlComponent", "Axis", "Annotation", "Grid", "Legend", "Tooltip", "Crosshair", "Slider", "Scrollbar", "propagationDelegate", "TOOLTIP_CSS_CONST"].indexOf(g) < 0 && function (t) { n.d(e, t, (function () { return d[t] })) }(g); var y = n(110); for (var g in y) ["default", "Component", "GroupComponent", "HtmlComponent", "Axis", "Annotation", "Grid", "Legend", "Tooltip", "Crosshair", "Slider", "Scrollbar", "propagationDelegate", "TOOLTIP_CSS_CONST"].indexOf(g) < 0 && function (t) { n.d(e, t, (function () { return y[t] })) }(g); var v = n(71); n.d(e, "propagationDelegate", (function () { return v.a })); var m = n(18); n.d(e, "TOOLTIP_CSS_CONST", (function () { return m })) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.convertPolarPath = e.convertNormalPath = e.getSplinePath = e.getLinePath = e.catmullRom2bezier = e.smoothBezier = void 0; var i = n(6), r = n(0), o = n(26); function a(t, e) { for (var n = [t[0]], i = 1, r = t.length; i < r; i += 2) { var o = e.convert({ x: t[i], y: t[i + 1] }); n.push(o.x, o.y) } return n } function s(t, e) { var n = e.isTransposed, i = t[1], r = t[6], o = t[7], a = e.convert({ x: r, y: o }); return ["A", i, i, 0, 0, n ? 0 : 1, a.x, a.y] } function u(t, n, i) { for (var r = !!n, o = [], a = 0, s = t.length; a < s; a += 2)o.push([t[a], t[a + 1]]); var u, l, c, h = e.smoothBezier(o, .4, r, i), f = o.length, p = []; for (a = 0; a < f - 1; a++)u = h[2 * a], l = h[2 * a + 1], c = o[a + 1], p.push(["C", u[0], u[1], l[0], l[1], c[0], c[1]]); return r && (u = h[f], l = h[f + 1], c = o[0], p.push(["C", u[0], u[1], l[0], l[1], c[0], c[1]])), p } function l(t, e) { return function (t, e) { var n = []; if (t.length) { n.push(["M", t[0].x, t[0].y]); for (var i = 1, r = t.length; i < r; i += 1) { var o = t[i]; n.push(["L", o.x, o.y]) } e && n.push(["Z"]) } return n }(t, e) } e.smoothBezier = function (t, e, n, r) { var o, a, s, u, l = [], c = !!r; if (c) { s = [1 / 0, 1 / 0], u = [-1 / 0, -1 / 0]; for (var h = 0, f = t.length; h < f; h++) { var p = t[h]; s = i.vec2.min([0, 0], s, p), u = i.vec2.max([0, 0], u, p) } s = i.vec2.min([0, 0], s, r[0]), u = i.vec2.max([0, 0], u, r[1]) } h = 0; for (var d = t.length; h < d; h++) { p = t[h]; if (n) o = t[h ? h - 1 : d - 1], a = t[(h + 1) % d]; else { if (0 === h || h === d - 1) { l.push(p); continue } o = t[h - 1], a = t[h + 1] } var g = [0, 0]; g = i.vec2.sub(g, a, o), g = i.vec2.scale(g, g, e); var y = i.vec2.distance(p, o), v = i.vec2.distance(p, a), m = y + v; 0 !== m && (y /= m, v /= m); var x = i.vec2.scale([0, 0], g, -y), b = i.vec2.scale([0, 0], g, v), C = i.vec2.add([0, 0], p, x), _ = i.vec2.add([0, 0], p, b); c && (C = i.vec2.max([0, 0], C, s), C = i.vec2.min([0, 0], C, u), _ = i.vec2.max([0, 0], _, s), _ = i.vec2.min([0, 0], _, u)), l.push(C), l.push(_) } return n && l.push(l.shift()), l }, e.catmullRom2bezier = u, e.getLinePath = l, e.getSplinePath = function (t, e, n) { var i = [], r = t[0], o = null; if (t.length <= 2) return l(t, e); for (var a = 0, s = t.length; a < s; a++) { var c = t[a]; o && o.x === c.x && o.y === c.y || (i.push(c.x), i.push(c.y), o = c) } var h = u(i, e, n || [[0, 0], [1, 1]]); return h.unshift(["M", r.x, r.y]), h }, e.convertNormalPath = function (t, e) { var n = []; return r.each(e, (function (e) { switch (e[0].toLowerCase()) { case "m": case "l": case "c": n.push(a(e, t)); break; case "a": n.push(s(e, t)); break; case "z": default: n.push(e) } })), n }, e.convertPolarPath = function (t, e) { var n, i, u, l = []; return r.each(e, (function (r, c) { switch (r[0].toLowerCase()) { case "m": case "c": case "q": l.push(a(r, t)); break; case "l": n = e[c - 1], i = r, u = t.isTransposed, (u ? n[n.length - 2] === i[1] : n[n.length - 1] === i[2]) ? l = l.concat(function (t, e, n) { var i = n.isTransposed, r = n.startAngle, a = n.endAngle, s = "a" === t[0].toLowerCase() ? { x: t[6], y: t[7] } : { x: t[1], y: t[2] }, u = { x: e[1], y: e[2] }, l = [], c = i ? "y" : "x", h = Math.abs(u[c] - s[c]) * (a - r), f = u[c] >= s[c] ? 1 : 0, p = h > Math.PI ? 1 : 0, d = n.convert(u), g = o.getDistanceToCenter(n, d); if (g >= .5) if (h === 2 * Math.PI) { var y = { x: (u.x + s.x) / 2, y: (u.y + s.y) / 2 }, v = n.convert(y); l.push(["A", g, g, 0, p, f, v.x, v.y]), l.push(["A", g, g, 0, p, f, d.x, d.y]) } else l.push(["A", g, g, 0, p, f, d.x, d.y]); return l }(n, i, t)) : l.push(a(r, t)); break; case "a": l.push(s(r, t)); break; case "z": default: l.push(r) } })), function (t) { r.each(t, (function (e, n) { if ("a" === e[0].toLowerCase()) { var i = t[n - 1], r = t[n + 1]; r && "a" === r[0].toLowerCase() ? i && "l" === i[0].toLowerCase() && (i[0] = "M") : i && "a" === i[0].toLowerCase() && r && "l" === r[0].toLowerCase() && (r[0] = "M") } })) }(l), l } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.MarkerSymbols = void 0, e.MarkerSymbols = { hexagon: function (t, e, n) { var i = n / 2 * Math.sqrt(3); return [["M", t, e - n], ["L", t + i, e - n / 2], ["L", t + i, e + n / 2], ["L", t, e + n], ["L", t - i, e + n / 2], ["L", t - i, e - n / 2], ["Z"]] }, bowtie: function (t, e, n) { var i = n - 1.5; return [["M", t - n, e - i], ["L", t + n, e + i], ["L", t + n, e - i], ["L", t - n, e + i], ["Z"]] }, cross: function (t, e, n) { return [["M", t - n, e - n], ["L", t + n, e + n], ["M", t + n, e - n], ["L", t - n, e + n]] }, tick: function (t, e, n) { return [["M", t - n / 2, e - n], ["L", t + n / 2, e - n], ["M", t, e - n], ["L", t, e + n], ["M", t - n / 2, e + n], ["L", t + n / 2, e + n]] }, plus: function (t, e, n) { return [["M", t - n, e], ["L", t + n, e], ["M", t, e - n], ["L", t, e + n]] }, hyphen: function (t, e, n) { return [["M", t - n, e], ["L", t + n, e]] }, line: function (t, e, n) { return [["M", t, e - n], ["L", t, e + n]] } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getRectWithCornerRadius = e.getFunnelPath = e.getIntervalRectPath = e.getBackgroundRectPath = e.parseRadius = e.getRectPath = e.getRectPoints = void 0; var i = n(0), r = n(24); function o(t, e) { void 0 === e && (e = !0); var n = [], i = t[0]; n.push(["M", i.x, i.y]); for (var r = 1, o = t.length; r < o; r++)n.push(["L", t[r].x, t[r].y]); return e && (n.push(["L", i.x, i.y]), n.push(["z"])), n } function a(t, e) { var n = 0, r = 0, o = 0, a = 0; return i.isArray(t) ? 1 === t.length ? n = r = o = a = t[0] : 2 === t.length ? (n = o = t[0], r = a = t[1]) : 3 === t.length ? (n = t[0], r = a = t[1], o = t[2]) : (n = t[0], r = t[1], o = t[2], a = t[3]) : n = r = o = a = t, n + r > e && (r = e - (n = n ? e / (1 + r / n) : 0)), o + a > e && (a = e - (o = o ? e / (1 + a / o) : 0)), [n || 0, r || 0, o || 0, a || 0] } e.getRectPoints = function (t, e) { void 0 === e && (e = !1); var n, r, o, a, s = t.x, u = t.y, l = t.y0, c = t.size; i.isArray(u) ? (n = u[0], r = u[1]) : (n = l, r = u), i.isArray(s) ? (o = s[0], a = s[1]) : (o = s - c / 2, a = s + c / 2); var h = [{ x: o, y: n }, { x: o, y: r }]; return e ? h.push({ x: a, y: (r + n) / 2 }) : h.push({ x: a, y: r }, { x: a, y: n }), h }, e.getRectPath = o, e.parseRadius = a, e.getBackgroundRectPath = function (t, e, n) { var o = []; if (n.isRect) { var s = n.isTransposed ? { x: n.start.x, y: e[0].y } : { x: e[0].x, y: n.start.y }, u = n.isTransposed ? { x: n.end.x, y: e[2].y } : { x: e[3].x, y: n.end.y }, l = i.get(t, ["background", "style", "radius"]); if (l) { var c = n.isTransposed ? Math.abs(e[0].y - e[2].y) : e[2].x - e[1].x, h = n.isTransposed ? n.getWidth() : n.getHeight(), f = a(l, Math.min(c, h)), p = f[0], d = f[1], g = f[2], y = f[3]; o.push(["M", s.x, u.y + p]), 0 !== p && o.push(["A", p, p, 0, 0, 1, s.x + p, u.y]), o.push(["L", u.x - d, u.y]), 0 !== d && o.push(["A", d, d, 0, 0, 1, u.x, u.y + d]), o.push(["L", u.x, s.y - g]), 0 !== g && o.push(["A", g, g, 0, 0, 1, u.x - g, s.y]), o.push(["L", s.x + y, s.y]), 0 !== y && o.push(["A", y, y, 0, 0, 1, s.x, s.y - y]) } else o.push(["M", s.x, s.y]), o.push(["L", u.x, s.y]), o.push(["L", u.x, u.y]), o.push(["L", s.x, u.y]), o.push(["L", s.x, s.y]); o.push(["z"]) } if (n.isPolar) { var v = n.getCenter(), m = r.getAngle(t, n), x = m.startAngle, b = m.endAngle; if ("theta" === n.type || n.isTransposed) { var C = function (t) { return Math.pow(t, 2) }; p = Math.sqrt(C(v.x - e[0].x) + C(v.y - e[0].y)), d = Math.sqrt(C(v.x - e[2].x) + C(v.y - e[2].y)); o = r.getSectorPath(v.x, v.y, p, n.startAngle, n.endAngle, d) } else o = r.getSectorPath(v.x, v.y, n.getRadius(), x, b) } return o }, e.getIntervalRectPath = function (t, e, n) { var i = n.getWidth(), r = n.getHeight(), a = "rect" === n.type, s = [], u = (t[2].x - t[1].x) / 2, l = n.isTransposed ? u * r / i : u * i / r; return "round" === e ? (a ? (s.push(["M", t[0].x, t[0].y + l]), s.push(["L", t[1].x, t[1].y - l]), s.push(["A", u, u, 0, 0, 1, t[2].x, t[2].y - l]), s.push(["L", t[3].x, t[3].y + l]), s.push(["A", u, u, 0, 0, 1, t[0].x, t[0].y + l])) : (s.push(["M", t[0].x, t[0].y]), s.push(["L", t[1].x, t[1].y]), s.push(["A", u, u, 0, 0, 1, t[2].x, t[2].y]), s.push(["L", t[3].x, t[3].y]), s.push(["A", u, u, 0, 0, 1, t[0].x, t[0].y])), s.push(["z"])) : s = o(t), s }, e.getFunnelPath = function (t, e, n) { var r = []; return i.isNil(e) ? n ? r.push(["M", t[0].x, t[0].y], ["L", t[1].x, t[1].y], ["L", t[2].x, t[2].y], ["L", t[2].x, t[2].y], ["Z"]) : r.push(["M", t[0].x, t[0].y], ["L", t[1].x, t[1].y], ["L", t[2].x, t[2].y], ["L", t[3].x, t[3].y], ["Z"]) : r.push(["M", t[0].x, t[0].y], ["L", t[1].x, t[1].y], ["L", e[1].x, e[1].y], ["L", e[0].x, e[0].y], ["Z"]), r }, e.getRectWithCornerRadius = function (t, e, n) { var i, r, o, s, u = t[0], l = t[1], c = t[2], h = t[3], f = [0, 0, 0, 0], p = f[0], d = f[1], g = f[2], y = f[3]; u.y < l.y ? (l = t[0], u = t[1], h = t[2], c = t[3], y = (i = a(n, Math.min(h.x - u.x, u.y - l.y)))[0], g = i[1], d = i[2], p = i[3]) : (p = (r = a(n, Math.min(h.x - u.x, u.y - l.y)))[0], d = r[1], g = r[2], y = r[3]), e.isTransposed && (u = t[0], h = t[1], c = t[2], l = t[3], t[0].x > t[1].x ? (h = t[0], u = t[1], l = t[2], c = t[3], p = (o = a(n, Math.min(h.x - u.x, u.y - l.y)))[0], y = o[1], g = o[2], d = o[3]) : (d = (s = a(n, Math.min(h.x - u.x, u.y - l.y)))[0], g = s[1], y = s[2], p = s[3])); var v = []; return v.push(["M", l.x, l.y + p]), 0 !== p && v.push(["A", p, p, 0, 0, 1, l.x + p, l.y]), v.push(["L", c.x - d, c.y]), 0 !== d && v.push(["A", d, d, 0, 0, 1, c.x, c.y + d]), v.push(["L", h.x, h.y - g]), 0 !== g && v.push(["A", g, g, 0, 0, 1, h.x - g, h.y]), v.push(["L", u.x + y, u.y]), 0 !== y && v.push(["A", y, y, 0, 0, 1, u.x, u.y - y]), v.push(["L", l.x, l.y + p]), v.push(["z"]), v } }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return s })); var i = n(5); function r(t) { return Math.sqrt(t[0] * t[0] + t[1] * t[1]) } function o(t, e) { return r(t) * r(e) ? (t[0] * e[0] + t[1] * e[1]) / (r(t) * r(e)) : 1 } function a(t, e) { return (t[0] * e[1] < t[1] * e[0] ? -1 : 1) * Math.acos(o(t, e)) } function s(t, e) { var n = e[1], r = e[2], s = Object(i.m)(Object(i.o)(e[3]), 2 * Math.PI), u = e[4], l = e[5], c = t[0], h = t[1], f = e[6], p = e[7], d = Math.cos(s) * (c - f) / 2 + Math.sin(s) * (h - p) / 2, g = -1 * Math.sin(s) * (c - f) / 2 + Math.cos(s) * (h - p) / 2, y = d * d / (n * n) + g * g / (r * r); y > 1 && (n *= Math.sqrt(y), r *= Math.sqrt(y)); var v = n * n * (g * g) + r * r * (d * d), m = v ? Math.sqrt((n * n * (r * r) - v) / v) : 1; u === l && (m *= -1), isNaN(m) && (m = 0); var x = r ? m * n * g / r : 0, b = n ? m * -r * d / n : 0, C = (c + f) / 2 + Math.cos(s) * x - Math.sin(s) * b, _ = (h + p) / 2 + Math.sin(s) * x + Math.cos(s) * b, O = [(d - x) / n, (g - b) / r], M = [(-1 * d - x) / n, (-1 * g - b) / r], w = a([1, 0], O), S = a(O, M); return o(O, M) <= -1 && (S = Math.PI), o(O, M) >= 1 && (S = 0), 0 === l && S > 0 && (S -= 2 * Math.PI), 1 === l && S < 0 && (S += 2 * Math.PI), { cx: C, cy: _, rx: Object(i.j)(t, [f, p]) ? 0 : n, ry: Object(i.j)(t, [f, p]) ? 0 : r, startAngle: w, endAngle: w + S, xRotation: s, arcFlag: u, sweepFlag: l } } }, function (t, e) { }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(38), s = n(24), u = i.__importDefault(n(173)); function l(t) { var e = 0; return r.each(t, (function (t) { e += t })), e / t.length } var c = function () { function t(t) { this.geometry = t } return t.prototype.getLabelItems = function (t) { var e = this, n = [], o = this.getLabelCfgs(t); return r.each(t, (function (t, a) { var s = o[a]; if (!s || r.isNil(t.x) || r.isNil(t.y)) n.push(null); else { var u = r.isArray(s.content) ? s.content : [s.content]; s.content = u; var l = u.length; r.each(u, (function (o, a) { if (r.isNil(o) || "" === o) n.push(null); else { var u = i.__assign(i.__assign({}, s), e.getLabelPoint(s, t, a)); u.textAlign || (u.textAlign = e.getLabelAlign(u, a, l)), u.offset <= 0 && (u.labelLine = null), n.push(u) } })) } })), n }, t.prototype.render = function (t, e) { void 0 === e && (e = !1); var n = this.getLabelItems(t), i = this.getLabelsRenderer(), r = this.getGeometryShapes(); i.render(n, r, e) }, t.prototype.clear = function () { var t = this.labelsRenderer; t && t.clear() }, t.prototype.destroy = function () { var t = this.labelsRenderer; t && t.destroy(), this.labelsRenderer = null }, t.prototype.getCoordinate = function () { return this.geometry.coordinate }, t.prototype.getDefaultLabelCfg = function (t, e) { var n = this.geometry, i = n.type, o = n.theme; return "polygon" === i || "interval" === i && "middle" === e || t < 0 && !["line", "point", "path"].includes(i) ? r.get(o, "innerLabels", {}) : r.get(o, "labels", {}) }, t.prototype.getThemedLabelCfg = function (t) { var e = this.geometry, n = this.getDefaultLabelCfg(), i = e.type, o = e.theme; return "polygon" === i || t.offset < 0 && !["line", "point", "path"].includes(i) ? r.deepMix({}, n, o.innerLabels, t) : r.deepMix({}, n, o.labels, t) }, t.prototype.setLabelPosition = function (t, e, n, i) { }, t.prototype.getLabelOffset = function (t) { var e = this.getCoordinate(), n = this.getOffsetVector(t); return e.isTransposed ? n[0] : n[1] }, t.prototype.getLabelOffsetPoint = function (t, e, n) { var i = t.offset, r = this.getCoordinate().isTransposed, o = r ? "x" : "y", a = r ? 1 : -1, s = { x: 0, y: 0 }; return s[o] = e > 0 || 1 === n ? i * a : i * a * -1, s }, t.prototype.getLabelPoint = function (t, e, n) { var i = this.getCoordinate(), o = t.content.length; function a(e, n, i) { void 0 === i && (i = !1); var o = e; return r.isArray(o) && (o = 1 === t.content.length ? i ? l(o) : o.length <= 2 ? o[e.length - 1] : l(o) : o[n]), o } var u = { content: t.content[n], x: 0, y: 0, start: { x: 0, y: 0 }, color: "#fff" }, c = r.isArray(e.shape) ? e.shape[0] : e.shape, h = "funnel" === c || "pyramid" === c; if ("polygon" === this.geometry.type) { var f = s.getPolygonCentroid(e.x, e.y); u.x = f[0], u.y = f[1] } else "interval" !== this.geometry.type || h ? (u.x = a(e.x, n), u.y = a(e.y, n)) : (u.x = a(e.x, n, !0), u.y = a(e.y, n)); if (h) { var p = r.get(e, "nextPoints"), d = r.get(e, "points"); if (p) { var g = i.convert(d[1]), y = i.convert(p[1]); u.x = (g.x + y.x) / 2, u.y = (g.y + y.y) / 2 } else if ("pyramid" === c) { g = i.convert(d[1]), y = i.convert(d[2]); u.x = (g.x + y.x) / 2, u.y = (g.y + y.y) / 2 } } t.position && this.setLabelPosition(u, e, n, t.position); var v = this.getLabelOffsetPoint(t, n, o); return u.start = { x: u.x, y: u.y }, u.x += v.x, u.y += v.y, u.color = e.color, u }, t.prototype.getLabelAlign = function (t, e, n) { var i = "center"; if (this.getCoordinate().isTransposed) { var r = t.offset; i = r < 0 ? "right" : 0 === r ? "center" : "left", n > 1 && 0 === e && ("right" === i ? i = "left" : "left" === i && (i = "right")) } return i }, t.prototype.getLabelId = function (t) { var e = this.geometry, n = e.type, i = e.getXScale(), r = e.getYScale(), a = t[o.FIELD_ORIGIN], s = e.getElementId(t); return "line" === n || "area" === n ? s += " " + a[i.field] : "path" === n && (s += " " + a[i.field] + "-" + a[r.field]), s }, t.prototype.getLabelsRenderer = function () { var t = this.geometry, e = t.labelsContainer, n = t.labelOption, i = t.canvasRegion, o = t.animateOption, s = this.geometry.coordinate, l = this.labelsRenderer; return l || (l = new u.default({ container: e, layout: r.get(n, ["cfg", "layout"], { type: this.defaultLayout }) }), this.labelsRenderer = l), l.region = i, l.animate = !!o && a.getDefaultAnimateCfg("label", s), l }, t.prototype.getLabelCfgs = function (t) { var e = this, n = this.geometry, a = n.labelOption, s = n.scales, u = n.coordinate, l = a, c = l.fields, h = l.callback, f = l.cfg, p = c.map((function (t) { return s[t] })), d = []; return r.each(t, (function (t, n) { var a, s = t[o.FIELD_ORIGIN], l = e.getLabelText(s, p); if (h) { var g = c.map((function (t) { return s[t] })); if (a = h.apply(void 0, g), r.isNil(a)) return void d.push(null) } var y = i.__assign(i.__assign({ id: e.getLabelId(t), elementId: e.geometry.getElementId(t), data: s, mappingData: t, coordinate: u }, f), a); r.isFunction(y.position) && (y.position = y.position(s, t, n)); var v = e.getLabelOffset(y.offset || 0), m = e.getDefaultLabelCfg(v, y.position); (y = r.deepMix({}, m, y)).offset = e.getLabelOffset(y.offset || 0); var x = y.content; r.isFunction(x) ? y.content = x(s, t, n) : r.isUndefined(x) && (y.content = l[0]), d.push(y) })), d }, t.prototype.getLabelText = function (t, e) { var n = []; return r.each(e, (function (e) { var i = t[e.field]; i = r.isArray(i) ? i.map((function (t) { return e.getText(t) })) : e.getText(i), r.isNil(i) || "" === i ? n.push(null) : n.push(i) })), n }, t.prototype.getOffsetVector = function (t) { void 0 === t && (t = 0); var e = this.getCoordinate(), n = 0; return r.isNumber(t) && (n = t), e.isTransposed ? e.applyMatrix(n, 0) : e.applyMatrix(0, n) }, t.prototype.getGeometryShapes = function () { var t = this.geometry, e = {}; return r.each(t.elementsMap, (function (t, n) { e[n] = t.shape })), r.each(t.getOffscreenGroup().getChildren(), (function (n) { var i = t.getElementId(n.get("origin").mappingData); e[i] = n })), e }, t }(); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getConstraint = e.getShapeAttrs = void 0; var i = n(0), r = n(89), o = n(21), a = n(59); function s(t, e, n, r, o) { var s = []; if (t.length) { for (var u = [], l = [], c = 0, h = t.length; c < h; c++) { var f = t[c]; u.push(f[1]), l.push(f[0]) } l = l.reverse(), i.each([u, l], (function (t, i) { var c = [], h = r.parsePoints(t), f = h[0]; 1 === u.length && 1 === l.length ? c = 0 === i ? [["M", f.x - .5, f.y], ["L", f.x + .5, f.y]] : [["L", f.x + .5, f.y], ["L", f.x - .5, f.y]] : (e && h.push({ x: f.x, y: f.y }), c = n ? a.getSplinePath(h, !1, o) : a.getLinePath(h, !1), i > 0 && (c[0][0] = "L")), s = s.concat(c) })), s.push(["Z"]) } return s } e.getShapeAttrs = function (t, e, n, i, a) { for (var u = o.getStyle(t, e, !e, "lineWidth"), l = t.connectNulls, c = t.isInCircle, h = t.points, f = t.showSinglePoint, p = r.getPathPoints(h, l, f), d = [], g = 0, y = p.length; g < y; g++) { var v = p[g]; d = d.concat(s(v, c, n, i, a)) } return u.path = d, u }, e.getConstraint = function (t) { var e = t.start, n = t.end; return [[e.x, n.y], [n.x, e.y]] } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = i.__importDefault(n(22)), a = n(19), s = n(19), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "", e.ignoreItemStates = [], e } return i.__extends(e, t), e.prototype.getTriggerListInfo = function () { var t = s.getDelegationObject(this.context), e = null; return s.isList(t) && (e = { item: t.item, list: t.component }), e }, e.prototype.getAllowComponents = function () { var t = this, e = this.context.view, n = a.getComponents(e), i = []; return r.each(n, (function (e) { e.isList() && t.allowSetStateByElement(e) && i.push(e) })), i }, e.prototype.hasState = function (t, e) { return t.hasState(e, this.stateName) }, e.prototype.clearAllComponentsState = function () { var t = this, e = this.getAllowComponents(); r.each(e, (function (e) { e.clearItemsState(t.stateName) })) }, e.prototype.allowSetStateByElement = function (t) { var e = t.get("field"); if (!e) return !1; if (this.cfg && this.cfg.componentNames) { var n = t.get("name"); if (-1 === this.cfg.componentNames.indexOf(n)) return !1 } var i = this.context.view, r = s.getScaleByField(i, e); return r && r.isCategory }, e.prototype.allowSetStateByItem = function (t, e) { var n = this.ignoreItemStates; return !n.length || 0 === n.filter((function (n) { return e.hasState(t, n) })).length }, e.prototype.setStateByElement = function (t, e, n) { var i = t.get("field"), r = this.context.view, o = s.getScaleByField(r, i), a = s.getElementValue(e, i), u = o.getText(a); this.setItemsState(t, u, n) }, e.prototype.setStateEnable = function (t) { var e = this, n = s.getCurrentElement(this.context); if (n) { var i = this.getAllowComponents(); r.each(i, (function (i) { e.setStateByElement(i, n, t) })) } else { var o = s.getDelegationObject(this.context); if (s.isList(o)) { var a = o.item, u = o.component; this.allowSetStateByElement(u) && this.allowSetStateByItem(a, u) && this.setItemState(u, a, t) } } }, e.prototype.setItemsState = function (t, e, n) { var i = this, o = t.getItems(); r.each(o, (function (r) { r.name === e && i.setItemState(t, r, n) })) }, e.prototype.setItemState = function (t, e, n) { t.setItemState(e, this.stateName, n) }, e.prototype.setState = function () { this.setStateEnable(!0) }, e.prototype.reset = function () { this.setStateEnable(!1) }, e.prototype.toggle = function () { var t = this.getTriggerListInfo(); if (t && t.item) { var e = t.list, n = t.item, i = this.hasState(e, n); this.setItemState(e, n, !i) } }, e.prototype.clear = function () { var t = this.getTriggerListInfo(); t ? t.list.clearItemsState(this.stateName) : this.clearAllComponentsState() }, e }(o.default); e.default = u }, function (t, e, n) { "use strict"; var i = function () { function t(t, e) { this.bubbles = !0, this.target = null, this.currentTarget = null, this.delegateTarget = null, this.delegateObject = null, this.defaultPrevented = !1, this.propagationStopped = !1, this.shape = null, this.fromShape = null, this.toShape = null, this.propagationPath = [], this.type = t, this.name = t, this.originalEvent = e, this.timeStamp = e.timeStamp } return t.prototype.preventDefault = function () { this.defaultPrevented = !0, this.originalEvent.preventDefault && this.originalEvent.preventDefault() }, t.prototype.stopPropagation = function () { this.propagationStopped = !0 }, t.prototype.toString = function () { return "[Event (type=" + this.type + ")]" }, t.prototype.save = function () { }, t.prototype.restore = function () { }, t }(); e.a = i }, function (t, e, n) { "use strict"; var i = n(1), r = n(101), o = n(11), a = function (t) { function e(e) { var n = t.call(this) || this; n.destroyed = !1; var i = n.getDefaultCfg(); return n.cfg = Object(o.i)(i, e), n } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { return {} }, e.prototype.get = function (t) { return this.cfg[t] }, e.prototype.set = function (t, e) { this.cfg[t] = e }, e.prototype.destroy = function () { this.cfg = { destroyed: !0 }, this.off(), this.destroyed = !0 }, e }(r.default); e.a = a }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "create", (function () { return r })), n.d(e, "clone", (function () { return o })), n.d(e, "length", (function () { return a })), n.d(e, "fromValues", (function () { return s })), n.d(e, "copy", (function () { return u })), n.d(e, "set", (function () { return l })), n.d(e, "add", (function () { return c })), n.d(e, "subtract", (function () { return h })), n.d(e, "multiply", (function () { return f })), n.d(e, "divide", (function () { return p })), n.d(e, "ceil", (function () { return d })), n.d(e, "floor", (function () { return g })), n.d(e, "min", (function () { return y })), n.d(e, "max", (function () { return v })), n.d(e, "round", (function () { return m })), n.d(e, "scale", (function () { return x })), n.d(e, "scaleAndAdd", (function () { return b })), n.d(e, "distance", (function () { return C })), n.d(e, "squaredDistance", (function () { return _ })), n.d(e, "squaredLength", (function () { return O })), n.d(e, "negate", (function () { return M })), n.d(e, "inverse", (function () { return w })), n.d(e, "normalize", (function () { return S })), n.d(e, "dot", (function () { return A })), n.d(e, "cross", (function () { return P })), n.d(e, "lerp", (function () { return I })), n.d(e, "hermite", (function () { return T })), n.d(e, "bezier", (function () { return E })), n.d(e, "random", (function () { return j })), n.d(e, "transformMat4", (function () { return L })), n.d(e, "transformMat3", (function () { return B })), n.d(e, "transformQuat", (function () { return k })), n.d(e, "rotateX", (function () { return D })), n.d(e, "rotateY", (function () { return R })), n.d(e, "rotateZ", (function () { return F })), n.d(e, "angle", (function () { return N })), n.d(e, "zero", (function () { return G })), n.d(e, "str", (function () { return Y })), n.d(e, "exactEquals", (function () { return V })), n.d(e, "equals", (function () { return X })), n.d(e, "sub", (function () { return H })), n.d(e, "mul", (function () { return W })), n.d(e, "div", (function () { return q })), n.d(e, "dist", (function () { return U })), n.d(e, "sqrDist", (function () { return Z })), n.d(e, "len", (function () { return Q })), n.d(e, "sqrLen", (function () { return K })), n.d(e, "forEach", (function () { return $ })); var i = n(13); function r() { var t = new i.a(3); return i.a != Float32Array && (t[0] = 0, t[1] = 0, t[2] = 0), t } function o(t) { var e = new i.a(3); return e[0] = t[0], e[1] = t[1], e[2] = t[2], e } function a(t) { var e = t[0], n = t[1], i = t[2]; return Math.hypot(e, n, i) } function s(t, e, n) { var r = new i.a(3); return r[0] = t, r[1] = e, r[2] = n, r } function u(t, e) { return t[0] = e[0], t[1] = e[1], t[2] = e[2], t } function l(t, e, n, i) { return t[0] = e, t[1] = n, t[2] = i, t } function c(t, e, n) { return t[0] = e[0] + n[0], t[1] = e[1] + n[1], t[2] = e[2] + n[2], t } function h(t, e, n) { return t[0] = e[0] - n[0], t[1] = e[1] - n[1], t[2] = e[2] - n[2], t } function f(t, e, n) { return t[0] = e[0] * n[0], t[1] = e[1] * n[1], t[2] = e[2] * n[2], t } function p(t, e, n) { return t[0] = e[0] / n[0], t[1] = e[1] / n[1], t[2] = e[2] / n[2], t } function d(t, e) { return t[0] = Math.ceil(e[0]), t[1] = Math.ceil(e[1]), t[2] = Math.ceil(e[2]), t } function g(t, e) { return t[0] = Math.floor(e[0]), t[1] = Math.floor(e[1]), t[2] = Math.floor(e[2]), t } function y(t, e, n) { return t[0] = Math.min(e[0], n[0]), t[1] = Math.min(e[1], n[1]), t[2] = Math.min(e[2], n[2]), t } function v(t, e, n) { return t[0] = Math.max(e[0], n[0]), t[1] = Math.max(e[1], n[1]), t[2] = Math.max(e[2], n[2]), t } function m(t, e) { return t[0] = Math.round(e[0]), t[1] = Math.round(e[1]), t[2] = Math.round(e[2]), t } function x(t, e, n) { return t[0] = e[0] * n, t[1] = e[1] * n, t[2] = e[2] * n, t } function b(t, e, n, i) { return t[0] = e[0] + n[0] * i, t[1] = e[1] + n[1] * i, t[2] = e[2] + n[2] * i, t } function C(t, e) { var n = e[0] - t[0], i = e[1] - t[1], r = e[2] - t[2]; return Math.hypot(n, i, r) } function _(t, e) { var n = e[0] - t[0], i = e[1] - t[1], r = e[2] - t[2]; return n * n + i * i + r * r } function O(t) { var e = t[0], n = t[1], i = t[2]; return e * e + n * n + i * i } function M(t, e) { return t[0] = -e[0], t[1] = -e[1], t[2] = -e[2], t } function w(t, e) { return t[0] = 1 / e[0], t[1] = 1 / e[1], t[2] = 1 / e[2], t } function S(t, e) { var n = e[0], i = e[1], r = e[2], o = n * n + i * i + r * r; return o > 0 && (o = 1 / Math.sqrt(o)), t[0] = e[0] * o, t[1] = e[1] * o, t[2] = e[2] * o, t } function A(t, e) { return t[0] * e[0] + t[1] * e[1] + t[2] * e[2] } function P(t, e, n) { var i = e[0], r = e[1], o = e[2], a = n[0], s = n[1], u = n[2]; return t[0] = r * u - o * s, t[1] = o * a - i * u, t[2] = i * s - r * a, t } function I(t, e, n, i) { var r = e[0], o = e[1], a = e[2]; return t[0] = r + i * (n[0] - r), t[1] = o + i * (n[1] - o), t[2] = a + i * (n[2] - a), t } function T(t, e, n, i, r, o) { var a = o * o, s = a * (2 * o - 3) + 1, u = a * (o - 2) + o, l = a * (o - 1), c = a * (3 - 2 * o); return t[0] = e[0] * s + n[0] * u + i[0] * l + r[0] * c, t[1] = e[1] * s + n[1] * u + i[1] * l + r[1] * c, t[2] = e[2] * s + n[2] * u + i[2] * l + r[2] * c, t } function E(t, e, n, i, r, o) { var a = 1 - o, s = a * a, u = o * o, l = s * a, c = 3 * o * s, h = 3 * u * a, f = u * o; return t[0] = e[0] * l + n[0] * c + i[0] * h + r[0] * f, t[1] = e[1] * l + n[1] * c + i[1] * h + r[1] * f, t[2] = e[2] * l + n[2] * c + i[2] * h + r[2] * f, t } function j(t, e) { e = e || 1; var n = 2 * i.c() * Math.PI, r = 2 * i.c() - 1, o = Math.sqrt(1 - r * r) * e; return t[0] = Math.cos(n) * o, t[1] = Math.sin(n) * o, t[2] = r * e, t } function L(t, e, n) { var i = e[0], r = e[1], o = e[2], a = n[3] * i + n[7] * r + n[11] * o + n[15]; return a = a || 1, t[0] = (n[0] * i + n[4] * r + n[8] * o + n[12]) / a, t[1] = (n[1] * i + n[5] * r + n[9] * o + n[13]) / a, t[2] = (n[2] * i + n[6] * r + n[10] * o + n[14]) / a, t } function B(t, e, n) { var i = e[0], r = e[1], o = e[2]; return t[0] = i * n[0] + r * n[3] + o * n[6], t[1] = i * n[1] + r * n[4] + o * n[7], t[2] = i * n[2] + r * n[5] + o * n[8], t } function k(t, e, n) { var i = n[0], r = n[1], o = n[2], a = n[3], s = e[0], u = e[1], l = e[2], c = r * l - o * u, h = o * s - i * l, f = i * u - r * s, p = r * f - o * h, d = o * c - i * f, g = i * h - r * c, y = 2 * a; return c *= y, h *= y, f *= y, p *= 2, d *= 2, g *= 2, t[0] = s + c + p, t[1] = u + h + d, t[2] = l + f + g, t } function D(t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[0], o[1] = r[1] * Math.cos(i) - r[2] * Math.sin(i), o[2] = r[1] * Math.sin(i) + r[2] * Math.cos(i), t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t } function R(t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[2] * Math.sin(i) + r[0] * Math.cos(i), o[1] = r[1], o[2] = r[2] * Math.cos(i) - r[0] * Math.sin(i), t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t } function F(t, e, n, i) { var r = [], o = []; return r[0] = e[0] - n[0], r[1] = e[1] - n[1], r[2] = e[2] - n[2], o[0] = r[0] * Math.cos(i) - r[1] * Math.sin(i), o[1] = r[0] * Math.sin(i) + r[1] * Math.cos(i), o[2] = r[2], t[0] = o[0] + n[0], t[1] = o[1] + n[1], t[2] = o[2] + n[2], t } function N(t, e) { var n = t[0], i = t[1], r = t[2], o = e[0], a = e[1], s = e[2], u = Math.sqrt(n * n + i * i + r * r) * Math.sqrt(o * o + a * a + s * s), l = u && A(t, e) / u; return Math.acos(Math.min(Math.max(l, -1), 1)) } function G(t) { return t[0] = 0, t[1] = 0, t[2] = 0, t } function Y(t) { return "vec3(" + t[0] + ", " + t[1] + ", " + t[2] + ")" } function V(t, e) { return t[0] === e[0] && t[1] === e[1] && t[2] === e[2] } function X(t, e) { var n = t[0], r = t[1], o = t[2], a = e[0], s = e[1], u = e[2]; return Math.abs(n - a) <= i.b * Math.max(1, Math.abs(n), Math.abs(a)) && Math.abs(r - s) <= i.b * Math.max(1, Math.abs(r), Math.abs(s)) && Math.abs(o - u) <= i.b * Math.max(1, Math.abs(o), Math.abs(u)) } var z, H = h, W = f, q = p, U = C, Z = _, Q = a, K = O, $ = (z = r(), function (t, e, n, i, r, o) { var a, s; for (e || (e = 3), n || (n = 0), s = i ? Math.min(i * e + n, t.length) : t.length, a = n; a < s; a += e)z[0] = t[a], z[1] = t[a + 1], z[2] = t[a + 2], r(z, z, o), t[a] = z[0], t[a + 1] = z[1], t[a + 2] = z[2]; return t }) }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return r })); var i = null; function r() { if (!i) { var t = document.createElement("canvas"); t.width = 1, t.height = 1, i = t.getContext("2d") } return i } }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return r })); var i = n(7); function r(t, e, n) { var r = new i.Event(e, n); r.target = t, r.propagationPath.push(t), t.emitDelegation(e, r); for (var o = t.getParent(); o;)o.emitDelegation(e, r), r.propagationPath.push(o), o = o.getParent() } }, function (t, e, n) { "use strict"; var i = n(1), r = n(73), o = n(11), a = {}; var s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.isCanvas = function () { return !1 }, e.prototype.getBBox = function () { var t = 1 / 0, e = -1 / 0, n = 1 / 0, i = -1 / 0, r = [], a = [], s = this.getChildren().filter((function (t) { return t.get("visible") && (!t.isGroup() || t.isGroup() && t.getChildren().length > 0) })); return s.length > 0 ? (Object(o.a)(s, (function (t) { var e = t.getBBox(); r.push(e.minX, e.maxX), a.push(e.minY, e.maxY) })), t = Math.min.apply(null, r), e = Math.max.apply(null, r), n = Math.min.apply(null, a), i = Math.max.apply(null, a)) : (t = 0, e = 0, n = 0, i = 0), { x: t, y: n, minX: t, minY: n, maxX: e, maxY: i, width: e - t, height: i - n } }, e.prototype.getCanvasBBox = function () { var t = 1 / 0, e = -1 / 0, n = 1 / 0, i = -1 / 0, r = [], a = [], s = this.getChildren().filter((function (t) { return t.get("visible") && (!t.isGroup() || t.isGroup() && t.getChildren().length > 0) })); return s.length > 0 ? (Object(o.a)(s, (function (t) { var e = t.getCanvasBBox(); r.push(e.minX, e.maxX), a.push(e.minY, e.maxY) })), t = Math.min.apply(null, r), e = Math.max.apply(null, r), n = Math.min.apply(null, a), i = Math.max.apply(null, a)) : (t = 0, e = 0, n = 0, i = 0), { x: t, y: n, minX: t, minY: n, maxX: e, maxY: i, width: e - t, height: i - n } }, e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return e.children = [], e }, e.prototype.onAttrChange = function (e, n, i) { if (t.prototype.onAttrChange.call(this, e, n, i), "matrix" === e) { var r = this.getTotalMatrix(); this._applyChildrenMarix(r) } }, e.prototype.applyMatrix = function (e) { var n = this.getTotalMatrix(); t.prototype.applyMatrix.call(this, e); var i = this.getTotalMatrix(); i !== n && this._applyChildrenMarix(i) }, e.prototype._applyChildrenMarix = function (t) { var e = this.getChildren(); Object(o.a)(e, (function (e) { e.applyMatrix(t) })) }, e.prototype.addShape = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; var n = t[0], i = t[1]; Object(o.f)(n) ? i = n : i.type = n; var r = a[i.type]; r || (r = Object(o.k)(i.type), a[i.type] = r); var s = this.getShapeBase(), u = new s[r](i); return this.add(u), u }, e.prototype.addGroup = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; var n, i = t[0], r = t[1]; if (Object(o.d)(i)) n = new i(r || { parent: this }); else { var a = i || {}, s = this.getGroupBase(); n = new s(a) } return this.add(n), n }, e.prototype.getCanvas = function () { return this.isCanvas() ? this : this.get("canvas") }, e.prototype.getShape = function (t, e, n) { if (!Object(o.b)(this)) return null; var i, r = this.getChildren(); if (this.isCanvas()) i = this._findShape(r, t, e, n); else { var a = [t, e, 1]; a = this.invertFromMatrix(a), this.isClipped(a[0], a[1]) || (i = this._findShape(r, a[0], a[1], n)) } return i }, e.prototype._findShape = function (t, e, n, i) { for (var r = null, a = t.length - 1; a >= 0; a--) { var s = t[a]; if (Object(o.b)(s) && (s.isGroup() ? r = s.getShape(e, n, i) : s.isHit(e, n) && (r = s)), r) break } return r }, e.prototype.add = function (t) { var e = this.getCanvas(), n = this.getChildren(), i = this.get("timeline"), r = t.getParent(); r && function (t, e, n) { void 0 === n && (n = !0), n ? e.destroy() : (e.set("parent", null), e.set("canvas", null)), Object(o.j)(t.getChildren(), e) }(r, t, !1), t.set("parent", this), e && function t(e, n) { if (e.set("canvas", n), e.isGroup()) { var i = e.get("children"); i.length && i.forEach((function (e) { t(e, n) })) } }(t, e), i && function t(e, n) { if (e.set("timeline", n), e.isGroup()) { var i = e.get("children"); i.length && i.forEach((function (e) { t(e, n) })) } }(t, i), n.push(t), t.onCanvasChange("add"), this._applyElementMatrix(t) }, e.prototype._applyElementMatrix = function (t) { var e = this.getTotalMatrix(); e && t.applyMatrix(e) }, e.prototype.getChildren = function () { return this.get("children") }, e.prototype.sort = function () { var t, e = this.getChildren(); Object(o.a)(e, (function (t, e) { return t._INDEX = e, t })), e.sort((t = function (t, e) { return t.get("zIndex") - e.get("zIndex") }, function (e, n) { var i = t(e, n); return 0 === i ? e._INDEX - n._INDEX : i })), this.onCanvasChange("sort") }, e.prototype.clear = function () { if (this.set("clearing", !0), !this.destroyed) { for (var t = this.getChildren(), e = t.length - 1; e >= 0; e--)t[e].destroy(); this.set("children", []), this.onCanvasChange("clear"), this.set("clearing", !1) } }, e.prototype.destroy = function () { this.get("destroyed") || (this.clear(), t.prototype.destroy.call(this)) }, e.prototype.getFirst = function () { return this.getChildByIndex(0) }, e.prototype.getLast = function () { var t = this.getChildren(); return this.getChildByIndex(t.length - 1) }, e.prototype.getChildByIndex = function (t) { return this.getChildren()[t] }, e.prototype.getCount = function () { return this.getChildren().length }, e.prototype.contain = function (t) { return this.getChildren().indexOf(t) > -1 }, e.prototype.removeChild = function (t, e) { void 0 === e && (e = !0), this.contain(t) && t.remove(e) }, e.prototype.findAll = function (t) { var e = [], n = this.getChildren(); return Object(o.a)(n, (function (n) { t(n) && e.push(n), n.isGroup() && (e = e.concat(n.findAll(t))) })), e }, e.prototype.find = function (t) { var e = null, n = this.getChildren(); return Object(o.a)(n, (function (n) { if (t(n) ? e = n : n.isGroup() && (e = n.find(t)), e) return !1 })), e }, e.prototype.findById = function (t) { return this.find((function (e) { return e.get("id") === t })) }, e.prototype.findByClassName = function (t) { return this.find((function (e) { return e.get("className") === t })) }, e.prototype.findAllByName = function (t) { return this.findAll((function (e) { return e.get("name") === t })) }, e }(r.a); e.a = s }, function (t, e, n) { "use strict"; var i = n(1), r = n(0), o = n(6), a = n(11), s = n(27), u = n(68), l = o.ext.transform, c = ["zIndex", "capture", "visible", "type"], h = ["repeat"]; function f(t, e) { var n = {}, i = e.attrs; for (var r in t) n[r] = i[r]; return n } function p(t, e) { var n = {}, i = e.attr(); return Object(r.each)(t, (function (t, e) { -1 !== h.indexOf(e) || Object(r.isEqual)(i[e], t) || (n[e] = t) })), n } function d(t, e) { if (e.onFrame) return t; var n = e.startTime, i = e.delay, o = e.duration, a = Object.prototype.hasOwnProperty; return Object(r.each)(t, (function (t) { n + i < t.startTime + t.delay + t.duration && o > t.delay && Object(r.each)(e.toAttrs, (function (e, n) { a.call(t.toAttrs, n) && (delete t.toAttrs[n], delete t.fromAttrs[n]) })) })), t } var g = function (t) { function e(e) { var n = t.call(this, e) || this; n.attrs = {}; var i = n.getDefaultAttrs(); return Object(r.mix)(i, e.attrs), n.attrs = i, n.initAttrs(i), n.initAnimate(), n } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { return { visible: !0, capture: !0, zIndex: 0 } }, e.prototype.getDefaultAttrs = function () { return { matrix: this.getDefaultMatrix(), opacity: 1 } }, e.prototype.onCanvasChange = function (t) { }, e.prototype.initAttrs = function (t) { }, e.prototype.initAnimate = function () { this.set("animable", !0), this.set("animating", !1) }, e.prototype.isGroup = function () { return !1 }, e.prototype.getParent = function () { return this.get("parent") }, e.prototype.getCanvas = function () { return this.get("canvas") }, e.prototype.attr = function () { for (var t, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; var i = e[0], o = e[1]; if (!i) return this.attrs; if (Object(r.isObject)(i)) { for (var a in i) this.setAttr(a, i[a]); return this.afterAttrsChange(i), this } return 2 === e.length ? (this.setAttr(i, o), this.afterAttrsChange(((t = {})[i] = o, t)), this) : this.attrs[i] }, e.prototype.isClipped = function (t, e) { var n = this.getClip(); return n && !n.isHit(t, e) }, e.prototype.setAttr = function (t, e) { var n = this.attrs[t]; n !== e && (this.attrs[t] = e, this.onAttrChange(t, e, n)) }, e.prototype.onAttrChange = function (t, e, n) { "matrix" === t && this.set("totalMatrix", null) }, e.prototype.afterAttrsChange = function (t) { if (this.cfg.isClipShape) { var e = this.cfg.applyTo; e && e.onCanvasChange("clip") } else this.onCanvasChange("attr") }, e.prototype.show = function () { return this.set("visible", !0), this.onCanvasChange("show"), this }, e.prototype.hide = function () { return this.set("visible", !1), this.onCanvasChange("hide"), this }, e.prototype.setZIndex = function (t) { this.set("zIndex", t); var e = this.getParent(); return e && e.sort(), this }, e.prototype.toFront = function () { var t = this.getParent(); if (t) { var e = t.getChildren(), n = (this.get("el"), e.indexOf(this)); e.splice(n, 1), e.push(this), this.onCanvasChange("zIndex") } }, e.prototype.toBack = function () { var t = this.getParent(); if (t) { var e = t.getChildren(), n = (this.get("el"), e.indexOf(this)); e.splice(n, 1), e.unshift(this), this.onCanvasChange("zIndex") } }, e.prototype.remove = function (t) { void 0 === t && (t = !0); var e = this.getParent(); e ? (Object(a.j)(e.getChildren(), this), e.get("clearing") || this.onCanvasChange("remove")) : this.onCanvasChange("remove"), t && this.destroy() }, e.prototype.resetMatrix = function () { this.attr("matrix", this.getDefaultMatrix()), this.onCanvasChange("matrix") }, e.prototype.getMatrix = function () { return this.attr("matrix") }, e.prototype.setMatrix = function (t) { this.attr("matrix", t), this.onCanvasChange("matrix") }, e.prototype.getTotalMatrix = function () { var t = this.cfg.totalMatrix; if (!t) { var e = this.attr("matrix"), n = this.cfg.parentMatrix; t = n && e ? Object(s.b)(n, e) : e || n, this.set("totalMatrix", t) } return t }, e.prototype.applyMatrix = function (t) { var e = this.attr("matrix"), n = null; n = t && e ? Object(s.b)(t, e) : e || t, this.set("totalMatrix", n), this.set("parentMatrix", t) }, e.prototype.getDefaultMatrix = function () { return null }, e.prototype.applyToMatrix = function (t) { var e = this.attr("matrix"); return e ? Object(s.c)(e, t) : t }, e.prototype.invertFromMatrix = function (t) { var e = this.attr("matrix"); if (e) { var n = Object(s.a)(e); if (n) return Object(s.c)(n, t) } return t }, e.prototype.setClip = function (t) { var e = this.getCanvas(), n = null; if (t) { var i = this.getShapeBase()[Object(r.upperFirst)(t.type)]; i && (n = new i({ type: t.type, isClipShape: !0, applyTo: this, attrs: t.attrs, canvas: e })) } return this.set("clipShape", n), this.onCanvasChange("clip"), n }, e.prototype.getClip = function () { var t = this.cfg.clipShape; return t || null }, e.prototype.clone = function () { var t = this, e = this.attrs, n = {}; Object(r.each)(e, (function (t, i) { Object(r.isArray)(e[i]) ? n[i] = function (t) { for (var e = [], n = 0; n < t.length; n++)Object(r.isArray)(t[n]) ? e.push([].concat(t[n])) : e.push(t[n]); return e }(e[i]) : n[i] = e[i] })); var i = new (0, this.constructor)({ attrs: n }); return Object(r.each)(c, (function (e) { i.set(e, t.get(e)) })), i }, e.prototype.destroy = function () { this.destroyed || (this.attrs = {}, t.prototype.destroy.call(this)) }, e.prototype.isAnimatePaused = function () { return this.get("_pause").isPaused }, e.prototype.animate = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; var n = this.isCanvas && this.isCanvas(); if (n || this.get("canvas")) { this.set("animating", !0); var i = this.get("timeline"); i || (i = this.get("canvas").get("timeline"), this.set("timeline", i)); var o = this.get("animations") || []; i.timer || i.initTimer(); var a, s, u, l, c, h = t[0], g = t[1], y = t[2], v = void 0 === y ? "easeLinear" : y, m = t[3], x = void 0 === m ? r.noop : m, b = t[4], C = void 0 === b ? 0 : b; Object(r.isFunction)(h) ? (a = h, h = {}) : Object(r.isObject)(h) && h.onFrame && (a = h.onFrame, s = h.repeat), Object(r.isObject)(g) ? (g = (c = g).duration, v = c.easing || "easeLinear", C = c.delay || 0, s = c.repeat || s || !1, x = c.callback || r.noop, u = c.pauseCallback || r.noop, l = c.resumeCallback || r.noop) : (Object(r.isNumber)(x) && (C = x, x = null), Object(r.isFunction)(v) ? (x = v, v = "easeLinear") : v = v || "easeLinear"); var _ = p(h, this), O = { fromAttrs: f(_, this), toAttrs: _, duration: g, easing: v, repeat: s, callback: x, pauseCallback: u, resumeCallback: l, delay: C, startTime: i.getTime(), id: Object(r.uniqueId)(), onFrame: a, pathFormatted: !1 }; o.length > 0 ? o = d(o, O) : i.addAnimator(this), o.push(O), this.set("animations", o), this.set("_pause", { isPaused: !1 }) } }, e.prototype.stopAnimate = function (t) { var e = this; void 0 === t && (t = !0); var n = this.get("animations"); Object(r.each)(n, (function (n) { t && (n.onFrame ? e.attr(n.onFrame(1)) : e.attr(n.toAttrs)), n.callback && n.callback() })), this.set("animating", !1), this.set("animations", []) }, e.prototype.pauseAnimate = function () { var t = this.get("timeline"), e = this.get("animations"), n = t.getTime(); return Object(r.each)(e, (function (t) { t._paused = !0, t._pauseTime = n, t.pauseCallback && t.pauseCallback() })), this.set("_pause", { isPaused: !0, pauseTime: n }), this }, e.prototype.resumeAnimate = function () { var t = this.get("timeline").getTime(), e = this.get("animations"), n = this.get("_pause").pauseTime; return Object(r.each)(e, (function (e) { e.startTime = e.startTime + (t - n), e._paused = !1, e._pauseTime = null, e.resumeCallback && e.resumeCallback() })), this.set("_pause", { isPaused: !1 }), this.set("animations", e), this }, e.prototype.emitDelegation = function (t, e) { var n, i = this, o = e.propagationPath; this.getEvents(); "mouseenter" === t ? n = e.fromShape : "mouseleave" === t && (n = e.toShape); for (var s = function (t) { var s = o[t], l = s.get("name"); if (l) { if ((s.isGroup() || s.isCanvas && s.isCanvas()) && n && Object(a.g)(s, n)) return "break"; Object(r.isArray)(l) ? Object(r.each)(l, (function (t) { i.emitDelegateEvent(s, t, e) })) : u.emitDelegateEvent(s, l, e) } }, u = this, l = 0; l < o.length; l++) { if ("break" === s(l)) break } }, e.prototype.emitDelegateEvent = function (t, e, n) { var i = this.getEvents(), r = e + ":" + n.type; (i[r] || i["*"]) && (n.name = r, n.currentTarget = t, n.delegateTarget = this, n.delegateObject = t.get("delegateObject"), this.emit(r, n)) }, e.prototype.translate = function (t, e) { void 0 === t && (t = 0), void 0 === e && (e = 0); var n = this.getMatrix(), i = l(n, [["t", t, e]]); return this.setMatrix(i), this }, e.prototype.move = function (t, e) { var n = this.attr("x") || 0, i = this.attr("y") || 0; return this.translate(t - n, e - i), this }, e.prototype.moveTo = function (t, e) { return this.move(t, e) }, e.prototype.scale = function (t, e) { var n = this.getMatrix(), i = l(n, [["s", t, e || t]]); return this.setMatrix(i), this }, e.prototype.rotate = function (t) { var e = this.getMatrix(), n = l(e, [["r", t]]); return this.setMatrix(n), this }, e.prototype.rotateAtStart = function (t) { var e = this.attr(), n = e.x, i = e.y, r = this.getMatrix(), o = l(r, [["t", -n, -i], ["r", t], ["t", n, i]]); return this.setMatrix(o), this }, e.prototype.rotateAtPoint = function (t, e, n) { var i = this.getMatrix(), r = l(i, [["t", -t, -e], ["r", n], ["t", t, e]]); return this.setMatrix(r), this }, e }(u.a); e.a = g }, function (t, e, n) { "use strict"; (function (t) { n.d(e, "a", (function () { return f })); var i = function () { for (var t = 0, e = 0, n = arguments.length; e < n; e++)t += arguments[e].length; var i = Array(t), r = 0; for (e = 0; e < n; e++)for (var o = arguments[e], a = 0, s = o.length; a < s; a++, r++)i[r] = o[a]; return i }, r = function (t, e, n) { this.name = t, this.version = e, this.os = n, this.type = "browser" }, o = function (e) { this.version = e, this.type = "node", this.name = "node", this.os = t.platform }, a = function (t, e, n, i) { this.name = t, this.version = e, this.os = n, this.bot = i, this.type = "bot-device" }, s = function () { this.type = "bot", this.bot = !0, this.name = "bot", this.version = null, this.os = null }, u = function () { this.type = "react-native", this.name = "react-native", this.version = null, this.os = null }, l = /(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/, c = [["aol", /AOLShield\/([0-9\._]+)/], ["edge", /Edge\/([0-9\._]+)/], ["edge-ios", /EdgiOS\/([0-9\._]+)/], ["yandexbrowser", /YaBrowser\/([0-9\._]+)/], ["kakaotalk", /KAKAOTALK\s([0-9\.]+)/], ["samsung", /SamsungBrowser\/([0-9\.]+)/], ["silk", /\bSilk\/([0-9._-]+)\b/], ["miui", /MiuiBrowser\/([0-9\.]+)$/], ["beaker", /BeakerBrowser\/([0-9\.]+)/], ["edge-chromium", /EdgA?\/([0-9\.]+)/], ["chromium-webview", /(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/], ["chrome", /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/], ["phantomjs", /PhantomJS\/([0-9\.]+)(:?\s|$)/], ["crios", /CriOS\/([0-9\.]+)(:?\s|$)/], ["firefox", /Firefox\/([0-9\.]+)(?:\s|$)/], ["fxios", /FxiOS\/([0-9\.]+)/], ["opera-mini", /Opera Mini.*Version\/([0-9\.]+)/], ["opera", /Opera\/([0-9\.]+)(?:\s|$)/], ["opera", /OPR\/([0-9\.]+)(:?\s|$)/], ["ie", /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/], ["ie", /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/], ["ie", /MSIE\s(7\.0)/], ["bb10", /BB10;\sTouch.*Version\/([0-9\.]+)/], ["android", /Android\s([0-9\.]+)/], ["ios", /Version\/([0-9\._]+).*Mobile.*Safari.*/], ["safari", /Version\/([0-9\._]+).*Safari/], ["facebook", /FBAV\/([0-9\.]+)/], ["instagram", /Instagram\s([0-9\.]+)/], ["ios-webview", /AppleWebKit\/([0-9\.]+).*Mobile/], ["ios-webview", /AppleWebKit\/([0-9\.]+).*Gecko\)$/], ["searchbot", /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]], h = [["iOS", /iP(hone|od|ad)/], ["Android OS", /Android/], ["BlackBerry OS", /BlackBerry|BB10/], ["Windows Mobile", /IEMobile/], ["Amazon OS", /Kindle/], ["Windows 3.11", /Win16/], ["Windows 95", /(Windows 95)|(Win95)|(Windows_95)/], ["Windows 98", /(Windows 98)|(Win98)/], ["Windows 2000", /(Windows NT 5.0)|(Windows 2000)/], ["Windows XP", /(Windows NT 5.1)|(Windows XP)/], ["Windows Server 2003", /(Windows NT 5.2)/], ["Windows Vista", /(Windows NT 6.0)/], ["Windows 7", /(Windows NT 6.1)/], ["Windows 8", /(Windows NT 6.2)/], ["Windows 8.1", /(Windows NT 6.3)/], ["Windows 10", /(Windows NT 10.0)/], ["Windows ME", /Windows ME/], ["Open BSD", /OpenBSD/], ["Sun OS", /SunOS/], ["Chrome OS", /CrOS/], ["Linux", /(Linux)|(X11)/], ["Mac OS", /(Mac_PowerPC)|(Macintosh)/], ["QNX", /QNX/], ["BeOS", /BeOS/], ["OS/2", /OS\/2/]]; function f(e) { return e ? d(e) : "undefined" == typeof document && "undefined" != typeof navigator && "ReactNative" === navigator.product ? new u : "undefined" != typeof navigator ? d(navigator.userAgent) : void 0 !== t && t.version ? new o(t.version.slice(1)) : null } function p(t) { return "" !== t && c.reduce((function (e, n) { var i = n[0], r = n[1]; if (e) return e; var o = r.exec(t); return !!o && [i, o] }), !1) } function d(t) { var e = p(t); if (!e) return null; var n = e[0], o = e[1]; if ("searchbot" === n) return new s; var u = o[1] && o[1].split(/[._]/).slice(0, 3); u ? u.length < 3 && (u = i(u, function (t) { for (var e = [], n = 0; n < t; n++)e.push("0"); return e }(3 - u.length))) : u = []; var c = u.join("."), f = function (t) { for (var e = 0, n = h.length; e < n; e++) { var i = h[e], r = i[0]; if (i[1].exec(t)) return r } return null }(t), d = l.exec(t); return d && d[1] ? new a(n, c, f, d[1]) : new r(n, c, f) } }).call(this, n(160)) }, function (t, e, n) { "use strict"; n.d(e, "b", (function () { return l })), n.d(e, "a", (function () { return c })); var i = n(5), r = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, o = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, a = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i, s = /[\d.]+:(#[^\s]+|[^\)]+\))/gi; function u(t, e) { var n = t.match(s); Object(i.c)(n, (function (t) { var n = t.split(":"); e.addColorStop(n[0], n[1]) })) } function l(t, e, n) { if (Object(i.k)(n)) { if ("(" === n[1] || "(" === n[2]) { if ("l" === n[0]) return function (t, e, n) { var i, o, a = r.exec(n), s = parseFloat(a[1]) % 360 * (Math.PI / 180), l = a[2], c = e.getBBox(); s >= 0 && s < .5 * Math.PI ? (i = { x: c.minX, y: c.minY }, o = { x: c.maxX, y: c.maxY }) : .5 * Math.PI <= s && s < Math.PI ? (i = { x: c.maxX, y: c.minY }, o = { x: c.minX, y: c.maxY }) : Math.PI <= s && s < 1.5 * Math.PI ? (i = { x: c.maxX, y: c.maxY }, o = { x: c.minX, y: c.minY }) : (i = { x: c.minX, y: c.maxY }, o = { x: c.maxX, y: c.minY }); var h = Math.tan(s), f = h * h, p = (o.x - i.x + h * (o.y - i.y)) / (f + 1) + i.x, d = h * (o.x - i.x + h * (o.y - i.y)) / (f + 1) + i.y, g = t.createLinearGradient(i.x, i.y, p, d); return u(l, g), g }(t, e, n); if ("r" === n[0]) return function (t, e, n) { var i = o.exec(n), r = parseFloat(i[1]), a = parseFloat(i[2]), l = parseFloat(i[3]), c = i[4]; if (0 === l) { var h = c.match(s); return h[h.length - 1].split(":")[1] } var f = e.getBBox(), p = f.maxX - f.minX, d = f.maxY - f.minY, g = Math.sqrt(p * p + d * d) / 2, y = t.createRadialGradient(f.minX + p * r, f.minY + d * a, 0, f.minX + p / 2, f.minY + d / 2, l * g); return u(c, y), y }(t, e, n); if ("p" === n[0]) return function (t, e, n) { if (e.get("patternSource") && e.get("patternSource") === n) return e.get("pattern"); var i, r, o = a.exec(n), s = o[1], u = o[2]; function l() { i = t.createPattern(r, s), e.set("pattern", i), e.set("patternSource", n) } switch (s) { case "a": s = "repeat"; break; case "x": s = "repeat-x"; break; case "y": s = "repeat-y"; break; case "n": s = "no-repeat"; break; default: s = "no-repeat" }return r = new Image, u.match(/^data:/i) || (r.crossOrigin = "Anonymous"), r.src = u, r.complete ? l() : (r.onload = l, r.src = r.src), i }(t, e, n) } return n } } function c(t) { var e = 0, n = 0, r = 0, o = 0; return Object(i.g)(t) ? 1 === t.length ? e = n = r = o = t[0] : 2 === t.length ? (e = r = t[0], n = o = t[1]) : 3 === t.length ? (e = t[0], n = o = t[1], r = t[2]) : (e = t[0], n = t[1], r = t[2], o = t[3]) : e = n = r = o = t, [e, n, r, o] } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(158); Object.defineProperty(e, "Chart", { enumerable: !0, get: function () { return i.default } }); var r = n(103); Object.defineProperty(e, "View", { enumerable: !0, get: function () { return r.default } }), Object.defineProperty(e, "registerGeometry", { enumerable: !0, get: function () { return r.registerGeometry } }); var o = n(84); Object.defineProperty(e, "Event", { enumerable: !0, get: function () { return o.default } }); var a = n(116); Object.defineProperty(e, "registerComponentController", { enumerable: !0, get: function () { return a.registerComponentController } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e(e) { var n = t.call(this) || this; n.destroyed = !1; var i = e.visible, r = void 0 === i || i; return n.visible = r, n } return i.__extends(e, t), e.prototype.show = function () { this.visible || this.changeVisible(!0) }, e.prototype.hide = function () { this.visible && this.changeVisible(!1) }, e.prototype.destroy = function () { this.off(), this.destroyed = !0 }, e.prototype.changeVisible = function (t) { this.visible !== t && (this.visible = t) }, e }(i.__importDefault(n(101)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.registerFacet = e.getFacet = void 0; var i = n(0), r = n(41); Object.defineProperty(e, "Facet", { enumerable: !0, get: function () { return r.Facet } }); var o = {}; e.getFacet = function (t) { return o[i.lowerCase(t)] }, e.registerFacet = function (t, e) { o[i.lowerCase(t)] = e } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getAxisTitleText = e.getAxisDirection = e.getAxisOption = e.getCircleAxisCenterRadius = e.getAxisThemeCfg = e.getAxisFactorByRegion = e.isVertical = e.getAxisFactor = e.getAxisRegion = e.getCircleAxisRelativeRegion = e.getLineAxisRelativeRegion = void 0; var i = n(0), r = n(14), o = n(57), a = n(6); function s(t) { var e, n; switch (t) { case r.DIRECTION.TOP: e = { x: 0, y: 1 }, n = { x: 1, y: 1 }; break; case r.DIRECTION.RIGHT: e = { x: 1, y: 0 }, n = { x: 1, y: 1 }; break; case r.DIRECTION.BOTTOM: e = { x: 0, y: 0 }, n = { x: 1, y: 0 }; break; case r.DIRECTION.LEFT: e = { x: 0, y: 0 }, n = { x: 0, y: 1 }; break; default: e = n = { x: 0, y: 0 } }return { start: e, end: n } } function u(t) { var e, n; return t.isTransposed ? (e = { x: 0, y: 0 }, n = { x: 1, y: 0 }) : (e = { x: 0, y: 0 }, n = { x: 0, y: 1 }), { start: e, end: n } } function l(t) { var e = t.start, n = t.end; return e.x === n.x } e.getLineAxisRelativeRegion = s, e.getCircleAxisRelativeRegion = u, e.getAxisRegion = function (t, e) { var n = { start: { x: 0, y: 0 }, end: { x: 0, y: 0 } }; t.isRect ? n = s(e) : t.isPolar && (n = u(t)); var i = n.start, r = n.end; return { start: t.convert(i), end: t.convert(r) } }, e.getAxisFactor = function (t, e) { return t.isRect ? t.isTransposed ? [r.DIRECTION.RIGHT, r.DIRECTION.BOTTOM].includes(e) ? 1 : -1 : [r.DIRECTION.BOTTOM, r.DIRECTION.RIGHT].includes(e) ? -1 : 1 : t.isPolar && t.x.start < 0 ? -1 : 1 }, e.isVertical = l, e.getAxisFactorByRegion = function (t, e) { var n = t.start, i = t.end; return l(t) ? (n.y - i.y) * (e.x - n.x) > 0 ? 1 : -1 : (i.x - n.x) * (n.y - e.y) > 0 ? -1 : 1 }, e.getAxisThemeCfg = function (t, e) { return i.get(t, ["components", "axis", e], {}) }, e.getCircleAxisCenterRadius = function (t) { var e = t.x, n = t.y, i = t.circleCenter, r = n.start > n.end, o = t.isTransposed ? t.convert({ x: r ? 0 : 1, y: 0 }) : t.convert({ x: 0, y: r ? 0 : 1 }), s = [o.x - i.x, o.y - i.y], u = [1, 0], l = o.y > i.y ? a.vec2.angle(s, u) : -1 * a.vec2.angle(s, u), c = l + (e.end - e.start); return { center: i, radius: Math.sqrt(Math.pow(o.x - i.x, 2) + Math.pow(o.y - i.y, 2)), startAngle: l, endAngle: c } }, e.getAxisOption = function (t, e) { return i.isBoolean(t) ? !1 !== t && {} : i.get(t, [e]) }, e.getAxisDirection = function (t, e) { return i.get(t, "position", e) }, e.getAxisTitleText = function (t, e) { return i.get(e, ["title", "text"], o.getName(t)) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.createInteraction = e.registerInteraction = e.getInteraction = void 0; var i = n(1), r = n(0), o = i.__importDefault(n(161)), a = {}; function s(t) { return a[r.lowerCase(t)] } e.getInteraction = s, e.registerInteraction = function (t, e) { a[r.lowerCase(t)] = e }, e.createInteraction = function (t, e, n) { var i = s(t); if (!i) return null; if (r.isPlainObject(i)) { var a = r.mix(r.clone(i), n); return new o.default(e, a) } return new i(e, n) }; var u = n(112); Object.defineProperty(e, "Interaction", { enumerable: !0, get: function () { return u.default } }); var l = n(81); Object.defineProperty(e, "Action", { enumerable: !0, get: function () { return l.Action } }), Object.defineProperty(e, "registerAction", { enumerable: !0, get: function () { return l.registerAction } }), Object.defineProperty(e, "getActionClass", { enumerable: !0, get: function () { return l.getActionClass } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(22); Object.defineProperty(e, "Action", { enumerable: !0, get: function () { return i.default } }); var r = n(111); Object.defineProperty(e, "createAction", { enumerable: !0, get: function () { return r.createAction } }), Object.defineProperty(e, "registerAction", { enumerable: !0, get: function () { return r.registerAction } }), Object.defineProperty(e, "getActionClass", { enumerable: !0, get: function () { return r.getActionClass } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getTooltipItems = e.findDataByPoint = void 0; var i = n(1), r = n(0), o = n(14), a = n(57); function s(t, e, n) { var i = n.translate(t), o = n.translate(e); return r.isNumberEqual(i, o) } function u(t, e, n) { var i = n.coordinate, a = n.getYScale(), s = a.field, u = i.invert(e), l = a.invert(u.y); return r.find(t, (function (t) { var e = t[o.FIELD_ORIGIN]; return e[s][0] <= l && e[s][1] >= l })) || t[t.length - 1] } var l = r.memoize((function (t) { if (t.isCategory) return 1; for (var e = t.values, n = e.length, i = t.translate(e[0]), r = i, o = 0; o < n; o++) { var a = e[o], s = t.translate(a); s < i && (i = s), s > r && (r = s) } return (r - i) / (n - 1) })); function c(t) { for (var e, n = 0, i = function (t) { var e = r.values(t.attributes); return r.filter(e, (function (t) { return r.contains(o.GROUP_ATTRS, t.type) })) }(t); n < i.length; n++) { var a = i[n], s = a.getScale(a.type); if (s && s.isLinear) { e = s; break } } var u = t.getXScale(), l = t.getYScale(); return e || l || u } e.findDataByPoint = function (t, e, n) { if (0 === e.length) return null; var i = n.type, a = n.getXScale(), c = n.getYScale(), h = a.field, f = c.field, p = null; if ("heatmap" === i || "point" === i) { for (var d = n.coordinate.invert(t), g = a.invert(d.x), y = c.invert(d.y), v = 1 / 0, m = 0; m < e.length; m++) { var x = e[m], b = x[o.FIELD_ORIGIN], C = Math.pow(b[h] - g, 2) + Math.pow(b[f] - y, 2); C < v && (v = C, p = x) } return p } var _ = e[0], O = e[e.length - 1], M = function (t, e) { var n = e.coordinate, i = e.getXScale(), r = i.range, o = r[r.length - 1], a = r[0], s = n.invert(t).x; return n.isPolar && s > (1 + o) / 2 && (s = a), i.translate(i.invert(s)) }(t, n), w = _[o.FIELD_ORIGIN][h], S = _[o.FIELD_ORIGIN][f], A = O[o.FIELD_ORIGIN][h], P = c.isLinear && r.isArray(S); if (r.isArray(w)) { for (m = 0; m < e.length; m++) { b = (B = e[m])[o.FIELD_ORIGIN]; if (a.translate(b[h][0]) <= M && a.translate(b[h][1]) >= M) { if (!P) { p = B; break } r.isArray(p) || (p = []), p.push(B) } } r.isArray(p) && (p = u(p, t, n)) } else { var I = void 0; if (a.isLinear || "timeCat" === a.type) { if ((M > a.translate(A) || M < a.translate(w)) && (M > a.max || M < a.min)) return null; for (var T = 0, E = e.length - 1, j = void 0; T <= E;) { var L = e[j = Math.floor((T + E) / 2)][o.FIELD_ORIGIN][h]; if (s(L, M, a)) return e[j]; a.translate(L) <= a.translate(M) ? (T = j + 1, O = e[j], I = e[j + 1]) : (0 === E && (O = e[0]), E = j - 1) } } else { for (m = 0; m < e.length; m++) { var B; if (s((b = (B = e[m])[o.FIELD_ORIGIN])[h], M, a)) { if (!P) { p = B; break } r.isArray(p) || (p = []), p.push(B) } else a.translate(b[h]) <= M && (O = B, I = e[m + 1]) } r.isArray(p) && (p = u(p, t, n)) } O && I && Math.abs(a.translate(O[o.FIELD_ORIGIN][h]) - M) > Math.abs(a.translate(I[o.FIELD_ORIGIN][h]) - M) && (O = I) } var k = l(n.getXScale()); return !p && Math.abs(a.translate(O[o.FIELD_ORIGIN][h]) - M) <= k / 2 && (p = O), p }, e.getTooltipItems = function (t, e, n) { void 0 === n && (n = ""); var s, u = t[o.FIELD_ORIGIN], l = function (t, e, n) { var i = n; n || (i = e.getAttribute("position").getFields()[0]); var o = e.scales; return o[i] ? o[i].getText(t[i]) : r.hasKey(t, i) ? t[i] : i }(u, e, n), h = e.tooltipOption, f = e.theme.defaultColor, p = []; function d(e, n) { if (!r.isNil(n) && "" !== n) { var i = { title: l, data: u, mappingData: t, name: e, value: n, color: t.color || f, marker: !0 }; p.push(i) } } if (r.isObject(h)) { var g = h.fields, y = h.callback; if (y) { var v = g.map((function (e) { return t[o.FIELD_ORIGIN][e] })), m = y.apply(void 0, v), x = i.__assign({ data: t[o.FIELD_ORIGIN], mappingData: t, title: l, color: t.color || f, marker: !0 }, m); p.push(x) } else for (var b = e.scales, C = 0, _ = g; C < _.length; C++) { var O = _[C]; if (!r.isNil(u[O])) { var M = b[O]; d(a.getName(M), s = M.getText(u[O])) } } } else { var w = c(e); r.isNil(u[w.field]) || (s = function (t, e) { var n = t[e.field]; return r.isArray(n) ? n.map((function (t) { return e.getText(t) })).join("-") : e.getText(n) }(u, w), d(function (t, e) { var n, i = e.getGroupScales(); if (i.length && (n = i[0]), n) { var r = n.field; return n.getText(t[r]) } var o = c(e); return a.getName(o) }(u, e), s)) } return p } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.parsePadding = e.isAutoPadding = void 0; var i = n(1), r = n(0); e.isAutoPadding = function (t) { return !r.isNumber(t) && !r.isArray(t) }, e.parsePadding = function (t) { void 0 === t && (t = 0); var e = r.isArray(t) ? t : [t]; switch (e.length) { case 0: e = [0, 0, 0, 0]; break; case 1: e = new Array(4).fill(e[0]); break; case 2: e = i.__spreadArrays(e, e); break; case 3: e = i.__spreadArrays(e, [e[1]]); break; default: e = e.slice(0, 4) }return e } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(31), r = function () { function t(t, e, n) { this.view = t, this.gEvent = e, this.data = n, this.type = e.type } return t.fromData = function (e, n, r) { return new t(e, new i.Event(n, {}), r) }, Object.defineProperty(t.prototype, "target", { get: function () { return this.gEvent.target }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "event", { get: function () { return this.gEvent.originalEvent }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "x", { get: function () { return this.gEvent.x }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "y", { get: function () { return this.gEvent.y }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "clientX", { get: function () { return this.gEvent.clientX }, enumerable: !1, configurable: !0 }), Object.defineProperty(t.prototype, "clientY", { get: function () { return this.gEvent.clientY }, enumerable: !1, configurable: !0 }), t.prototype.toString = function () { return "[Event (type=" + this.type + ")]" }, t.prototype.clone = function () { return new t(this.view, this.gEvent, this.data) }, t }(); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(58), a = n(38), s = i.__importDefault(n(77)), u = n(24), l = n(14), c = n(86), h = function (t) { function e(e) { var n = t.call(this, e) || this; n.states = []; var i = e.shapeFactory, r = e.container, o = e.offscreenGroup, a = e.visible, s = void 0 === a || a; return n.shapeFactory = i, n.container = r, n.offscreenGroup = o, n.visible = s, n } return i.__extends(e, t), e.prototype.draw = function (t, e) { void 0 === e && (e = !1), this.model = t, this.data = t.data, this.shapeType = this.getShapeType(t), this.drawShape(t, e), !1 === this.visible && this.changeVisible(!1) }, e.prototype.update = function (t) { var e = this.shapeFactory, n = this.shape; if (n) { this.model = t, this.data = t.data, this.shapeType = this.getShapeType(t), this.setShapeInfo(n, t); var i = this.getOffscreenGroup(), r = e.drawShape(this.shapeType, t, i); r.cfg.data = this.data, r.cfg.origin = t, r.cfg.element = this, this.syncShapeStyle(n, r, this.getStates(), this.getAnimateCfg("update")) } }, e.prototype.destroy = function () { var e = this.shapeFactory, n = this.shape; if (n) { var r = this.getAnimateCfg("leave"); r ? a.doAnimate(n, r, { coordinate: e.coordinate, toAttrs: i.__assign({}, n.attr()) }) : n.remove(!0) } this.states = [], this.shapeFactory = void 0, this.container = void 0, this.shape = void 0, this.animate = void 0, this.geometry = void 0, this.labelShape = void 0, this.model = void 0, this.data = void 0, this.offscreenGroup = void 0, this.statesStyle = void 0, t.prototype.destroy.call(this) }, e.prototype.changeVisible = function (e) { t.prototype.changeVisible.call(this, e), e ? (this.shape && this.shape.show(), this.labelShape && this.labelShape.forEach((function (t) { t.show() }))) : (this.shape && this.shape.hide(), this.labelShape && this.labelShape.forEach((function (t) { t.hide() }))) }, e.prototype.setState = function (t, e) { var n = this, i = n.states, r = n.shapeFactory, a = n.model, s = n.shape, u = n.shapeType, l = i.indexOf(t); if (e) { if (l > -1) return; i.push(t), "active" !== t && "selected" !== t || s.toFront() } else { if (-1 === l) return; i.splice(l, 1), "active" !== t && "selected" !== t || s.toBack() } var c = r.drawShape(u, a, this.getOffscreenGroup()); i.length ? this.syncShapeStyle(s, c, i, null) : this.syncShapeStyle(s, c, ["reset"], null), c.remove(!0); var h = { state: t, stateStatus: e, element: this, target: this.container }; this.container.emit("statechange", h), o.propagationDelegate(this.shape, "statechange", h) }, e.prototype.clearStates = function () { var t = this, e = this.states; r.each(e, (function (e) { t.setState(e, !1) })), this.states = [] }, e.prototype.hasState = function (t) { return this.states.includes(t) }, e.prototype.getStates = function () { return this.states }, e.prototype.getData = function () { return this.data }, e.prototype.getModel = function () { return this.model }, e.prototype.getBBox = function () { var t = this.shape, e = this.labelShape, n = { x: 0, y: 0, minX: 0, minY: 0, maxX: 0, maxY: 0, width: 0, height: 0 }; return t && (n = t.getCanvasBBox()), e && e.forEach((function (t) { var e = t.getCanvasBBox(); n.x = Math.min(e.x, n.x), n.y = Math.min(e.y, n.y), n.minX = Math.min(e.minX, n.minX), n.minY = Math.min(e.minY, n.minY), n.maxX = Math.max(e.maxX, n.maxX), n.maxY = Math.max(e.maxY, n.maxY) })), n.width = n.maxX - n.minX, n.height = n.maxY - n.minY, n }, e.prototype.getStatesStyle = function () { if (!this.statesStyle) { var t = this.shapeType, e = this.geometry, n = this.shapeFactory, i = e.stateOption, o = n.defaultShapeType, a = n.theme[t] || n.theme[o]; this.statesStyle = r.deepMix({}, a, i) } return this.statesStyle }, e.prototype.getStateStyle = function (t, e) { var n = this.getStatesStyle(), i = r.get(n, [t, "style"], {}), o = i[e] || i; return r.isFunction(o) ? o(this) : o }, e.prototype.getAnimateCfg = function (t) { var e = this, n = this.animate; if (n) { var o = n[t]; return o ? i.__assign(i.__assign({}, o), { callback: function () { var t; r.isFunction(o.callback) && o.callback(), null === (t = e.geometry) || void 0 === t || t.emit(l.GEOMETRY_LIFE_CIRCLE.AFTER_DRAW_ANIMATE) } }) : o } return null }, e.prototype.drawShape = function (t, e) { var n; void 0 === e && (e = !1); var o = this.shapeFactory, s = this.container, u = this.shapeType; if (this.shape = o.drawShape(u, t, s), this.shape) { this.setShapeInfo(this.shape, t); var c = this.shape.cfg.name; c ? r.isString(c) && (this.shape.cfg.name = ["element", c]) : this.shape.cfg.name = ["element", this.shapeFactory.geometryType]; var h = e ? "enter" : "appear", f = this.getAnimateCfg(h); f && (null === (n = this.geometry) || void 0 === n || n.emit(l.GEOMETRY_LIFE_CIRCLE.BEFORE_DRAW_ANIMATE), a.doAnimate(this.shape, f, { coordinate: o.coordinate, toAttrs: i.__assign({}, this.shape.attr()) })) } }, e.prototype.getOffscreenGroup = function () { if (!this.offscreenGroup) { var t = this.container.getGroupBase(); this.offscreenGroup = new t({}) } return this.offscreenGroup }, e.prototype.setShapeInfo = function (t, e) { var n = this; (t.cfg.origin = e, t.cfg.element = this, t.isGroup()) && t.get("children").forEach((function (t) { n.setShapeInfo(t, e) })) }, e.prototype.syncShapeStyle = function (t, e, n, i, o) { var s, h = this; if (void 0 === n && (n = []), void 0 === o && (o = 0), t && e) { var f = t.get("clipShape"), p = e.get("clipShape"); if (this.syncShapeStyle(f, p, n, i), t.isGroup()) for (var d = t.get("children"), g = e.get("children"), y = 0; y < d.length; y++)this.syncShapeStyle(d[y], g[y], n, i, o + y); else { if (!r.isEmpty(n) && !r.isEqual(n, ["reset"])) { var v = t.get("name"); r.isArray(v) && (v = v[1]), r.each(n, (function (t) { if (e.get("name") !== c.BACKGROUND_SHAPE) { var n = h.getStateStyle(t, v || o); e.attr(n) } })) } var m = u.getReplaceAttrs(t, e); this.animate ? i ? (null === (s = this.geometry) || void 0 === s || s.emit(l.GEOMETRY_LIFE_CIRCLE.BEFORE_DRAW_ANIMATE), a.doAnimate(t, i, { coordinate: this.shapeFactory.coordinate, toAttrs: m, shapeModel: this.model })) : r.isEmpty(n) ? (t.stopAnimate(), t.animate(m, { duration: 300 })) : t.attr(m) : t.attr(m) } } }, e.prototype.getShapeType = function (t) { var e = r.get(t, "shape"); return r.isArray(e) ? e[0] : e }, e }(s.default); e.default = h }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.BACKGROUND_SHAPE = void 0, e.BACKGROUND_SHAPE = "element-background" }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.registerGeometryLabelLayout = e.getGeometryLabelLayout = e.registerGeometryLabel = e.getGeometryLabel = void 0; var i = {}, r = {}; e.getGeometryLabel = function (t) { return i[t.toLowerCase()] }, e.registerGeometryLabel = function (t, e) { i[t.toLowerCase()] = e }, e.getGeometryLabelLayout = function (t) { return r[t.toLowerCase()] }, e.registerGeometryLabelLayout = function (t, e) { r[t.toLowerCase()] = e } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(14), o = i.__importDefault(n(37)), a = i.__importDefault(n(85)); n(123); var s = n(120), u = function (t) { function e(e) { var n = t.call(this, e) || this; n.type = "path", n.shapeType = "line"; var i = e.connectNulls, r = void 0 !== i && i, o = e.showSinglePoint, a = void 0 === o || o; return n.connectNulls = r, n.showSinglePoint = a, n } return i.__extends(e, t), e.prototype.createElements = function (t, e, n) { void 0 === n && (n = !1); var i = this.lastElementsMap, r = this.elementsMap, o = this.elements, u = this.container, l = this.getElementId(t), c = this.getShapeInfo(t), h = i[l]; if (h) { var f = h.getModel(); (this.isCoordinateChanged || s.isModelChange(f, c)) && (h.animate = this.animateOption, h.update(c)), delete i[l] } else { var p = this.getShapeFactory(); (h = new a.default({ shapeFactory: p, container: u, offscreenGroup: this.getOffscreenGroup() })).geometry = this, h.animate = this.animateOption, h.draw(c, n) } return o.push(h), r[l] = h, o }, e.prototype.getPointsAndData = function (t) { for (var e = [], n = [], i = 0, o = t.length; i < o; i++) { var a = t[i]; e.push({ x: a.x, y: a.y }), n.push(a[r.FIELD_ORIGIN]) } return { points: e, data: n } }, e.prototype.getShapeInfo = function (t) { var e = this.getDrawCfg(t[0]), n = this.getPointsAndData(t), i = n.points, r = n.data; return e.mappingData = t, e.data = r, e.isStack = !!this.getAdjust("stack"), e.points = i, e.connectNulls = this.connectNulls, e.showSinglePoint = this.showSinglePoint, e }, e }(o.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getPathPoints = void 0; var i = n(0); function r(t) { return !t && (null == t || isNaN(t)) } function o(t) { if (i.isArray(t)) return r(t[1].y); var e = t.y; return i.isArray(e) ? r(e[0]) : r(e) } e.getPathPoints = function (t, e, n) { if (void 0 === e && (e = !1), void 0 === n && (n = !0), !t.length || 1 === t.length && !n) return []; if (e) { for (var i = [], r = 0, a = t.length; r < a; r++) { o(l = t[r]) || i.push(l) } return [i] } var s = [], u = []; for (r = 0, a = t.length; r < a; r++) { var l; o(l = t[r]) ? u.length && ((1 !== u.length || n) && s.push(u), u = []) : u.push(l) } return u.length && s.push(u), s } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.splitPoints = void 0; var i = n(0); e.splitPoints = function (t) { var e = t.x; return (i.isArray(t.y) ? t.y : [t.y]).map((function (t, n) { return { x: i.isArray(e) ? e[n] : e, y: t } })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.drawPoints = e.HOLLOW_SHAPES = e.SHAPES = void 0; var i = n(1), r = n(60), o = n(21); e.SHAPES = ["circle", "square", "bowtie", "diamond", "hexagon", "triangle", "triangle-down"], e.HOLLOW_SHAPES = ["cross", "tick", "plus", "hyphen", "line"], e.drawPoints = function (t, e, n, a, s) { var u = o.getStyle(e, s, !s, "r"), l = t.parsePoints(e.points), c = l[0]; if (e.isStack) c = l[1]; else if (l.length > 1) { for (var h = n.addGroup(), f = 0, p = l; f < p.length; f++) { var d = p[f]; h.addShape({ type: "marker", attrs: i.__assign(i.__assign(i.__assign({}, u), { symbol: r.MarkerSymbols[a] || a }), d) }) } return h } return n.addShape({ type: "marker", attrs: i.__assign(i.__assign(i.__assign({}, u), { symbol: r.MarkerSymbols[a] || a }), c) }) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getTranslateDirection = e.directionToPosition = void 0; var i = n(14); function r(t) { return t === i.DIRECTION.LEFT ? i.DIRECTION.RIGHT : t === i.DIRECTION.RIGHT ? i.DIRECTION.LEFT : t } function o(t) { return t === i.DIRECTION.TOP ? i.DIRECTION.BOTTOM : t === i.DIRECTION.BOTTOM ? i.DIRECTION.TOP : t } e.directionToPosition = function (t, e, n) { return n === i.DIRECTION.TOP ? [t.minX + t.width / 2 - e.width / 2, t.minY] : n === i.DIRECTION.BOTTOM ? [t.minX + t.width / 2 - e.width / 2, t.maxY - e.height] : n === i.DIRECTION.LEFT ? [t.minX, t.minY + t.height / 2 - e.height / 2] : n === i.DIRECTION.RIGHT ? [t.maxX - e.width, t.minY + t.height / 2 - e.height / 2] : n === i.DIRECTION.TOP_LEFT || n === i.DIRECTION.LEFT_TOP ? [t.tl.x, t.tl.y] : n === i.DIRECTION.TOP_RIGHT || n === i.DIRECTION.RIGHT_TOP ? [t.tr.x - e.width, t.tr.y] : n === i.DIRECTION.BOTTOM_LEFT || n === i.DIRECTION.LEFT_BOTTOM ? [t.bl.x, t.bl.y - e.height] : n === i.DIRECTION.BOTTOM_RIGHT || n === i.DIRECTION.RIGHT_BOTTOM ? [t.br.x - e.width, t.br.y - e.height] : [0, 0] }, e.getTranslateDirection = function (t, e) { var n = t; return n = function (t, e) { var n = t; return e.isReflect("x") && (n = r(n)), e.isReflect("y") && (n = o(n)), n }(n = function (t, e) { var n = e.matrix[0], i = e.matrix[4], a = t; return n < 0 && (a = r(a)), i < 0 && (a = o(a)), a }(n = function (t, e) { if (e.isTransposed) switch (t) { case i.DIRECTION.BOTTOM: return i.DIRECTION.LEFT; case i.DIRECTION.LEFT: return i.DIRECTION.BOTTOM; case i.DIRECTION.RIGHT: return i.DIRECTION.TOP; case i.DIRECTION.TOP: return i.DIRECTION.RIGHT }return t }(n, e), e), e) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(19); function a(t) { return r.get(t.get("delegateObject"), "item") } var s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.ignoreListItemStates = ["unchecked"], e } return i.__extends(e, t), e.prototype.isItemIgnore = function (t, e) { return !!this.ignoreListItemStates.filter((function (n) { return e.hasState(t, n) })).length }, e.prototype.setStateByComponent = function (t, e, n) { var i = this.context.view, r = t.get("field"), a = o.getElements(i); this.setElementsStateByItem(a, r, e, n) }, e.prototype.setStateByElement = function (t, e) { this.setElementState(t, e) }, e.prototype.isMathItem = function (t, e, n) { var i = this.context.view, a = o.getScaleByField(i, e), s = o.getElementValue(t, e); return !r.isNil(s) && n.name === a.getText(s) }, e.prototype.setElementsStateByItem = function (t, e, n, i) { var o = this; r.each(t, (function (t) { o.isMathItem(t, e, n) && t.setState(o.stateName, i) })) }, e.prototype.setStateEnable = function (t) { var e = o.getCurrentElement(this.context); if (e) o.isElementChange(this.context) && this.setStateByElement(e, t); else { var n = o.getDelegationObject(this.context); if (o.isList(n)) { var i = n.item, r = n.component; if (i && r && !this.isItemIgnore(i, r)) { var s = this.context.event.gEvent; if (s && s.fromShape && s.toShape && a(s.fromShape) === a(s.toShape)) return; this.setStateByComponent(r, i, t) } } } }, e.prototype.toggle = function () { var t = o.getCurrentElement(this.context); if (t) { var e = t.hasState(this.stateName); this.setElementState(t, !e) } }, e.prototype.reset = function () { this.setStateEnable(!1) }, e }(i.__importDefault(n(94)).default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = i.__importDefault(n(22)), a = n(19), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "", e } return i.__extends(e, t), e.prototype.hasState = function (t) { return t.hasState(this.stateName) }, e.prototype.setElementState = function (t, e) { t.setState(this.stateName, e) }, e.prototype.setState = function () { this.setStateEnable(!0) }, e.prototype.clear = function () { var t = this.context.view; this.clearViewState(t) }, e.prototype.clearViewState = function (t) { var e = this, n = a.getElementsByState(t, this.stateName); r.each(n, (function (t) { e.setElementState(t, !1) })) }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(19), a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.startPoint = null, e.endPoint = null, e.isStarted = !1, e.effectSiblings = !1, e.effectByRecord = !1, e } return i.__extends(e, t), e.prototype.getCurrentPoint = function () { var t = this.context.event; return { x: t.x, y: t.y } }, e.prototype.start = function () { this.clear(), this.startPoint = this.getCurrentPoint(), this.isStarted = !0 }, e.prototype.getIntersectElements = function () { var t = null; if (o.isMask(this.context)) t = o.getMaskedElements(this.context, 10); else { var e = this.startPoint, n = this.isStarted ? this.getCurrentPoint() : this.endPoint; if (!e || !n) return; var i = { minX: Math.min(e.x, n.x), minY: Math.min(e.y, n.y), maxX: Math.max(e.x, n.x), maxY: Math.max(e.y, n.y) }, r = this.context.view; t = o.getIntersectElements(r, i) } return t }, e.prototype.setStateEnable = function (t) { if (this.effectSiblings && !this.effectByRecord) this.setSiblingsState(t); else { var e = o.getElements(this.context.view), n = this.getIntersectElements(); n && n.length ? this.effectByRecord ? this.setSiblingsStateByRecord(n, t) : this.setElementsState(n, t, e) : this.clear() } }, e.prototype.setSiblingsStateByRecord = function (t, e) { var n = this, i = this.context.view, a = o.getSilbings(i), s = t.map((function (t) { return t.getModel().data })), u = i.getXScale().field, l = i.getYScales()[0].field; r.each(a, (function (t) { var i = o.getElements(t), r = i.filter((function (t) { var e = t.getModel().data; return o.isInRecords(s, e, u, l) })); n.setElementsState(r, e, i) })) }, e.prototype.setSiblingsState = function (t) { var e = this, n = this.context.view, i = o.getSilbings(n); o.isMask(this.context) && r.each(i, (function (n) { var i = o.getElements(n), r = o.getSiblingMaskElements(e.context, n, 10); r && r.length ? e.setElementsState(r, t, i) : e.clearViewState(n) })) }, e.prototype.setElementsState = function (t, e, n) { var i = this; r.each(n, (function (n) { t.includes(n) ? i.setElementState(n, e) : i.setElementState(n, !1) })) }, e.prototype.end = function () { this.isStarted = !1, this.endPoint = this.getCurrentPoint() }, e.prototype.clear = function () { var t = this, e = this.context.view; if (this.effectSiblings) { var n = o.getSilbings(e); r.each(n, (function (e) { t.clearViewState(e) })) } else this.clearViewState(e) }, e }(i.__importDefault(n(94)).default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(19), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.setStateEnable = function (t) { var e = r.getCurrentElement(this.context); if (e) { if (!r.isElementChange(this.context)) return; t ? (this.clear(), this.setElementState(e, !0)) : this.hasState(e) && this.setElementState(e, !1) } }, e.prototype.toggle = function () { var t = r.getCurrentElement(this.context); if (t) { var e = this.hasState(t); e || this.clear(), this.setElementState(t, !e) } }, e.prototype.reset = function () { this.setStateEnable(!1) }, e }(i.__importDefault(n(94)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.STATUS_ACTIVE = e.STATUS_UNACTIVE = void 0; var i = n(1), r = n(0), o = n(19), a = n(98), s = i.__importDefault(n(93)), u = n(14); e.STATUS_UNACTIVE = u.ELEMENT_STATE.INACTIVE, e.STATUS_ACTIVE = u.ELEMENT_STATE.ACTIVE; var l = function (t) { function n() { var n = null !== t && t.apply(this, arguments) || this; return n.stateName = e.STATUS_ACTIVE, n } return i.__extends(n, t), n.prototype.setElementsStateByItem = function (t, e, n, i) { var r = this; this.setHighlightBy(t, (function (t) { return r.isMathItem(t, e, n) }), i) }, n.prototype.setElementHighlight = function (t, n) { n(t) ? (t.hasState(e.STATUS_UNACTIVE) && t.setState(e.STATUS_UNACTIVE, !1), t.setState(e.STATUS_ACTIVE, !0)) : t.hasState(e.STATUS_ACTIVE) || t.setState(e.STATUS_UNACTIVE, !0) }, n.prototype.setHighlightBy = function (t, n, i) { var a = this; if (i) r.each(t, (function (t) { a.setElementHighlight(t, n) })); else { var s = o.getElementsByState(this.context.view, e.STATUS_ACTIVE), u = !0; r.each(s, (function (t) { if (!n(t)) return u = !1, !1 })), u ? this.clear() : r.each(t, (function (t) { n(t) && (t.hasState(e.STATUS_ACTIVE) && t.setState(e.STATUS_ACTIVE, !1), t.setState(e.STATUS_UNACTIVE, !0)) })) } }, n.prototype.setElementState = function (t, e) { var n = this.context.view, i = o.getElements(n); this.setHighlightBy(i, (function (e) { return t === e }), e) }, n.prototype.highlight = function () { this.setState() }, n.prototype.clear = function () { var t = this.context.view; a.clearHighlight(t) }, n }(s.default); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.setHighlightBy = e.clearHighlight = void 0; var i = n(0), r = n(19); e.clearHighlight = function (t) { var e = r.getElements(t); i.each(e, (function (t) { t.hasState("active") && t.setState("active", !1), t.hasState("inactive") && t.setState("inactive", !1) })) }, e.setHighlightBy = function (t, e, n) { i.each(t, (function (t) { e(t) ? (t.hasState("inactive") && t.setState("inactive", !1), t.setState("active", n)) : (t.hasState("active") && t.setState("active", !1), t.setState("inactive", n)) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.maskShape = null, e.points = [], e.starting = !1, e.moving = !1, e.preMovePoint = null, e.shapeType = "path", e } return i.__extends(e, t), e.prototype.getCurrentPoint = function () { var t = this.context.event; return { x: t.x, y: t.y } }, e.prototype.emitEvent = function (t) { var e = "mask:" + t, n = this.context.view, i = this.context.event; n.emit(e, { target: this.maskShape, shape: this.maskShape, points: this.points, x: i.x, y: i.y }) }, e.prototype.createMask = function () { var t = this.context.view, e = this.getMaskAttrs(); return t.foregroundGroup.addShape({ type: this.shapeType, name: "mask", draggable: !0, attrs: i.__assign({ fill: "#C5D4EB", opacity: .3 }, e) }) }, e.prototype.getMaskPath = function () { return [] }, e.prototype.show = function () { this.maskShape && (this.maskShape.show(), this.emitEvent("show")) }, e.prototype.start = function () { this.starting = !0, this.moving = !1, this.points = [this.getCurrentPoint()], this.maskShape || (this.maskShape = this.createMask(), this.maskShape.set("capture", !1)), this.updateMask(), this.emitEvent("start") }, e.prototype.moveStart = function () { this.moving = !0, this.preMovePoint = this.getCurrentPoint() }, e.prototype.move = function () { if (this.moving && this.maskShape) { var t = this.getCurrentPoint(), e = this.preMovePoint, n = t.x - e.x, i = t.y - e.y, o = this.points; r.each(o, (function (t) { t.x += n, t.y += i })), this.updateMask(), this.emitEvent("change"), this.preMovePoint = t } }, e.prototype.updateMask = function () { var t = this.getMaskAttrs(); this.maskShape.attr(t) }, e.prototype.moveEnd = function () { this.moving = !1, this.preMovePoint = null }, e.prototype.end = function () { this.starting = !1, this.emitEvent("end"), this.maskShape && this.maskShape.set("capture", !0) }, e.prototype.hide = function () { this.maskShape && (this.maskShape.hide(), this.emitEvent("hide")) }, e.prototype.resize = function () { this.starting && this.maskShape && (this.points.push(this.getCurrentPoint()), this.updateMask(), this.emitEvent("change")) }, e.prototype.destroy = function () { this.points = [], this.maskShape && this.maskShape.remove(), this.maskShape = null, this.preMovePoint = null, t.prototype.destroy.call(this) }, e }(i.__importDefault(n(22)).default); e.default = o }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "registerAttribute", (function () { return y })), n.d(e, "getAttribute", (function () { return g })), n.d(e, "Attribute", (function () { return o })), n.d(e, "Color", (function () { return u })), n.d(e, "Opacity", (function () { return l })), n.d(e, "Position", (function () { return c })), n.d(e, "Shape", (function () { return h })), n.d(e, "Size", (function () { return f })), n.d(e, "Scale", (function () { return p.Scale })); var i = n(0), r = function (t, e) { return Object(i.isString)(e) ? e : t.invert(t.scale(e)) }, o = function () { function t(t) { this.names = [], this.scales = [], this.linear = !1, this.values = [], this.callback = function () { return [] }, this._parseCfg(t) } return t.prototype.mapping = function () { for (var t = this, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; var i = e.map((function (e, n) { return t._toOriginParam(e, t.scales[n]) })); return this.callback.apply(this, i) }, t.prototype.getLinearValue = function (t) { var e = this.values.length - 1, n = Math.floor(e * t), i = e * t - n, r = this.values[n]; return r + ((n === e ? r : this.values[n + 1]) - r) * i }, t.prototype.getNames = function () { for (var t = this.scales, e = this.names, n = Math.min(t.length, e.length), i = [], r = 0; r < n; r += 1)i.push(e[r]); return i }, t.prototype.getFields = function () { return this.scales.map((function (t) { return t.field })) }, t.prototype.getScale = function (t) { return this.scales[this.names.indexOf(t)] }, t.prototype.defaultCallback = function () { for (var t = this, e = [], n = 0; n < arguments.length; n++)e[n] = arguments[n]; return 0 === e.length ? this.values : e.map((function (e, n) { var i = t.scales[n]; return "identity" === i.type ? i.values[0] : t._getAttributeValue(i, e) })) }, t.prototype._parseCfg = function (t) { var e = this, n = t.type, r = void 0 === n ? "base" : n, o = t.names, a = void 0 === o ? [] : o, s = t.scales, u = void 0 === s ? [] : s, l = t.values, c = void 0 === l ? [] : l, h = t.callback; this.type = r, this.scales = u, this.values = c, this.names = a, this.callback = function () { for (var t = [], n = 0; n < arguments.length; n++)t[n] = arguments[n]; if (h) { var r = h.apply(void 0, t); if (!Object(i.isNil)(r)) return [r] } return e.defaultCallback.apply(e, t) } }, t.prototype._getAttributeValue = function (t, e) { if (t.isCategory && !this.linear) { var n = t.translate(e); return this.values[n % this.values.length] } var i = t.scale(e); return this.getLinearValue(i) }, t.prototype._toOriginParam = function (t, e) { return e.isLinear ? t : Object(i.isArray)(t) ? t.map((function (t) { return r(e, t) })) : r(e, t) }, t }(), a = n(10), s = n(51), u = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "color", n.names = ["color"], Object(i.isString)(n.values) && (n.linear = !0), n.gradient = s.default.gradient(n.values), n } return Object(a.b)(e, t), e.prototype.getLinearValue = function (t) { return this.gradient(t) }, e }(o), l = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "opacity", n.names = ["opacity"], n } return Object(a.b)(e, t), e }(o), c = function (t) { function e(e) { var n = t.call(this, e) || this; return n.names = ["x", "y"], n.type = "position", n } return Object(a.b)(e, t), e.prototype.mapping = function (t, e) { var n = this.scales, r = n[0], o = n[1]; return Object(i.isNil)(t) || Object(i.isNil)(e) ? [] : [Object(i.isArray)(t) ? t.map((function (t) { return r.scale(t) })) : r.scale(t), Object(i.isArray)(e) ? e.map((function (t) { return o.scale(t) })) : o.scale(e)] }, e }(o), h = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "shape", n.names = ["shape"], n } return Object(a.b)(e, t), e.prototype.getLinearValue = function (t) { var e = Math.round((this.values.length - 1) * t); return this.values[e] }, e }(o), f = function (t) { function e(e) { var n = t.call(this, e) || this; return n.type = "size", n.names = ["size"], n } return Object(a.b)(e, t), e }(o), p = n(44), d = {}, g = function (t) { return d[t.toLowerCase()] }, y = function (t, e) { if (g(t)) throw new Error("Attribute type '" + t + "' existed."); d[t.toLowerCase()] = e }; y("Color", u), y("Opacity", l), y("Position", c), y("Shape", h), y("Size", f) }, function (t, e, n) { "use strict"; n.r(e); var i = function () { function t() { this._events = {} } return t.prototype.on = function (t, e, n) { return this._events[t] || (this._events[t] = []), this._events[t].push({ callback: e, once: !!n }), this }, t.prototype.once = function (t, e) { return this.on(t, e, !0), this }, t.prototype.emit = function (t) { for (var e = this, n = [], i = 1; i < arguments.length; i++)n[i - 1] = arguments[i]; var r = this._events[t] || [], o = this._events["*"] || [], a = function (i) { for (var r = i.length, o = 0; o < r; o++)if (i[o]) { var a = i[o], s = a.callback; a.once && (i.splice(o, 1), 0 === i.length && delete e._events[t], r--, o--), s.apply(e, n) } }; a(r), a(o) }, t.prototype.off = function (t, e) { if (t) if (e) { for (var n = this._events[t] || [], i = n.length, r = 0; r < i; r++)n[r].callback === e && (n.splice(r, 1), i--, r--); 0 === n.length && delete this._events[t] } else delete this._events[t]; else this._events = {}; return this }, t.prototype.getEvents = function () { return this._events }, t }(); e.default = i }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.registerEngine = e.getEngine = void 0; var i = {}; e.getEngine = function (t) { var e = i[t]; if (!e) throw new Error("G engine '" + t + "' is not exist, please register it at first."); return e }, e.registerEngine = function (t, e) { i[t] = e } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.registerGeometry = e.View = void 0; var i = n(1), r = n(0), o = n(14), a = i.__importDefault(n(77)), s = n(78), u = n(80), l = n(113), c = n(34), h = n(26), f = n(33), p = n(82), d = n(83), g = n(57), y = n(114), v = n(116), m = i.__importDefault(n(166)), x = i.__importDefault(n(84)), b = i.__importDefault(n(167)), C = n(168), _ = n(117), O = n(169), M = n(170), w = function (t) { function e(e) { var n = t.call(this, { visible: e.visible }) || this; n.views = [], n.geometries = [], n.controllers = [], n.interactions = {}, n.limitInPlot = !1, n.options = { data: [], animate: !0 }, n.usedControllers = v.getComponentControllerNames(), n.scalePool = new C.ScalePool, n.layoutFunc = b.default, n.isPreMouseInPlot = !1, n.isDataChanged = !1, n.isCoordinateChanged = !1, n.createdScaleKeys = new Map, n.onCanvasEvent = function (t) { var e = t.name; if (!e.includes(":")) { var i = n.createViewEvent(t); n.doPlotEvent(i), n.emit(e, i) } }, n.onDelegateEvents = function (t) { var e = t.name; if (e.includes(":")) { var i = n.createViewEvent(t); n.emit(e, i) } }; var o = e.id, a = void 0 === o ? r.uniqueId("view") : o, s = e.parent, u = e.canvas, c = e.backgroundGroup, h = e.middleGroup, f = e.foregroundGroup, p = e.region, d = void 0 === p ? { start: { x: 0, y: 0 }, end: { x: 1, y: 1 } } : p, g = e.padding, m = e.appendPadding, x = e.theme, _ = e.options, O = e.limitInPlot, M = e.syncViewPadding; return n.parent = s, n.canvas = u, n.backgroundGroup = c, n.middleGroup = h, n.foregroundGroup = f, n.region = d, n.padding = g, n.appendPadding = m, n.options = i.__assign(i.__assign({}, n.options), _), n.limitInPlot = O, n.id = a, n.syncViewPadding = M, n.themeObject = r.isObject(x) ? r.deepMix({}, l.getTheme("default"), y.createTheme(x)) : l.getTheme(x), n.init(), n } return i.__extends(e, t), e.prototype.setLayout = function (t) { this.layoutFunc = t }, e.prototype.init = function () { this.calculateViewBBox(), this.initEvents(), this.initComponentController(), this.initOptions() }, e.prototype.render = function (t) { void 0 === t && (t = !1), this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_RENDER), this.paint(t), this.emit(o.VIEW_LIFE_CIRCLE.AFTER_RENDER), !1 === this.visible && this.changeVisible(!1) }, e.prototype.clear = function () { var t = this; this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_CLEAR), this.filteredData = [], this.coordinateInstance = void 0, this.isDataChanged = !1, this.isCoordinateChanged = !1; for (var e = this.geometries, n = 0; n < e.length; n++)e[n].clear(), e[n].container.remove(!0); this.geometries = []; var i = this.controllers; for (n = 0; n < i.length; n++)"annotation" === i[n].name ? i[n].clear(!0) : i[n].clear(); this.createdScaleKeys.forEach((function (e, n) { t.getRootView().scalePool.deleteScale(n) })), this.createdScaleKeys.clear(); var r = this.views; for (n = 0; n < r.length; n++)r[n].clear(); this.emit(o.VIEW_LIFE_CIRCLE.AFTER_CLEAR) }, e.prototype.destroy = function () { this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_DESTROY); var e = this.interactions; r.each(e, (function (t) { t && t.destroy() })), this.clear(); for (var n = this.controllers, i = 0, a = n.length; i < a; i++) { n[i].destroy() } this.backgroundGroup.remove(!0), this.middleGroup.remove(!0), this.foregroundGroup.remove(!0), t.prototype.destroy.call(this) }, e.prototype.changeVisible = function (e) { t.prototype.changeVisible.call(this, e); for (var n = this.geometries, i = 0, r = n.length; i < r; i++) { n[i].changeVisible(e) } var o = this.controllers; for (i = 0, r = o.length; i < r; i++) { o[i].changeVisible(e) } return this.foregroundGroup.set("visible", e), this.middleGroup.set("visible", e), this.backgroundGroup.set("visible", e), this.getCanvas().draw(), this }, e.prototype.data = function (t) { return r.set(this.options, "data", t), this.isDataChanged = !0, this }, e.prototype.source = function (t) { return console.warn("This method will be removed at G2 V4.1. Please use chart.data() instead."), this.data(t) }, e.prototype.filter = function (t, e) { return r.isFunction(e) ? (r.set(this.options, ["filters", t], e), this) : (!e && r.get(this.options, ["filters", t]) && delete this.options.filters[t], this) }, e.prototype.axis = function (t, e) { return r.isBoolean(t) ? r.set(this.options, ["axes"], t) : r.set(this.options, ["axes", t], e), this }, e.prototype.legend = function (t, e) { return r.isBoolean(t) ? r.set(this.options, ["legends"], t) : r.isString(t) ? r.set(this.options, ["legends", t], e) : r.set(this.options, ["legends"], t), this }, e.prototype.scale = function (t, e) { var n = this; return r.isString(t) ? r.set(this.options, ["scales", t], e) : r.isObject(t) && r.each(t, (function (t, e) { r.set(n.options, ["scales", e], t) })), this }, e.prototype.tooltip = function (t) { return r.set(this.options, "tooltip", t), this }, e.prototype.annotation = function () { return this.getController("annotation") }, e.prototype.guide = function () { return console.warn("This method will be removed at G2 V4.1. Please use chart.annotation() instead."), this.annotation() }, e.prototype.coordinate = function (t, e) { return r.isString(t) ? r.set(this.options, "coordinate", { type: t, cfg: e }) : r.set(this.options, "coordinate", t), this.coordinateController.update(this.options.coordinate), this.coordinateController }, e.prototype.coord = function (t, e) { return console.warn("This method will be removed at G2 V4.1. Please use chart.coordinate() instead."), this.coordinate(t, e) }, e.prototype.facet = function (t, e) { this.facetInstance && this.facetInstance.destroy(); var n = s.getFacet(t); if (!n) throw new Error("facet '" + t + "' is not exist!"); return this.facetInstance = new n(this, i.__assign(i.__assign({}, e), { type: t })), this }, e.prototype.animate = function (t) { return r.set(this.options, "animate", t), this }, e.prototype.updateOptions = function (t) { return this.clear(), r.mix(this.options, t), this.views.forEach((function (t) { return t.destroy() })), this.views = [], this.initOptions(), this.coordinateBBox = this.viewBBox, this }, e.prototype.option = function (t, n) { if (e.prototype[t]) throw new Error("Can't use built in variable name \"" + t + '", please change another one.'); return r.set(this.options, t, n), this }, e.prototype.theme = function (t) { return this.themeObject = r.isObject(t) ? r.deepMix({}, this.themeObject, y.createTheme(t)) : l.getTheme(t), this }, e.prototype.interaction = function (t, e) { var n = this.interactions[t]; n && n.destroy(); var i = u.createInteraction(t, this, e); return i && (i.init(), this.interactions[t] = i), this }, e.prototype.removeInteraction = function (t) { var e = this.interactions[t]; e && (e.destroy(), this.interactions[t] = void 0) }, e.prototype.changeData = function (t) { this.isDataChanged = !0, this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA), this.data(t), this.paint(!0); for (var e = this.views, n = 0, i = e.length; n < i; n++) { e[n].changeData(t) } this.emit(o.VIEW_LIFE_CIRCLE.AFTER_CHANGE_DATA) }, e.prototype.createView = function (t) { this.parent && this.parent.parent && console.warn("The view nesting recursive feature will be removed at G2 V4.1. Please avoid to use it."); var n = { data: this.options.data, scales: r.clone(this.options.scales), axes: r.clone(this.options.axes), coordinate: r.clone(this.coordinateController.getOption()), tooltip: r.clone(this.options.tooltip), legends: r.clone(this.options.legends), animate: this.options.animate, visible: this.visible }, a = new e(i.__assign(i.__assign({ parent: this, canvas: this.canvas, backgroundGroup: this.backgroundGroup.addGroup({ zIndex: o.GROUP_Z_INDEX.BG }), middleGroup: this.middleGroup.addGroup({ zIndex: o.GROUP_Z_INDEX.MID }), foregroundGroup: this.foregroundGroup.addGroup({ zIndex: o.GROUP_Z_INDEX.FORE }), theme: this.themeObject, padding: this.padding }, t), { options: i.__assign(i.__assign({}, n), r.get(t, "options", {})) })); return this.views.push(a), a }, e.prototype.view = function (t) { return console.warn("This method will be removed at G2 V4.1. Please use chart.createView() instead."), this.createView(t) }, e.prototype.removeView = function (t) { var e = r.remove(this.views, (function (e) { return e === t }))[0]; return e && e.destroy(), e }, e.prototype.getCoordinate = function () { return this.coordinateInstance }, e.prototype.getTheme = function () { return this.themeObject }, e.prototype.getXScale = function () { var t = this.geometries[0]; return t ? t.getXScale() : null }, e.prototype.getYScales = function () { var t = {}; return this.geometries.map((function (e) { var n = e.getYScale(), i = n.field; if (!t[i]) return t[i] = !0, n })) }, e.prototype.getScalesByDim = function (t) { for (var e = this.geometries, n = {}, i = 0, r = e.length; i < r; i++) { var o = e[i], a = "x" === t ? o.getXScale() : o.getYScale(); a && !n[a.field] && (n[a.field] = a) } return n }, e.prototype.getScaleByField = function (t, e) { var n = e || this.getScaleKey(t); return this.getRootView().scalePool.getScale(n) }, e.prototype.getOptions = function () { return this.options }, e.prototype.getData = function () { return this.filteredData }, e.prototype.getLayer = function (t) { return t === o.LAYER.BG ? this.backgroundGroup : t === o.LAYER.MID ? this.middleGroup : (o.LAYER.FORE, this.foregroundGroup) }, e.prototype.isPointInPlot = function (t) { return h.isPointInCoordinate(this.getCoordinate(), t) }, e.prototype.getLegendAttributes = function () { return r.flatten(this.geometries.map((function (t) { return t.getGroupAttributes() }))) }, e.prototype.getGroupScales = function () { var t = this.geometries.map((function (t) { return t.getGroupScales() })); return f.uniq(r.flatten(t)) }, e.prototype.getCanvas = function () { return this.getRootView().canvas }, e.prototype.getRootView = function () { for (var t = this; t.parent;)t = t.parent; return t }, e.prototype.getXY = function (t) { var e, n, i = this.getCoordinate(), o = this.getScalesByDim("x"), a = this.getScalesByDim("y"); if (r.each(t, (function (t, i) { o[i] && (e = o[i].scale(t)), a[i] && (n = a[i].scale(t)) })), !r.isNil(e) && !r.isNil(n)) return i.convert({ x: e, y: n }) }, e.prototype.getController = function (t) { return r.find(this.controllers, (function (e) { return e.name === t })) }, e.prototype.showTooltip = function (t) { var e = this.getController("tooltip"); return e && e.showTooltip(t), this }, e.prototype.hideTooltip = function () { var t = this.getController("tooltip"); return t && t.hideTooltip(), this }, e.prototype.lockTooltip = function () { var t = this.getController("tooltip"); return t && t.lockTooltip(), this }, e.prototype.unlockTooltip = function () { var t = this.getController("tooltip"); return t && t.unlockTooltip(), this }, e.prototype.isTooltipLocked = function () { var t = this.getController("tooltip"); return t && t.isTooltipLocked() }, e.prototype.getTooltipItems = function (t) { var e = this.getController("tooltip"); return e ? e.getTooltipItems(t) : [] }, e.prototype.getSnapRecords = function (t) { for (var e = this.geometries, n = [], i = 0, r = e.length; i < r; i++) { var o = e[i], a = o.dataArray; o.sort(a); for (var s = void 0, u = 0, l = a.length; u < l; u++) { var c = a[u]; (s = p.findDataByPoint(t, c, o)) && n.push(s) } } var h = this.views; for (i = 0, r = h.length; i < r; i++) { var f = h[i].getSnapRecords(t); n = n.concat(f) } return n }, e.prototype.getComponents = function () { for (var t = [], e = this.controllers, n = 0, i = e.length; n < i; n++) { var r = e[n]; t = t.concat(r.getComponents()) } return t }, e.prototype.filterData = function (t) { var e = this.options.filters; return 0 === r.size(e) ? t : r.filter(t, (function (t, n) { return Object.keys(e).every((function (i) { return (0, e[i])(t[i], t, n) })) })) }, e.prototype.filterFieldData = function (t, e) { var n = this.options.filters, i = r.get(n, t); return r.isUndefined(i) ? e : e.filter((function (e, n) { return i(e[t], e, n) })) }, e.prototype.adjustCoordinate = function () { var t = this.getCoordinate(), e = t.start, n = t.end, i = this.coordinateBBox.bl, o = this.coordinateBBox.tr; r.isEqual(e, i) && r.isEqual(n, o) ? this.isCoordinateChanged = !1 : (this.isCoordinateChanged = !0, this.coordinateInstance = this.coordinateController.adjust(i, o)) }, e.prototype.paint = function (t) { this.renderDataRecursive(t), this.syncScale(), this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_PAINT), this.renderPaddingRecursive(t), this.renderLayoutRecursive(t), this.renderBackgroundStyleShape(), this.renderPaintRecursive(t), this.emit(o.VIEW_LIFE_CIRCLE.AFTER_PAINT), this.isDataChanged = !1 }, e.prototype.renderBackgroundStyleShape = function () { if (!this.parent) { var t = r.get(this.themeObject, "background"); if (t) { this.backgroundStyleRectShape || (this.backgroundStyleRectShape = this.backgroundGroup.addShape("rect", { attrs: {}, zIndex: -1, capture: !1 }), this.backgroundStyleRectShape.toBack()); var e = this.viewBBox, n = e.x, i = e.y, o = e.width, a = e.height; this.backgroundStyleRectShape.attr({ fill: t, x: n, y: i, width: o, height: a }) } else this.backgroundStyleRectShape && (this.backgroundStyleRectShape.remove(!0), this.backgroundStyleRectShape = void 0) } }, e.prototype.renderPaddingRecursive = function (t) { this.calculateViewBBox(), this.adjustCoordinate(), this.initComponents(t), this.autoPadding = O.calculatePadding(this).shrink(d.parsePadding(this.appendPadding)), this.coordinateBBox = this.viewBBox.shrink(this.autoPadding.getPadding()), this.adjustCoordinate(); for (var e = this.views, n = 0, i = e.length; n < i; n++) { e[n].renderPaddingRecursive(t) } }, e.prototype.renderLayoutRecursive = function (t) { var e = !0 === this.syncViewPadding ? M.defaultSyncViewPadding : r.isFunction(this.syncViewPadding) ? this.syncViewPadding : void 0; e && (e(this, this.views, _.PaddingCal), this.views.forEach((function (t) { t.coordinateBBox = t.viewBBox.shrink(t.autoPadding.getPadding()), t.adjustCoordinate() }))), this.doLayout(); for (var n = this.views, i = 0, o = n.length; i < o; i++) { n[i].renderLayoutRecursive(t) } }, e.prototype.renderPaintRecursive = function (t) { var e = this.middleGroup; if (this.limitInPlot) { var n = h.getCoordinateClipCfg(this.coordinateInstance), i = n.type, r = n.attrs; e.setClip({ type: i, attrs: r }) } else e.setClip(void 0); this.paintGeometries(t), this.renderComponents(t); for (var o = this.views, a = 0, s = o.length; a < s; a++) { o[a].renderPaintRecursive(t) } }, e.prototype.createScale = function (t, e, n, o) { var a = r.get(this.options.scales, [t]), s = i.__assign(i.__assign({}, a), n); return this.parent ? this.parent.createScale(t, e, s, o) : this.scalePool.createScale(t, e, s, o) }, e.prototype.renderDataRecursive = function (t) { this.doFilterData(), this.createCoordinate(), this.initGeometries(t), this.renderFacet(t); for (var e = this.views, n = 0, i = e.length; n < i; n++) { e[n].renderDataRecursive(t) } }, e.prototype.calculateViewBBox = function () { var t, e, n, i; if (this.parent) { var r = this.parent.coordinateBBox; t = r.x, e = r.y, n = r.width, i = r.height } else t = 0, e = 0, n = this.canvas.get("width"), i = this.canvas.get("height"); var o = this.region, a = o.start, s = o.end, u = new c.BBox(t + n * a.x, e + i * a.y, n * (s.x - a.x), i * (s.y - a.y)); this.viewBBox && this.viewBBox.isEqual(u) || (this.viewBBox = new c.BBox(t + n * a.x, e + i * a.y, n * (s.x - a.x), i * (s.y - a.y))), this.coordinateBBox = this.viewBBox }, e.prototype.initEvents = function () { this.foregroundGroup.on("*", this.onDelegateEvents), this.middleGroup.on("*", this.onDelegateEvents), this.backgroundGroup.on("*", this.onDelegateEvents), this.canvas.on("*", this.onCanvasEvent) }, e.prototype.initComponentController = function () { for (var t = this.usedControllers, e = 0, n = t.length; e < n; e++) { var i = t[e], r = v.getComponentController(i); r && this.controllers.push(new r(this)) } }, e.prototype.createViewEvent = function (t) { var e = t.shape, n = t.name, i = e ? e.get("origin") : null, r = new x.default(this, t, i); return r.type = n, r }, e.prototype.doPlotEvent = function (t) { var e = t.type, n = { x: t.x, y: t.y }; if (["mousedown", "mouseup", "mousemove", "mouseleave", "mousewheel", "touchstart", "touchmove", "touchend", "touchcancel", "click", "dblclick", "contextmenu"].includes(e)) { var i = this.isPointInPlot(n); if (i) { var r = "plot:" + e; t.type = r, this.emit(r, t), "mouseleave" !== e && "touchend" !== e || (this.isPreMouseInPlot = !1) } "mousemove" === e || "touchmove" === e ? (this.isPreMouseInPlot && !i ? ("mousemove" === e && (t.type = o.PLOT_EVENTS.MOUSE_LEAVE, this.emit(o.PLOT_EVENTS.MOUSE_LEAVE, t)), t.type = o.PLOT_EVENTS.LEAVE, this.emit(o.PLOT_EVENTS.LEAVE, t)) : !this.isPreMouseInPlot && i && ("mousemove" === e && (t.type = o.PLOT_EVENTS.MOUSE_ENTER, this.emit(o.PLOT_EVENTS.MOUSE_ENTER, t)), t.type = o.PLOT_EVENTS.ENTER, this.emit(o.PLOT_EVENTS.ENTER, t)), this.isPreMouseInPlot = i) : "mouseleave" !== e && "touchend" !== e || this.isPreMouseInPlot && ("mouseleave" === e && (t.type = o.PLOT_EVENTS.MOUSE_LEAVE, this.emit(o.PLOT_EVENTS.MOUSE_LEAVE, t)), t.type = o.PLOT_EVENTS.LEAVE, this.emit(o.PLOT_EVENTS.LEAVE, t), this.isPreMouseInPlot = !1) } }, e.prototype.doFilterData = function () { var t = this.options.data; this.filteredData = this.filterData(t) }, e.prototype.initGeometries = function (t) { this.createOrUpdateScales(); for (var e = this.getCoordinate(), n = r.get(this.options, "scales", {}), i = this.geometries, o = 0, a = i.length; o < a; o++) { var s = i[o]; s.scales = this.getGeometryScales(); var u = { coordinate: e, scaleDefs: n, data: this.filteredData, theme: this.themeObject, isDataChanged: this.isDataChanged, isCoordinateChanged: this.isCoordinateChanged }; t ? s.update(u) : s.init(u) } this.adjustScales() }, e.prototype.createOrUpdateScales = function () { for (var t = this.getScaleFields(), e = this.getGroupedFields(), n = this.getOptions(), i = n.data, r = n.scales, o = void 0 === r ? {} : r, a = this.filteredData, s = 0, u = t.length; s < u; s++) { var l = t[s], c = o[l], h = this.getScaleKey(l); this.createScale(l, e.includes(l) ? i : a, c, h), this.createdScaleKeys.set(h, !0) } }, e.prototype.syncScale = function () { this.getRootView().scalePool.sync(this.getCoordinate(), this.theme) }, e.prototype.getGeometryScales = function () { for (var t = this.getScaleFields(), e = {}, n = 0; n < t.length; n++) { var i = t[n]; e[i] = this.getScaleByField(i) } return e }, e.prototype.getScaleFields = function () { for (var t = [], e = {}, n = this.geometries, i = 0; i < n.length; i++) { var r = n[i].getScaleFields(); f.uniq(r, t, e) } return t }, e.prototype.getGroupedFields = function () { for (var t = [], e = {}, n = this.geometries, i = 0; i < n.length; i++) { var r = n[i].getGroupFields(); f.uniq(r, t, e) } return t }, e.prototype.adjustScales = function () { this.adjustCategoryScaleRange() }, e.prototype.adjustCategoryScaleRange = function () { var t = this, e = i.__spreadArrays([this.getXScale()], this.getYScales()).filter((function (t) { return !!t })), n = this.getCoordinate(), o = this.options.scales; r.each(e, (function (e) { var i = e.field, a = e.values, s = e.isCategory, u = e.isIdentity; (s || u) && a && !r.get(o, [i, "range"]) && (e.range = g.getDefaultCategoryScaleRange(e, n, t.theme)) })) }, e.prototype.initComponents = function (t) { for (var e = this.controllers, n = 0; n < e.length; n++) { var i = e[n]; t ? i.update() : (i.clear(), i.render()) } }, e.prototype.doLayout = function () { this.layoutFunc(this) }, e.prototype.createCoordinate = function () { var t = this.coordinateBBox.bl, e = this.coordinateBBox.tr; this.coordinateInstance = this.coordinateController.create(t, e) }, e.prototype.paintGeometries = function (t) { for (var e = this.options.animate, n = this.getCoordinate(), i = { x: this.viewBBox.x, y: this.viewBBox.y, minX: this.viewBBox.minX, minY: this.viewBBox.minY, maxX: this.viewBBox.maxX, maxY: this.viewBBox.maxY, width: this.viewBBox.width, height: this.viewBBox.height }, r = this.geometries, o = 0; o < r.length; o++) { var a = r[o]; a.coordinate = n, a.canvasRegion = i, e || a.animate(!1), a.paint(t) } }, e.prototype.renderComponents = function (t) { for (var e = 0; e < this.getComponents().length; e++) { this.getComponents()[e].component.render() } }, e.prototype.renderFacet = function (t) { this.facetInstance && (t ? this.facetInstance.update() : (this.facetInstance.clear(), this.facetInstance.init(), this.facetInstance.render())) }, e.prototype.initOptions = function () { var t = this, e = this.options, n = e.geometries, o = void 0 === n ? [] : n, a = e.interactions, s = void 0 === a ? [] : a, u = e.views, l = void 0 === u ? [] : u, c = e.annotations, h = void 0 === c ? [] : c, f = e.coordinate, p = e.events, d = e.facets; this.coordinateController ? f && this.coordinateController.update(f) : this.coordinateController = new m.default(f); for (var g = 0; g < o.length; g++) { var y = o[g]; this.createGeometry(y) } for (var v = 0; v < s.length; v++) { var x = s[v], b = x.type, C = x.cfg; this.interaction(b, C) } for (var _ = 0; _ < l.length; _++) { var O = l[_]; this.createView(O) } for (var M = this.getController("annotation"), w = 0; w < h.length; w++) { var S = h[w]; M.annotation(S) } p && r.each(p, (function (e, n) { t.on(n, e) })), d && r.each(d, (function (e) { var n = e.type, r = i.__rest(e, ["type"]); t.facet(n, r) })) }, e.prototype.createGeometry = function (t) { var e = t.type, n = t.cfg, i = void 0 === n ? {} : n; if (this[e]) { var o = this[e](i); r.each(t, (function (t, e) { r.isFunction(o[e]) && o[e](t) })) } }, e.prototype.getScaleKey = function (t) { return this.id + "-" + t }, e }(a.default); e.View = w, e.registerGeometry = function (t, e) { w.prototype[t.toLowerCase()] = function (t) { void 0 === t && (t = {}); var n = i.__assign({ container: this.middleGroup.addGroup(), labelsContainer: this.foregroundGroup.addGroup() }, t), r = new e(n); return this.geometries.push(r), r } }, e.default = w }, function (t, e) { }, function (t, e) { }, function (t, e, n) { "use strict"; var i = n(1), r = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.isGroup = function () { return !0 }, e.prototype.isEntityGroup = function () { return !1 }, e.prototype.clone = function () { for (var e = t.prototype.clone.call(this), n = this.getChildren(), i = 0; i < n.length; i++) { var r = n[i]; e.add(r.clone()) } return e }, e }(n(72).a); e.a = r }, function (t, e, n) { "use strict"; var i = n(1), r = n(73), o = n(27), a = function (t) { function e(e) { return t.call(this, e) || this } return Object(i.__extends)(e, t), e.prototype._isInBBox = function (t, e) { var n = this.getBBox(); return n.minX <= t && n.maxX >= t && n.minY <= e && n.maxY >= e }, e.prototype.afterAttrsChange = function (e) { t.prototype.afterAttrsChange.call(this, e), this.clearCacheBBox() }, e.prototype.getBBox = function () { var t = this.cfg.bbox; return t || (t = this.calculateBBox(), this.set("bbox", t)), t }, e.prototype.getCanvasBBox = function () { var t = this.cfg.canvasBBox; return t || (t = this.calculateCanvasBBox(), this.set("canvasBBox", t)), t }, e.prototype.applyMatrix = function (e) { t.prototype.applyMatrix.call(this, e), this.set("canvasBBox", null) }, e.prototype.calculateCanvasBBox = function () { var t = this.getBBox(), e = this.getTotalMatrix(), n = t.minX, i = t.minY, r = t.maxX, a = t.maxY; if (e) { var s = Object(o.c)(e, [t.minX, t.minY]), u = Object(o.c)(e, [t.maxX, t.minY]), l = Object(o.c)(e, [t.minX, t.maxY]), c = Object(o.c)(e, [t.maxX, t.maxY]); n = Math.min(s[0], u[0], l[0], c[0]), r = Math.max(s[0], u[0], l[0], c[0]), i = Math.min(s[1], u[1], l[1], c[1]), a = Math.max(s[1], u[1], l[1], c[1]) } var h = this.attrs; if (h.shadowColor) { var f = h.shadowBlur, p = void 0 === f ? 0 : f, d = h.shadowOffsetX, g = void 0 === d ? 0 : d, y = h.shadowOffsetY, v = void 0 === y ? 0 : y, m = n - p + g, x = r + p + g, b = i - p + v, C = a + p + v; n = Math.min(n, m), r = Math.max(r, x), i = Math.min(i, b), a = Math.max(a, C) } return { x: n, y: i, minX: n, minY: i, maxX: r, maxY: a, width: r - n, height: a - i } }, e.prototype.clearCacheBBox = function () { this.set("bbox", null), this.set("canvasBBox", null) }, e.prototype.isClipShape = function () { return this.get("isClipShape") }, e.prototype.isInShape = function (t, e) { return !1 }, e.prototype.isOnlyHitBox = function () { return !1 }, e.prototype.isHit = function (t, e) { var n = this.get("startArrowShape"), i = this.get("endArrowShape"), r = [t, e, 1], o = (r = this.invertFromMatrix(r))[0], a = r[1], s = this._isInBBox(o, a); if (this.isOnlyHitBox()) return s; if (s && !this.isClipped(o, a)) { if (this.isInShape(o, a)) return !0; if (n && n.isHit(o, a)) return !0; if (i && i.isHit(o, a)) return !0 } return !1 }, e }(r.a); e.a = a }, function (t, e, n) { "use strict"; n.r(e); var i = n(45); n.d(e, "getAdjust", (function () { return i.getAdjust })), n.d(e, "registerAdjust", (function () { return i.registerAdjust })); var r = n(29); n.d(e, "Adjust", (function () { return r.a })); var o = n(146), a = n(147), s = n(148), u = n(149), l = n(63); for (var c in l) ["default", "getAdjust", "registerAdjust", "Adjust"].indexOf(c) < 0 && function (t) { n.d(e, t, (function () { return l[t] })) }(c); Object(i.registerAdjust)("Dodge", o.a), Object(i.registerAdjust)("Jitter", a.a), Object(i.registerAdjust)("Stack", s.a), Object(i.registerAdjust)("Symmetric", u.a) }, function (t, e) { }, function (t, e) { }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.createCallbackAction = e.unregisterAction = e.registerAction = e.getActionClass = e.createAction = void 0; var i = n(1).__importDefault(n(162)), r = n(0), o = {}; e.createAction = function (t, e) { var n = o[t], i = null; return n && ((i = new (0, n.ActionClass)(e, n.cfg)).name = t, i.init()), i }, e.getActionClass = function (t) { var e = o[t]; return r.get(e, "ActionClass") }, e.registerAction = function (t, e, n) { o[t] = { ActionClass: e, cfg: n } }, e.unregisterAction = function (t) { delete o[t] }, e.createCallbackAction = function (t, e) { var n = new i.default(e); return n.callback = t, n.name = "callback", n } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = function () { function t(t, e) { this.view = t, this.cfg = e } return t.prototype.init = function () { this.initEvents() }, t.prototype.initEvents = function () { }, t.prototype.clearEvents = function () { }, t.prototype.destroy = function () { this.clearEvents() }, t }(); e.default = i }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.registerTheme = e.getTheme = void 0; var i = n(0), r = n(114), o = { default: r.createTheme({}) }; e.getTheme = function (t) { return i.get(o, i.lowerCase(t), o.default) }, e.registerTheme = function (t, e) { o[i.lowerCase(t)] = r.createTheme(e) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(164); Object.defineProperty(e, "createTheme", { enumerable: !0, get: function () { return i.createTheme } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.createThemeByStyleSheet = void 0; var i = n(1), r = n(58), o = n(6), a = n(0), s = n(24); e.createThemeByStyleSheet = function (t) { var e, n = { point: { default: { fill: t.pointFillColor, r: t.pointSize, stroke: t.pointBorderColor, lineWidth: t.pointBorder, fillOpacity: t.pointFillOpacity }, active: { stroke: t.pointActiveBorderColor, lineWidth: t.pointActiveBorder }, selected: { stroke: t.pointSelectedBorderColor, lineWidth: t.pointSelectedBorder }, inactive: { fillOpacity: t.pointInactiveFillOpacity, strokeOpacity: t.pointInactiveBorderOpacity } }, hollowPoint: { default: { fill: t.hollowPointFillColor, lineWidth: t.hollowPointBorder, stroke: t.hollowPointBorderColor, strokeOpacity: t.hollowPointBorderOpacity, r: t.hollowPointSize }, active: { stroke: t.hollowPointActiveBorderColor, strokeOpacity: t.hollowPointActiveBorderOpacity }, selected: { lineWidth: t.hollowPointSelectedBorder, stroke: t.hollowPointSelectedBorderColor, strokeOpacity: t.hollowPointSelectedBorderOpacity }, inactive: { strokeOpacity: t.hollowPointInactiveBorderOpacity } }, area: { default: { fill: t.areaFillColor, fillOpacity: t.areaFillOpacity, stroke: null }, active: { fillOpacity: t.areaActiveFillOpacity }, selected: { fillOpacity: t.areaSelectedFillOpacity }, inactive: { fillOpacity: t.areaInactiveFillOpacity } }, hollowArea: { default: { fill: null, stroke: t.hollowAreaBorderColor, lineWidth: t.hollowAreaBorder, strokeOpacity: t.hollowAreaBorderOpacity }, active: { fill: null, lineWidth: t.hollowAreaActiveBorder }, selected: { fill: null, lineWidth: t.hollowAreaSelectedBorder }, inactive: { strokeOpacity: t.hollowAreaInactiveBorderOpacity } }, interval: { default: { fill: t.intervalFillColor, fillOpacity: t.intervalFillOpacity }, active: { stroke: t.intervalActiveBorderColor, lineWidth: t.intervalActiveBorder }, selected: { stroke: t.intervalSelectedBorderColor, lineWidth: t.intervalSelectedBorder }, inactive: { fillOpacity: t.intervalInactiveFillOpacity, strokeOpacity: t.intervalInactiveBorderOpacity } }, hollowInterval: { default: { fill: t.hollowIntervalFillColor, stroke: t.hollowIntervalBorderColor, lineWidth: t.hollowIntervalBorder, strokeOpacity: t.hollowIntervalBorderOpacity }, active: { stroke: t.hollowIntervalActiveBorderColor, lineWidth: t.hollowIntervalActiveBorder, strokeOpacity: t.hollowIntervalActiveBorderOpacity }, selected: { stroke: t.hollowIntervalSelectedBorderColor, lineWidth: t.hollowIntervalSelectedBorder, strokeOpacity: t.hollowIntervalSelectedBorderOpacity }, inactive: { stroke: t.hollowIntervalInactiveBorderColor, lineWidth: t.hollowIntervalInactiveBorder, strokeOpacity: t.hollowIntervalInactiveBorderOpacity } }, line: { default: { stroke: t.lineBorderColor, lineWidth: t.lineBorder, strokeOpacity: t.lineBorderOpacity, fill: null, lineAppendWidth: 10, lineCap: "round", lineJoin: "round" }, active: { lineWidth: t.lineActiveBorder }, selected: { lineWidth: t.lineSelectedBorder }, inactive: { strokeOpacity: t.lineInactiveBorderOpacity } } }, u = function (t) { return { title: { autoRotate: !0, position: "center", spacing: t.axisTitleSpacing, style: { fill: t.axisTitleTextFillColor, fontSize: t.axisTitleTextFontSize, lineHeight: t.axisTitleTextLineHeight, textBaseline: "middle", fontFamily: t.fontFamily } }, label: { autoRotate: !1, autoEllipsis: !1, autoHide: { type: "equidistance", cfg: { minGap: 6 } }, offset: t.axisLabelOffset, style: { fill: t.axisLabelFillColor, fontSize: t.axisLabelFontSize, lineHeight: t.axisLabelLineHeight, fontFamily: t.fontFamily } }, line: { style: { lineWidth: t.axisLineBorder, stroke: t.axisLineBorderColor } }, grid: { line: { type: "line", style: { stroke: t.axisGridBorderColor, lineWidth: t.axisGridBorder, lineDash: t.axisGridLineDash } }, alignTick: !0, animate: !0 }, tickLine: { style: { lineWidth: t.axisTickLineBorder, stroke: t.axisTickLineBorderColor }, alignTick: !0, length: t.axisTickLineLength }, subTickLine: null, animate: !0 } }(t), l = function (t) { return { title: null, marker: { symbol: "circle", spacing: t.legendMarkerSpacing, style: { r: t.legendCircleMarkerSize, fill: t.legendMarkerColor } }, itemName: { spacing: 5, style: { fill: t.legendItemNameFillColor, fontFamily: t.fontFamily, fontSize: t.legendItemNameFontSize, lineHeight: t.legendItemNameLineHeight, fontWeight: t.legendItemNameFontWeight, textAlign: "start", textBaseline: "middle" } }, flipPage: !0, animate: !1, maxItemWidth: 200, itemSpacing: t.legendItemSpacing, itemMarginBottom: t.legendItemMarginBottom, padding: t.legendPadding } }(t); return { background: t.backgroundColor, defaultColor: t.brandColor, padding: "auto", fontFamily: t.fontFamily, columnWidthRatio: .5, maxColumnWidth: null, minColumnWidth: null, roseWidthRatio: .9999999, multiplePieWidthRatio: 1 / 1.3, colors10: t.paletteQualitative10, colors20: t.paletteQualitative20, shapes: { point: ["hollow-circle", "hollow-square", "hollow-bowtie", "hollow-diamond", "hollow-hexagon", "hollow-triangle", "hollow-triangle-down", "circle", "square", "bowtie", "diamond", "hexagon", "triangle", "triangle-down", "cross", "tick", "plus", "hyphen", "line"], line: ["line", "dash", "dot", "smooth"], area: ["area", "smooth", "line", "smooth-line"], interval: ["rect", "hollow-rect", "line", "tick"] }, sizes: [1, 10], geometries: { interval: { rect: { default: { style: n.interval.default }, active: { style: n.interval.active }, inactive: { style: n.interval.inactive }, selected: { style: function (t) { var e = t.geometry.coordinate; if (e.isPolar && e.isTransposed) { var i = s.getAngle(t.getModel(), e), r = (i.startAngle + i.endAngle) / 2, a = 7.5 * Math.cos(r), u = 7.5 * Math.sin(r); return { matrix: o.ext.transform(null, [["t", a, u]]) } } return n.interval.selected } } }, "hollow-rect": { default: { style: n.hollowInterval.default }, active: { style: n.hollowInterval.active }, inactive: { style: n.hollowInterval.inactive }, selected: { style: n.hollowInterval.selected } }, line: { default: { style: n.hollowInterval.default }, active: { style: n.hollowInterval.active }, inactive: { style: n.hollowInterval.inactive }, selected: { style: n.hollowInterval.selected } }, tick: { default: { style: n.hollowInterval.default }, active: { style: n.hollowInterval.active }, inactive: { style: n.hollowInterval.inactive }, selected: { style: n.hollowInterval.selected } }, funnel: { default: { style: n.interval.default }, active: { style: n.interval.active }, inactive: { style: n.interval.inactive }, selected: { style: n.interval.selected } }, pyramid: { default: { style: n.interval.default }, active: { style: n.interval.active }, inactive: { style: n.interval.inactive }, selected: { style: n.interval.selected } } }, line: { line: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } }, dot: { default: { style: i.__assign(i.__assign({}, n.line.default), { lineCap: null, lineDash: [1, 1] }) }, active: { style: i.__assign(i.__assign({}, n.line.active), { lineCap: null, lineDash: [1, 1] }) }, inactive: { style: i.__assign(i.__assign({}, n.line.inactive), { lineCap: null, lineDash: [1, 1] }) }, selected: { style: i.__assign(i.__assign({}, n.line.selected), { lineCap: null, lineDash: [1, 1] }) } }, dash: { default: { style: i.__assign(i.__assign({}, n.line.default), { lineCap: null, lineDash: [5.5, 1] }) }, active: { style: i.__assign(i.__assign({}, n.line.active), { lineCap: null, lineDash: [5.5, 1] }) }, inactive: { style: i.__assign(i.__assign({}, n.line.inactive), { lineCap: null, lineDash: [5.5, 1] }) }, selected: { style: i.__assign(i.__assign({}, n.line.selected), { lineCap: null, lineDash: [5.5, 1] }) } }, smooth: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } }, hv: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } }, vh: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } }, hvh: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } }, vhv: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } } }, polygon: { polygon: { default: { style: n.interval.default }, active: { style: n.interval.active }, inactive: { style: n.interval.inactive }, selected: { style: n.interval.selected } } }, point: { circle: { default: { style: n.point.default }, active: { style: n.point.active }, inactive: { style: n.point.inactive }, selected: { style: n.point.selected } }, square: { default: { style: n.point.default }, active: { style: n.point.active }, inactive: { style: n.point.inactive }, selected: { style: n.point.selected } }, bowtie: { default: { style: n.point.default }, active: { style: n.point.active }, inactive: { style: n.point.inactive }, selected: { style: n.point.selected } }, diamond: { default: { style: n.point.default }, active: { style: n.point.active }, inactive: { style: n.point.inactive }, selected: { style: n.point.selected } }, hexagon: { default: { style: n.point.default }, active: { style: n.point.active }, inactive: { style: n.point.inactive }, selected: { style: n.point.selected } }, triangle: { default: { style: n.point.default }, active: { style: n.point.active }, inactive: { style: n.point.inactive }, selected: { style: n.point.selected } }, "triangle-down": { default: { style: n.point.default }, active: { style: n.point.active }, inactive: { style: n.point.inactive }, selected: { style: n.point.selected } }, "hollow-circle": { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, "hollow-square": { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, "hollow-bowtie": { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, "hollow-diamond": { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, "hollow-hexagon": { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, "hollow-triangle": { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, "hollow-triangle-down": { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, cross: { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, tick: { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, plus: { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, hyphen: { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } }, line: { default: { style: n.hollowPoint.default }, active: { style: n.hollowPoint.active }, inactive: { style: n.hollowPoint.inactive }, selected: { style: n.hollowPoint.selected } } }, area: { area: { default: { style: n.area.default }, active: { style: n.area.active }, inactive: { style: n.area.inactive }, selected: { style: n.area.selected } }, smooth: { default: { style: n.area.default }, active: { style: n.area.active }, inactive: { style: n.area.inactive }, selected: { style: n.area.selected } }, line: { default: { style: n.hollowArea.default }, active: { style: n.hollowArea.active }, inactive: { style: n.hollowArea.inactive }, selected: { style: n.hollowArea.selected } }, "smooth-line": { default: { style: n.hollowArea.default }, active: { style: n.hollowArea.active }, inactive: { style: n.hollowArea.inactive }, selected: { style: n.hollowArea.selected } } }, schema: { candle: { default: { style: n.hollowInterval.default }, active: { style: n.hollowInterval.active }, inactive: { style: n.hollowInterval.inactive }, selected: { style: n.hollowInterval.selected } }, box: { default: { style: n.hollowInterval.default }, active: { style: n.hollowInterval.active }, inactive: { style: n.hollowInterval.inactive }, selected: { style: n.hollowInterval.selected } } }, edge: { line: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } }, vhv: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } }, smooth: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } }, arc: { default: { style: n.line.default }, active: { style: n.line.active }, inactive: { style: n.line.inactive }, selected: { style: n.line.selected } } } }, components: { axis: { common: u, top: a.deepMix({}, u, { position: "top", grid: null, title: null, verticalLimitLength: .5 }), bottom: a.deepMix({}, u, { position: "bottom", grid: null, title: null, verticalLimitLength: .5 }), left: a.deepMix({}, u, { position: "left", title: null, line: null, tickLine: null, verticalLimitLength: 1 / 3 }), right: a.deepMix({}, u, { position: "right", title: null, line: null, tickLine: null, verticalLimitLength: 1 / 3 }), circle: a.deepMix({}, u, { title: null, grid: a.deepMix({}, u.grid, { line: { type: "line" } }) }), radius: a.deepMix({}, u, { title: null, grid: a.deepMix({}, u.grid, { line: { type: "circle" } }) }) }, legend: { common: l, right: a.deepMix({}, l, { layout: "vertical", padding: t.legendVerticalPadding }), left: a.deepMix({}, l, { layout: "vertical", padding: t.legendVerticalPadding }), top: a.deepMix({}, l, { layout: "horizontal", padding: t.legendHorizontalPadding }), bottom: a.deepMix({}, l, { layout: "horizontal", padding: t.legendHorizontalPadding }), continuous: { title: null, background: null, track: {}, rail: { type: "color", size: t.sliderRailHeight, defaultLength: t.sliderRailWidth, style: { fill: t.sliderRailFillColor, stroke: t.sliderRailBorderColor, lineWidth: t.sliderRailBorder } }, label: { align: "rail", spacing: 4, formatter: null, style: { fill: t.sliderLabelTextFillColor, fontSize: t.sliderLabelTextFontSize, lineHeight: t.sliderLabelTextLineHeight, textBaseline: "middle", fontFamily: t.fontFamily } }, handler: { size: t.sliderHandlerWidth, style: { fill: t.sliderHandlerFillColor, stroke: t.sliderHandlerBorderColor } }, slidable: !0, padding: l.padding } }, tooltip: { showContent: !0, follow: !0, showCrosshairs: !1, showMarkers: !0, shared: !1, enterable: !1, position: "auto", marker: { symbol: "circle", stroke: "#fff", shadowBlur: 10, shadowOffsetX: 0, shadowOffSetY: 0, shadowColor: "rgba(0,0,0,0.09)", lineWidth: 2, r: 4 }, crosshairs: { line: { style: { stroke: t.tooltipCrosshairsBorderColor, lineWidth: t.tooltipCrosshairsBorder } }, text: null, textBackground: { padding: 2, style: { fill: "rgba(0, 0, 0, 0.25)", lineWidth: 0, stroke: null } }, follow: !1 }, domStyles: (e = {}, e["" + r.TOOLTIP_CSS_CONST.CONTAINER_CLASS] = { position: "absolute", visibility: "hidden", zIndex: 8, transition: "left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s", backgroundColor: t.tooltipContainerFillColor, opacity: t.tooltipContainerFillOpacity, boxShadow: t.tooltipContainerShadow, borderRadius: t.tooltipContainerBorderRadius + "px", color: t.tooltipTextFillColor, fontSize: t.tooltipTextFontSize + "px", fontFamily: t.fontFamily, lineHeight: t.tooltipTextLineHeight + "px", padding: "0 12px 0 12px" }, e["" + r.TOOLTIP_CSS_CONST.TITLE_CLASS] = { marginBottom: "12px", marginTop: "12px" }, e["" + r.TOOLTIP_CSS_CONST.LIST_CLASS] = { margin: 0, listStyleType: "none", padding: 0 }, e["" + r.TOOLTIP_CSS_CONST.LIST_ITEM_CLASS] = { listStyleType: "none", padding: 0, marginBottom: "12px", marginTop: "12px", marginLeft: 0, marginRight: 0 }, e["" + r.TOOLTIP_CSS_CONST.MARKER_CLASS] = { width: "8px", height: "8px", borderRadius: "50%", display: "inline-block", marginRight: "8px" }, e["" + r.TOOLTIP_CSS_CONST.VALUE_CLASS] = { display: "inline-block", float: "right", marginLeft: "30px" }, e) }, annotation: { arc: { style: { stroke: t.annotationArcBorderColor, lineWidth: t.annotationArcBorder }, animate: !0 }, line: { style: { stroke: t.annotationLineBorderColor, lineDash: t.annotationLineDash, lineWidth: t.annotationLineBorder }, text: { position: "start", autoRotate: !0, style: { fill: t.annotationTextFillColor, stroke: t.annotationTextBorderColor, lineWidth: t.annotationTextBorder, fontSize: t.annotationTextFontSize, textAlign: "start", fontFamily: t.fontFamily, textBaseline: "bottom" } }, animate: !0 }, text: { style: { fill: t.annotationTextFillColor, stroke: t.annotationTextBorderColor, lineWidth: t.annotationTextBorder, fontSize: t.annotationTextFontSize, textBaseline: "middle", textAlign: "start", fontFamily: t.fontFamily }, animate: !0 }, region: { top: !1, style: { lineWidth: t.annotationRegionBorder, stroke: t.annotationRegionBorderColor, fill: t.annotationRegionFillColor, fillOpacity: t.annotationRegionFillOpacity }, animate: !0 }, image: { top: !1, animate: !0 }, dataMarker: { top: !0, point: { style: { r: 3, stroke: t.brandColor, lineWidth: 2 } }, line: { style: { stroke: t.annotationLineBorderColor, lineWidth: t.annotationLineBorder }, length: t.annotationDataMarkerLineLength }, text: { style: { textAlign: "start", fill: t.annotationTextFillColor, stroke: t.annotationTextBorderColor, lineWidth: t.annotationTextBorder, fontSize: t.annotationTextFontSize, fontFamily: t.fontFamily } }, direction: "upward", autoAdjust: !0, animate: !0 }, dataRegion: { style: { region: { fill: t.annotationRegionFillColor, fillOpacity: t.annotationRegionFillOpacity }, text: { textAlign: "center", textBaseline: "bottom", fill: t.annotationTextFillColor, stroke: t.annotationTextBorderColor, lineWidth: t.annotationTextBorder, fontSize: t.annotationTextFontSize, fontFamily: t.fontFamily } }, animate: !0 } }, slider: { common: { padding: [8, 8, 8, 8] } }, scrollbar: { common: { padding: [8, 8, 8, 8] } } }, labels: { offset: 12, style: { fill: t.labelFillColor, fontSize: t.labelFontSize, fontFamily: t.fontFamily, stroke: t.labelBorderColor, lineWidth: t.labelBorder }, fillColorDark: t.labelFillColorDark, fillColorLight: t.labelFillColorLight, autoRotate: !0 }, innerLabels: { style: { fill: t.innerLabelFillColor, fontSize: t.innerLabelFontSize, fontFamily: t.fontFamily, stroke: t.innerLabelBorderColor, lineWidth: t.innerLabelBorder }, autoRotate: !0 }, overflowLabels: { style: { fill: t.overflowLabelFillColor, fontSize: t.overflowLabelFontSize, fontFamily: t.fontFamily, stroke: t.overflowLabelBorderColor, lineWidth: t.overflowLabelBorder } }, pieLabels: { labelHeight: 14, offset: 10, labelLine: { style: { lineWidth: t.labelLineBorder } }, autoRotate: !0 } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getComponentController = e.getComponentControllerNames = e.unregisterComponentController = e.registerComponentController = void 0; var i = {}; e.registerComponentController = function (t, e) { i[t] = e }, e.unregisterComponentController = function (t) { delete i[t] }, e.getComponentControllerNames = function () { return Object.keys(i) }, e.getComponentController = function (t) { return i[t] } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.PaddingCal = void 0; var i = n(1), r = n(14), o = function () { function t(t, e, n, i) { void 0 === t && (t = 0), void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === i && (i = 0), this.top = t, this.right = e, this.bottom = n, this.left = i } return t.instance = function (e, n, i, r) { return void 0 === e && (e = 0), void 0 === n && (n = 0), void 0 === i && (i = 0), void 0 === r && (r = 0), new t(e, n, i, r) }, t.prototype.max = function (t) { var e = t[0], n = t[1], i = t[2], r = t[3]; return this.top = Math.max(this.top, e), this.right = Math.max(this.right, n), this.bottom = Math.max(this.bottom, i), this.left = Math.max(this.left, r), this }, t.prototype.shrink = function (t) { var e = t[0], n = t[1], i = t[2], r = t[3]; return this.top += e, this.right += n, this.bottom += i, this.left += r, this }, t.prototype.inc = function (t, e) { var n = t.width, i = t.height; switch (e) { case r.DIRECTION.TOP: case r.DIRECTION.TOP_LEFT: case r.DIRECTION.TOP_RIGHT: this.top += i; break; case r.DIRECTION.RIGHT: case r.DIRECTION.RIGHT_TOP: case r.DIRECTION.RIGHT_BOTTOM: this.right += n; break; case r.DIRECTION.BOTTOM: case r.DIRECTION.BOTTOM_LEFT: case r.DIRECTION.BOTTOM_RIGHT: this.bottom += i; break; case r.DIRECTION.LEFT: case r.DIRECTION.LEFT_TOP: case r.DIRECTION.LEFT_BOTTOM: this.left += n }return this }, t.prototype.getPadding = function () { return [this.top, this.right, this.bottom, this.left] }, t.prototype.clone = function () { return new (t.bind.apply(t, i.__spreadArrays([void 0], this.getPadding()))) }, t }(); e.PaddingCal = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(31), a = n(26), s = n(24), u = n(82), l = n(34), c = n(42), h = i.__importDefault(n(84)); var f = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.isLocked = !1, e } return i.__extends(e, t), Object.defineProperty(e.prototype, "name", { get: function () { return "tooltip" }, enumerable: !1, configurable: !0 }), e.prototype.init = function () { }, e.prototype.isVisible = function () { return !1 !== this.view.getOptions().tooltip }, e.prototype.render = function () { }, e.prototype.showTooltip = function (t) { if (this.point = t, this.isVisible()) { var e = this.view, n = this.getTooltipItems(t); if (n.length) { var o = this.getTitle(n), a = { x: n[0].x, y: n[0].y }; e.emit("tooltip:show", h.default.fromData(e, "tooltip:show", i.__assign({ items: n, title: o }, t))); var s = this.getTooltipCfg(), u = s.follow, l = s.showMarkers, c = s.showCrosshairs, f = s.showContent, p = s.marker, d = this.items, g = this.title; if (r.isEqual(g, o) && r.isEqual(d, n) ? (this.tooltip && u && (this.tooltip.update(t), this.tooltip.show()), this.tooltipMarkersGroup && this.tooltipMarkersGroup.show()) : (e.emit("tooltip:change", h.default.fromData(e, "tooltip:change", i.__assign({ items: n, title: o }, t))), f && (this.tooltip || this.renderTooltip(), this.tooltip.update(r.mix({}, s, { items: n, title: o }, u ? t : {})), this.tooltip.show()), l && this.renderTooltipMarkers(n, p)), this.items = n, this.title = o, c) { var y = r.get(s, ["crosshairs", "follow"], !1); this.renderCrosshairs(y ? t : a, s) } } else this.hideTooltip() } }, e.prototype.hideTooltip = function () { if (this.getTooltipCfg().follow) { var t = this.tooltipMarkersGroup; t && t.hide(); var e = this.xCrosshair, n = this.yCrosshair; e && e.hide(), n && n.hide(); var i = this.tooltip; i && i.hide(), this.view.emit("tooltip:hide", h.default.fromData(this.view, "tooltip:hide", {})), this.point = null } else this.point = null }, e.prototype.lockTooltip = function () { this.isLocked = !0, this.tooltip && this.tooltip.setCapture(!0) }, e.prototype.unlockTooltip = function () { this.isLocked = !1; var t = this.getTooltipCfg(); this.tooltip && this.tooltip.setCapture(t.capture) }, e.prototype.isTooltipLocked = function () { return this.isLocked }, e.prototype.clear = function () { var t = this.tooltip, e = this.xCrosshair, n = this.yCrosshair, i = this.tooltipMarkersGroup; t && (t.hide(), t.clear()), e && e.clear(), n && n.clear(), i && i.clear(), this.reset() }, e.prototype.destroy = function () { this.tooltip && this.tooltip.destroy(), this.xCrosshair && this.xCrosshair.destroy(), this.yCrosshair && this.yCrosshair.destroy(), this.guideGroup && this.guideGroup.remove(!0), this.reset() }, e.prototype.reset = function () { this.items = null, this.title = null, this.tooltipMarkersGroup = null, this.tooltipCrosshairsGroup = null, this.xCrosshair = null, this.yCrosshair = null, this.tooltip = null, this.guideGroup = null, this.isLocked = !1, this.point = null }, e.prototype.changeVisible = function (t) { if (this.visible !== t) { var e = this.tooltip, n = this.tooltipMarkersGroup, i = this.xCrosshair, r = this.yCrosshair; t ? (e && e.show(), n && n.show(), i && i.show(), r && r.show()) : (e && e.hide(), n && n.hide(), i && i.hide(), r && r.hide()), this.visible = t } }, e.prototype.getTooltipItems = function (t) { var e = this.findItemsFromView(this.view, t); if (e.length) { for (var n = 0, i = e = r.flatten(e); n < i.length; n++)for (var o = 0, a = i[n]; o < a.length; o++) { var s = a[o], u = s.mappingData, l = u.x, c = u.y; s.x = r.isArray(l) ? l[l.length - 1] : l, s.y = r.isArray(c) ? c[c.length - 1] : c } if (!1 === this.getTooltipCfg().shared && e.length > 1) { for (var h = e[0], f = Math.abs(t.y - h[0].y), p = 0, d = e; p < d.length; p++) { var g = d[p], y = Math.abs(t.y - g[0].y); y <= f && (h = g, f = y) } e = [h] } return function (t) { for (var e = [], n = function (n) { var i = t[n]; r.find(e, (function (t) { return t.color === i.color && t.name === i.name && t.value === i.value && t.title === i.title })) || e.push(i) }, i = 0; i < t.length; i++)n(i); return e }(r.flatten(e)) } return [] }, e.prototype.layout = function () { }, e.prototype.update = function () { if (this.point && this.showTooltip(this.point), this.tooltip) { var t = this.view.getCanvas(); this.tooltip.set("region", { start: { x: 0, y: 0 }, end: { x: t.get("width"), y: t.get("height") } }) } }, e.prototype.isCursorEntered = function (t) { if (this.tooltip) { var e = this.tooltip.getContainer(), n = this.tooltip.get("capture"); if (e && n) { var i = e.getBoundingClientRect(), r = i.x, o = i.y, a = i.width, s = i.height; return new l.BBox(r, o, a, s).isPointIn(t) } } return !1 }, e.prototype.getTooltipCfg = function () { var t = this.view, e = t.getOptions().tooltip, n = this.processCustomContent(e), i = t.getTheme(), o = r.get(i, ["components", "tooltip"], {}), a = r.get(n, "enterable", o.enterable); return r.deepMix({}, o, n, { capture: !(!a && !this.isLocked) }) }, e.prototype.processCustomContent = function (t) { if (r.isBoolean(t) || !r.get(t, "customContent")) return t; var e = t.customContent; return i.__assign(i.__assign({}, t), { customContent: function (t, n) { var i = e(t, n) || ""; return r.isString(i) ? '<div class="g2-tooltip">' + i + "</div>" : i } }) }, e.prototype.getTitle = function (t) { var e = t[0].title || t[0].name; return this.title = e, e }, e.prototype.renderTooltip = function () { var t = this.view.getCanvas(), e = { start: { x: 0, y: 0 }, end: { x: t.get("width"), y: t.get("height") } }, n = this.getTooltipCfg(), r = new o.HtmlTooltip(i.__assign(i.__assign({ parent: t.get("el").parentNode, region: e }, n), { visible: !1, crosshairs: null })); r.init(), this.tooltip = r }, e.prototype.renderTooltipMarkers = function (t, e) { for (var n = this.getTooltipMarkersGroup(), r = 0, o = t; r < o.length; r++) { var a = o[r], s = a.x, u = a.y, l = i.__assign(i.__assign({ fill: a.color, symbol: "circle", shadowColor: a.color }, e), { x: s, y: u }); n.addShape("marker", { attrs: l }) } }, e.prototype.renderCrosshairs = function (t, e) { var n = r.get(e, ["crosshairs", "type"], "x"); "x" === n ? (this.yCrosshair && this.yCrosshair.hide(), this.renderXCrosshairs(t, e)) : "y" === n ? (this.xCrosshair && this.xCrosshair.hide(), this.renderYCrosshairs(t, e)) : "xy" === n && (this.renderXCrosshairs(t, e), this.renderYCrosshairs(t, e)) }, e.prototype.renderXCrosshairs = function (t, e) { var n = this.getViewWithGeometry(this.view).getCoordinate(); if (a.isPointInCoordinate(n, t)) { var i, u; if (n.isRect) n.isTransposed ? (i = { x: n.start.x, y: t.y }, u = { x: n.end.x, y: t.y }) : (i = { x: t.x, y: n.end.y }, u = { x: t.x, y: n.start.y }); else { var l = a.getAngleByPoint(n, t), c = n.getCenter(), h = n.getRadius(); u = s.polarToCartesian(c.x, c.y, h, l), i = c } var f = r.deepMix({ start: i, end: u, container: this.getTooltipCrosshairsGroup() }, r.get(e, "crosshairs", {}), this.getCrosshairsText("x", t, e)); delete f.type; var p = this.xCrosshair; p ? p.update(f) : (p = new o.Crosshair.Line(f)).init(), p.render(), p.show(), this.xCrosshair = p } }, e.prototype.renderYCrosshairs = function (t, e) { var n = this.getViewWithGeometry(this.view).getCoordinate(); if (a.isPointInCoordinate(n, t)) { var i, s; if (n.isRect) { var u = void 0, l = void 0; n.isTransposed ? (u = { x: t.x, y: n.end.y }, l = { x: t.x, y: n.start.y }) : (u = { x: n.start.x, y: t.y }, l = { x: n.end.x, y: t.y }), i = { start: u, end: l }, s = "Line" } else i = { center: n.getCenter(), radius: a.getDistanceToCenter(n, t), startAngle: n.startAngle, endAngle: n.endAngle }, s = "Circle"; delete (i = r.deepMix({ container: this.getTooltipCrosshairsGroup() }, i, r.get(e, "crosshairs", {}), this.getCrosshairsText("y", t, e))).type; var c = this.yCrosshair; c ? n.isRect && "circle" === c.get("type") || !n.isRect && "line" === c.get("type") ? (c = new o.Crosshair[s](i)).init() : c.update(i) : (c = new o.Crosshair[s](i)).init(), c.render(), c.show(), this.yCrosshair = c } }, e.prototype.getCrosshairsText = function (t, e, n) { var i = r.get(n, ["crosshairs", "text"]), o = r.get(n, ["crosshairs", "follow"]), a = this.items; if (i) { var s = this.getViewWithGeometry(this.view), u = a[0], l = s.getXScale(), c = s.getYScales()[0], h = void 0, f = void 0; if (o) { var p = this.view.getCoordinate().invert(e); h = l.invert(p.x), f = c.invert(p.y) } else h = u.data[l.field], f = u.data[c.field]; var d = "x" === t ? h : f; return r.isFunction(i) ? i = i(t, d, a, e) : i.content = d, { text: i } } }, e.prototype.getGuideGroup = function () { if (!this.guideGroup) { var t = this.view.foregroundGroup; this.guideGroup = t.addGroup({ name: "tooltipGuide", capture: !1 }) } return this.guideGroup }, e.prototype.getTooltipMarkersGroup = function () { var t = this.tooltipMarkersGroup; return t && !t.destroyed ? (t.clear(), t.show()) : ((t = this.getGuideGroup().addGroup({ name: "tooltipMarkersGroup" })).toFront(), this.tooltipMarkersGroup = t), t }, e.prototype.getTooltipCrosshairsGroup = function () { var t = this.tooltipCrosshairsGroup; return t || ((t = this.getGuideGroup().addGroup({ name: "tooltipCrosshairsGroup", capture: !1 })).toBack(), this.tooltipCrosshairsGroup = t), t }, e.prototype.getTooltipItemsByHitShape = function (t, e, n) { var i = [], r = t.container.getShape(e.x, e.y); if (r && r.get("visible") && r.get("origin")) { var o = r.get("origin").mappingData, a = u.getTooltipItems(o, t, n); a.length && i.push(a) } return i }, e.prototype.getTooltipItemsByFindData = function (t, e, n) { var i = [], o = t.dataArray; if (!r.isEmpty(o)) { t.sort(o); for (var a = 0, s = o; a < s.length; a++) { var l = s[a], c = u.findDataByPoint(e, l, t); if (c) { var h = t.getElementId(c), f = t.elementsMap[h]; if ("heatmap" === t.type || f.visible) { var p = u.getTooltipItems(c, t, n); p.length && i.push(p) } } } } return i }, e.prototype.findItemsFromView = function (t, e) { if (!1 === t.getOptions().tooltip) return []; for (var n = [], i = t.geometries, r = this.getTooltipCfg(), o = r.shared, a = r.title, s = r.reversed, u = 0, l = i; u < l.length; u++) { var c = l[u]; if (c.visible && !1 !== c.tooltipOption) { var h = c.type, f = void 0; (f = ["point", "edge", "polygon"].includes(h) ? this.getTooltipItemsByHitShape(c, e, a) : ["area", "line", "path", "heatmap"].includes(h) || !1 !== o ? this.getTooltipItemsByFindData(c, e, a) : this.getTooltipItemsByHitShape(c, e, a)).length && (s && f.reverse(), n.push(f)) } } for (var p = 0, d = t.views; p < d.length; p++) { var g = d[p]; n = n.concat(this.findItemsFromView(g, e)) } return n }, e.prototype.getViewWithGeometry = function (t) { var e = this; return t.geometries.length ? t : r.find(t.views, (function (t) { return e.getViewWithGeometry(t) })) }, e }(c.Controller); e.default = f }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.registerAnimation = e.getAnimation = void 0; var i = {}; e.getAnimation = function (t) { return i[t.toLowerCase()] }, e.registerAnimation = function (t, e) { i[t.toLowerCase()] = e } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.isModelChange = void 0; var i = n(0); e.isModelChange = function (t, e) { return i.some(["color", "shape", "size", "x", "y", "isInCircle", "data", "style", "defaultStyle", "points", "mappingData"], (function (n) { return !i.isEqual(t[n], e[n]) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getCustomLegendItems = e.getLegendItems = e.getLegendLayout = void 0; var i = n(0), r = n(14), o = n(176), a = n(60), s = ["line", "cross", "tick", "plus", "hyphen"]; function u(t) { var e = t.symbol; i.isString(e) && a.MarkerSymbols[e] && (t.symbol = a.MarkerSymbols[e]) } e.getLegendLayout = function (t) { return t.startsWith(r.DIRECTION.LEFT) || t.startsWith(r.DIRECTION.RIGHT) ? "vertical" : "horizontal" }, e.getLegendItems = function (t, e, n, r, a) { var l = n.getScale(n.type); if (l.isCategory) { var c = l.field, h = e.getAttribute("color"), f = e.getAttribute("shape"), p = t.getTheme().defaultColor, d = e.coordinate.isPolar; return l.getTicks().map((function (n) { var g, y = n.text, v = n.value, m = y, x = l.invert(v), b = 0 === t.filterFieldData(c, [(g = {}, g[c] = x, g)]).length; i.each(t.views, (function (t) { var e; t.filterFieldData(c, [(e = {}, e[c] = x, e)]).length || (b = !0) })); var C = o.getMappingValue(h, x, p), _ = o.getMappingValue(f, x, "point"), O = e.getShapeMarker(_, { color: C, isInPolar: d }); return function (t, e) { var n = t.symbol; i.isString(n) && -1 !== s.indexOf(n) && (t.style = i.deepMix({}, t.style, { lineWidth: 1, stroke: e, fill: null })) }(O = i.deepMix({}, r, O, a), C), u(O), { id: x, name: m, value: x, marker: O, unchecked: b } })) } return [] }, e.getCustomLegendItems = function (t, e, n) { return n.map((function (n) { var r = i.deepMix({}, t, e, n.marker); return u(r), n.marker = r, n })) } }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "version", (function () { return l })); var i = n(36); n.d(e, "Shape", (function () { return i })); var r = n(7); for (var o in r) ["default", "Canvas", "Group", "Shape", "getArcParams", "version"].indexOf(o) < 0 && function (t) { n.d(e, t, (function () { return r[t] })) }(o); var a = n(144); n.d(e, "Canvas", (function () { return a.a })); var s = n(53); n.d(e, "Group", (function () { return s.a })); var u = n(62); n.d(e, "getArcParams", (function () { return u.a })); var l = "0.5.6" }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(15), o = n(89), a = n(21), s = n(59), u = n(90), l = n(124); function c(t, e, n, i, r) { return 1 === t.length ? [["M", t[0].x, t[0].y - r.lineWidth / 2], ["L", t[0].x, t[0].y], ["L", t[0].x, t[0].y + r.lineWidth / 2]] : (n ? (e && t.length && t.push({ x: t[0].x, y: t[0].y }), o = s.getSplinePath(t, !1, i)) : (o = s.getLinePath(t, !1), e && o.push(["Z"])), o); var o } function h(t, e, n, r, o, a) { if (t.length) { var s = t[0]; return i.isArray(s.y) ? function (t, e, n, r, o, a) { var s = [], l = []; i.each(t, (function (t) { var e = u.splitPoints(t); s.push(e[1]), l.push(e[0]) })); var h = c(s, e, r, o, a), f = c(l, e, r, o, a); return n ? h : h.concat(f) }(t, e, n, r, o, a) : c(t, e, r, o, a) } return [] } var f = r.registerShapeFactory("line", { defaultShapeType: "line" }); i.each(["line", "dot", "dash", "smooth"], (function (t) { r.registerShape("line", t, { draw: function (e, n) { var i, r = "smooth" === t; if (r) { var s = this.coordinate, u = s.start, l = s.end; i = [[u.x, l.y], [l.x, u.y]] } var c = function (t, e, n) { for (var i = t.isStack, r = t.connectNulls, s = t.isInCircle, u = t.showSinglePoint, l = a.getStyle(t, !0, !1, "lineWidth"), c = o.getPathPoints(t.points, r, u), f = [], p = 0, d = c.length; p < d; p++) { var g = c[p]; f = f.concat(h(g, s, i, e, n, l)) } return l.path = f, l }(e, r, i); return n.addShape({ type: "path", attrs: c, name: "line" }) }, getMarker: function (e) { return l.getLineMarker(e, t) } }) })), e.default = f }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getLineMarker = void 0; var i = { line: function (t, e, n) { return [["M", t - n, e], ["L", t + n, e]] }, dot: function (t, e, n) { return [["M", t - n, e], ["L", t + n, e]] }, dash: function (t, e, n) { return [["M", t - n, e], ["L", t + n, e]] }, smooth: function (t, e, n) { return [["M", t - n, e], ["A", n / 2, n / 2, 0, 1, 1, t, e], ["A", n / 2, n / 2, 0, 1, 0, t + n, e]] }, hv: function (t, e, n) { return [["M", t - n - 1, e - 2.5], ["L", t, e - 2.5], ["L", t, e + 2.5], ["L", t + n + 1, e + 2.5]] }, vh: function (t, e, n) { return [["M", t - n - 1, e + 2.5], ["L", t, e + 2.5], ["L", t, e - 2.5], ["L", t + n + 1, e - 2.5]] }, hvh: function (t, e, n) { return [["M", t - (n + 1), e + 2.5], ["L", t - n / 2, e + 2.5], ["L", t - n / 2, e - 2.5], ["L", t + n / 2, e - 2.5], ["L", t + n / 2, e + 2.5], ["L", t + n + 1, e + 2.5]] }, vhv: function (t, e) { return [["M", t - 5, e + 2.5], ["L", t - 5, e], ["L", t, e], ["L", t, e - 3], ["L", t, e + 3], ["L", t + 6.5, e + 3]] } }; e.getLineMarker = function (t, e) { var n = t.color; return { symbol: i[e], style: { lineWidth: 2, r: 6, stroke: n } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getDefaultSize = void 0; var i = n(0), r = n(26); e.getDefaultSize = function (t) { var e = t.theme, n = t.coordinate, o = t.getXScale(), a = o.values, s = t.beforeMappingData, u = a.length, l = r.getXDimensionLength(t.coordinate), c = t.intervalPadding, h = t.dodgePadding, f = t.maxColumnWidth || e.maxColumnWidth, p = t.minColumnWidth || e.minColumnWidth, d = t.columnWidthRatio || e.columnWidthRatio, g = t.multiplePieWidthRatio || e.multiplePieWidthRatio, y = t.roseWidthRatio || e.roseWidthRatio; if (o.isLinear && a.length > 1) { a.sort(); var v = function (t, e) { var n = t.length, r = t; i.isString(r[0]) && (r = t.map((function (t) { return e.translate(t) }))); for (var o = r[1] - r[0], a = 2; a < n; a++) { var s = r[a] - r[a - 1]; o > s && (o = s) } return o }(a, o); u = (o.max - o.min) / v, a.length > u && (u = a.length) } var m = o.range, x = 1 / u, b = 1; if (n.isPolar ? b = n.isTransposed && u > 1 ? g : y : (o.isLinear && (x *= m[1] - m[0]), b = d), !i.isNil(c) && c >= 0 ? x = (1 - (u - 1) * (c / l)) / u : x *= b, t.getAdjust("dodge")) { var C = function (t, e) { if (e) { var n = i.flatten(t); return i.valuesOfKey(n, e).length } return t.length }(s, t.getAdjust("dodge").dodgeBy); if (!i.isNil(h) && h >= 0) x = (x - h / l * (C - 1)) / C; else !i.isNil(c) && c >= 0 ? (x *= b, x /= C) : x /= C; x = x >= 0 ? x : 0 } if (!i.isNil(f) && f >= 0) { var _ = f / l; x > _ && (x = _) } if (!i.isNil(p) && p >= 0) { var O = p / l; x < O && (x = O) } return x } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getQPath = e.getCPath = void 0; var i = n(0); e.getCPath = function (t, e) { return ["C", 1 * t.x / 2 + 1 * e.x / 2, t.y, 1 * t.x / 2 + 1 * e.x / 2, e.y, e.x, e.y] }, e.getQPath = function (t, e) { var n = []; n.push({ x: e.x, y: e.y }), n.push(t); var r = ["Q"]; return i.each(n, (function (t) { r.push(t.x, t.y) })), r } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(26), a = n(26), s = i.__importDefault(n(64)), u = Math.PI / 2, l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getLabelOffset = function (t) { var e = this.getCoordinate(), n = 0; if (r.isNumber(t)) n = t; else if (r.isString(t) && -1 !== t.indexOf("%")) { var i = e.getRadius(); e.innerRadius > 0 && (i *= 1 - e.innerRadius), n = .01 * parseFloat(t) * i } return n }, e.prototype.getLabelItems = function (e) { var n = t.prototype.getLabelItems.call(this, e), o = this.geometry.getYScale(); return r.map(n, (function (t) { if (t && o) { var e = o.scale(r.get(t.data, o.field)); return i.__assign(i.__assign({}, t), { percent: e }) } return t })) }, e.prototype.getLabelAlign = function (t) { var e, n = this.getCoordinate(); if (t.labelEmit) e = t.angle <= Math.PI / 2 && t.angle >= -Math.PI / 2 ? "left" : "right"; else if (n.isTransposed) { var i = n.getCenter(), r = t.offset; e = Math.abs(t.x - i.x) < 1 ? "center" : t.angle > Math.PI || t.angle <= 0 ? r > 0 ? "left" : "right" : r > 0 ? "right" : "left" } else e = "center"; return e }, e.prototype.getLabelPoint = function (t, e, n) { var i, r = 1, o = t.content[n]; this.isToMiddle(e) ? i = this.getMiddlePoint(e.points) : (1 === t.content.length && 0 === n ? n = 1 : 0 === n && (r = -1), i = this.getArcPoint(e, n)); var a = t.offset * r, s = this.getPointAngle(i), u = t.labelEmit, l = this.getCirclePoint(s, a, i, u); return 0 === l.r ? l.content = "" : (l.content = o, l.angle = s, l.color = e.color), l.rotate = t.autoRotate ? this.getLabelRotate(s, a, u) : t.rotate, l.start = { x: i.x, y: i.y }, l }, e.prototype.getArcPoint = function (t, e) { return void 0 === e && (e = 0), r.isArray(t.x) || r.isArray(t.y) ? { x: r.isArray(t.x) ? t.x[e] : t.x, y: r.isArray(t.y) ? t.y[e] : t.y } : { x: t.x, y: t.y } }, e.prototype.getPointAngle = function (t) { return a.getAngleByPoint(this.getCoordinate(), t) }, e.prototype.getCirclePoint = function (t, e, n, r) { var a = this.getCoordinate(), s = a.getCenter(), u = o.getDistanceToCenter(a, n); if (0 === u) return i.__assign(i.__assign({}, s), { r: u }); var l = t; a.isTransposed && u > e && !r ? l = t + 2 * Math.asin(e / (2 * u)) : u += e; return { x: s.x + u * Math.cos(l), y: s.y + u * Math.sin(l), r: u } }, e.prototype.getLabelRotate = function (t, e, n) { var i = t + u; return n && (i -= u), i && (i > u ? i -= Math.PI : i < -u && (i += Math.PI)), i }, e.prototype.getMiddlePoint = function (t) { var e = this.getCoordinate(), n = t.length, i = { x: 0, y: 0 }; return r.each(t, (function (t) { i.x += t.x, i.y += t.y })), i.x /= n, i.y /= n, i = e.convert(i) }, e.prototype.isToMiddle = function (t) { return t.x.length > 2 }, e }(s.default); e.default = l }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.antiCollision = void 0, e.antiCollision = function (t, e, n) { var i = t.filter((function (t) { return !t.invisible })); i.sort((function (t, e) { return t.y - e.y })); var r, o = !0, a = n.minY, s = n.maxY, u = Math.abs(a - s), l = 0, c = Number.MIN_VALUE, h = i.map((function (t) { return t.y > l && (l = t.y), t.y < c && (c = t.y), { content: t.content, size: e, targets: [t.y - a], pos: null } })); for (c -= a, l - a > u && (u = l - a); o;)for (h.forEach((function (t) { var e = (Math.min.apply(c, t.targets) + Math.max.apply(c, t.targets)) / 2; t.pos = Math.min(Math.max(c, e - t.size / 2), u - t.size), t.pos = Math.max(0, t.pos) })), o = !1, r = h.length; r--;)if (r > 0) { var f = h[r - 1], p = h[r]; f.pos + f.size > p.pos && (f.size += p.size, f.targets = f.targets.concat(p.targets), f.pos + f.size > u && (f.pos = u - f.size), h.splice(r, 1), o = !0) } r = 0, h.forEach((function (t) { var n = a + e / 2; t.targets.forEach((function () { i[r].y = t.pos + n, n += e, r++ })) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.timeStamp = 0, e } return i.__extends(e, t), e.prototype.show = function () { var t = this.context, e = t.event, n = t.view; if (!n.isTooltipLocked()) { var i = this.timeStamp, o = +new Date; if (o - i > r.get(t.view.getOptions(), "tooltip.showDelay", 16)) { var a = this.location, s = { x: e.x, y: e.y }; a && r.isEqual(a, s) || this.showTooltip(n, s), this.timeStamp = o, this.location = s } } }, e.prototype.hide = function () { var t = this.context.view, e = t.getController("tooltip"), n = this.context.event, i = n.clientX, r = n.clientY; e.isCursorEntered({ x: i, y: r }) || t.isTooltipLocked() || (this.hideTooltip(t), this.location = null) }, e.prototype.showTooltip = function (t, e) { t.showTooltip(e) }, e.prototype.hideTooltip = function (t) { t.hideTooltip() }, e }(i.__importDefault(n(22)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.shapeType = "rect", e } return i.__extends(e, t), e.prototype.getRegion = function () { var t = this.points; return { start: r.head(t), end: r.last(t) } }, e.prototype.getMaskAttrs = function () { var t = this.getRegion(), e = t.start, n = t.end; return { x: Math.min(e.x, n.x), y: Math.min(e.y, n.y), width: Math.abs(n.x - e.x), height: Math.abs(n.y - e.y) } }, e }(i.__importDefault(n(99)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getMaskPath = function () { var t = this.points, e = []; return t.length && (r.each(t, (function (t, n) { 0 === n ? e.push(["M", t.x, t.y]) : e.push(["L", t.x, t.y]) })), e.push(["L", t[0].x, t[0].y])), e }, e.prototype.getMaskAttrs = function () { return { path: this.getMaskPath() } }, e.prototype.addPoint = function () { this.resize() }, e }(i.__importDefault(n(99)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(22)), o = n(19); function a(t, e, n, i) { var r = Math.min(n[e], i[e]), o = Math.max(n[e], i[e]), a = t.range, s = a[0], u = a[1]; if (r < s && (r = s), o > u && (o = u), r === u && o === u) return null; var l = t.invert(r), c = t.invert(o); if (t.isCategory) { var h = t.values.indexOf(l), f = t.values.indexOf(c), p = t.values.slice(h, f + 1); return function (t) { return p.includes(t) } } return function (t) { return t >= l && t <= c } } var s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.dims = ["x", "y"], e.startPoint = null, e.isStarted = !1, e } return i.__extends(e, t), e.prototype.hasDim = function (t) { return this.dims.includes(t) }, e.prototype.start = function () { var t = this.context; this.isStarted = !0, this.startPoint = t.getCurrentPoint() }, e.prototype.filter = function () { var t, e; if (o.isMask(this.context)) { var n = this.context.event.target.getCanvasBBox(); t = { x: n.x, y: n.y }, e = { x: n.maxX, y: n.maxY } } else { if (!this.isStarted) return; t = this.startPoint, e = this.context.getCurrentPoint() } if (!(Math.abs(t.x - e.x) < 5 || Math.abs(t.x - e.y) < 5)) { var i = this.context.view, r = i.getCoordinate(), s = r.invert(e), u = r.invert(t); if (this.hasDim("x")) { var l = i.getXScale(), c = a(l, "x", s, u); this.filterView(i, l.field, c) } if (this.hasDim("y")) { var h = i.getYScales()[0]; c = a(h, "y", s, u); this.filterView(i, h.field, c) } this.reRender(i) } }, e.prototype.end = function () { this.isStarted = !1 }, e.prototype.reset = function () { var t = this.context.view; if (this.isStarted = !1, this.hasDim("x")) { var e = t.getXScale(); this.filterView(t, e.field, null) } if (this.hasDim("y")) { var n = t.getYScales()[0]; this.filterView(t, n.field, null) } this.reRender(t) }, e.prototype.filterView = function (t, e, n) { t.filter(e, n) }, e.prototype.reRender = function (t) { t.render(!0) }, e }(r.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(81), o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.dims = ["x", "y"], e.cfgFields = ["dims"], e.cacheScaleDefs = {}, e } return i.__extends(e, t), e.prototype.hasDim = function (t) { return this.dims.includes(t) }, e.prototype.getScale = function (t) { var e = this.context.view; return "x" === t ? e.getXScale() : e.getYScales()[0] }, e.prototype.resetDim = function (t) { var e = this.context.view; if (this.hasDim(t) && this.cacheScaleDefs[t]) { var n = this.getScale(t); e.scale(n.field, this.cacheScaleDefs[t]), this.cacheScaleDefs[t] = null } }, e.prototype.reset = function () { this.resetDim("x"), this.resetDim("y"), this.context.view.render(!0) }, e }(r.Action); e.default = o }, function (t, e, n) { "use strict"; var i = {}; n.r(i), n.d(i, "easeLinear", (function () { return S })), n.d(i, "easeQuad", (function () { return I })), n.d(i, "easeQuadIn", (function () { return A })), n.d(i, "easeQuadOut", (function () { return P })), n.d(i, "easeQuadInOut", (function () { return I })), n.d(i, "easeCubic", (function () { return j })), n.d(i, "easeCubicIn", (function () { return T })), n.d(i, "easeCubicOut", (function () { return E })), n.d(i, "easeCubicInOut", (function () { return j })), n.d(i, "easePoly", (function () { return k })), n.d(i, "easePolyIn", (function () { return L })), n.d(i, "easePolyOut", (function () { return B })), n.d(i, "easePolyInOut", (function () { return k })), n.d(i, "easeSin", (function () { return G })), n.d(i, "easeSinIn", (function () { return F })), n.d(i, "easeSinOut", (function () { return N })), n.d(i, "easeSinInOut", (function () { return G })), n.d(i, "easeExp", (function () { return z })), n.d(i, "easeExpIn", (function () { return V })), n.d(i, "easeExpOut", (function () { return X })), n.d(i, "easeExpInOut", (function () { return z })), n.d(i, "easeCircle", (function () { return q })), n.d(i, "easeCircleIn", (function () { return H })), n.d(i, "easeCircleOut", (function () { return W })), n.d(i, "easeCircleInOut", (function () { return q })), n.d(i, "easeBounce", (function () { return Q })), n.d(i, "easeBounceIn", (function () { return Z })), n.d(i, "easeBounceOut", (function () { return Q })), n.d(i, "easeBounceInOut", (function () { return K })), n.d(i, "easeBack", (function () { return tt })), n.d(i, "easeBackIn", (function () { return $ })), n.d(i, "easeBackOut", (function () { return J })), n.d(i, "easeBackInOut", (function () { return tt })), n.d(i, "easeElastic", (function () { return it })), n.d(i, "easeElasticIn", (function () { return nt })), n.d(i, "easeElasticOut", (function () { return it })), n.d(i, "easeElasticInOut", (function () { return rt })); var r, o, a = n(1), s = n(74), u = n(72), l = n(11), c = n(0), h = 0, f = 0, p = 0, d = 0, g = 0, y = 0, v = "object" == typeof performance && performance.now ? performance : Date, m = "object" == typeof window && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function (t) { setTimeout(t, 17) }; function x() { return g || (m(b), g = v.now() + y) } function b() { g = 0 } function C() { this._call = this._time = this._next = null } function _(t, e, n) { var i = new C; return i.restart(t, e, n), i } function O() { g = (d = v.now()) + y, h = f = 0; try { !function () { x(), ++h; for (var t, e = r; e;)(t = g - e._time) >= 0 && e._call.call(null, t), e = e._next; --h }() } finally { h = 0, function () { var t, e, n = r, i = 1 / 0; for (; n;)n._call ? (i > n._time && (i = n._time), t = n, n = n._next) : (e = n._next, n._next = null, n = t ? t._next = e : r = e); o = t, w(i) }(), g = 0 } } function M() { var t = v.now(), e = t - d; e > 1e3 && (y -= e, d = t) } function w(t) { h || (f && (f = clearTimeout(f)), t - g > 24 ? (t < 1 / 0 && (f = setTimeout(O, t - v.now() - y)), p && (p = clearInterval(p))) : (p || (d = v.now(), p = setInterval(M, 1e3)), h = 1, m(O))) } function S(t) { return +t } function A(t) { return t * t } function P(t) { return t * (2 - t) } function I(t) { return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2 } function T(t) { return t * t * t } function E(t) { return --t * t * t + 1 } function j(t) { return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2 } C.prototype = _.prototype = { constructor: C, restart: function (t, e, n) { if ("function" != typeof t) throw new TypeError("callback is not a function"); n = (null == n ? x() : +n) + (null == e ? 0 : +e), this._next || o === this || (o ? o._next = this : r = this, o = this), this._call = t, this._time = n, w() }, stop: function () { this._call && (this._call = null, this._time = 1 / 0, w()) } }; var L = function t(e) { function n(t) { return Math.pow(t, e) } return e = +e, n.exponent = t, n }(3), B = function t(e) { function n(t) { return 1 - Math.pow(1 - t, e) } return e = +e, n.exponent = t, n }(3), k = function t(e) { function n(t) { return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2 } return e = +e, n.exponent = t, n }(3), D = Math.PI, R = D / 2; function F(t) { return 1 == +t ? 1 : 1 - Math.cos(t * R) } function N(t) { return Math.sin(t * R) } function G(t) { return (1 - Math.cos(D * t)) / 2 } function Y(t) { return 1.0009775171065494 * (Math.pow(2, -10 * t) - .0009765625) } function V(t) { return Y(1 - +t) } function X(t) { return 1 - Y(t) } function z(t) { return ((t *= 2) <= 1 ? Y(1 - t) : 2 - Y(t - 1)) / 2 } function H(t) { return 1 - Math.sqrt(1 - t * t) } function W(t) { return Math.sqrt(1 - --t * t) } function q(t) { return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2 } var U = 7.5625; function Z(t) { return 1 - Q(1 - t) } function Q(t) { return (t = +t) < 4 / 11 ? U * t * t : t < 8 / 11 ? U * (t -= 6 / 11) * t + 3 / 4 : t < 10 / 11 ? U * (t -= 9 / 11) * t + 15 / 16 : U * (t -= 21 / 22) * t + 63 / 64 } function K(t) { return ((t *= 2) <= 1 ? 1 - Q(1 - t) : Q(t - 1) + 1) / 2 } var $ = function t(e) { function n(t) { return (t = +t) * t * (e * (t - 1) + t) } return e = +e, n.overshoot = t, n }(1.70158), J = function t(e) { function n(t) { return --t * t * ((t + 1) * e + t) + 1 } return e = +e, n.overshoot = t, n }(1.70158), tt = function t(e) { function n(t) { return ((t *= 2) < 1 ? t * t * ((e + 1) * t - e) : (t -= 2) * t * ((e + 1) * t + e) + 2) / 2 } return e = +e, n.overshoot = t, n }(1.70158), et = 2 * Math.PI, nt = function t(e, n) { var i = Math.asin(1 / (e = Math.max(1, e))) * (n /= et); function r(t) { return e * Y(- --t) * Math.sin((i - t) / n) } return r.amplitude = function (e) { return t(e, n * et) }, r.period = function (n) { return t(e, n) }, r }(1, .3), it = function t(e, n) { var i = Math.asin(1 / (e = Math.max(1, e))) * (n /= et); function r(t) { return 1 - e * Y(t = +t) * Math.sin((t + i) / n) } return r.amplitude = function (e) { return t(e, n * et) }, r.period = function (n) { return t(e, n) }, r }(1, .3), rt = function t(e, n) { var i = Math.asin(1 / (e = Math.max(1, e))) * (n /= et); function r(t) { return ((t = 2 * t - 1) < 0 ? e * Y(-t) * Math.sin((i - t) / n) : 2 - e * Y(t) * Math.sin((i + t) / n)) / 2 } return r.amplitude = function (e) { return t(e, n * et) }, r.period = function (n) { return t(e, n) }, r }(1, .3), ot = function (t, e, n) { t.prototype = e.prototype = n, n.constructor = t }; function at(t, e) { var n = Object.create(t.prototype); for (var i in e) n[i] = e[i]; return n } function st() { } var ut = "\\s*([+-]?\\d+)\\s*", lt = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*", ct = "\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*", ht = /^#([0-9a-f]{3,8})$/, ft = new RegExp("^rgb\\(" + [ut, ut, ut] + "\\)$"), pt = new RegExp("^rgb\\(" + [ct, ct, ct] + "\\)$"), dt = new RegExp("^rgba\\(" + [ut, ut, ut, lt] + "\\)$"), gt = new RegExp("^rgba\\(" + [ct, ct, ct, lt] + "\\)$"), yt = new RegExp("^hsl\\(" + [lt, ct, ct] + "\\)$"), vt = new RegExp("^hsla\\(" + [lt, ct, ct, lt] + "\\)$"), mt = { aliceblue: 15792383, antiquewhite: 16444375, aqua: 65535, aquamarine: 8388564, azure: 15794175, beige: 16119260, bisque: 16770244, black: 0, blanchedalmond: 16772045, blue: 255, blueviolet: 9055202, brown: 10824234, burlywood: 14596231, cadetblue: 6266528, chartreuse: 8388352, chocolate: 13789470, coral: 16744272, cornflowerblue: 6591981, cornsilk: 16775388, crimson: 14423100, cyan: 65535, darkblue: 139, darkcyan: 35723, darkgoldenrod: 12092939, darkgray: 11119017, darkgreen: 25600, darkgrey: 11119017, darkkhaki: 12433259, darkmagenta: 9109643, darkolivegreen: 5597999, darkorange: 16747520, darkorchid: 10040012, darkred: 9109504, darksalmon: 15308410, darkseagreen: 9419919, darkslateblue: 4734347, darkslategray: 3100495, darkslategrey: 3100495, darkturquoise: 52945, darkviolet: 9699539, deeppink: 16716947, deepskyblue: 49151, dimgray: 6908265, dimgrey: 6908265, dodgerblue: 2003199, firebrick: 11674146, floralwhite: 16775920, forestgreen: 2263842, fuchsia: 16711935, gainsboro: 14474460, ghostwhite: 16316671, gold: 16766720, goldenrod: 14329120, gray: 8421504, green: 32768, greenyellow: 11403055, grey: 8421504, honeydew: 15794160, hotpink: 16738740, indianred: 13458524, indigo: 4915330, ivory: 16777200, khaki: 15787660, lavender: 15132410, lavenderblush: 16773365, lawngreen: 8190976, lemonchiffon: 16775885, lightblue: 11393254, lightcoral: 15761536, lightcyan: 14745599, lightgoldenrodyellow: 16448210, lightgray: 13882323, lightgreen: 9498256, lightgrey: 13882323, lightpink: 16758465, lightsalmon: 16752762, lightseagreen: 2142890, lightskyblue: 8900346, lightslategray: 7833753, lightslategrey: 7833753, lightsteelblue: 11584734, lightyellow: 16777184, lime: 65280, limegreen: 3329330, linen: 16445670, magenta: 16711935, maroon: 8388608, mediumaquamarine: 6737322, mediumblue: 205, mediumorchid: 12211667, mediumpurple: 9662683, mediumseagreen: 3978097, mediumslateblue: 8087790, mediumspringgreen: 64154, mediumturquoise: 4772300, mediumvioletred: 13047173, midnightblue: 1644912, mintcream: 16121850, mistyrose: 16770273, moccasin: 16770229, navajowhite: 16768685, navy: 128, oldlace: 16643558, olive: 8421376, olivedrab: 7048739, orange: 16753920, orangered: 16729344, orchid: 14315734, palegoldenrod: 15657130, palegreen: 10025880, paleturquoise: 11529966, palevioletred: 14381203, papayawhip: 16773077, peachpuff: 16767673, peru: 13468991, pink: 16761035, plum: 14524637, powderblue: 11591910, purple: 8388736, rebeccapurple: 6697881, red: 16711680, rosybrown: 12357519, royalblue: 4286945, saddlebrown: 9127187, salmon: 16416882, sandybrown: 16032864, seagreen: 3050327, seashell: 16774638, sienna: 10506797, silver: 12632256, skyblue: 8900331, slateblue: 6970061, slategray: 7372944, slategrey: 7372944, snow: 16775930, springgreen: 65407, steelblue: 4620980, tan: 13808780, teal: 32896, thistle: 14204888, tomato: 16737095, turquoise: 4251856, violet: 15631086, wheat: 16113331, white: 16777215, whitesmoke: 16119285, yellow: 16776960, yellowgreen: 10145074 }; function xt() { return this.rgb().formatHex() } function bt() { return this.rgb().formatRgb() } function Ct(t) { var e, n; return t = (t + "").trim().toLowerCase(), (e = ht.exec(t)) ? (n = e[1].length, e = parseInt(e[1], 16), 6 === n ? _t(e) : 3 === n ? new St(e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, (15 & e) << 4 | 15 & e, 1) : 8 === n ? Ot(e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, (255 & e) / 255) : 4 === n ? Ot(e >> 12 & 15 | e >> 8 & 240, e >> 8 & 15 | e >> 4 & 240, e >> 4 & 15 | 240 & e, ((15 & e) << 4 | 15 & e) / 255) : null) : (e = ft.exec(t)) ? new St(e[1], e[2], e[3], 1) : (e = pt.exec(t)) ? new St(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, 1) : (e = dt.exec(t)) ? Ot(e[1], e[2], e[3], e[4]) : (e = gt.exec(t)) ? Ot(255 * e[1] / 100, 255 * e[2] / 100, 255 * e[3] / 100, e[4]) : (e = yt.exec(t)) ? Tt(e[1], e[2] / 100, e[3] / 100, 1) : (e = vt.exec(t)) ? Tt(e[1], e[2] / 100, e[3] / 100, e[4]) : mt.hasOwnProperty(t) ? _t(mt[t]) : "transparent" === t ? new St(NaN, NaN, NaN, 0) : null } function _t(t) { return new St(t >> 16 & 255, t >> 8 & 255, 255 & t, 1) } function Ot(t, e, n, i) { return i <= 0 && (t = e = n = NaN), new St(t, e, n, i) } function Mt(t) { return t instanceof st || (t = Ct(t)), t ? new St((t = t.rgb()).r, t.g, t.b, t.opacity) : new St } function wt(t, e, n, i) { return 1 === arguments.length ? Mt(t) : new St(t, e, n, null == i ? 1 : i) } function St(t, e, n, i) { this.r = +t, this.g = +e, this.b = +n, this.opacity = +i } function At() { return "#" + It(this.r) + It(this.g) + It(this.b) } function Pt() { var t = this.opacity; return (1 === (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))) ? "rgb(" : "rgba(") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + ", " + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (1 === t ? ")" : ", " + t + ")") } function It(t) { return ((t = Math.max(0, Math.min(255, Math.round(t) || 0))) < 16 ? "0" : "") + t.toString(16) } function Tt(t, e, n, i) { return i <= 0 ? t = e = n = NaN : n <= 0 || n >= 1 ? t = e = NaN : e <= 0 && (t = NaN), new jt(t, e, n, i) } function Et(t) { if (t instanceof jt) return new jt(t.h, t.s, t.l, t.opacity); if (t instanceof st || (t = Ct(t)), !t) return new jt; if (t instanceof jt) return t; var e = (t = t.rgb()).r / 255, n = t.g / 255, i = t.b / 255, r = Math.min(e, n, i), o = Math.max(e, n, i), a = NaN, s = o - r, u = (o + r) / 2; return s ? (a = e === o ? (n - i) / s + 6 * (n < i) : n === o ? (i - e) / s + 2 : (e - n) / s + 4, s /= u < .5 ? o + r : 2 - o - r, a *= 60) : s = u > 0 && u < 1 ? 0 : a, new jt(a, s, u, t.opacity) } function jt(t, e, n, i) { this.h = +t, this.s = +e, this.l = +n, this.opacity = +i } function Lt(t, e, n) { return 255 * (t < 60 ? e + (n - e) * t / 60 : t < 180 ? n : t < 240 ? e + (n - e) * (240 - t) / 60 : e) } function Bt(t, e, n, i, r) { var o = t * t, a = o * t; return ((1 - 3 * t + 3 * o - a) * e + (4 - 6 * o + 3 * a) * n + (1 + 3 * t + 3 * o - 3 * a) * i + a * r) / 6 } ot(st, Ct, { copy: function (t) { return Object.assign(new this.constructor, this, t) }, displayable: function () { return this.rgb().displayable() }, hex: xt, formatHex: xt, formatHsl: function () { return Et(this).formatHsl() }, formatRgb: bt, toString: bt }), ot(St, wt, at(st, { brighter: function (t) { return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new St(this.r * t, this.g * t, this.b * t, this.opacity) }, darker: function (t) { return t = null == t ? .7 : Math.pow(.7, t), new St(this.r * t, this.g * t, this.b * t, this.opacity) }, rgb: function () { return this }, displayable: function () { return -.5 <= this.r && this.r < 255.5 && -.5 <= this.g && this.g < 255.5 && -.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1 }, hex: At, formatHex: At, formatRgb: Pt, toString: Pt })), ot(jt, (function (t, e, n, i) { return 1 === arguments.length ? Et(t) : new jt(t, e, n, null == i ? 1 : i) }), at(st, { brighter: function (t) { return t = null == t ? 1 / .7 : Math.pow(1 / .7, t), new jt(this.h, this.s, this.l * t, this.opacity) }, darker: function (t) { return t = null == t ? .7 : Math.pow(.7, t), new jt(this.h, this.s, this.l * t, this.opacity) }, rgb: function () { var t = this.h % 360 + 360 * (this.h < 0), e = isNaN(t) || isNaN(this.s) ? 0 : this.s, n = this.l, i = n + (n < .5 ? n : 1 - n) * e, r = 2 * n - i; return new St(Lt(t >= 240 ? t - 240 : t + 120, r, i), Lt(t, r, i), Lt(t < 120 ? t + 240 : t - 120, r, i), this.opacity) }, displayable: function () { return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1 }, formatHsl: function () { var t = this.opacity; return (1 === (t = isNaN(t) ? 1 : Math.max(0, Math.min(1, t))) ? "hsl(" : "hsla(") + (this.h || 0) + ", " + 100 * (this.s || 0) + "%, " + 100 * (this.l || 0) + "%" + (1 === t ? ")" : ", " + t + ")") } })); var kt = function (t) { return function () { return t } }; function Dt(t, e) { return function (n) { return t + n * e } } function Rt(t) { return 1 == (t = +t) ? Ft : function (e, n) { return n - e ? function (t, e, n) { return t = Math.pow(t, n), e = Math.pow(e, n) - t, n = 1 / n, function (i) { return Math.pow(t + i * e, n) } }(e, n, t) : kt(isNaN(e) ? n : e) } } function Ft(t, e) { var n = e - t; return n ? Dt(t, n) : kt(isNaN(t) ? e : t) } var Nt = function t(e) { var n = Rt(e); function i(t, e) { var i = n((t = wt(t)).r, (e = wt(e)).r), r = n(t.g, e.g), o = n(t.b, e.b), a = Ft(t.opacity, e.opacity); return function (e) { return t.r = i(e), t.g = r(e), t.b = o(e), t.opacity = a(e), t + "" } } return i.gamma = t, i }(1); function Gt(t) { return function (e) { var n, i, r = e.length, o = new Array(r), a = new Array(r), s = new Array(r); for (n = 0; n < r; ++n)i = wt(e[n]), o[n] = i.r || 0, a[n] = i.g || 0, s[n] = i.b || 0; return o = t(o), a = t(a), s = t(s), i.opacity = 1, function (t) { return i.r = o(t), i.g = a(t), i.b = s(t), i + "" } } } Gt((function (t) { var e = t.length - 1; return function (n) { var i = n <= 0 ? n = 0 : n >= 1 ? (n = 1, e - 1) : Math.floor(n * e), r = t[i], o = t[i + 1], a = i > 0 ? t[i - 1] : 2 * r - o, s = i < e - 1 ? t[i + 2] : 2 * o - r; return Bt((n - i / e) * e, a, r, o, s) } })), Gt((function (t) { var e = t.length; return function (n) { var i = Math.floor(((n %= 1) < 0 ? ++n : n) * e), r = t[(i + e - 1) % e], o = t[i % e], a = t[(i + 1) % e], s = t[(i + 2) % e]; return Bt((n - i / e) * e, r, o, a, s) } })); var Yt = function (t, e) { e || (e = []); var n, i = t ? Math.min(e.length, t.length) : 0, r = e.slice(); return function (o) { for (n = 0; n < i; ++n)r[n] = t[n] * (1 - o) + e[n] * o; return r } }; function Vt(t) { return ArrayBuffer.isView(t) && !(t instanceof DataView) } function Xt(t, e) { var n, i = e ? e.length : 0, r = t ? Math.min(i, t.length) : 0, o = new Array(r), a = new Array(i); for (n = 0; n < r; ++n)o[n] = Qt(t[n], e[n]); for (; n < i; ++n)a[n] = e[n]; return function (t) { for (n = 0; n < r; ++n)a[n] = o[n](t); return a } } var zt = function (t, e) { var n = new Date; return t = +t, e = +e, function (i) { return n.setTime(t * (1 - i) + e * i), n } }, Ht = function (t, e) { return t = +t, e = +e, function (n) { return t * (1 - n) + e * n } }, Wt = function (t, e) { var n, i = {}, r = {}; for (n in null !== t && "object" == typeof t || (t = {}), null !== e && "object" == typeof e || (e = {}), e) n in t ? i[n] = Qt(t[n], e[n]) : r[n] = e[n]; return function (t) { for (n in i) r[n] = i[n](t); return r } }, qt = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g, Ut = new RegExp(qt.source, "g"); var Zt = function (t, e) { var n, i, r, o = qt.lastIndex = Ut.lastIndex = 0, a = -1, s = [], u = []; for (t += "", e += ""; (n = qt.exec(t)) && (i = Ut.exec(e));)(r = i.index) > o && (r = e.slice(o, r), s[a] ? s[a] += r : s[++a] = r), (n = n[0]) === (i = i[0]) ? s[a] ? s[a] += i : s[++a] = i : (s[++a] = null, u.push({ i: a, x: Ht(n, i) })), o = Ut.lastIndex; return o < e.length && (r = e.slice(o), s[a] ? s[a] += r : s[++a] = r), s.length < 2 ? u[0] ? function (t) { return function (e) { return t(e) + "" } }(u[0].x) : function (t) { return function () { return t } }(e) : (e = u.length, function (t) { for (var n, i = 0; i < e; ++i)s[(n = u[i]).i] = n.x(t); return s.join("") }) }, Qt = function (t, e) { var n, i = typeof e; return null == e || "boolean" === i ? kt(e) : ("number" === i ? Ht : "string" === i ? (n = Ct(e)) ? (e = n, Nt) : Zt : e instanceof Ct ? Nt : e instanceof Date ? zt : Vt(e) ? Yt : Array.isArray(e) ? Xt : "function" != typeof e.valueOf && "function" != typeof e.toString || isNaN(e) ? Wt : Ht)(t, e) }, Kt = n(35), $t = [1, 0, 0, 0, 1, 0, 0, 0, 1]; function Jt(t, e, n) { var r, o = e.startTime; if (n < o + e.delay || e._paused) return !1; var a = e.duration, s = e.easing; if (n = n - o - e.delay, e.repeat) r = n % a / a, r = i[s](r); else { if (!((r = n / a) < 1)) return e.onFrame ? t.attr(e.onFrame(1)) : t.attr(e.toAttrs), !0; r = i[s](r) } if (e.onFrame) { var u = e.onFrame(r); t.attr(u) } else !function (t, e, n) { var i = {}, r = e.fromAttrs, o = e.toAttrs; if (!t.destroyed) { var a, s, u, l; for (var h in o) if (!Object(c.isEqual)(r[h], o[h])) if ("path" === h) { var f = o[h], p = r[h]; f.length > p.length ? (f = Kt.parsePathString(o[h]), p = Kt.parsePathString(r[h]), p = Kt.fillPathByDiff(p, f), p = Kt.formatPath(p, f), e.fromAttrs.path = p, e.toAttrs.path = f) : e.pathFormatted || (f = Kt.parsePathString(o[h]), p = Kt.parsePathString(r[h]), p = Kt.formatPath(p, f), e.fromAttrs.path = p, e.toAttrs.path = f, e.pathFormatted = !0), i[h] = []; for (var d = 0; d < f.length; d++) { for (var g = f[d], y = p[d], v = [], m = 0; m < g.length; m++)Object(c.isNumber)(g[m]) && y && Object(c.isNumber)(y[m]) ? (a = Qt(y[m], g[m]), v.push(a(n))) : v.push(g[m]); i[h].push(v) } } else if ("matrix" === h) { var x = (u = r[h] || $t, (Vt(l = o[h] || $t) ? Yt : Xt)(u, l))(n); i[h] = x } else["fill", "stroke", "fillStyle", "strokeStyle"].includes(h) && (s = o[h], /^[r,R,L,l]{1}[\s]*\(/.test(s)) ? i[h] = o[h] : Object(c.isFunction)(o[h]) || (a = Qt(r[h], o[h]), i[h] = a(n)); t.attr(i) } }(t, e, r); return !1 } var te = function () { function t(t) { this.animators = [], this.current = 0, this.timer = null, this.canvas = t } return t.prototype.initTimer = function () { var t, e, n, i = this; this.timer = _((function (r) { if (i.current = r, i.animators.length > 0) { for (var o = i.animators.length - 1; o >= 0; o--)if ((t = i.animators[o]).destroyed) i.removeAnimator(o); else { if (!t.isAnimatePaused()) for (var a = (e = t.get("animations")).length - 1; a >= 0; a--)n = e[a], Jt(t, n, r) && (e.splice(a, 1), !1, n.callback && n.callback()); 0 === e.length && i.removeAnimator(o) } i.canvas.get("autoDraw") || i.canvas.draw() } })) }, t.prototype.addAnimator = function (t) { this.animators.push(t) }, t.prototype.removeAnimator = function (t) { this.animators.splice(t, 1) }, t.prototype.isAnimating = function () { return !!this.animators.length }, t.prototype.stop = function () { this.timer && this.timer.stop() }, t.prototype.stopAllAnimations = function (t) { void 0 === t && (t = !0), this.animators.forEach((function (e) { e.stopAnimate(t) })), this.animators = [], this.canvas.draw() }, t.prototype.getTime = function () { return this.current }, t }(), ee = n(67), ne = ["mousedown", "mouseup", "dblclick", "mouseout", "mouseover", "mousemove", "mouseleave", "mouseenter", "touchstart", "touchmove", "touchend", "dragenter", "dragover", "dragleave", "drop", "contextmenu", "mousewheel"]; function ie(t, e, n) { n.name = e, n.target = t, n.currentTarget = t, n.delegateTarget = t, t.emit(e, n) } function re(t, e, n) { if (n.bubbles) { var i = void 0, r = !1; if ("mouseenter" === e ? (i = n.fromShape, r = !0) : "mouseleave" === e && (r = !0, i = n.toShape), t.isCanvas() && r) return; if (i && Object(l.g)(t, i)) return void (n.bubbles = !1); n.name = e, n.currentTarget = t, n.delegateTarget = t, t.emit(e, n) } } var oe = function () { function t(t) { var e = this; this.draggingShape = null, this.dragging = !1, this.currentShape = null, this.mousedownShape = null, this.mousedownPoint = null, this._eventCallback = function (t) { var n = t.type; e._triggerEvent(n, t) }, this._onDocumentMove = function (t) { if (e.canvas.get("el") !== t.target && (e.dragging || e.currentShape)) { var n = e._getPointInfo(t); e.dragging && e._emitEvent("drag", t, n, e.draggingShape) } }, this._onDocumentMouseUp = function (t) { if (e.canvas.get("el") !== t.target && e.dragging) { var n = e._getPointInfo(t); e.draggingShape && e._emitEvent("drop", t, n, null), e._emitEvent("dragend", t, n, e.draggingShape), e._afterDrag(e.draggingShape, n, t) } }, this.canvas = t.canvas } return t.prototype.init = function () { this._bindEvents() }, t.prototype._bindEvents = function () { var t = this, e = this.canvas.get("el"); Object(l.a)(ne, (function (n) { e.addEventListener(n, t._eventCallback) })), document && (document.addEventListener("mousemove", this._onDocumentMove), document.addEventListener("mouseup", this._onDocumentMouseUp)) }, t.prototype._clearEvents = function () { var t = this, e = this.canvas.get("el"); Object(l.a)(ne, (function (n) { e.removeEventListener(n, t._eventCallback) })), document && (document.removeEventListener("mousemove", this._onDocumentMove), document.removeEventListener("mouseup", this._onDocumentMouseUp)) }, t.prototype._getEventObj = function (t, e, n, i, r, o) { var a = new ee.a(t, e); return a.fromShape = r, a.toShape = o, a.x = n.x, a.y = n.y, a.clientX = n.clientX, a.clientY = n.clientY, a.propagationPath.push(i), a }, t.prototype._getShape = function (t, e) { return this.canvas.getShape(t.x, t.y, e) }, t.prototype._getPointInfo = function (t) { var e = this.canvas, n = e.getClientByEvent(t), i = e.getPointByEvent(t); return { x: i.x, y: i.y, clientX: n.x, clientY: n.y } }, t.prototype._triggerEvent = function (t, e) { var n = this._getPointInfo(e), i = this._getShape(n, e), r = this["_on" + t], o = !1; if (r) r.call(this, n, i, e); else { var a = this.currentShape; "mouseenter" === t || "dragenter" === t || "mouseover" === t ? (this._emitEvent(t, e, n, null, null, i), i && this._emitEvent(t, e, n, i, null, i), "mouseenter" === t && this.draggingShape && this._emitEvent("dragenter", e, n, null)) : "mouseleave" === t || "dragleave" === t || "mouseout" === t ? (o = !0, a && this._emitEvent(t, e, n, a, a, null), this._emitEvent(t, e, n, null, a, null), "mouseleave" === t && this.draggingShape && this._emitEvent("dragleave", e, n, null)) : this._emitEvent(t, e, n, i, null, null) } if (o || (this.currentShape = i), i && !i.get("destroyed")) { var s = this.canvas; s.get("el").style.cursor = i.attr("cursor") || s.get("cursor") } }, t.prototype._onmousedown = function (t, e, n) { 0 === n.button && (this.mousedownShape = e, this.mousedownPoint = t, this.mousedownTimeStamp = n.timeStamp), this._emitEvent("mousedown", n, t, e, null, null) }, t.prototype._emitMouseoverEvents = function (t, e, n, i) { var r = this.canvas.get("el"); n !== i && (n && (this._emitEvent("mouseout", t, e, n, n, i), this._emitEvent("mouseleave", t, e, n, n, i), i && !i.get("destroyed") || (r.style.cursor = this.canvas.get("cursor"))), i && (this._emitEvent("mouseover", t, e, i, n, i), this._emitEvent("mouseenter", t, e, i, n, i))) }, t.prototype._emitDragoverEvents = function (t, e, n, i, r) { i ? (i !== n && (n && this._emitEvent("dragleave", t, e, n, n, i), this._emitEvent("dragenter", t, e, i, n, i)), r || this._emitEvent("dragover", t, e, i)) : n && this._emitEvent("dragleave", t, e, n, n, i), r && this._emitEvent("dragover", t, e, i) }, t.prototype._afterDrag = function (t, e, n) { t && (t.set("capture", !0), this.draggingShape = null), this.dragging = !1; var i = this._getShape(e, n); i !== t && this._emitMouseoverEvents(n, e, t, i), this.currentShape = i }, t.prototype._onmouseup = function (t, e, n) { if (0 === n.button) { var i = this.draggingShape; this.dragging ? (i && this._emitEvent("drop", n, t, e), this._emitEvent("dragend", n, t, i), this._afterDrag(i, t, n)) : (this._emitEvent("mouseup", n, t, e), e === this.mousedownShape && this._emitEvent("click", n, t, e), this.mousedownShape = null, this.mousedownPoint = null) } }, t.prototype._ondragover = function (t, e, n) { n.preventDefault(); var i = this.currentShape; this._emitDragoverEvents(n, t, i, e, !0) }, t.prototype._onmousemove = function (t, e, n) { var i = this.canvas, r = this.currentShape, o = this.draggingShape; if (this.dragging) o && this._emitDragoverEvents(n, t, r, e, !1), this._emitEvent("drag", n, t, o); else { var a = this.mousedownPoint; if (a) { var s = this.mousedownShape, u = n.timeStamp - this.mousedownTimeStamp, l = a.clientX - t.clientX, c = a.clientY - t.clientY; u > 120 || l * l + c * c > 40 ? s && s.get("draggable") ? ((o = this.mousedownShape).set("capture", !1), this.draggingShape = o, this.dragging = !0, this._emitEvent("dragstart", n, t, o), this.mousedownShape = null, this.mousedownPoint = null) : !s && i.get("draggable") ? (this.dragging = !0, this._emitEvent("dragstart", n, t, null), this.mousedownShape = null, this.mousedownPoint = null) : (this._emitMouseoverEvents(n, t, r, e), this._emitEvent("mousemove", n, t, e)) : (this._emitMouseoverEvents(n, t, r, e), this._emitEvent("mousemove", n, t, e)) } else this._emitMouseoverEvents(n, t, r, e), this._emitEvent("mousemove", n, t, e) } }, t.prototype._emitEvent = function (t, e, n, i, r, o) { var a = this._getEventObj(t, e, n, i, r, o); if (i) { a.shape = i, ie(i, t, a); for (var s = i.getParent(); s;)s.emitDelegation(t, a), a.propagationStopped || re(s, t, a), a.propagationPath.push(s), s = s.getParent() } else { ie(this.canvas, t, a) } }, t.prototype.destroy = function () { this._clearEvents(), this.canvas = null, this.currentShape = null, this.draggingShape = null, this.mousedownPoint = null, this.mousedownShape = null, this.mousedownTimeStamp = null }, t }(), ae = Object(s.a)(), se = ae && "firefox" === ae.name, ue = function (t) { function e(e) { var n = t.call(this, e) || this; return n.initContainer(), n.initDom(), n.initEvents(), n.initTimeline(), n } return Object(a.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return e.cursor = "default", e.supportCSSTransform = !1, e }, e.prototype.initContainer = function () { var t = this.get("container"); Object(l.h)(t) && (t = document.getElementById(t), this.set("container", t)) }, e.prototype.initDom = function () { var t = this.createDom(); this.set("el", t), this.get("container").appendChild(t), this.setDOMSize(this.get("width"), this.get("height")) }, e.prototype.initEvents = function () { var t = new oe({ canvas: this }); t.init(), this.set("eventController", t) }, e.prototype.initTimeline = function () { var t = new te(this); this.set("timeline", t) }, e.prototype.setDOMSize = function (t, e) { var n = this.get("el"); l.c && (n.style.width = t + "px", n.style.height = e + "px") }, e.prototype.changeSize = function (t, e) { this.setDOMSize(t, e), this.set("width", t), this.set("height", e), this.onCanvasChange("changeSize") }, e.prototype.getRenderer = function () { return this.get("renderer") }, e.prototype.getCursor = function () { return this.get("cursor") }, e.prototype.setCursor = function (t) { this.set("cursor", t); var e = this.get("el"); l.c && e && (e.style.cursor = t) }, e.prototype.getPointByEvent = function (t) { if (this.get("supportCSSTransform")) { if (se && !Object(l.e)(t.layerX) && t.layerX !== t.offsetX) return { x: t.layerX, y: t.layerY }; if (!Object(l.e)(t.offsetX)) return { x: t.offsetX, y: t.offsetY } } var e = this.getClientByEvent(t), n = e.x, i = e.y; return this.getPointByClient(n, i) }, e.prototype.getClientByEvent = function (t) { var e = t; return t.touches && (e = "touchend" === t.type ? t.changedTouches[0] : t.touches[0]), { x: e.clientX, y: e.clientY } }, e.prototype.getPointByClient = function (t, e) { var n = this.get("el").getBoundingClientRect(); return { x: t - n.left, y: e - n.top } }, e.prototype.getClientByPoint = function (t, e) { var n = this.get("el").getBoundingClientRect(); return { x: t + n.left, y: e + n.top } }, e.prototype.draw = function () { }, e.prototype.removeDom = function () { var t = this.get("el"); t.parentNode.removeChild(t) }, e.prototype.clearEvents = function () { this.get("eventController").destroy() }, e.prototype.isCanvas = function () { return !0 }, e.prototype.getParent = function () { return null }, e.prototype.destroy = function () { var e = this.get("timeline"); this.get("destroyed") || (this.clear(), e && e.stop(), this.clearEvents(), this.removeDom(), t.prototype.destroy.call(this)) }, e }(u.a); e.a = ue }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Line", (function () { return h })), n.d(e, "Text", (function () { return f })), n.d(e, "Arc", (function () { return p })), n.d(e, "Region", (function () { return d })), n.d(e, "Image", (function () { return g })), n.d(e, "DataMarker", (function () { return y })), n.d(e, "DataRegion", (function () { return v })), n.d(e, "RegionFilter", (function () { return m })), n.d(e, "Shape", (function () { return x })), n.d(e, "Html", (function () { return C })); var i = n(1), r = n(0), o = n(8), a = n(28), s = n(17), u = n(2); function l(t, e) { var n = e.x, o = e.y, l = e.content, c = e.style, h = e.id, f = e.name, p = e.rotate, d = e.maxLength, g = e.autoEllipsis, y = e.isVertical, v = e.ellipsisPosition, m = e.background, x = t.addGroup({ id: h + "-group", name: f + "-group", attrs: { x: n, y: o } }), b = x.addShape({ type: "text", id: h, name: f, attrs: Object(i.__assign)({ x: 0, y: 0, text: l }, c) }), C = Object(u.c)(Object(r.get)(m, "padding", 0)); if (d && g) { var _ = d - (C[1] + C[3]); Object(a.a)(!y, b, _, v) } if (m) { var O = Object(r.get)(m, "style", {}), M = b.getCanvasBBox(), w = M.minX, S = M.minY, A = M.width, P = M.height; x.addShape("rect", { id: h + "-bg", name: h + "-bg", attrs: Object(i.__assign)({ x: w - C[3], y: S - C[0], width: A + C[1] + C[3], height: P + C[0] + C[2] }, O) }).toBack() } Object(s.c)(x, n, o), Object(s.b)(x, p, n, o) } var c = n(3), h = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "line", locationType: "region", start: null, end: null, style: {}, text: null, defaultCfg: { style: { fill: c.a.textColor, fontSize: 12, textAlign: "center", textBaseline: "bottom", fontFamily: c.a.fontFamily }, text: { position: "center", autoRotate: !0, content: null, offsetX: 0, offsetY: 0, style: { stroke: c.a.lineColor, lineWidth: 1 } } } }) }, e.prototype.renderInner = function (t) { this.renderLine(t), this.get("text") && this.renderLabel(t) }, e.prototype.renderLine = function (t) { var e = this.get("start"), n = this.get("end"), r = this.get("style"); this.addShape(t, { type: "line", id: this.getElementId("line"), name: "annotation-line", attrs: Object(i.__assign)({ x1: e.x, y1: e.y, x2: n.x, y2: n.y }, r) }) }, e.prototype.getLabelPoint = function (t, e, n) { var i; return ((i = "start" === n ? 0 : "center" === n ? .5 : Object(r.isString)(n) && -1 !== n.indexOf("%") ? parseInt(n, 10) / 100 : Object(r.isNumber)(n) ? n : 1) > 1 || i < 0) && (i = 1), { x: Object(u.g)(t.x, e.x, i), y: Object(u.g)(t.y, e.y, i) } }, e.prototype.renderLabel = function (t) { var e = this.get("text"), n = this.get("start"), i = this.get("end"), r = e.position, o = e.content, a = e.style, s = e.offsetX, u = e.offsetY, c = e.autoRotate, h = e.maxLength, f = e.autoEllipsis, p = e.ellipsisPosition, d = e.background, g = e.isVertical, y = void 0 !== g && g, v = this.getLabelPoint(n, i, r), m = v.x + s, x = v.y + u, b = { id: this.getElementId("line-text"), name: "annotation-line-text", x: m, y: x, content: o, style: a, maxLength: h, autoEllipsis: f, ellipsisPosition: p, background: d, isVertical: y }; if (c) { var C = [i.x - n.x, i.y - n.y]; b.rotate = Math.atan2(C[1], C[0]) } l(t, b) }, e }(o.a), f = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "text", locationType: "point", x: 0, y: 0, content: "", rotate: null, style: {}, background: null, maxLength: null, autoEllipsis: !0, isVertical: !1, ellipsisPosition: "tail", defaultCfg: { style: { fill: c.a.textColor, fontSize: 12, textAlign: "center", textBaseline: "middle", fontFamily: c.a.fontFamily } } }) }, e.prototype.setLocation = function (t) { this.set("x", t.x), this.set("y", t.y), this.resetLocation() }, e.prototype.renderInner = function (t) { var e = this.getLocation(), n = e.x, i = e.y, r = this.get("content"), o = this.get("style"); l(t, { id: this.getElementId("text"), name: this.get("name") + "-text", x: n, y: i, content: r, style: o, maxLength: this.get("maxLength"), autoEllipsis: this.get("autoEllipsis"), isVertical: this.get("isVertical"), ellipsisPosition: this.get("ellipsisPosition"), background: this.get("background"), rotate: this.get("rotate") }) }, e.prototype.resetLocation = function () { var t = this.getElementByLocalId("text-group"); if (t) { var e = this.getLocation(), n = e.x, i = e.y, r = this.get("rotate"); Object(s.c)(t, n, i), Object(s.b)(t, r, n, i) } }, e }(o.a), p = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "arc", locationType: "circle", center: null, radius: 100, startAngle: -Math.PI / 2, endAngle: 3 * Math.PI / 2, style: { stroke: "#999", lineWidth: 1 } }) }, e.prototype.renderInner = function (t) { this.renderArc(t) }, e.prototype.getArcPath = function () { var t = this.getLocation(), e = t.center, n = t.radius, i = t.startAngle, r = t.endAngle, o = Object(u.e)(e, n, i), a = Object(u.e)(e, n, r), s = r - i > Math.PI ? 1 : 0, l = [["M", o.x, o.y]]; if (r - i == 2 * Math.PI) { var c = Object(u.e)(e, n, i + Math.PI); l.push(["A", n, n, 0, s, 1, c.x, c.y]), l.push(["A", n, n, 0, s, 1, a.x, a.y]) } else l.push(["A", n, n, 0, s, 1, a.x, a.y]); return l }, e.prototype.renderArc = function (t) { var e = this.getArcPath(), n = this.get("style"); this.addShape(t, { type: "path", id: this.getElementId("arc"), name: "annotation-arc", attrs: Object(i.__assign)({ path: e }, n) }) }, e }(o.a), d = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "region", locationType: "region", start: null, end: null, style: {}, defaultCfg: { style: { lineWidth: 0, fill: c.a.regionColor, opacity: .4 } } }) }, e.prototype.renderInner = function (t) { this.renderRegion(t) }, e.prototype.renderRegion = function (t) { var e = this.get("start"), n = this.get("end"), r = this.get("style"), o = Object(u.k)({ start: e, end: n }); this.addShape(t, { type: "rect", id: this.getElementId("region"), name: "annotation-region", attrs: Object(i.__assign)({ x: o.x, y: o.y, width: o.width, height: o.height }, r) }) }, e }(o.a), g = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "image", locationType: "region", start: null, end: null, src: null, style: {} }) }, e.prototype.renderInner = function (t) { this.renderImage(t) }, e.prototype.getImageAttrs = function () { var t = this.get("start"), e = this.get("end"), n = this.get("style"), r = Object(u.k)({ start: t, end: e }), o = this.get("src"); return Object(i.__assign)({ x: r.x, y: r.y, img: o, width: r.width, height: r.height }, n) }, e.prototype.renderImage = function (t) { this.addShape(t, { type: "image", id: this.getElementId("image"), name: "annotation-image", attrs: this.getImageAttrs() }) }, e }(o.a), y = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "dataMarker", locationType: "point", x: 0, y: 0, point: {}, line: {}, text: {}, direction: "upward", autoAdjust: !0, coordinateBBox: null, defaultCfg: { point: { display: !0, style: { r: 3, fill: "#FFFFFF", stroke: "#1890FF", lineWidth: 2 } }, line: { display: !0, length: 20, style: { stroke: c.a.lineColor, lineWidth: 1 } }, text: { content: "", display: !0, style: { fill: c.a.textColor, opacity: .65, fontSize: 12, textAlign: "start", fontFamily: c.a.fontFamily } } } }) }, e.prototype.renderInner = function (t) { Object(r.get)(this.get("line"), "display") && this.renderLine(t), Object(r.get)(this.get("text"), "display") && this.renderText(t), Object(r.get)(this.get("point"), "display") && this.renderPoint(t), this.get("autoAdjust") && this.autoAdjust(t) }, e.prototype.applyOffset = function () { this.moveElementTo(this.get("group"), { x: this.get("x") + this.get("offsetX"), y: this.get("y") + this.get("offsetY") }) }, e.prototype.renderPoint = function (t) { var e = this.getShapeAttrs().point; this.addShape(t, { type: "circle", id: this.getElementId("point"), name: "annotation-point", attrs: e }) }, e.prototype.renderLine = function (t) { var e = this.getShapeAttrs().line; this.addShape(t, { type: "path", id: this.getElementId("line"), name: "annotation-line", attrs: e }) }, e.prototype.renderText = function (t) { var e = this.getShapeAttrs().text, n = e.x, r = e.y, o = e.text, a = Object(i.__rest)(e, ["x", "y", "text"]), s = this.get("text"), u = s.background, c = s.maxLength, h = s.autoEllipsis, f = s.isVertival, p = s.ellipsisPosition; l(t, { x: n, y: r, id: this.getElementId("text"), name: "annotation-text", content: o, style: a, background: u, maxLength: c, autoEllipsis: h, isVertival: f, ellipsisPosition: p }) }, e.prototype.autoAdjust = function (t) { var e = this.get("direction"), n = this.get("x"), i = this.get("y"), o = Object(r.get)(this.get("line"), "length", 0), a = this.get("coordinateBBox"), u = t.getBBox(), l = u.minX, c = u.maxX, h = u.minY, f = u.maxY, p = t.findById(this.getElementId("text-group")), d = t.findById(this.getElementId("text")), g = t.findById(this.getElementId("line")); if (a) { if (p) { if (n + l <= a.minX) { var y = a.minX - (n + l); Object(s.c)(p, p.attr("x") + y, p.attr("y")) } if (n + c >= a.maxX) { y = n + c - a.maxX; Object(s.c)(p, p.attr("x") - y, p.attr("y")) } } if ("upward" === e && i + h <= a.minY || "upward" !== e && i + f >= a.maxY) { var v = void 0, m = void 0; "upward" === e && i + h <= a.minY ? (v = "top", m = 1) : (v = "bottom", m = -1), d.attr("textBaseline", v), g && g.attr("path", [["M", 0, 0], ["L", 0, o * m]]), Object(s.c)(p, p.attr("x"), (o + 2) * m) } } }, e.prototype.getShapeAttrs = function () { var t = Object(r.get)(this.get("line"), "display"), e = Object(r.get)(this.get("point"), "style", {}), n = Object(r.get)(this.get("line"), "style", {}), o = Object(r.get)(this.get("text"), "style", {}), a = this.get("direction"), s = t ? Object(r.get)(this.get("line"), "length", 0) : 0, u = "upward" === a ? -1 : 1; return { point: Object(i.__assign)({ x: 0, y: 0 }, e), line: Object(i.__assign)({ path: [["M", 0, 0], ["L", 0, s * u]] }, n), text: Object(i.__assign)({ x: 0, y: (s + 2) * u, text: Object(r.get)(this.get("text"), "content", ""), textBaseline: "upward" === a ? "bottom" : "top" }, o) } }, e }(o.a), v = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "dataRegion", locationType: "points", points: [], lineLength: 0, region: {}, text: {}, defaultCfg: { region: { style: { lineWidth: 0, fill: c.a.regionColor, opacity: .4 } }, text: { content: "", style: { textAlign: "center", textBaseline: "bottom", fontSize: 12, fill: c.a.textColor, fontFamily: c.a.fontFamily } } } }) }, e.prototype.renderInner = function (t) { var e = Object(r.get)(this.get("region"), "style", {}), n = (Object(r.get)(this.get("text"), "style", {}), this.get("lineLength") || 0), o = this.get("points"); if (o.length) { var a = Object(u.j)(o), s = []; s.push(["M", o[0].x, a.minY - n]), o.forEach((function (t) { s.push(["L", t.x, t.y]) })), s.push(["L", o[o.length - 1].x, o[o.length - 1].y - n]), this.addShape(t, { type: "path", id: this.getElementId("region"), name: "annotation-region", attrs: Object(i.__assign)({ path: s }, e) }), l(t, Object(i.__assign)({ id: this.getElementId("text"), name: "annotation-text", x: (a.minX + a.maxX) / 2, y: a.minY - n }, this.get("text"))) } }, e }(o.a), m = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "regionFilter", locationType: "region", start: null, end: null, color: null, shape: [] }) }, e.prototype.renderInner = function (t) { var e = this, n = this.get("start"), i = this.get("end"), o = this.addGroup(t, { id: this.getElementId("region-filter"), capture: !1 }); Object(r.each)(this.get("shapes"), (function (t, n) { var i = t.get("type"), a = Object(r.clone)(t.attr()); e.adjustShapeAttrs(a), e.addShape(o, { id: e.getElementId("shape-" + i + "-" + n), capture: !1, type: i, attrs: a }) })); var a = Object(u.k)({ start: n, end: i }); o.setClip({ type: "rect", attrs: { x: a.minX, y: a.minY, width: a.width, height: a.height } }) }, e.prototype.adjustShapeAttrs = function (t) { var e = this.get("color"); t.fill && (t.fill = t.fillStyle = e), t.stroke = t.strokeStyle = e }, e }(o.a), x = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "shape", draw: r.noop }) }, e.prototype.renderInner = function (t) { var e = this.get("render"); Object(r.isFunction)(e) && e(t) }, e }(o.a), b = n(9), C = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "annotation", type: "html", locationType: "point", x: 0, y: 0, containerTpl: '<div class="g2-html-annotation"></div>', alignX: "left", alignY: "top", html: "", zIndex: 7 }) }, e.prototype.render = function () { var t = this.getContainer(), e = this.get("html"); Object(u.a)(t); var n = Object(r.isFunction)(e) ? e(t) : e; Object(r.isElement)(n) ? t.appendChild(n) : Object(r.isString)(n) && t.appendChild(Object(b.createDom)(n)), this.resetPosition() }, e.prototype.resetPosition = function () { var t = this.getContainer(), e = this.getLocation(), n = e.x, i = e.y, r = this.get("alignX"), o = this.get("alignY"), a = this.get("offsetX"), s = this.get("offsetY"), u = Object(b.getOuterWidth)(t), l = Object(b.getOuterHeight)(t), c = { x: n, y: i }; "middle" === r ? c.x -= Math.round(u / 2) : "right" === r && (c.x -= Math.round(u)), "middle" === o ? c.y -= Math.round(l / 2) : "bottom" === o && (c.y -= Math.round(l)), a && (c.x += a), s && (c.y += s), Object(b.modifyCSS)(t, { position: "absolute", left: c.x + "px", top: c.y + "px", zIndex: this.get("zIndex") }) }, e }(n(39).a) }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return o })); var i = new Map; function r(t, e) { i.set(t, e) } function o(t) { return i.get(t) } var a = function (t) { var e = t.attr(); return { x: e.x, y: e.y, width: e.width, height: e.height } }, s = function (t) { var e = t.attr(), n = e.x, i = e.y, r = e.r; return { x: n - r, y: i - r, width: 2 * r, height: 2 * r } }, u = n(12); function l(t, e) { return t && e ? { minX: Math.min(t.minX, e.minX), minY: Math.min(t.minY, e.minY), maxX: Math.max(t.maxX, e.maxX), maxY: Math.max(t.maxY, e.maxY) } : t || e } function c(t, e) { var n = t.get("startArrowShape"), i = t.get("endArrowShape"); return n && (e = l(e, n.getCanvasBBox())), i && (e = l(e, i.getCanvasBBox())), e } var h = n(43), f = n(32), p = n(0); function d(t, e) { var n = t.prePoint, i = t.currentPoint, r = t.nextPoint, o = Math.pow(i[0] - n[0], 2) + Math.pow(i[1] - n[1], 2), a = Math.pow(i[0] - r[0], 2) + Math.pow(i[1] - r[1], 2), s = Math.pow(n[0] - r[0], 2) + Math.pow(n[1] - r[1], 2), u = Math.acos((o + a - s) / (2 * Math.sqrt(o) * Math.sqrt(a))); if (!u || 0 === Math.sin(u) || Object(p.isNumberEqual)(u, 0)) return { xExtra: 0, yExtra: 0 }; var l = Math.abs(Math.atan2(r[1] - i[1], r[0] - i[0])), c = Math.abs(Math.atan2(r[0] - i[0], r[1] - i[1])); return l = l > Math.PI / 2 ? Math.PI - l : l, c = c > Math.PI / 2 ? Math.PI - c : c, { xExtra: Math.cos(u / 2 - l) * (e / 2 * (1 / Math.sin(u / 2))) - e / 2 || 0, yExtra: Math.cos(c - u / 2) * (e / 2 * (1 / Math.sin(u / 2))) - e / 2 || 0 } } r("rect", a), r("image", a), r("circle", s), r("marker", s), r("polyline", (function (t) { for (var e = t.attr().points, n = [], i = [], r = 0; r < e.length; r++) { var o = e[r]; n.push(o[0]), i.push(o[1]) } var a = u.f.getBBoxByArray(n, i), s = a.x, l = a.y, h = { minX: s, minY: l, maxX: s + a.width, maxY: l + a.height }; return { x: (h = c(t, h)).minX, y: h.minY, width: h.maxX - h.minX, height: h.maxY - h.minY } })), r("polygon", (function (t) { for (var e = t.attr().points, n = [], i = [], r = 0; r < e.length; r++) { var o = e[r]; n.push(o[0]), i.push(o[1]) } return u.f.getBBoxByArray(n, i) })), r("text", (function (t) { var e = t.attr(), n = e.x, i = e.y, r = e.text, o = e.fontSize, a = e.lineHeight, s = e.font; s || (s = Object(h.a)(e)); var u, l = Object(h.c)(r, s); if (l) { var c = e.textAlign, f = e.textBaseline, p = Object(h.b)(r, o, a), d = { x: n, y: i - p }; c && ("end" === c || "right" === c ? d.x -= l : "center" === c && (d.x -= l / 2)), f && ("top" === f ? d.y += p : "middle" === f && (d.y += p / 2)), u = { x: d.x, y: d.y, width: l, height: p } } else u = { x: n, y: i, width: 0, height: 0 }; return u })), r("path", (function (t) { var e = t.attr(), n = e.path, i = e.stroke ? e.lineWidth : 0, r = function (t, e) { for (var n = [], i = [], r = [], o = 0; o < t.length; o++) { var a = (v = t[o]).currentPoint, s = v.params, l = v.prePoint, c = void 0; switch (v.command) { case "Q": c = u.e.box(l[0], l[1], s[1], s[2], s[3], s[4]); break; case "C": c = u.b.box(l[0], l[1], s[1], s[2], s[3], s[4], s[5], s[6]); break; case "A": var h = v.arcParams; c = u.a.box(h.cx, h.cy, h.rx, h.ry, h.xRotation, h.startAngle, h.endAngle); break; default: n.push(a[0]), i.push(a[1]) }c && (v.box = c, n.push(c.x, c.x + c.width), i.push(c.y, c.y + c.height)), e && ("L" === v.command || "M" === v.command) && v.prePoint && v.nextPoint && r.push(v) } n = n.filter((function (t) { return !Number.isNaN(t) })), i = i.filter((function (t) { return !Number.isNaN(t) })); var f = Math.min.apply(null, n), p = Math.min.apply(null, i), g = Math.max.apply(null, n), y = Math.max.apply(null, i); if (0 === r.length) return { x: f, y: p, width: g - f, height: y - p }; for (o = 0; o < r.length; o++) { var v; (a = (v = r[o]).currentPoint)[0] === f ? f -= d(v, e).xExtra : a[0] === g && (g += d(v, e).xExtra), a[1] === p ? p -= d(v, e).yExtra : a[1] === y && (y += d(v, e).yExtra) } return { x: f, y: p, width: g - f, height: y - p } }(t.get("segments") || Object(f.path2Segments)(n), i), o = r.x, a = r.y, s = { minX: o, minY: a, maxX: o + r.width, maxY: a + r.height }; return { x: (s = c(t, s)).minX, y: s.minY, width: s.maxX - s.minX, height: s.maxY - s.minY } })), r("line", (function (t) { var e = t.attr(), n = e.x1, i = e.y1, r = e.x2, o = e.y2, a = { minX: Math.min(n, r), maxX: Math.max(n, r), minY: Math.min(i, o), maxY: Math.max(i, o) }; return { x: (a = c(t, a)).minX, y: a.minY, width: a.maxX - a.minX, height: a.maxY - a.minY } })), r("ellipse", (function (t) { var e = t.attr(), n = e.x, i = e.y, r = e.rx, o = e.ry; return { x: n - r, y: i - o, width: 2 * r, height: 2 * o } })) }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Line", (function () { return D })), n.d(e, "Circle", (function () { return R })), n.d(e, "Base", (function () { return d })); var i = {}; n.r(i), n.d(i, "getDefault", (function () { return v })), n.d(i, "ellipsisHead", (function () { return m })), n.d(i, "ellipsisTail", (function () { return x })), n.d(i, "ellipsisMiddle", (function () { return b })); var r = {}; n.r(r), n.d(r, "getDefault", (function () { return S })), n.d(r, "reserveFirst", (function () { return A })), n.d(r, "reserveLast", (function () { return P })), n.d(r, "reserveBoth", (function () { return I })), n.d(r, "equidistance", (function () { return T })), n.d(r, "equidistanceWithReverseBoth", (function () { return E })); var o = {}; n.r(o), n.d(o, "getDefault", (function () { return L })), n.d(o, "fixedAngle", (function () { return B })), n.d(o, "unfixedAngle", (function () { return k })); var a = {}; n.r(a), n.d(a, "autoHide", (function () { return r })), n.d(a, "autoRotate", (function () { return o })), n.d(a, "autoEllipsis", (function () { return i })); var s = n(1), u = n(6), l = n(0), c = n(8), h = n(17), f = n(47), p = n(3), d = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(s.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(s.__assign)(Object(s.__assign)({}, e), { name: "axis", ticks: [], line: {}, tickLine: {}, subTickLine: null, title: null, label: {}, verticalFactor: 1, verticalLimitLength: null, overlapOrder: ["autoRotate", "autoEllipsis", "autoHide"], tickStates: {}, optimize: {}, defaultCfg: { line: { style: { lineWidth: 1, stroke: p.a.lineColor } }, tickLine: { style: { lineWidth: 1, stroke: p.a.lineColor }, alignTick: !0, length: 5, displayWithLabel: !0 }, subTickLine: { style: { lineWidth: 1, stroke: p.a.lineColor }, count: 4, length: 2 }, label: { autoRotate: !0, autoHide: !1, autoEllipsis: !1, style: { fontSize: 12, fill: p.a.textColor, fontFamily: p.a.fontFamily, fontWeight: "normal" }, offset: 10 }, title: { autoRotate: !0, spacing: 5, position: "center", style: { fontSize: 12, fill: p.a.textColor, textBaseline: "middle", fontFamily: p.a.fontFamily, textAlign: "center" } }, tickStates: { active: { labelStyle: { fontWeight: 500 }, tickLineStyle: { lineWidth: 2 } }, inactive: { labelStyle: { fill: p.a.uncheckedColor } } }, optimize: { enable: !0, threshold: 400 } }, theme: {} }) }, e.prototype.renderInner = function (t) { this.get("line") && this.drawLine(t), this.drawTicks(t), this.get("title") && this.drawTitle(t) }, e.prototype.isList = function () { return !0 }, e.prototype.getItems = function () { return this.get("ticks") }, e.prototype.setItems = function (t) { this.update({ ticks: t }) }, e.prototype.updateItem = function (t, e) { Object(l.mix)(t, e), this.clear(), this.render() }, e.prototype.clearItems = function () { var t = this.getElementByLocalId("label-group"); t && t.clear() }, e.prototype.setItemState = function (t, e, n) { t[e] = n, this.updateTickStates(t) }, e.prototype.hasState = function (t, e) { return !!t[e] }, e.prototype.getItemStates = function (t) { var e = this.get("tickStates"), n = []; return Object(l.each)(e, (function (e, i) { t[i] && n.push(i) })), n }, e.prototype.clearItemsState = function (t) { var e = this, n = this.getItemsByState(t); Object(l.each)(n, (function (n) { e.setItemState(n, t, !1) })) }, e.prototype.getItemsByState = function (t) { var e = this, n = this.getItems(); return Object(l.filter)(n, (function (n) { return e.hasState(n, t) })) }, e.prototype.getSidePoint = function (t, e) { var n = this.getSideVector(e, t); return { x: t.x + n[0], y: t.y + n[1] } }, e.prototype.getTextAnchor = function (t) { var e; return Object(l.isNumberEqual)(t[0], 0) ? e = "center" : t[0] > 0 ? e = "start" : t[0] < 0 && (e = "end"), e }, e.prototype.getTextBaseline = function (t) { var e; return Object(l.isNumberEqual)(t[1], 0) ? e = "middle" : t[1] > 0 ? e = "top" : t[1] < 0 && (e = "bottom"), e }, e.prototype.processOverlap = function (t) { }, e.prototype.drawLine = function (t) { var e = this.getLinePath(), n = this.get("line"); this.addShape(t, { type: "path", id: this.getElementId("line"), name: "axis-line", attrs: Object(l.mix)({ path: e }, n.style) }) }, e.prototype.getTickLineItems = function (t) { var e = this, n = [], i = this.get("tickLine"), r = i.alignTick, o = i.length, a = 1; return t.length >= 2 && (a = t[1].value - t[0].value), Object(l.each)(t, (function (t) { var i = t.point; r || (i = e.getTickPoint(t.value - a / 2)); var s = e.getSidePoint(i, o); n.push({ startPoint: i, tickValue: t.value, endPoint: s, tickId: t.id, id: "tickline-" + t.id }) })), n }, e.prototype.getSubTickLineItems = function (t) { var e = [], n = this.get("subTickLine"), i = n.count, r = t.length; if (r >= 2) for (var o = 0; o < r - 1; o++)for (var a = t[o], s = t[o + 1], u = 0; u < i; u++) { var l = (u + 1) / (i + 1), c = (1 - l) * a.tickValue + l * s.tickValue, h = this.getTickPoint(c), f = this.getSidePoint(h, n.length); e.push({ startPoint: h, endPoint: f, tickValue: c, id: "sub-" + a.id + "-" + u }) } return e }, e.prototype.getTickLineAttrs = function (t, e, n, i) { var r = this.get(e).style, o = { points: [t.startPoint, t.endPoint] }, a = Object(l.get)(this.get("theme"), ["tickLine", "style"], {}); r = Object(l.isFunction)(r) ? Object(l.mix)({}, a, r(o, n, i)) : r; var u = t.startPoint, c = t.endPoint; return Object(s.__assign)({ x1: u.x, y1: u.y, x2: c.x, y2: c.y }, r) }, e.prototype.drawTick = function (t, e, n, i, r) { this.addShape(e, { type: "line", id: this.getElementId(t.id), name: "axis-" + n, attrs: this.getTickLineAttrs(t, n, i, r) }) }, e.prototype.drawTickLines = function (t) { var e = this, n = this.get("ticks"), i = this.get("subTickLine"), r = this.getTickLineItems(n), o = this.addGroup(t, { name: "axis-tickline-group", id: this.getElementId("tickline-group") }), a = this.get("tickLine"); if (Object(l.each)(r, (function (n, i) { if (a.displayWithLabel) { var s = e.getElementId("label-" + n.tickId); t.findById(s) && e.drawTick(n, o, "tickLine", i, r) } else e.drawTick(n, o, "tickLine", i, r) })), i) { var s = this.getSubTickLineItems(r); Object(l.each)(s, (function (t, n) { e.drawTick(t, o, "subTickLine", n, s) })) } }, e.prototype.processTicks = function () { var t = this, e = this.get("ticks"); Object(l.each)(e, (function (e) { e.point = t.getTickPoint(e.value), Object(l.isNil)(e.id) && (e.id = e.name) })) }, e.prototype.drawTicks = function (t) { var e = this; this.optimizeTicks(), this.processTicks(), this.get("label") && this.drawLabels(t), this.get("tickLine") && this.drawTickLines(t); var n = this.get("ticks"); Object(l.each)(n, (function (n) { e.applyTickStates(n, t) })) }, e.prototype.optimizeTicks = function () { var t = this.get("optimize"), e = this.get("ticks"); if (t && t.enable && t.threshold > 0) { var n = Object(l.size)(e); if (n > t.threshold) { var i = Math.ceil(n / t.threshold), r = e.filter((function (t, e) { return e % i == 0 })); this.set("ticks", r), this.set("originalTicks", e) } } }, e.prototype.getLabelAttrs = function (t, e, n) { var i = this.get("label"), r = i.offset, o = i.rotate, a = i.formatter, s = this.getSidePoint(t.point, r), u = this.getSideVector(r, s), c = a ? a(t.name, t, e) : t.name, f = i.style; f = Object(l.isFunction)(f) ? Object(l.get)(this.get("theme"), ["label", "style"], {}) : f; var p = Object(l.mix)({ x: s.x, y: s.y, text: c, textAlign: this.getTextAnchor(u), textBaseline: this.getTextBaseline(u) }, f); return o && (p.matrix = Object(h.e)(s, o)), p }, e.prototype.drawLabels = function (t) { var e = this, n = this.get("ticks"), i = this.addGroup(t, { name: "axis-label-group", id: this.getElementId("label-group") }); Object(l.each)(n, (function (t, r) { e.addShape(i, { type: "text", name: "axis-label", id: e.getElementId("label-" + t.id), attrs: e.getLabelAttrs(t, r, n), delegateObject: { tick: t, item: t, index: r } }) })), this.processOverlap(i); var r = i.getChildren(), o = Object(l.get)(this.get("theme"), ["label", "style"], {}), a = this.get("label"), s = a.style, u = a.formatter; if (Object(l.isFunction)(s)) { var c = r.map((function (t) { return Object(l.get)(t.get("delegateObject"), "tick") })); Object(l.each)(r, (function (t, e) { var n = t.get("delegateObject").tick, i = u ? u(n.name, n, e) : n.name, r = Object(l.mix)({}, o, s(i, e, c)); t.attr(r) })) } }, e.prototype.getTitleAttrs = function () { var t = this.get("title"), e = t.style, n = t.position, i = t.offset, r = t.spacing, o = void 0 === r ? 0 : r, a = t.autoRotate, s = e.fontSize, c = .5; "start" === n ? c = 0 : "end" === n && (c = 1); var f = this.getTickPoint(c), p = this.getSidePoint(f, i || o + s / 2), d = Object(l.mix)({ x: p.x, y: p.y, text: t.text }, e), g = t.rotate, y = g; if (Object(l.isNil)(g) && a) { var v = this.getAxisVector(f); y = u.ext.angleTo(v, [1, 0], !0) } if (y) { var m = Object(h.e)(p, y); d.matrix = m } return d }, e.prototype.drawTitle = function (t) { this.addShape(t, { type: "text", id: this.getElementId("title"), name: "axis-title", attrs: this.getTitleAttrs() }) }, e.prototype.applyTickStates = function (t, e) { if (this.getItemStates(t).length) { var n = this.get("tickStates"), i = this.getElementId("label-" + t.id), r = e.findById(i); if (r) { var o = Object(f.a)(t, "label", n); o && r.attr(o) } var a = this.getElementId("tickline-" + t.id), s = e.findById(a); if (s) { var u = Object(f.a)(t, "tickLine", n); u && s.attr(u) } } }, e.prototype.updateTickStates = function (t) { var e = this.getItemStates(t), n = this.get("tickStates"), i = this.get("label"), r = this.getElementByLocalId("label-" + t.id), o = this.get("tickLine"), a = this.getElementByLocalId("tickline-" + t.id); if (e.length) { if (r) { var s = Object(f.a)(t, "label", n); s && r.attr(s) } if (a) { var u = Object(f.a)(t, "tickLine", n); u && a.attr(u) } } else r && r.attr(i.style), a && a.attr(o.style) }, e }(c.a), g = n(28); function y(t, e, n, i) { var r = e.getChildren(), o = !1; return Object(l.each)(r, (function (e) { var r = Object(g.a)(t, e, n, i); o = o || r })), o } function v() { return x } function m(t, e, n) { return y(t, e, n, "head") } function x(t, e, n) { return y(t, e, n, "tail") } function b(t, e, n) { return y(t, e, n, "middle") } var C = n(2); function _(t) { return (function (t) { var e = t.attr("matrix"); return e && 1 !== e[0] }(t) ? Object(h.d)(t.attr("matrix")) : 0) % 360 } function O(t, e, n, i) { var r = !1, o = _(e), a = t ? Math.abs(n.attr("y") - e.attr("y")) : Math.abs(n.attr("x") - e.attr("x")), s = (t ? n.attr("y") > e.attr("y") : n.attr("x") > e.attr("x")) ? e.getBBox() : n.getBBox(); if (t) { var u = Math.abs(Math.cos(o)); r = Object(C.i)(u, 0, Math.PI / 180) ? s.width + i > a : s.height / u + i > a } else { u = Math.abs(Math.sin(o)); r = Object(C.i)(u, 0, Math.PI / 180) ? s.width + i > a : s.height / u + i > a } return r } function M(t, e, n, i) { var r = (null == i ? void 0 : i.minGap) || 0, o = e.getChildren().slice().filter((function (t) { return t.get("visible") })); if (!o.length) return !1; var a = !1; n && o.reverse(); for (var s = o.length, u = o[0], l = 1; l < s; l++) { var c = o[l]; c.getBBox(); O(t, u, c, r) ? (c.hide(), a = !0) : u = c } return a } function w(t, e, n) { var i = (null == n ? void 0 : n.minGap) || 0, r = e.getChildren().slice(); if (r.length < 2) return !1; var o = !1, a = r[0], s = a.getBBox(), u = r[1], l = r.length, c = _(a), h = t ? Math.abs(u.attr("y") - a.attr("y")) : Math.abs(u.attr("x") - a.attr("x")), f = 0; if (t) { var p = Math.abs(Math.cos(c)); if (Object(C.i)(p, 0, Math.PI / 180)) f = (Object(g.b)(r) + i) / h; else f = (s.height / p + i) / h } else { p = Math.abs(Math.sin(c)); if (Object(C.i)(p, 0, Math.PI / 180)) f = (Object(g.b)(r) + i) / h; else f = (s.height / p + i) / h } if (f > 1) { f = Math.ceil(f); for (var d = 0; d < l; d++)d % f != 0 && (r[d].hide(), o = !0) } return o } function S() { return T } function A(t, e, n, i) { return M(t, e, !1, i) } function P(t, e, n, i) { return M(t, e, !0, i) } function I(t, e, n, i) { var r = (null == i ? void 0 : i.minGap) || 0, o = e.getChildren().slice(); if (o.length <= 2) return !1; for (var a = !1, s = o.length, u = o[0], l = o[s - 1], c = u, h = 1; h < s - 1; h++) { var f = o[h]; f.getBBox(); O(t, c, f, r) ? (f.hide(), a = !0) : c = f } return O(t, c, l, r) && (c.hide(), a = !0), a } function T(t, e, n, i) { var r = w(t, e, i); return M(t, e, !1) && (r = !0), r } function E(t, e, n, i) { var r = e.getChildren().slice(), o = w(t, e, i); if (r.length > 2) { var a = r[0], s = r[r.length - 1]; a.get("visible") || (a.show(), M(t, e, !1, i) && (o = !0)), s.get("visible") || (s.show(), M(t, e, !0, i) && (o = !0)) } return o } function j(t, e, n, i) { var r = e.getChildren(); if (!r.length) return !1; if (!t && r.length < 2) return !1; var o = Object(g.b)(r), a = !1; t ? a = !!n && o > n : a = o > Math.abs(r[1].attr("x") - r[0].attr("x")); a && function (t, e) { Object(l.each)(t, (function (t) { var n = t.attr("x"), i = t.attr("y"), r = Object(h.e)({ x: n, y: i }, e); t.attr("matrix", r) })) }(r, i(n, o)); return a } function L() { return B } function B(t, e, n, i) { return j(t, e, n, (function () { return Object(l.isNumber)(i) ? i : t ? p.a.verticalAxisRotate : p.a.horizontalAxisRotate })) } function k(t, e, n) { return j(t, e, n, (function (e, n) { if (!e) return t ? p.a.verticalAxisRotate : p.a.horizontalAxisRotate; if (t) return -Math.acos(e / n); var i = 0; return (e > n || (i = Math.asin(e / n)) > Math.PI / 4) && (i = Math.PI / 4), i })) } var D = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(s.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(s.__assign)(Object(s.__assign)({}, e), { type: "line", locationType: "region", start: null, end: null }) }, e.prototype.getLinePath = function () { var t = this.get("start"), e = this.get("end"), n = []; return n.push(["M", t.x, t.y]), n.push(["L", e.x, e.y]), n }, e.prototype.getInnerLayoutBBox = function () { var e = this.get("start"), n = this.get("end"), i = t.prototype.getInnerLayoutBBox.call(this), r = Math.min(e.x, n.x, i.x), o = Math.min(e.y, n.y, i.y), a = Math.max(e.x, n.x, i.maxX), s = Math.max(e.y, n.y, i.maxY); return { x: r, y: o, minX: r, minY: o, maxX: a, maxY: s, width: a - r, height: s - o } }, e.prototype.isVertical = function () { var t = this.get("start"), e = this.get("end"); return Object(l.isNumberEqual)(t.x, e.x) }, e.prototype.isHorizontal = function () { var t = this.get("start"), e = this.get("end"); return Object(l.isNumberEqual)(t.y, e.y) }, e.prototype.getTickPoint = function (t) { var e = this.get("start"), n = this.get("end"), i = n.x - e.x, r = n.y - e.y; return { x: e.x + i * t, y: e.y + r * t } }, e.prototype.getSideVector = function (t) { var e = this.getAxisVector(), n = u.vec2.normalize([0, 0], e), i = this.get("verticalFactor"), r = [n[1], -1 * n[0]]; return u.vec2.scale([0, 0], r, t * i) }, e.prototype.getAxisVector = function () { var t = this.get("start"), e = this.get("end"); return [e.x - t.x, e.y - t.y] }, e.prototype.processOverlap = function (t) { var e = this, n = this.isVertical(), i = this.isHorizontal(); if (n || i) { var r = this.get("label"), o = this.get("title"), a = this.get("verticalLimitLength"), s = r.offset, u = a, c = 0, h = 0; o && (c = o.style.fontSize, h = o.spacing), u && (u = u - s - h - c); var f = this.get("overlapOrder"); if (Object(l.each)(f, (function (n) { r[n] && e.canProcessOverlap(n) && e.autoProcessOverlap(n, r[n], t, u) })), o && Object(l.isNil)(o.offset)) { var p = t.getCanvasBBox(), d = n ? p.width : p.height; o.offset = s + d + h + c / 2 } } }, e.prototype.canProcessOverlap = function (t) { var e = this.get("label"); return "autoRotate" !== t || Object(l.isNil)(e.rotate) }, e.prototype.autoProcessOverlap = function (t, e, n, i) { var r = this, o = this.isVertical(), s = !1, u = a[t]; if (!0 === e) { this.get("label"); s = u.getDefault()(o, n, i) } else if (Object(l.isFunction)(e)) s = e(o, n, i); else if (Object(l.isObject)(e)) { var c = e; u[c.type] && (s = u[c.type](o, n, i, c.cfg)) } else u[e] && (s = u[e](o, n, i)); if ("autoRotate" === t) { if (s) { var h = n.getChildren(), f = this.get("verticalFactor"); Object(l.each)(h, (function (t) { if ("center" === t.attr("textAlign")) { var e = f > 0 ? "end" : "start"; t.attr("textAlign", e) } })) } } else if ("autoHide" === t) { var p = n.getChildren().slice(0); Object(l.each)(p, (function (t) { t.get("visible") || (r.get("isRegister") && r.unregisterElement(t), t.remove()) })) } }, e }(d), R = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(s.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(s.__assign)(Object(s.__assign)({}, e), { type: "circle", locationType: "circle", center: null, radius: null, startAngle: -Math.PI / 2, endAngle: 3 * Math.PI / 2 }) }, e.prototype.getLinePath = function () { var t = this.get("center"), e = t.x, n = t.y, i = this.get("radius"), r = i, o = this.get("startAngle"), a = this.get("endAngle"), s = []; if (Math.abs(a - o) === 2 * Math.PI) s = [["M", e, n - r], ["A", i, r, 0, 1, 1, e, n + r], ["A", i, r, 0, 1, 1, e, n - r], ["Z"]]; else { var u = this.getCirclePoint(o), l = this.getCirclePoint(a), c = Math.abs(a - o) > Math.PI ? 1 : 0, h = o > a ? 0 : 1; s = [["M", e, n], ["L", u.x, u.y], ["A", i, r, 0, c, h, l.x, l.y], ["L", e, n]] } return s }, e.prototype.getTickPoint = function (t) { var e = this.get("startAngle"), n = e + (this.get("endAngle") - e) * t; return this.getCirclePoint(n) }, e.prototype.getSideVector = function (t, e) { var n = this.get("center"), i = [e.x - n.x, e.y - n.y], r = this.get("verticalFactor"), o = u.vec2.length(i); return u.vec2.scale(i, i, r * t / o), i }, e.prototype.getAxisVector = function (t) { var e = this.get("center"), n = [t.x - e.x, t.y - e.y]; return [n[1], -1 * n[0]] }, e.prototype.getCirclePoint = function (t, e) { var n = this.get("center"); return e = e || this.get("radius"), { x: n.x + Math.cos(t) * e, y: n.y + Math.sin(t) * e } }, e }(d) }, function (t, e, n) { "use strict"; var i = n(1), r = n(7), o = n(4), a = n(46), s = n(25), u = n(16), l = n(55), c = n(54), h = n(0), f = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i, p = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i, d = /[\d.]+:(#[^\s]+|[^)]+\))/gi; function g(t) { var e = t.match(d); if (!e) return ""; var n = ""; return e.sort((function (t, e) { return t = t.split(":"), e = e.split(":"), Number(t[0]) - Number(e[0]) })), Object(h.each)(e, (function (t) { t = t.split(":"), n += '<stop offset="' + t[0] + '" stop-color="' + t[1] + '"></stop>' })), n } var y = function () { function t(t) { this.cfg = {}; var e, n, i, r, o, a, s, l = null, c = Object(h.uniqueId)("gradient_"); return "l" === t.toLowerCase()[0] ? function (t, e) { var n, i, r = f.exec(t), o = Object(h.mod)(Object(h.toRadian)(parseFloat(r[1])), 2 * Math.PI), a = r[2]; o >= 0 && o < .5 * Math.PI ? (n = { x: 0, y: 0 }, i = { x: 1, y: 1 }) : .5 * Math.PI <= o && o < Math.PI ? (n = { x: 1, y: 0 }, i = { x: 0, y: 1 }) : Math.PI <= o && o < 1.5 * Math.PI ? (n = { x: 1, y: 1 }, i = { x: 0, y: 0 }) : (n = { x: 0, y: 1 }, i = { x: 1, y: 0 }); var s = Math.tan(o), u = s * s, l = (i.x - n.x + s * (i.y - n.y)) / (u + 1) + n.x, c = s * (i.x - n.x + s * (i.y - n.y)) / (u + 1) + n.y; e.setAttribute("x1", n.x), e.setAttribute("y1", n.y), e.setAttribute("x2", l), e.setAttribute("y2", c), e.innerHTML = g(a) }(t, l = Object(u.b)("linearGradient")) : (l = Object(u.b)("radialGradient"), e = t, n = l, i = p.exec(e), r = parseFloat(i[1]), o = parseFloat(i[2]), a = parseFloat(i[3]), s = i[4], n.setAttribute("cx", r), n.setAttribute("cy", o), n.setAttribute("r", a), n.innerHTML = g(s)), l.setAttribute("id", c), this.el = l, this.id = c, this.cfg = t, this } return t.prototype.match = function (t, e) { return this.cfg === e }, t }(), v = { shadowColor: "color", shadowOpacity: "opacity", shadowBlur: "blur", shadowOffsetX: "dx", shadowOffsetY: "dy" }, m = { x: "-40%", y: "-40%", width: "200%", height: "200%" }, x = function () { function t(t) { this.type = "filter", this.cfg = {}, this.type = "filter"; var e = Object(u.b)("filter"); return Object(h.each)(m, (function (t, n) { e.setAttribute(n, t) })), this.el = e, this.id = Object(h.uniqueId)("filter_"), this.el.id = this.id, this.cfg = t, this._parseShadow(t, e), this } return t.prototype.match = function (t, e) { if (this.type !== t) return !1; var n = !0, i = this.cfg; return Object(h.each)(Object.keys(i), (function (t) { if (i[t] !== e[t]) return n = !1, !1 })), n }, t.prototype.update = function (t, e) { var n = this.cfg; return n[v[t]] = e, this._parseShadow(n, this.el), this }, t.prototype._parseShadow = function (t, e) { var n = '<feDropShadow\n      dx="' + (t.dx || 0) + '"\n      dy="' + (t.dy || 0) + '"\n      stdDeviation="' + (t.blur ? t.blur / 10 : 0) + '"\n      flood-color="' + (t.color ? t.color : "#000") + '"\n      flood-opacity="' + (t.opacity ? t.opacity : 1) + '"\n      />'; e.innerHTML = n }, t }(), b = function () { function t(t, e) { this.cfg = {}; var n = Object(u.b)("marker"), i = Object(h.uniqueId)("marker_"); n.setAttribute("id", i); var r = Object(u.b)("path"); r.setAttribute("stroke", t.stroke || "none"), r.setAttribute("fill", t.fill || "none"), n.appendChild(r), n.setAttribute("overflow", "visible"), n.setAttribute("orient", "auto-start-reverse"), this.el = n, this.child = r, this.id = i; var o = t["marker-start" === e ? "startArrow" : "endArrow"]; return this.stroke = t.stroke || "#000", !0 === o ? this._setDefaultPath(e, r) : (this.cfg = o, this._setMarker(t.lineWidth, r)), this } return t.prototype.match = function () { return !1 }, t.prototype._setDefaultPath = function (t, e) { var n = this.el; e.setAttribute("d", "M0,0 L" + 10 * Math.cos(Math.PI / 6) + ",5 L0,10"), n.setAttribute("refX", "" + 10 * Math.cos(Math.PI / 6)), n.setAttribute("refY", "5") }, t.prototype._setMarker = function (t, e) { var n = this.el, i = this.cfg.path, r = this.cfg.d; Object(h.isArray)(i) && (i = i.map((function (t) { return t.join(" ") })).join("")), e.setAttribute("d", i), n.appendChild(e), r && n.setAttribute("refX", "" + r / t) }, t.prototype.update = function (t) { var e = this.child; e.attr ? e.attr("fill", t) : e.setAttribute("fill", t) }, t }(), C = function () { function t(t) { this.type = "clip", this.cfg = {}; var e = Object(u.b)("clipPath"); this.el = e, this.id = Object(h.uniqueId)("clip_"), e.id = this.id; var n = t.cfg.el; return e.appendChild(n), this.cfg = t, this } return t.prototype.match = function () { return !1 }, t.prototype.remove = function () { var t = this.el; t.parentNode.removeChild(t) }, t }(), _ = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i, O = function () { function t(t) { this.cfg = {}; var e = Object(u.b)("pattern"); e.setAttribute("patternUnits", "userSpaceOnUse"); var n = Object(u.b)("image"); e.appendChild(n); var i = Object(h.uniqueId)("pattern_"); e.id = i, this.el = e, this.id = i, this.cfg = t; var r = _.exec(t)[2]; n.setAttribute("href", r); var o = new Image; function a() { e.setAttribute("width", "" + o.width), e.setAttribute("height", "" + o.height) } return r.match(/^data:/i) || (o.crossOrigin = "Anonymous"), o.src = r, o.complete ? a() : (o.onload = a, o.src = o.src), this } return t.prototype.match = function (t, e) { return this.cfg === e }, t }(), M = function () { function t(t) { var e = Object(u.b)("defs"), n = Object(h.uniqueId)("defs_"); e.id = n, t.appendChild(e), this.children = [], this.defaultArrow = {}, this.el = e, this.canvas = t } return t.prototype.find = function (t, e) { for (var n = this.children, i = null, r = 0; r < n.length; r++)if (n[r].match(t, e)) { i = n[r].id; break } return i }, t.prototype.findById = function (t) { for (var e = this.children, n = null, i = 0; i < e.length; i++)if (e[i].id === t) { n = e[i]; break } return n }, t.prototype.add = function (t) { this.children.push(t), t.canvas = this.canvas, t.parent = this }, t.prototype.getDefaultArrow = function (t, e) { var n = t.stroke || t.strokeStyle; if (this.defaultArrow[n]) return this.defaultArrow[n].id; var i = new b(t, e); return this.defaultArrow[n] = i, this.el.appendChild(i.el), this.add(i), i.id }, t.prototype.addGradient = function (t) { var e = new y(t); return this.el.appendChild(e.el), this.add(e), e.id }, t.prototype.addArrow = function (t, e) { var n = new b(t, e); return this.el.appendChild(n.el), this.add(n), n.id }, t.prototype.addShadow = function (t) { var e = new x(t); return this.el.appendChild(e.el), this.add(e), e.id }, t.prototype.addPattern = function (t) { var e = new O(t); return this.el.appendChild(e.el), this.add(e), e.id }, t.prototype.addClip = function (t) { var e = new C(t); return this.el.appendChild(e.el), this.add(e), e.id }, t }(), w = function (t) { function e(e) { return t.call(this, Object(i.__assign)(Object(i.__assign)({}, e), { autoDraw: !0, renderer: "svg" })) || this } return Object(i.__extends)(e, t), e.prototype.getShapeBase = function () { return l }, e.prototype.getGroupBase = function () { return c.a }, e.prototype.getShape = function (t, e, n) { var i = n.target || n.srcElement; if (!o.a[i.tagName]) { for (var r = i.parentNode; r && !o.a[r.tagName];)r = r.parentNode; i = r } return this.find((function (t) { return t.get("el") === i })) }, e.prototype.createDom = function () { var t = Object(u.b)("svg"), e = new M(t); return t.setAttribute("width", "" + this.get("width")), t.setAttribute("height", "" + this.get("height")), this.set("context", e), t }, e.prototype.onCanvasChange = function (t) { var e = this.get("context"), n = this.get("el"); if ("sort" === t) { var i = this.get("children"); i && i.length && Object(u.d)(this, (function (t, e) { return i.indexOf(t) - i.indexOf(e) ? 1 : 0 })) } else if ("clear" === t) { if (n) { n.innerHTML = ""; var r = e.el; r.innerHTML = "", n.appendChild(r) } } else "matrix" === t ? Object(s.c)(this) : "clip" === t ? Object(s.a)(this, e) : "changeSize" === t && (n.setAttribute("width", "" + this.get("width")), n.setAttribute("height", "" + this.get("height"))) }, e.prototype.draw = function () { var t = this.get("context"), e = this.getChildren(); Object(s.a)(this, t), e.length && Object(a.a)(t, e) }, e }(r.AbstractCanvas); e.a = w }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Line", (function () { return h })), n.d(e, "Circle", (function () { return f })), n.d(e, "Base", (function () { return c })), n.d(e, "Html", (function () { return y })); var i, r = n(1), o = n(2), a = n(0), s = n(8), u = n(17), l = n(3), c = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { name: "crosshair", type: "base", line: {}, text: null, textBackground: {}, capture: !1, defaultCfg: { line: { style: { lineWidth: 1, stroke: l.a.lineColor } }, text: { position: "start", offset: 10, autoRotate: !1, content: null, style: { fill: l.a.textColor, textAlign: "center", textBaseline: "middle", fontFamily: l.a.fontFamily } }, textBackground: { padding: 5, style: { stroke: l.a.lineColor } } } }) }, e.prototype.renderInner = function (t) { this.get("line") && this.renderLine(t), this.get("text") && (this.renderText(t), this.renderBackground(t)) }, e.prototype.renderText = function (t) { var e = this.get("text"), n = e.style, i = e.autoRotate, o = e.content; if (!Object(a.isNil)(o)) { var s = this.getTextPoint(), l = null; if (i) { var c = this.getRotateAngle(); l = Object(u.e)(s, c) } this.addShape(t, { type: "text", name: "crosshair-text", id: this.getElementId("text"), attrs: Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({}, s), { text: o, matrix: l }), n) }) } }, e.prototype.renderLine = function (t) { var e = this.getLinePath(), n = this.get("line").style; this.addShape(t, { type: "path", name: "crosshair-line", id: this.getElementId("line"), attrs: Object(r.__assign)({ path: e }, n) }) }, e.prototype.renderBackground = function (t) { var e = this.getElementId("text"), n = t.findById(e), i = this.get("textBackground"); if (i && n) { var a = n.getBBox(), s = Object(o.c)(i.padding), u = i.style; this.addShape(t, { type: "rect", name: "crosshair-text-background", id: this.getElementId("text-background"), attrs: Object(r.__assign)({ x: a.x - s[3], y: a.y - s[0], width: a.width + s[1] + s[3], height: a.height + s[0] + s[2], matrix: n.attr("matrix") }, u) }).toBack() } }, e }(s.a), h = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { type: "line", locationType: "region", start: null, end: null }) }, e.prototype.getRotateAngle = function () { var t = this.getLocation(), e = t.start, n = t.end, i = this.get("text").position, r = Math.atan2(n.y - e.y, n.x - e.x); return "start" === i ? r - Math.PI / 2 : r + Math.PI / 2 }, e.prototype.getTextPoint = function () { var t = this.getLocation(), e = t.start, n = t.end, i = this.get("text"), r = i.position, a = i.offset; return Object(o.f)(e, n, r, a) }, e.prototype.getLinePath = function () { var t = this.getLocation(), e = t.start, n = t.end; return [["M", e.x, e.y], ["L", n.x, n.y]] }, e }(c), f = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { type: "circle", locationType: "circle", center: null, radius: 100, startAngle: -Math.PI / 2, endAngle: 3 * Math.PI / 2 }) }, e.prototype.getRotateAngle = function () { var t = this.getLocation(), e = t.startAngle, n = t.endAngle; return "start" === this.get("text").position ? e + Math.PI / 2 : n - Math.PI / 2 }, e.prototype.getTextPoint = function () { var t = this.get("text"), e = t.position, n = t.offset, i = this.getLocation(), r = i.center, a = i.radius, s = i.startAngle, u = i.endAngle, l = "start" === e ? s : u, c = this.getRotateAngle() - Math.PI, h = Object(o.e)(r, a, l), f = Math.cos(c) * n, p = Math.sin(c) * n; return { x: h.x + f, y: h.y + p } }, e.prototype.getLinePath = function () { var t = this.getLocation(), e = t.center, n = t.radius, i = t.startAngle, r = t.endAngle, a = null; if (r - i == 2 * Math.PI) { var s = e.x, u = e.y; a = [["M", s, u - n], ["A", n, n, 0, 1, 1, s, u + n], ["A", n, n, 0, 1, 1, s, u - n], ["Z"]] } else { var l = Object(o.e)(e, n, i), c = Object(o.e)(e, n, r), h = Math.abs(r - i) > Math.PI ? 1 : 0, f = i > r ? 0 : 1; a = [["M", l.x, l.y], ["A", n, n, 0, h, f, c.x, c.y]] } return a }, e }(c), p = n(9), d = n(39), g = ((i = {})["g2-crosshair"] = { position: "relative" }, i["g2-crosshair-line"] = { position: "absolute", backgroundColor: "rgba(0, 0, 0, 0.25)" }, i["g2-crosshair-text"] = { position: "absolute", color: l.a.textColor, fontFamily: l.a.fontFamily }, i), y = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { name: "crosshair", type: "html", locationType: "region", start: { x: 0, y: 0 }, end: { x: 0, y: 0 }, capture: !1, text: null, containerTpl: '<div class="g2-crosshair"></div>', crosshairTpl: '<div class="g2-crosshair-line"></div>', textTpl: '<span class="g2-crosshair-text">{content}</span>', domStyles: null, containerClassName: "g2-crosshair", defaultStyles: g, defaultCfg: { text: { position: "start", content: null, align: "center", offset: 10 } } }) }, e.prototype.render = function () { this.resetText(), this.resetPosition() }, e.prototype.initCrossHair = function () { var t = this.getContainer(), e = this.get("crosshairTpl"), n = Object(p.createDom)(e); t.appendChild(n), this.applyStyle("g2-crosshair-line", n), this.set("crosshairEl", n) }, e.prototype.getTextPoint = function () { var t = this.getLocation(), e = t.start, n = t.end, i = this.get("text"), r = i.position, a = i.offset; return Object(o.f)(e, n, r, a) }, e.prototype.resetText = function () { var t = this.get("text"), e = this.get("textEl"); if (t) { var n = t.content; if (!e) { var i = this.getContainer(), r = Object(a.substitute)(this.get("textTpl"), t); e = Object(p.createDom)(r), i.appendChild(e), this.applyStyle("g2-crosshair-text", e), this.set("textEl", e) } e.innerHTML = n } else e && e.remove() }, e.prototype.isVertical = function (t, e) { return t.x === e.x }, e.prototype.resetPosition = function () { var t = this.get("crosshairEl"); t || (this.initCrossHair(), t = this.get("crosshairEl")); var e = this.get("start"), n = this.get("end"), i = Math.min(e.x, n.x), r = Math.min(e.y, n.y); this.isVertical(e, n) ? Object(p.modifyCSS)(t, { width: "1px", height: Object(o.l)(Math.abs(n.y - e.y)) }) : Object(p.modifyCSS)(t, { height: "1px", width: Object(o.l)(Math.abs(n.x - e.x)) }), Object(p.modifyCSS)(t, { top: Object(o.l)(r), left: Object(o.l)(i) }), this.alignText() }, e.prototype.alignText = function () { var t = this.get("textEl"); if (t) { var e = this.get("text").align, n = t.clientWidth, i = this.getTextPoint(); switch (e) { case "center": i.x = i.x - n / 2; break; case "right": i.x = i.x - n }Object(p.modifyCSS)(t, { top: Object(o.l)(i.y), left: Object(o.l)(i.x) }) } }, e.prototype.updateInner = function (e) { Object(a.hasKey)(e, "text") && this.resetText(), t.prototype.updateInner.call(this, e) }, e }(d.a) }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return C })); var i = n(1), r = n(0), o = n(8), a = { opacity: 0 }, s = { stroke: "#C5C5C5", strokeOpacity: .85 }, u = { fill: "#CACED4", opacity: .85 }, l = n(32), c = n(44); function h(t) { return function (t) { return Object(r.map)(t, (function (t, e) { return [0 === e ? "M" : "L", t[0], t[1]] })) }(t) } function f(t, e, n, i) { void 0 === i && (i = !0); var o = new c.Linear({ values: t }), a = new c.Category({ values: Object(r.map)(t, (function (t, e) { return e })) }), s = Object(r.map)(t, (function (t, i) { return [a.scale(i) * e, n - o.scale(t) * n] })); return i ? function (t) { if (t.length <= 2) return h(t); var e = []; Object(r.each)(t, (function (t) { Object(r.isEqual)(t, e.slice(e.length - 2)) || e.push(t[0], t[1]) })); var n = Object(l.catmullRom2Bezier)(e, !1), i = Object(r.head)(t), o = i[0], a = i[1]; return n.unshift(["M", o, a]), n }(s) : h(s) } function p(t, e, n, r) { var o = Object(i.__spreadArrays)(t), a = function (t, e) { var n = new c.Linear({ values: t }), i = Math.max(0, n.min); return e - n.scale(i) * e }(r, n); return o.push(["L", e, a]), o.push(["L", 0, a]), o.push(["Z"]), o } var d = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "trend", x: 0, y: 0, width: 200, height: 16, smooth: !0, isArea: !1, data: [], backgroundStyle: a, lineStyle: s, areaStyle: u }) }, e.prototype.renderInner = function (t) { var e = this.cfg, n = e.width, r = e.height, o = e.data, a = e.smooth, s = e.isArea, u = e.backgroundStyle, l = e.lineStyle, c = e.areaStyle; this.addShape(t, { id: this.getElementId("background"), type: "rect", attrs: Object(i.__assign)({ x: 0, y: 0, width: n, height: r }, u) }); var h = f(o, n, r, a); if (this.addShape(t, { id: this.getElementId("line"), type: "path", attrs: Object(i.__assign)({ path: h }, l) }), s) { var d = p(h, n, r, o); this.addShape(t, { id: this.getElementId("area"), type: "path", attrs: Object(i.__assign)({ path: d }, c) }) } }, e.prototype.applyOffset = function () { var t = this.cfg, e = t.x, n = t.y; this.moveElementTo(this.get("group"), { x: e, y: n }) }, e }(o.a), g = { fill: "#416180", opacity: .05 }, y = { fill: "#5B8FF9", opacity: .15, cursor: "move" }, v = { width: 10, height: 24 }, m = { textBaseline: "middle", fill: "#000", opacity: .45 }, x = { fill: "#F7F7F7", stroke: "#BFBFBF", radius: 2, opacity: 1, cursor: "ew-resize", highLightFill: "#FFF" }, b = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "handler", x: 0, y: 0, width: 10, height: 24, style: x }) }, e.prototype.renderInner = function (t) { var e = this.cfg, n = e.width, i = e.height, r = e.style, o = r.fill, a = r.stroke, s = r.radius, u = r.opacity, l = r.cursor; this.addShape(t, { type: "rect", id: this.getElementId("background"), attrs: { x: 0, y: 0, width: n, height: i, fill: o, stroke: a, radius: s, opacity: u, cursor: l } }); var c = 1 / 3 * n, h = 2 / 3 * n, f = 1 / 4 * i, p = 3 / 4 * i; this.addShape(t, { id: this.getElementId("line-left"), type: "line", attrs: { x1: c, y1: f, x2: c, y2: p, stroke: a, cursor: l } }), this.addShape(t, { id: this.getElementId("line-right"), type: "line", attrs: { x1: h, y1: f, x2: h, y2: p, stroke: a, cursor: l } }) }, e.prototype.applyOffset = function () { this.moveElementTo(this.get("group"), { x: this.get("x"), y: this.get("y") }) }, e.prototype.initEvent = function () { this.bindEvents() }, e.prototype.bindEvents = function () { var t = this; this.get("group").on("mouseenter", (function () { var e = t.get("style").highLightFill; t.getElementByLocalId("background").attr("fill", e), t.draw() })), this.get("group").on("mouseleave", (function () { var e = t.get("style").fill; t.getElementByLocalId("background").attr("fill", e), t.draw() })) }, e.prototype.draw = function () { var t = this.get("container").get("canvas"); t && t.draw() }, e }(o.a), C = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.onMouseDown = function (t) { return function (n) { e.currentTarget = t; var i = n.originalEvent; i.stopPropagation(), i.preventDefault(), e.prevX = Object(r.get)(i, "touches.0.pageX", i.pageX), e.prevY = Object(r.get)(i, "touches.0.pageY", i.pageY); var o = e.getContainerDOM(); o.addEventListener("mousemove", e.onMouseMove), o.addEventListener("mouseup", e.onMouseUp), o.addEventListener("mouseleave", e.onMouseUp), o.addEventListener("touchmove", e.onMouseMove), o.addEventListener("touchend", e.onMouseUp), o.addEventListener("touchcancel", e.onMouseUp) } }, e.onMouseMove = function (t) { var n = e.cfg.width, i = [e.get("start"), e.get("end")]; t.stopPropagation(), t.preventDefault(); var o = Object(r.get)(t, "touches.0.pageX", t.pageX), a = Object(r.get)(t, "touches.0.pageY", t.pageY), s = o - e.prevX, u = e.adjustOffsetRange(s / n); e.updateStartEnd(u), e.updateUI(e.getElementByLocalId("foreground"), e.getElementByLocalId("minText"), e.getElementByLocalId("maxText")), e.prevX = o, e.prevY = a, e.draw(), e.emit("sliderchange", [e.get("start"), e.get("end")].sort()), e.delegateEmit("valuechanged", { originValue: i, value: [e.get("start"), e.get("end")] }) }, e.onMouseUp = function () { e.currentTarget && (e.currentTarget = void 0); var t = e.getContainerDOM(); t && (t.removeEventListener("mousemove", e.onMouseMove), t.removeEventListener("mouseup", e.onMouseUp), t.removeEventListener("mouseleave", e.onMouseUp), t.removeEventListener("touchmove", e.onMouseMove), t.removeEventListener("touchend", e.onMouseUp), t.removeEventListener("touchcancel", e.onMouseUp)) }, e } return Object(i.__extends)(e, t), e.prototype.setRange = function (t, e) { this.set("minLimit", t), this.set("maxLimit", e); var n = this.get("start"), i = this.get("end"), o = Object(r.clamp)(n, t, e), a = Object(r.clamp)(i, t, e); this.get("isInit") || n === o && i === a || this.setValue([o, a]) }, e.prototype.getRange = function () { return { min: this.get("minLimit") || 0, max: this.get("maxLimit") || 1 } }, e.prototype.setValue = function (t) { var e = this.getRange(); if (Object(r.isArray)(t) && 2 === t.length) { var n = [this.get("start"), this.get("end")]; this.update({ start: Object(r.clamp)(t[0], e.min, e.max), end: Object(r.clamp)(t[1], e.min, e.max) }), this.get("updateAutoRender") || this.render(), this.delegateEmit("valuechanged", { originValue: n, value: t }) } }, e.prototype.getValue = function () { return [this.get("start"), this.get("end")] }, e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "slider", x: 0, y: 0, width: 100, height: 16, backgroundStyle: {}, foregroundStyle: {}, handlerStyle: {}, textStyle: {}, defaultCfg: { backgroundStyle: g, foregroundStyle: y, handlerStyle: v, textStyle: m } }) }, e.prototype.update = function (e) { var n = e.start, o = e.end, a = Object(i.__assign)({}, e); Object(r.isNil)(n) || (a.start = Object(r.clamp)(n, 0, 1)), Object(r.isNil)(o) || (a.end = Object(r.clamp)(o, 0, 1)), t.prototype.update.call(this, a), this.minHandler = this.getChildComponentById(this.getElementId("minHandler")), this.maxHandler = this.getChildComponentById(this.getElementId("maxHandler")), this.trend = this.getChildComponentById(this.getElementId("trend")) }, e.prototype.init = function () { this.set("start", Object(r.clamp)(this.get("start"), 0, 1)), this.set("end", Object(r.clamp)(this.get("end"), 0, 1)), t.prototype.init.call(this) }, e.prototype.render = function () { t.prototype.render.call(this), this.updateUI(this.getElementByLocalId("foreground"), this.getElementByLocalId("minText"), this.getElementByLocalId("maxText")) }, e.prototype.renderInner = function (t) { var e = this.cfg, n = (e.start, e.end, e.width), o = e.height, a = e.trendCfg, s = void 0 === a ? {} : a, u = e.minText, l = e.maxText, c = e.backgroundStyle, h = void 0 === c ? {} : c, f = e.foregroundStyle, p = void 0 === f ? {} : f, g = e.textStyle, y = void 0 === g ? {} : g, v = e.handlerStyle, m = void 0 === v ? {} : v; Object(r.size)(Object(r.get)(s, "data")) && (this.trend = this.addComponent(t, Object(i.__assign)({ component: d, id: this.getElementId("trend"), x: 0, y: 0, width: n, height: o }, s))), this.addShape(t, { id: this.getElementId("background"), type: "rect", attrs: Object(i.__assign)({ x: 0, y: 0, width: n, height: o }, h) }); this.addShape(t, { id: this.getElementId("minText"), type: "text", attrs: Object(i.__assign)({ y: o / 2, textAlign: "right", text: u, silent: !1 }, y) }), this.addShape(t, { id: this.getElementId("maxText"), type: "text", attrs: Object(i.__assign)({ y: o / 2, textAlign: "left", text: l, silent: !1 }, y) }), this.addShape(t, { id: this.getElementId("foreground"), name: "foreground", type: "rect", attrs: Object(i.__assign)({ y: 0, height: o }, p) }); var x = Object(r.get)(m, "height", 24); this.minHandler = this.addComponent(t, Object(i.__assign)({ component: b, id: this.getElementId("minHandler"), name: "handler-min", x: 0, y: (o - x) / 2, width: n, height: x, cursor: "ew-resize" }, m)), this.maxHandler = this.addComponent(t, Object(i.__assign)({ component: b, id: this.getElementId("maxHandler"), name: "handler-max", x: 0, y: (o - x) / 2, width: n, height: x, cursor: "ew-resize" }, m)) }, e.prototype.applyOffset = function () { this.moveElementTo(this.get("group"), { x: this.get("x"), y: this.get("y") }) }, e.prototype.initEvent = function () { this.bindEvents() }, e.prototype.updateUI = function (t, e, n) { var i = this.cfg, o = i.start, a = i.end, s = i.width, u = i.minText, l = i.maxText, c = i.handlerStyle, h = i.height, f = o * s, p = a * s; this.trend && (this.trend.update({ width: s, height: h }), this.get("updateAutoRender") || this.trend.render()), t.attr("x", f), t.attr("width", p - f); var d = Object(r.get)(c, "width", 10); e.attr("text", u), n.attr("text", l); var g = this._dodgeText([f, p], e, n), y = g[0], v = g[1]; this.minHandler && (this.minHandler.update({ x: f - d / 2 }), this.get("updateAutoRender") || this.minHandler.render()), Object(r.each)(y, (function (t, n) { return e.attr(n, t) })), this.maxHandler && (this.maxHandler.update({ x: p - d / 2 }), this.get("updateAutoRender") || this.maxHandler.render()), Object(r.each)(v, (function (t, e) { return n.attr(e, t) })) }, e.prototype.bindEvents = function () { var t = this.get("group"); t.on("handler-min:mousedown", this.onMouseDown("minHandler")), t.on("handler-min:touchstart", this.onMouseDown("minHandler")), t.on("handler-max:mousedown", this.onMouseDown("maxHandler")), t.on("handler-max:touchstart", this.onMouseDown("maxHandler")); var e = t.findById(this.getElementId("foreground")); e.on("mousedown", this.onMouseDown("foreground")), e.on("touchstart", this.onMouseDown("foreground")) }, e.prototype.adjustOffsetRange = function (t) { var e = this.cfg, n = e.start, i = e.end; switch (this.currentTarget) { case "minHandler": var r = 0 - n, o = 1 - n; return Math.min(o, Math.max(r, t)); case "maxHandler": r = 0 - i, o = 1 - i; return Math.min(o, Math.max(r, t)); case "foreground": r = 0 - n, o = 1 - i; return Math.min(o, Math.max(r, t)) } }, e.prototype.updateStartEnd = function (t) { var e = this.cfg, n = e.start, i = e.end; switch (this.currentTarget) { case "minHandler": n += t; break; case "maxHandler": i += t; break; case "foreground": n += t, i += t }this.set("start", n), this.set("end", i) }, e.prototype._dodgeText = function (t, e, n) { var i, o, a = this.cfg, s = a.handlerStyle, u = a.width, l = Object(r.get)(s, "width", 10), c = t[0], h = t[1], f = !1; c > h && (c = (i = [h, c])[0], h = i[1], e = (o = [n, e])[0], n = o[1], f = !0); var p = e.getBBox(), d = n.getBBox(), g = p.width > c - 2 ? { x: c + l / 2 + 2, textAlign: "left" } : { x: c - l / 2 - 2, textAlign: "right" }, y = d.width > u - h - 2 ? { x: h - l / 2 - 2, textAlign: "right" } : { x: h + l / 2 + 2, textAlign: "left" }; return f ? [y, g] : [g, y] }, e.prototype.draw = function () { var t = this.get("container"), e = t && t.get("canvas"); e && e.draw() }, e.prototype.getContainerDOM = function () { var t = this.get("container"), e = t && t.get("canvas"); return e && e.get("container") }, e }(o.a) }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Base", (function () { return s })), n.d(e, "Circle", (function () { return u })), n.d(e, "Line", (function () { return l })); var i = n(1), r = n(0), o = n(8), a = n(3), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "grid", line: {}, alternateColor: null, capture: !1, items: [], closed: !1, defaultCfg: { line: { type: "line", style: { lineWidth: 1, stroke: a.a.lineColor } } } }) }, e.prototype.getLineType = function () { return (this.get("line") || this.get("defaultCfg").line).type }, e.prototype.renderInner = function (t) { this.drawGrid(t) }, e.prototype.getAlternatePath = function (t, e) { var n = this.getGridPath(t), i = e.slice(0).reverse(), r = this.getGridPath(i, !0); return this.get("closed") ? n = n.concat(r) : (r[0][0] = "L", (n = n.concat(r)).push(["Z"])), n }, e.prototype.getPathStyle = function () { return this.get("line").style }, e.prototype.drawGrid = function (t) { var e = this, n = this.get("line"), i = this.get("items"), o = this.get("alternateColor"), a = null; Object(r.each)(i, (function (s, u) { var l = s.id || u; if (n) { var c = e.getPathStyle(); c = Object(r.isFunction)(c) ? c(s, u, i) : c; var h = e.getElementId("line-" + l), f = e.getGridPath(s.points); e.addShape(t, { type: "path", name: "grid-line", id: h, attrs: Object(r.mix)({ path: f }, c) }) } if (o && u > 0) { var p = e.getElementId("region-" + l), d = u % 2 == 0; if (Object(r.isString)(o)) d && e.drawAlternateRegion(p, t, a.points, s.points, o); else { var g = d ? o[1] : o[0]; e.drawAlternateRegion(p, t, a.points, s.points, g) } } a = s })) }, e.prototype.drawAlternateRegion = function (t, e, n, i, r) { var o = this.getAlternatePath(n, i); this.addShape(e, { type: "path", id: t, name: "grid-region", attrs: { path: o, fill: r } }) }, e }(o.a); var u = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { type: "circle", center: null, closed: !0 }) }, e.prototype.getGridPath = function (t, e) { var n, i, o, a, s, u, l = this.getLineType(), c = this.get("closed"), h = []; if (t.length) if ("circle" === l) { var f = this.get("center"), p = t[0], d = (n = f.x, i = f.y, o = p.x, a = p.y, s = o - n, u = a - i, Math.sqrt(s * s + u * u)), g = e ? 0 : 1; c ? (h.push(["M", f.x, f.y - d]), h.push(["A", d, d, 0, 0, g, f.x, f.y + d]), h.push(["A", d, d, 0, 0, g, f.x, f.y - d]), h.push(["Z"])) : Object(r.each)(t, (function (t, e) { 0 === e ? h.push(["M", t.x, t.y]) : h.push(["A", d, d, 0, 0, g, t.x, t.y]) })) } else Object(r.each)(t, (function (t, e) { 0 === e ? h.push(["M", t.x, t.y]) : h.push(["L", t.x, t.y]) })), c && h.push(["Z"]); return h }, e }(s), l = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { type: "line" }) }, e.prototype.getGridPath = function (t) { var e = []; return Object(r.each)(t, (function (t, n) { 0 === n ? e.push(["M", t.x, t.y]) : e.push(["L", t.x, t.y]) })), e }, e }(s) }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Category", (function () { return f })), n.d(e, "Continuous", (function () { return p })), n.d(e, "Base", (function () { return h })); var i = n(1), r = n(0), o = n(28), a = n(17), s = n(47), u = n(3), l = n(8), c = n(2), h = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "legend", layout: "horizontal", locationType: "point", x: 0, y: 0, offsetX: 0, offsetY: 0, title: null, background: null }) }, e.prototype.getLayoutBBox = function () { var e = t.prototype.getLayoutBBox.call(this), n = this.get("maxWidth"), i = this.get("maxHeight"), r = e.width, o = e.height; return n && (r = Math.min(r, n)), i && (o = Math.min(o, i)), Object(c.b)(e.minX, e.minY, r, o) }, e.prototype.setLocation = function (t) { this.set("x", t.x), this.set("y", t.y), this.resetLocation() }, e.prototype.resetLocation = function () { var t = this.get("x"), e = this.get("y"), n = this.get("offsetX"), i = this.get("offsetY"); this.moveElementTo(this.get("group"), { x: t + n, y: e + i }) }, e.prototype.applyOffset = function () { this.resetLocation() }, e.prototype.getDrawPoint = function () { return this.get("currentPoint") }, e.prototype.setDrawPoint = function (t) { return this.set("currentPoint", t) }, e.prototype.renderInner = function (t) { this.resetDraw(), this.get("title") && this.drawTitle(t), this.drawLegendContent(t), this.get("background") && this.drawBackground(t) }, e.prototype.drawBackground = function (t) { var e = this.get("background"), n = t.getBBox(), r = Object(c.c)(e.padding), o = Object(i.__assign)({ x: 0, y: 0, width: n.width + r[1] + r[3], height: n.height + r[0] + r[2] }, e.style); this.addShape(t, { type: "rect", id: this.getElementId("background"), name: "legend-background", attrs: o }).toBack() }, e.prototype.drawTitle = function (t) { var e = this.get("currentPoint"), n = this.get("title"), r = n.spacing, o = n.style, a = n.text, s = this.addShape(t, { type: "text", id: this.getElementId("title"), name: "legend-title", attrs: Object(i.__assign)({ text: a, x: e.x, y: e.y }, o) }).getBBox(); this.set("currentPoint", { x: e.x, y: s.maxY + r }) }, e.prototype.resetDraw = function () { var t = this.get("background"), e = { x: 0, y: 0 }; if (t) { var n = Object(c.c)(t.padding); e.x = n[3], e.y = n[0] } this.set("currentPoint", e) }, e }(l.a), f = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.currentPageIndex = 1, e.totalPagesCnt = 1, e.pageWidth = 0, e.pageHeight = 0, e.startX = 0, e.startY = 0, e.onNavigationBack = function () { var t = e.getElementByLocalId("item-group"); if (e.currentPageIndex > 1) { e.currentPageIndex -= 1, e.updateNavigation(); var n = e.getCurrentNavigationMatrix(); e.get("animate") ? t.animate({ matrix: n }, 100) : t.attr({ matrix: n }) } }, e.onNavigationAfter = function () { var t = e.getElementByLocalId("item-group"); if (e.currentPageIndex < e.totalPagesCnt) { e.currentPageIndex += 1, e.updateNavigation(); var n = e.getCurrentNavigationMatrix(); e.get("animate") ? t.animate({ matrix: n }, 100) : t.attr({ matrix: n }) } }, e } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "legend", type: "category", itemSpacing: 24, itemMarginBottom: 8, maxItemWidth: null, itemWidth: null, itemHeight: null, itemName: {}, itemValue: null, maxWidth: null, maxHeight: null, marker: {}, items: [], itemStates: {}, itemBackground: {}, defaultCfg: { title: { spacing: 5, style: { fill: u.a.textColor, fontSize: 12, textAlign: "start", textBaseline: "top" } }, background: { padding: 5, style: { stroke: u.a.lineColor } }, itemBackground: { style: { opacity: 0, fill: "#fff" } }, itemName: { spacing: 16, style: { fill: u.a.textColor, fontSize: 12, textAlign: "start", textBaseline: "middle" } }, marker: { spacing: 8, style: { r: 6, symbol: "circle" } }, itemValue: { alignRight: !1, formatter: null, style: { fill: u.a.textColor, fontSize: 12, textAlign: "start", textBaseline: "middle" } }, itemStates: { active: { nameStyle: { opacity: .8 } }, unchecked: { nameStyle: { fill: u.a.uncheckedColor }, markerStyle: { fill: u.a.uncheckedColor, stroke: u.a.uncheckedColor } }, inactive: { nameStyle: { fill: u.a.uncheckedColor }, markerStyle: { opacity: .2 } } } } }) }, e.prototype.isList = function () { return !0 }, e.prototype.getItems = function () { return this.get("items") }, e.prototype.setItems = function (t) { this.update({ items: t }) }, e.prototype.updateItem = function (t, e) { Object(r.mix)(t, e), this.clear(), this.render() }, e.prototype.clearItems = function () { var t = this.getElementByLocalId("item-group"); t && t.clear() }, e.prototype.setItemState = function (t, e, n) { t[e] = n; var i = this.getElementByLocalId("item-" + t.id); if (i) { var r = this.getItems().indexOf(t), o = this.createOffScreenGroup(), a = this.drawItem(t, r, this.getItemHeight(), o); this.updateElements(a, i), this.clearUpdateStatus(i) } }, e.prototype.hasState = function (t, e) { return !!t[e] }, e.prototype.getItemStates = function (t) { var e = this.get("itemStates"), n = []; return Object(r.each)(e, (function (e, i) { t[i] && n.push(i) })), n }, e.prototype.clearItemsState = function (t) { var e = this, n = this.getItemsByState(t); Object(r.each)(n, (function (n) { e.setItemState(n, t, !1) })) }, e.prototype.getItemsByState = function (t) { var e = this, n = this.getItems(); return Object(r.filter)(n, (function (n) { return e.hasState(n, t) })) }, e.prototype.drawLegendContent = function (t) { this.processItems(), this.drawItems(t) }, e.prototype.processItems = function () { var t = this.get("items"); Object(r.each)(t, (function (t) { t.id || (t.id = t.name) })) }, e.prototype.drawItems = function (t) { var e = this, n = this.addGroup(t, { id: this.getElementId("item-container-group"), name: "legend-item-container-group" }), i = this.addGroup(n, { id: this.getElementId("item-group"), name: "legend-item-group" }), o = this.getItemHeight(), a = this.get("itemWidth"), s = this.get("itemSpacing"), u = this.get("itemMarginBottom"), l = this.get("currentPoint"), c = l.x, h = l.y, f = this.get("layout"), p = this.get("items"), d = !1, g = 0, y = this.get("maxWidth"), v = this.get("maxHeight"); Object(r.each)(p, (function (t, n) { var r = e.drawItem(t, n, o, i), p = r.getBBox(), m = a || p.width; m > g && (g = m), "horizontal" === f ? (y && y < l.x + m - c && (d = !0, l.x = c, l.y += o + u), e.moveElementTo(r, l), l.x += m + s) : (v && v < l.y + o + u - h && (d = !0, l.x += g + s, l.y = h, g = 0), e.moveElementTo(r, l), l.y += o + u) })), d && this.get("flipPage") && (this.pageHeight = 0, this.pageWidth = 0, this.totalPagesCnt = 1, this.startX = c, this.startY = h, this.adjustNavigation(t, i)) }, e.prototype.getItemHeight = function () { var t = this.get("itemHeight"); if (!t) { var e = this.get("itemName"); e && (t = e.style.fontSize) } return t }, e.prototype.drawMarker = function (t, e, n, o) { var a = Object(i.__assign)(Object(i.__assign)(Object(i.__assign)({ x: 0, y: o / 2 }, e.style), { symbol: Object(r.get)(n.marker, "symbol", "circle") }), Object(r.get)(n.marker, "style", {})), s = this.addShape(t, { type: "marker", id: this.getElementId("item-" + n.id + "-marker"), name: "legend-item-marker", attrs: a }), u = s.getBBox(); s.attr("x", u.width / 2); var l = s.attr(), c = l.stroke, h = l.fill; return c && s.set("isStroke", !0), h && s.set("isFill", !0), s }, e.prototype.drawItemText = function (t, e, n, r, o, a, s) { var u = n.formatter, l = Object(i.__assign)({ x: a, y: o / 2, text: u ? u(r[e], r, s) : r[e] }, n.style); return this.addShape(t, { type: "text", id: this.getElementId("item-" + r.id + "-" + e), name: "legend-item-" + e, attrs: l }) }, e.prototype.drawItem = function (t, e, n, a) { var s = "item-" + t.id, u = this.addGroup(a, { name: "legend-item-container", id: this.getElementId("item-container-" + s), delegateObject: { item: t, index: e } }), l = this.addGroup(u, { name: "legend-item", id: this.getElementId(s), delegateObject: { item: t, index: e } }), c = this.get("marker"), h = this.get("itemName"), f = this.get("itemValue"), p = this.get("itemBackground"), d = this.getLimitItemWidth(), g = 0; c && (g = this.drawMarker(l, c, t, n).getBBox().maxX + c.spacing); if (h) { var y = this.drawItemText(l, "name", h, t, n, g, e); d && Object(o.a)(!0, y, Object(r.clamp)(d - g, 0, d)), g = y.getBBox().maxX + h.spacing } if (f) { var v = this.drawItemText(l, "value", f, t, n, g, e); d && (f.alignRight ? (v.attr({ textAlign: "right", x: d }), Object(o.a)(!0, v, Object(r.clamp)(d - g, 0, d), "head")) : Object(o.a)(!0, v, Object(r.clamp)(d - g, 0, d))) } if (p) { var m = l.getBBox(); this.addShape(l, { type: "rect", name: "legend-item-background", id: this.getElementId(s + "-background"), attrs: Object(i.__assign)({ x: 0, y: 0, width: m.width, height: n }, p.style) }).toBack() } return this.applyItemStates(t, l), l }, e.prototype.adjustNavigation = function (t, e) { var n = this, i = this.startX, o = this.startY, a = this.get("layout"), s = e.findAll((function (t) { return "legend-item" === t.get("name") })), u = this.get("maxWidth"), l = this.get("maxHeight"), c = this.get("itemWidth"), h = this.get("itemSpacing"), f = this.getItemHeight(), p = this.drawNavigation(t, a, "00/00", 12), d = p.getBBox(), g = { x: i, y: o }, y = 1, v = 0, m = 0, x = 0; if ("horizontal" === a) this.pageHeight = f, Object(r.each)(s, (function (t) { var e = t.getBBox(), r = c || e.width; (v && v < g.x + r + h || u < g.x + r + h + d.width) && (1 === y && (v = g.x + h, n.pageWidth = v, n.moveElementTo(p, { x: u - h - d.width - d.minX, y: g.y + f / 2 - d.height / 2 - d.minY })), y += 1, g.x = i, g.y += f), n.moveElementTo(t, g), t.getParent().setClip({ type: "rect", attrs: { x: g.x, y: g.y, width: r + h, height: f } }), g.x += r + h })); else { var b = this.get("itemMarginBottom"); Object(r.each)(s, (function (t) { var e = t.getBBox(); e.width > m && (m = e.width) })), x = m, m += h, u && (m = Math.min(u, m), x = Math.min(u, x)), this.pageWidth = m, this.pageHeight = l - Math.max(d.height, f + b); var C = Math.floor(this.pageHeight / (f + b)); Object(r.each)(s, (function (t, e) { 0 !== e && e % C == 0 && (y += 1, g.x += m, g.y = o), n.moveElementTo(t, g), t.getParent().setClip({ type: "rect", attrs: { x: g.x, y: g.y, width: m, height: f } }), g.y += f + b })), this.totalPagesCnt = y, this.moveElementTo(p, { x: i + x / 2 - d.width / 2 - d.minX, y: l - d.height - d.minY }) } this.pageHeight && this.pageWidth && e.getParent().setClip({ type: "rect", attrs: { x: this.startX, y: this.startY, width: this.pageWidth, height: this.pageHeight } }), this.totalPagesCnt = y, this.currentPageIndex > this.totalPagesCnt && (this.currentPageIndex = 1), this.updateNavigation(p), e.attr("matrix", this.getCurrentNavigationMatrix()) }, e.prototype.drawNavigation = function (t, e, n, i) { var r = { x: 0, y: 0 }, o = this.addGroup(t, { id: this.getElementId("navigation-group"), name: "legend-navigation" }), a = this.drawArrow(o, r, "navigation-arrow-left", "horizontal" === e ? "up" : "left", i); a.on("click", this.onNavigationBack); var s = a.getBBox(); r.x += s.width + 2; var u = this.addShape(o, { type: "text", id: this.getElementId("navigation-text"), name: "navigation-text", attrs: { x: r.x, y: r.y + i / 2, text: n, fontSize: 12, fill: "#ccc", textBaseline: "middle" } }).getBBox(); return r.x += u.width + 2, this.drawArrow(o, r, "navigation-arrow-right", "horizontal" === e ? "down" : "right", i).on("click", this.onNavigationAfter), o }, e.prototype.updateNavigation = function (t) { var e = this.currentPageIndex + "/" + this.totalPagesCnt, n = t ? t.getChildren()[1] : this.getElementByLocalId("navigation-text"), i = t ? t.findById(this.getElementId("navigation-arrow-left")) : this.getElementByLocalId("navigation-arrow-left"), r = t ? t.findById(this.getElementId("navigation-arrow-right")) : this.getElementByLocalId("navigation-arrow-right"), o = n.getBBox(); n.attr("text", e); var a = n.getBBox(); n.attr("x", n.attr("x") - (a.width - o.width) / 2), i.attr("opacity", 1 === this.currentPageIndex ? .45 : 1), i.attr("cursor", 1 === this.currentPageIndex ? "not-allowed" : "pointer"), r.attr("opacity", this.currentPageIndex === this.totalPagesCnt ? .45 : 1), r.attr("cursor", this.currentPageIndex === this.totalPagesCnt ? "not-allowed" : "pointer") }, e.prototype.drawArrow = function (t, e, n, i, r) { var o = e.x, s = e.y, u = { right: 90 * Math.PI / 180, left: 270 * Math.PI / 180, up: 0, down: 180 * Math.PI / 180 }, l = this.addShape(t, { type: "path", id: this.getElementId(n), name: n, attrs: { path: [["M", o + r / 2, s], ["L", o, s + r], ["L", o + r, s + r], ["Z"]], fill: "#000", cursor: "pointer" } }); return l.attr("matrix", Object(a.e)({ x: o + r / 2, y: s + r / 2 }, u[i])), l }, e.prototype.getCurrentNavigationMatrix = function () { var t = this.currentPageIndex, e = this.pageWidth, n = this.pageHeight, i = "horizontal" === this.get("layout") ? { x: 0, y: n * (1 - t) } : { x: e * (1 - t), y: 0 }; return Object(a.f)(i) }, e.prototype.applyItemStates = function (t, e) { if (this.getItemStates(t).length > 0) { var n = e.getChildren(), i = this.get("itemStates"); Object(r.each)(n, (function (e) { var n = e.get("name").split("-")[2], r = Object(s.a)(t, n, i); r && (e.attr(r), "marker" !== n || e.get("isStroke") && e.get("isFill") || (e.get("isStroke") && e.attr("fill", null), e.get("isFill") && e.attr("stroke", null))) })) } }, e.prototype.getLimitItemWidth = function () { var t = this.get("itemWidth"), e = this.get("maxItemWidth"); return e ? t && (e = t <= e ? t : e) : t && (e = t), e }, e }(h), p = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { type: "continue", min: 0, max: 100, value: null, colors: [], track: {}, rail: {}, label: {}, handler: {}, slidable: !0, tip: null, step: null, maxWidth: null, maxHeight: null, defaultCfg: { label: { align: "rail", spacing: 5, formatter: null, style: { fontSize: 12, fill: u.a.textColor, textBaseline: "middle", fontFamily: u.a.fontFamily } }, handler: { size: 10, style: { fill: "#fff", stroke: "#333" } }, track: {}, rail: { type: "color", size: 20, defaultLength: 100, style: { fill: "#DCDEE2" } }, title: { spacing: 5, style: { fill: u.a.textColor, fontSize: 12, textAlign: "start", textBaseline: "top" } } } }) }, e.prototype.isSlider = function () { return !0 }, e.prototype.getValue = function () { return this.getCurrentValue() }, e.prototype.getRange = function () { return { min: this.get("min"), max: this.get("max") } }, e.prototype.setRange = function (t, e) { this.update({ min: t, max: e }) }, e.prototype.setValue = function (t) { var e = this.getValue(); this.set("value", t); var n = this.get("group"); this.resetTrackClip(), this.get("slidable") && this.resetHandlers(n), this.delegateEmit("valuechanged", { originValue: e, value: t }) }, e.prototype.initEvent = function () { var t = this.get("group"); this.bindSliderEvent(t), this.bindRailEvent(t), this.bindTrackEvent(t) }, e.prototype.drawLegendContent = function (t) { this.drawRail(t), this.drawLabels(t), this.fixedElements(t), this.resetTrack(t), this.resetTrackClip(t), this.get("slidable") && this.resetHandlers(t) }, e.prototype.bindSliderEvent = function (t) { this.bindHandlersEvent(t) }, e.prototype.bindHandlersEvent = function (t) { var e = this; t.on("legend-handler-min:drag", (function (t) { var n = e.getValueByCanvasPoint(t.x, t.y), i = e.getCurrentValue()[1]; i < n && (i = n), e.setValue([n, i]) })), t.on("legend-handler-max:drag", (function (t) { var n = e.getValueByCanvasPoint(t.x, t.y), i = e.getCurrentValue()[0]; i > n && (i = n), e.setValue([i, n]) })) }, e.prototype.bindRailEvent = function (t) { }, e.prototype.bindTrackEvent = function (t) { var e = this, n = null; t.on("legend-track:dragstart", (function (t) { n = { x: t.x, y: t.y } })), t.on("legend-track:drag", (function (t) { if (n) { var i = e.getValueByCanvasPoint(n.x, n.y), r = e.getValueByCanvasPoint(t.x, t.y), o = e.getCurrentValue(), a = o[1] - o[0], s = e.getRange(), u = r - i; u < 0 ? o[0] + u > s.min ? e.setValue([o[0] + u, o[1] + u]) : e.setValue([s.min, s.min + a]) : u > 0 && (u > 0 && o[1] + u < s.max ? e.setValue([o[0] + u, o[1] + u]) : e.setValue([s.max - a, s.max])), n = { x: t.x, y: t.y } } })), t.on("legend-track:dragend", (function (t) { n = null })) }, e.prototype.drawLabels = function (t) { this.drawLabel("min", t), this.drawLabel("max", t) }, e.prototype.drawLabel = function (t, e) { var n = this.get("label"), r = n.style, o = n.align, a = this.get(t), s = this.getLabelAlignAttrs(t, o), u = "label-" + t; this.addShape(e, { type: "text", id: this.getElementId(u), name: "legend-label-" + t, attrs: Object(i.__assign)(Object(i.__assign)({ x: 0, y: 0, text: a }, r), s) }) }, e.prototype.getLabelAlignAttrs = function (t, e) { var n = "center", i = "middle"; return this.isVertical() ? (n = "start", i = "rail" !== e ? "min" === t ? "top" : "bottom" : "top") : "rail" !== e ? (i = "top", n = "min" === t ? "start" : "end") : (n = "start", i = "middle"), { textAlign: n, textBaseline: i } }, e.prototype.getRailPath = function (t, e, n, i) { var r = this.get("rail"), o = r.size, a = r.defaultLength, s = r.type, u = this.isVertical(), l = n, c = i; l || (l = u ? o : a), c || (c = u ? a : o); var h = []; return "color" === s ? (h.push(["M", t, e]), h.push(["L", t + l, e]), h.push(["L", t + l, e + c]), h.push(["L", t, e + c]), h.push(["Z"])) : (h.push(["M", t + l, e]), h.push(["L", t + l, e + c]), h.push(["L", t, e + c]), h.push(["Z"])), h }, e.prototype.drawRail = function (t) { var e = this.get("rail").style; this.addShape(t, { type: "path", id: this.getElementId("rail"), name: "legend-rail", attrs: Object(i.__assign)({ path: this.getRailPath(0, 0) }, e) }) }, e.prototype.getTrackColor = function (t) { var e, n = t.length; if (!n) return null; if (1 === n) return t[0]; e = this.isVertical() ? "l(90)" : "l(0)"; for (var i = 0; i < n; i++) { e += " " + i / (n - 1) + ":" + t[i] } return e }, e.prototype.getTrackPath = function (t) { var e = this.getRailShape(t).attr("path"); return Object(r.clone)(e) }, e.prototype.getClipTrackAttrs = function (t) { var e, n, i, r, o = this.getCurrentValue(), a = o[0], s = o[1], u = this.getRailBBox(t), l = this.getPointByValue(a, t), c = this.getPointByValue(s, t); return this.isVertical() ? (e = u.minX, n = l.y, i = u.width, r = c.y - l.y) : (e = l.x, n = u.minY, i = c.x - l.x, r = u.height), { x: e, y: n, width: i, height: r } }, e.prototype.getTrackAttrs = function (t) { var e = this.get("track"), n = this.get("colors"), i = this.getTrackPath(t); return Object(r.mix)({ path: i, fill: this.getTrackColor(n) }, e.style) }, e.prototype.resetTrackClip = function (t) { var e = t || this.get("group"), n = this.getElementId("track"), i = e.findById(n), r = i.getClip(), o = this.getClipTrackAttrs(t); r ? r.attr(o) : i.setClip({ type: "rect", attrs: o }) }, e.prototype.resetTrack = function (t) { var e = this.getElementId("track"), n = t.findById(e), i = this.getTrackAttrs(t); n ? n.attr(i) : this.addShape(t, { type: "path", id: e, draggable: this.get("slidable"), name: "legend-track", attrs: i }) }, e.prototype.getPointByValue = function (t, e) { var n = this.getRange(), i = n.min, r = (t - i) / (n.max - i), o = this.getRailBBox(e), a = { x: 0, y: 0 }; return this.isVertical() ? (a.x = o.minX + o.width / 2, a.y = Object(c.g)(o.minY, o.maxY, r)) : (a.x = Object(c.g)(o.minX, o.maxX, r), a.y = o.minY + o.height / 2), a }, e.prototype.getRailShape = function (t) { return (t || this.get("group")).findById(this.getElementId("rail")) }, e.prototype.getRailBBox = function (t) { return this.getRailShape(t).getBBox() }, e.prototype.getRailCanvasBBox = function () { return this.get("group").findById(this.getElementId("rail")).getCanvasBBox() }, e.prototype.isVertical = function () { return "vertical" === this.get("layout") }, e.prototype.getValueByCanvasPoint = function (t, e) { var n, i = this.getRange(), r = i.min, o = i.max, a = this.getRailCanvasBBox(), s = this.isVertical(), u = this.get("step"); n = s ? (e - a.minY) / a.height : (t - a.minX) / a.width; var l = Object(c.g)(r, o, n); u && (l = r + Math.round((l - r) / u) * u); return l > o && (l = o), l < r && (l = r), l }, e.prototype.getCurrentValue = function () { var t = this.get("value"); return t || (t = [this.get("min"), this.get("max")]), t }, e.prototype.resetHandlers = function (t) { var e = this.getCurrentValue(), n = e[0], i = e[1]; this.resetHandler(t, "min", n), this.resetHandler(t, "max", i) }, e.prototype.getHandlerPath = function (t, e) { var n = this.isVertical(), i = [], r = t.size, o = e.x, a = e.y, s = 1.4 * r, u = r / 2, l = r / 6; if (n) { var c = o + .4 * s; i.push(["M", o, a]), i.push(["L", c, a + u]), i.push(["L", o + s, a + u]), i.push(["L", o + s, a - u]), i.push(["L", c, a - u]), i.push(["Z"]), i.push(["M", c, a + l]), i.push(["L", o + s - 2, a + l]), i.push(["M", c, a - l]), i.push(["L", o + s - 2, a - l]) } else { var h = a + .4 * s; i.push(["M", o, a]), i.push(["L", o - u, h]), i.push(["L", o - u, a + s]), i.push(["L", o + u, a + s]), i.push(["L", o + u, h]), i.push(["Z"]), i.push(["M", o - l, h]), i.push(["L", o - l, a + s - 2]), i.push(["M", o + l, h]), i.push(["L", o + l, a + s - 2]) } return i }, e.prototype.resetHandler = function (t, e, n) { var r = this.getPointByValue(n, t), o = this.get("handler"), a = this.getHandlerPath(o, r), s = this.getElementId("handler-" + e), u = t.findById(s), l = this.isVertical(); u ? u.attr("path", a) : this.addShape(t, { type: "path", name: "legend-handler-" + e, draggable: !0, id: s, attrs: Object(i.__assign)(Object(i.__assign)({ path: a }, o.style), { cursor: l ? "ns-resize" : "ew-resize" }) }) }, e.prototype.fixedElements = function (t) { var e = t.findById(this.getElementId("rail")), n = t.findById(this.getElementId("label-min")), i = t.findById(this.getElementId("label-max")), r = this.getDrawPoint(); this.isVertical() ? this.fixedVertail(n, i, e, r) : this.fixedHorizontal(n, i, e, r) }, e.prototype.fitRailLength = function (t, e, n, i) { var o = this.isVertical() ? "height" : "width", a = this.get("label"), s = a.align, u = a.spacing, l = this.get("max" + Object(r.upperFirst)(o)); if (l) { var c = ("rail" === s ? n[o] + t[o] + e[o] + 2 * u : n[o]) - l; c > 0 && this.changeRailLength(i, o, n[o] - c) } }, e.prototype.changeRailLength = function (t, e, n) { var i, r = t.getBBox(); i = "height" === e ? this.getRailPath(r.x, r.y, r.width, n) : this.getRailPath(r.x, r.y, n, r.height), t.attr("path", i) }, e.prototype.changeRailPosition = function (t, e, n) { var i = t.getBBox(), r = this.getRailPath(e, n, i.width, i.height); t.attr("path", r) }, e.prototype.fixedHorizontal = function (t, e, n, i) { var r = this.get("label"), o = r.align, a = r.spacing, s = n.getBBox(), u = t.getBBox(), l = e.getBBox(), c = s.height; this.fitRailLength(u, l, s, n), s = n.getBBox(), "rail" === o ? (t.attr({ x: i.x, y: i.y + c / 2 }), this.changeRailPosition(n, i.x + u.width + a, i.y), e.attr({ x: i.x + u.width + s.width + 2 * a, y: i.y + c / 2 })) : "top" === o ? (t.attr({ x: i.x, y: i.y }), e.attr({ x: i.x + s.width, y: i.y }), this.changeRailPosition(n, i.x, i.y + u.height + a)) : (this.changeRailPosition(n, i.x, i.y), t.attr({ x: i.x, y: i.y + s.height + a }), e.attr({ x: i.x + s.width, y: i.y + s.height + a })) }, e.prototype.fixedVertail = function (t, e, n, i) { var r = this.get("label"), o = r.align, a = r.spacing, s = n.getBBox(), u = t.getBBox(), l = e.getBBox(); if (this.fitRailLength(u, l, s, n), s = n.getBBox(), "rail" === o) t.attr({ x: i.x, y: i.y }), this.changeRailPosition(n, i.x, i.y + u.height + a), e.attr({ x: i.x, y: i.y + u.height + s.height + 2 * a }); else if ("right" === o) t.attr({ x: i.x + s.width + a, y: i.y }), this.changeRailPosition(n, i.x, i.y), e.attr({ x: i.x + s.width + a, y: i.y + s.height }); else { var c = Math.max(u.width, l.width); t.attr({ x: i.x, y: i.y }), this.changeRailPosition(n, i.x + c + a, i.y), e.attr({ x: i.x, y: i.y + s.height }) } }, e }(h) }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "Html", (function () { return p })); var i, r = n(1), o = n(51), a = n(9), s = n(0), u = n(39), l = n(2), c = n(18), h = n(3), f = ((i = {})["" + c.CONTAINER_CLASS] = { position: "absolute", visibility: "visible", zIndex: 8, transition: "visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)", backgroundColor: "rgba(255, 255, 255, 0.9)", boxShadow: "0px 0px 10px #aeaeae", borderRadius: "3px", color: "rgb(87, 87, 87)", fontSize: "12px", fontFamily: h.a.fontFamily, lineHeight: "20px", padding: "10px 10px 6px 10px" }, i["" + c.TITLE_CLASS] = { marginBottom: "4px" }, i["" + c.LIST_CLASS] = { margin: "0px", listStyleType: "none", padding: "0px" }, i["" + c.LIST_ITEM_CLASS] = { listStyleType: "none", marginBottom: "4px" }, i["" + c.MARKER_CLASS] = { width: "8px", height: "8px", borderRadius: "50%", display: "inline-block", marginRight: "8px" }, i["" + c.VALUE_CLASS] = { display: "inline-block", float: "right", marginLeft: "30px" }, i["" + c.CROSSHAIR_X] = { position: "absolute", width: "1px", backgroundColor: "rgba(0, 0, 0, 0.25)" }, i["" + c.CROSSHAIR_Y] = { position: "absolute", height: "1px", backgroundColor: "rgba(0, 0, 0, 0.25)" }, i); var p = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(r.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(r.__assign)(Object(r.__assign)({}, e), { name: "tooltip", type: "html", x: 0, y: 0, items: [], customContent: null, containerTpl: '<div class="' + c.CONTAINER_CLASS + '"><div class="' + c.TITLE_CLASS + '"></div><ul class="' + c.LIST_CLASS + '"></ul></div>', itemTpl: '<li class="' + c.LIST_ITEM_CLASS + '" data-index={index}>\n          <span class="' + c.MARKER_CLASS + '" style="background:{color}"></span>\n          <span class="' + c.NAME_CLASS + '">{name}</span>:\n          <span class="' + c.VALUE_CLASS + '">{value}</span>\n        </li>', xCrosshairTpl: '<div class="' + c.CROSSHAIR_X + '"></div>', yCrosshairTpl: '<div class="' + c.CROSSHAIR_Y + '"></div>', title: null, showTitle: !0, region: null, crosshairsRegion: null, containerClassName: c.CONTAINER_CLASS, crosshairs: null, offset: 10, position: "right", domStyles: null, defaultStyles: f }) }, e.prototype.render = function () { this.get("customContent") ? this.renderCustomContent() : (this.resetTitle(), this.renderItems()), this.resetPosition() }, e.prototype.clear = function () { this.clearCrosshairs(), this.setTitle(""), this.clearItemDoms() }, e.prototype.show = function () { var t = this.getContainer(); t && !this.destroyed && (this.set("visible", !0), Object(a.modifyCSS)(t, { visibility: "visible" }), this.setCrossHairsVisible(!0)) }, e.prototype.hide = function () { var t = this.getContainer(); t && !this.destroyed && (this.set("visible", !1), Object(a.modifyCSS)(t, { visibility: "hidden" }), this.setCrossHairsVisible(!1)) }, e.prototype.getLocation = function () { return { x: this.get("x"), y: this.get("y") } }, e.prototype.setLocation = function (t) { this.set("x", t.x), this.set("y", t.y), this.resetPosition() }, e.prototype.setCrossHairsVisible = function (t) { var e = t ? "" : "none", n = this.get("xCrosshairDom"), i = this.get("yCrosshairDom"); n && Object(a.modifyCSS)(n, { display: e }), i && Object(a.modifyCSS)(i, { display: e }) }, e.prototype.initContainer = function () { if (t.prototype.initContainer.call(this), this.get("customContent")) { this.get("container") && this.get("container").remove(); var e = this.getHtmlContentNode(); this.get("parent").appendChild(e), this.set("container", e), this.resetStyles(), this.applyStyles() } }, e.prototype.updateInner = function (e) { var n, i, r; this.get("customContent") ? this.renderCustomContent() : (n = e, i = ["title", "showTitle"], r = !1, Object(s.each)(i, (function (t) { if (Object(s.hasKey)(n, t)) return r = !0, !1 })), r && this.resetTitle(), Object(s.hasKey)(e, "items") && this.renderItems()), t.prototype.updateInner.call(this, e) }, e.prototype.initDom = function () { this.cacheDoms() }, e.prototype.removeDom = function () { t.prototype.removeDom.call(this), this.clearCrosshairs() }, e.prototype.resetPosition = function () { var t, e = this.get("x"), n = this.get("y"), i = this.get("offset"), r = this.getOffset(), o = r.offsetX, s = r.offsetY, u = this.get("position"), c = this.get("region"), h = this.getContainer(), f = this.getBBox(), p = f.width, d = f.height; c && (t = Object(l.k)(c)); var g = function (t, e, n, i, r, o, a) { var s = function (t, e, n, i, r, o) { var a = t, s = e; switch (o) { case "left": a = t - i - n, s = e - r / 2; break; case "right": a = t + n, s = e - r / 2; break; case "top": a = t - i / 2, s = e - r - n; break; case "bottom": a = t - i / 2, s = e + n; break; default: a = t + n, s = e - r - n }return { x: a, y: s } }(t, e, n, i, r, o); if (a) { var u = function (t, e, n, i, r) { return { left: t < r.x, right: t + n > r.x + r.width, top: e < r.y, bottom: e + i > r.y + r.height } }(s.x, s.y, i, r, a); "auto" === o ? (u.right && (s.x = Math.max(0, t - i - n)), u.top && (s.y = Math.max(0, e - r - n))) : "top" === o || "bottom" === o ? (u.left && (s.x = a.x), u.right && (s.x = a.x + a.width - i), "top" === o && u.top && (s.y = e + n), "bottom" === o && u.bottom && (s.y = e - r - n)) : (u.top && (s.y = a.y), u.bottom && (s.y = a.y + a.height - r), "left" === o && u.left && (s.x = t + n), "right" === o && u.right && (s.x = t - i - n)) } return s }(e, n, i, p, d, u, t); Object(a.modifyCSS)(h, { left: Object(l.l)(g.x + o), top: Object(l.l)(g.y + s) }), this.resetCrosshairs() }, e.prototype.renderCustomContent = function () { var t = this.getHtmlContentNode(), e = this.get("parent"), n = this.get("container"); n && n.parentNode === e ? e.replaceChild(t, n) : e.appendChild(t), this.set("container", t), this.resetStyles(), this.applyStyles() }, e.prototype.getHtmlContentNode = function () { var t, e = this.get("customContent"); if (e) { var n = e(this.get("title"), this.get("items")); t = Object(s.isElement)(n) ? n : Object(a.createDom)(n) } return t }, e.prototype.cacheDoms = function () { var t = this.getContainer(), e = t.getElementsByClassName(c.TITLE_CLASS)[0], n = t.getElementsByClassName(c.LIST_CLASS)[0]; this.set("titleDom", e), this.set("listDom", n) }, e.prototype.resetTitle = function () { var t = this.get("title"); this.get("showTitle") && t ? this.setTitle(t) : this.setTitle("") }, e.prototype.setTitle = function (t) { var e = this.get("titleDom"); e && (e.innerText = t) }, e.prototype.resetCrosshairs = function () { var t = this.get("crosshairsRegion"), e = this.get("crosshairs"); if (t && e) { var n = Object(l.k)(t), i = this.get("xCrosshairDom"), r = this.get("yCrosshairDom"); "x" === e ? (this.resetCrosshair("x", n), r && (r.remove(), this.set("yCrosshairDom", null))) : "y" === e ? (this.resetCrosshair("y", n), i && (i.remove(), this.set("xCrosshairDom", null))) : (this.resetCrosshair("x", n), this.resetCrosshair("y", n)), this.setCrossHairsVisible(this.get("visible")) } else this.clearCrosshairs() }, e.prototype.resetCrosshair = function (t, e) { var n = this.checkCrosshair(t), i = this.get(t); "x" === t ? Object(a.modifyCSS)(n, { left: Object(l.l)(i), top: Object(l.l)(e.y), height: Object(l.l)(e.height) }) : Object(a.modifyCSS)(n, { top: Object(l.l)(i), left: Object(l.l)(e.x), width: Object(l.l)(e.width) }) }, e.prototype.checkCrosshair = function (t) { var e = t + "CrosshairDom", n = t + "CrosshairTpl", i = "CROSSHAIR_" + t.toUpperCase(), r = c[i], o = this.get(e), s = this.get("parent"); return o || (o = Object(a.createDom)(this.get(n)), this.applyStyle(r, o), s.appendChild(o), this.set(e, o)), o }, e.prototype.renderItems = function () { this.clearItemDoms(); var t = this.get("items"), e = this.get("itemTpl"), n = this.get("listDom"); n && (Object(s.each)(t, (function (t) { var i = o.default.toCSSGradient(t.color), u = Object(r.__assign)(Object(r.__assign)({}, t), { color: i }), l = Object(s.substitute)(e, u), c = Object(a.createDom)(l); n.appendChild(c) })), this.applyChildrenStyles(n, this.get("domStyles"))) }, e.prototype.clearItemDoms = function () { this.get("listDom") && Object(l.a)(this.get("listDom")) }, e.prototype.clearCrosshairs = function () { var t = this.get("xCrosshairDom"), e = this.get("yCrosshairDom"); t && t.remove(), e && e.remove(), this.set("xCrosshairDom", null), this.set("yCrosshairDom", null) }, e }(u.a) }, function (t, e, n) { "use strict"; var i = n(1), r = n(7); function o(t, e, n) { var i = t.getTotalMatrix(); if (i) { var o = function (t, e) { if (e) { var n = Object(r.invert)(e); return Object(r.multiplyVec2)(n, t) } return t }([e, n, 1], i); return [o[0], o[1]] } return [e, n] } function a(t, e, n) { if (t.isCanvas && t.isCanvas()) return !0; if (!Object(r.isAllowCapture)(t) || !1 === t.cfg.isInView) return !1; if (t.cfg.clipShape) { var i = o(t, e, n), a = i[0], s = i[1]; if (t.isClipped(a, s)) return !1 } var u = t.cfg.cacheCanvasBBox || t.getCanvasBBox(); return e >= u.minX && e <= u.maxX && n >= u.minY && n <= u.maxY } var s = n(36), u = n(53), l = n(5), c = n(20), h = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.__extends)(e, t), e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return e.renderer = "canvas", e.autoDraw = !0, e.localRefresh = !0, e.refreshElements = [], e.clipView = !0, e.quickHit = !1, e }, e.prototype.onCanvasChange = function (t) { "attr" !== t && "sort" !== t && "changeSize" !== t || (this.set("refreshElements", [this]), this.draw()) }, e.prototype.getShapeBase = function () { return s }, e.prototype.getGroupBase = function () { return u.a }, e.prototype.getPixelRatio = function () { var t = this.get("pixelRatio") || Object(l.d)(); return t >= 1 ? Math.ceil(t) : 1 }, e.prototype.getViewRange = function () { return { minX: 0, minY: 0, maxX: this.cfg.width, maxY: this.cfg.height } }, e.prototype.createDom = function () { var t = document.createElement("canvas"), e = t.getContext("2d"); return this.set("context", e), t }, e.prototype.setDOMSize = function (e, n) { t.prototype.setDOMSize.call(this, e, n); var i = this.get("context"), r = this.get("el"), o = this.getPixelRatio(); r.width = o * e, r.height = o * n, o > 1 && i.scale(o, o) }, e.prototype.clear = function () { t.prototype.clear.call(this), this._clearFrame(); var e = this.get("context"), n = this.get("el"); e.clearRect(0, 0, n.width, n.height) }, e.prototype.getShape = function (e, n) { return this.get("quickHit") ? function t(e, n, i) { if (!a(e, n, i)) return null; for (var r = null, s = e.getChildren(), u = s.length - 1; u >= 0; u--) { var l = s[u]; if (l.isGroup()) r = t(l, n, i); else if (a(l, n, i)) { var c = l, h = o(l, n, i), f = h[0], p = h[1]; c.isInShape(f, p) && (r = l) } if (r) break } return r }(this, e, n) : t.prototype.getShape.call(this, e, n, null) }, e.prototype._getRefreshRegion = function () { var t, e = this.get("refreshElements"), n = this.getViewRange(); e.length && e[0] === this ? t = n : (t = Object(c.f)(e)) && (t.minX = Math.floor(t.minX), t.minY = Math.floor(t.minY), t.maxX = Math.ceil(t.maxX), t.maxY = Math.ceil(t.maxY), t.maxY += 1, this.get("clipView") && (t = Object(c.g)(t, n))); return t }, e.prototype.refreshElement = function (t) { this.get("refreshElements").push(t) }, e.prototype._clearFrame = function () { var t = this.get("drawFrame"); t && (Object(l.a)(t), this.set("drawFrame", null), this.set("refreshElements", [])) }, e.prototype.draw = function () { var t = this.get("drawFrame"); this.get("autoDraw") && t || this._startDraw() }, e.prototype._drawAll = function () { var t = this.get("context"), e = this.get("el"), n = this.getChildren(); t.clearRect(0, 0, e.width, e.height), Object(c.a)(t, this), Object(c.d)(t, n), this.set("refreshElements", []) }, e.prototype._drawRegion = function () { var t = this.get("context"), e = this.get("refreshElements"), n = this.getChildren(), i = this._getRefreshRegion(); i ? (t.clearRect(i.minX, i.minY, i.maxX - i.minX, i.maxY - i.minY), t.save(), t.beginPath(), t.rect(i.minX, i.minY, i.maxX - i.minX, i.maxY - i.minY), t.clip(), Object(c.a)(t, this), Object(c.b)(this, n, i), Object(c.d)(t, n, i), t.restore()) : e.length && Object(c.c)(e), Object(l.c)(e, (function (t) { t.get("hasChanged") && t.set("hasChanged", !1) })), this.set("refreshElements", []) }, e.prototype._startDraw = function () { var t = this, e = this.get("drawFrame"); e || (e = Object(l.n)((function () { t.get("localRefresh") ? t._drawRegion() : t._drawAll(), t.set("drawFrame", null) })), this.set("drawFrame", e)) }, e.prototype.skipDraw = function () { }, e }(r.AbstractCanvas); e.a = h }, function (t, e, n) { "use strict"; n.d(e, "a", (function () { return u })); var i = n(1), r = n(9), o = n(0), a = n(8), s = { default: { trackColor: "rgba(0,0,0,0)", thumbColor: "rgba(0,0,0,0.15)", size: 8, lineCap: "round" }, hover: { thumbColor: "rgba(0,0,0,0.2)" } }, u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.clearEvents = o.noop, e.onStartEvent = function (t) { return function (n) { e.isMobile = t, n.originalEvent.preventDefault(); var i = t ? Object(o.get)(n.originalEvent, "touches.0.clientX") : n.clientX, r = t ? Object(o.get)(n.originalEvent, "touches.0.clientY") : n.clientY; e.startPos = e.cfg.isHorizontal ? i : r, e.bindLaterEvent() } }, e.bindLaterEvent = function () { var t = e.getContainerDOM(), n = []; n = e.isMobile ? [Object(r.addEventListener)(t, "touchmove", e.onMouseMove), Object(r.addEventListener)(t, "touchend", e.onMouseUp), Object(r.addEventListener)(t, "touchcancel", e.onMouseUp)] : [Object(r.addEventListener)(t, "mousemove", e.onMouseMove), Object(r.addEventListener)(t, "mouseup", e.onMouseUp), Object(r.addEventListener)(t, "mouseleave", e.onMouseUp)], e.clearEvents = function () { n.forEach((function (t) { t.remove() })) } }, e.onMouseMove = function (t) { var n = e.cfg, i = n.isHorizontal, r = n.thumbOffset; t.preventDefault(); var a = e.isMobile ? Object(o.get)(t, "touches.0.clientX") : t.clientX, s = e.isMobile ? Object(o.get)(t, "touches.0.clientY") : t.clientY, u = i ? a : s, l = u - e.startPos; e.startPos = u, e.updateThumbOffset(r + l) }, e.onMouseUp = function (t) { t.preventDefault(), e.clearEvents() }, e.onTrackClick = function (t) { var n = e.cfg, i = n.isHorizontal, r = n.x, o = n.y, a = n.thumbLen, s = e.getContainerDOM().getBoundingClientRect(), u = t.clientX, l = t.clientY, c = i ? u - s.left - r - a / 2 : l - s.top - o - a / 2, h = e.validateRange(c); e.updateThumbOffset(h) }, e.onThumbMouseOver = function () { var t = e.cfg.theme.hover.thumbColor; e.getElementByLocalId("thumb").attr("stroke", t), e.draw() }, e.onThumbMouseOut = function () { var t = e.cfg.theme.default.thumbColor; e.getElementByLocalId("thumb").attr("stroke", t), e.draw() }, e } return Object(i.__extends)(e, t), e.prototype.setRange = function (t, e) { this.set("minLimit", t), this.set("maxLimit", e); var n = this.getValue(), i = Object(o.clamp)(n, t, e); n === i || this.get("isInit") || this.setValue(i) }, e.prototype.getRange = function () { return { min: this.get("minLimit") || 0, max: this.get("maxLimit") || 1 } }, e.prototype.setValue = function (t) { var e = this.getRange(), n = this.getValue(); this.update({ thumbOffset: (this.get("trackLen") - this.get("thumbLen")) * Object(o.clamp)(t, e.min, e.max) }), this.delegateEmit("valuechange", { originalValue: n, value: this.getValue() }) }, e.prototype.getValue = function () { return Object(o.clamp)(this.get("thumbOffset") / (this.get("trackLen") - this.get("thumbLen")), 0, 1) }, e.prototype.getDefaultCfg = function () { var e = t.prototype.getDefaultCfg.call(this); return Object(i.__assign)(Object(i.__assign)({}, e), { name: "scrollbar", isHorizontal: !0, minThumbLen: 20, thumbOffset: 0, theme: s }) }, e.prototype.renderInner = function (t) { this.renderTrackShape(t), this.renderThumbShape(t) }, e.prototype.applyOffset = function () { this.moveElementTo(this.get("group"), { x: this.get("x"), y: this.get("y") }) }, e.prototype.initEvent = function () { this.bindEvents() }, e.prototype.renderTrackShape = function (t) { var e = this.cfg, n = e.trackLen, i = e.theme, r = (void 0 === i ? { default: {} } : i).default, o = r.lineCap, a = r.trackColor, s = r.size, u = this.get("isHorizontal") ? { x1: 0 + s / 2, y1: s / 2, x2: n - s / 2, y2: s / 2, lineWidth: s, stroke: a, lineCap: o } : { x1: s / 2, y1: 0 + s / 2, x2: s / 2, y2: n - s / 2, lineWidth: s, stroke: a, lineCap: o }; return this.addShape(t, { id: this.getElementId("track"), name: "track", type: "line", attrs: u }) }, e.prototype.renderThumbShape = function (t) { var e = this.cfg, n = e.thumbOffset, i = e.thumbLen, r = e.theme, o = (void 0 === r ? { default: {} } : r).default, a = o.size, s = o.lineCap, u = o.thumbColor, l = this.get("isHorizontal") ? { x1: n + a / 2, y1: a / 2, x2: n + i - a / 2, y2: a / 2, lineWidth: a, stroke: u, lineCap: s, cursor: "default" } : { x1: a / 2, y1: n + a / 2, x2: a / 2, y2: n + i - a / 2, lineWidth: a, stroke: u, lineCap: s, cursor: "default" }; return this.addShape(t, { id: this.getElementId("thumb"), name: "thumb", type: "line", attrs: l }) }, e.prototype.bindEvents = function () { var t = this.get("group"); t.on("mousedown", this.onStartEvent(!1)), t.on("mouseup", this.onMouseUp), t.on("touchstart", this.onStartEvent(!0)), t.on("touchend", this.onMouseUp), t.findById(this.getElementId("track")).on("click", this.onTrackClick); var e = t.findById(this.getElementId("thumb")); e.on("mouseover", this.onThumbMouseOver), e.on("mouseout", this.onThumbMouseOut) }, e.prototype.getContainerDOM = function () { var t = this.get("container"), e = t && t.get("canvas"); return e && e.get("container") }, e.prototype.validateRange = function (t) { var e = this.cfg, n = e.thumbLen, i = e.trackLen, r = t; return t + n > i ? r = i - n : t + n < n && (r = 0), r }, e.prototype.draw = function () { var t = this.get("container"), e = t && t.get("canvas"); e && e.draw() }, e.prototype.updateThumbOffset = function (t) { var e = this.cfg, n = e.thumbOffset, i = e.isHorizontal, r = e.thumbLen, o = e.size, a = this.validateRange(t); if (a !== n) { var s = this.getElementByLocalId("thumb"); i ? s.attr({ x1: a + o / 2, x2: a + r - o / 2 }) : s.attr({ y1: a + o / 2, y2: a + r - o / 2 }), this.emitOffsetChange(a) } }, e.prototype.emitOffsetChange = function (t) { var e = this.cfg, n = e.thumbOffset, i = e.trackLen, r = e.thumbLen; this.cfg.thumbOffset = t, this.emit("scrollchange", { thumbOffset: t, ratio: Object(o.clamp)(t / (i - r), 0, 1) }), this.delegateEmit("valuechange", { originalValue: n, value: t }) }, e }(a.a) }, function (t, e, n) { "use strict"; var i = n(10), r = n(0), o = n(40), a = function (t) { function e(e) { var n = t.call(this, e) || this; n.cacheMap = {}, n.adjustDataArray = [], n.mergeData = []; var i = e.marginRatio, r = void 0 === i ? o.d : i, a = e.dodgeRatio, s = void 0 === a ? o.b : a, u = e.dodgeBy, l = e.intervalPadding, c = e.dodgePadding, h = e.xDimensionLength, f = e.groupNum, p = e.defaultSize, d = e.maxColumnWidth, g = e.minColumnWidth, y = e.columnWidthRatio; return n.marginRatio = r, n.dodgeRatio = s, n.dodgeBy = u, n.intervalPadding = l, n.dodgePadding = c, n.xDimensionLegenth = h, n.groupNum = f, n.defaultSize = p, n.maxColumnWidth = d, n.minColumnWidth = g, n.columnWidthRatio = y, n } return Object(i.b)(e, t), e.prototype.process = function (t) { var e = r.clone(t), n = r.flatten(e), i = this.dodgeBy, o = i ? r.group(n, i) : e; return this.cacheMap = {}, this.adjustDataArray = o, this.mergeData = n, this.adjustData(o, n), this.adjustDataArray = [], this.mergeData = [], e }, e.prototype.adjustDim = function (t, e, n, i) { var o = this, a = this.getDistribution(t), s = this.groupData(n, t); return r.each(s, (function (n, s) { var u; u = 1 === e.length ? { pre: e[0] - 1, next: e[0] + 1 } : o.getAdjustRange(t, parseFloat(s), e), r.each(n, (function (e) { var n = e[t], r = a[n], s = r.indexOf(i); e[t] = o.getDodgeOffset(u, s, r.length) })) })), [] }, e.prototype.getDodgeOffset = function (t, e, n) { var i, o = this.dodgeRatio, a = this.marginRatio, s = this.intervalPadding, u = this.dodgePadding, l = t.pre, c = t.next, h = c - l; if (!r.isNil(s) && r.isNil(u) && s >= 0) i = l + this.getIntervalOnlyOffset(n, e); else if (!r.isNil(u) && r.isNil(s) && u >= 0) { i = l + this.getDodgeOnlyOffset(n, e) } else if (!r.isNil(s) && !r.isNil(u) && s >= 0 && u >= 0) { i = l + this.getIntervalAndDodgeOffset(n, e) } else { var f = h * o / n, p = a * f; i = (l + c) / 2 + (.5 * (h - n * f - (n - 1) * p) + ((e + 1) * f + e * p) - .5 * f - .5 * h) } return i }, e.prototype.getIntervalOnlyOffset = function (t, e) { var n = this, i = n.defaultSize, o = n.intervalPadding, a = n.xDimensionLegenth, s = n.groupNum, u = n.dodgeRatio, l = n.maxColumnWidth, c = n.minColumnWidth, h = n.columnWidthRatio, f = o / a, p = (1 - (s - 1) * f) / s * u / (t - 1), d = ((1 - f * (s - 1)) / s - p * (t - 1)) / t; if (d = r.isNil(h) ? d : 1 / s / t * h, !r.isNil(l)) { var g = l / a; d = Math.min(d, g) } if (!r.isNil(c)) { var y = c / a; d = Math.max(d, y) } return ((.5 + e) * (d = i ? i / a : d) + e * (p = ((1 - (s - 1) * f) / s - t * d) / (t - 1)) + .5 * f) * s - f / 2 }, e.prototype.getDodgeOnlyOffset = function (t, e) { var n = this, i = n.defaultSize, o = n.dodgePadding, a = n.xDimensionLegenth, s = n.groupNum, u = n.marginRatio, l = n.maxColumnWidth, c = n.minColumnWidth, h = n.columnWidthRatio, f = o / a, p = 1 * u / (s - 1), d = ((1 - p * (s - 1)) / s - f * (t - 1)) / t; if (d = h ? 1 / s / t * h : d, !r.isNil(l)) { var g = l / a; d = Math.min(d, g) } if (!r.isNil(c)) { var y = c / a; d = Math.max(d, y) } return ((.5 + e) * (d = i ? i / a : d) + e * f + .5 * (p = (1 - (d * t + f * (t - 1)) * s) / (s - 1))) * s - p / 2 }, e.prototype.getIntervalAndDodgeOffset = function (t, e) { var n = this.intervalPadding, i = this.dodgePadding, r = this.xDimensionLegenth, o = this.groupNum, a = n / r, s = i / r; return ((.5 + e) * (((1 - a * (o - 1)) / o - s * (t - 1)) / t) + e * s + .5 * a) * o - a / 2 }, e.prototype.getDistribution = function (t) { var e = this.adjustDataArray, n = this.cacheMap, i = n[t]; return i || (i = {}, r.each(e, (function (e, n) { var o = r.valuesOfKey(e, t); o.length || o.push(0), r.each(o, (function (t) { i[t] || (i[t] = []), i[t].push(n) })) })), n[t] = i), i }, e }(n(29).a); e.a = a }, function (t, e, n) { "use strict"; var i = n(10), r = n(0), o = n(40); var a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.b)(e, t), e.prototype.process = function (t) { var e = r.clone(t), n = r.flatten(e); return this.adjustData(e, n), e }, e.prototype.adjustDim = function (t, e, n) { var i = this, o = this.groupData(n, t); return r.each(o, (function (n, r) { return i.adjustGroup(n, t, parseFloat(r), e) })) }, e.prototype.getAdjustOffset = function (t) { var e, n = t.pre, i = t.next, r = (i - n) * o.c; return (i - r - (e = n + r)) * Math.random() + e }, e.prototype.adjustGroup = function (t, e, n, i) { var o = this, a = this.getAdjustRange(e, n, i); return r.each(t, (function (t) { t[e] = o.getAdjustOffset(a) })), t }, e }(n(29).a); e.a = a }, function (t, e, n) { "use strict"; var i = n(10), r = n(0), o = n(29), a = r.Cache, s = function (t) { function e(e) { var n = t.call(this, e) || this, i = e.adjustNames, r = void 0 === i ? ["y"] : i, o = e.height, a = void 0 === o ? NaN : o, s = e.size, u = void 0 === s ? 10 : s, l = e.reverseOrder, c = void 0 !== l && l; return n.adjustNames = r, n.height = a, n.size = u, n.reverseOrder = c, n } return Object(i.b)(e, t), e.prototype.process = function (t) { var e = this.yField, n = this.reverseOrder, i = e ? this.processStack(t) : this.processOneDimStack(t); return n ? this.reverse(i) : i }, e.prototype.reverse = function (t) { return t.slice(0).reverse() }, e.prototype.processStack = function (t) { var e = this.xField, n = this.yField, o = this.reverseOrder ? this.reverse(t) : t, s = new a, u = new a; return o.map((function (t) { return t.map((function (t) { var o, a = r.get(t, e, 0), l = r.get(t, [n]), c = a.toString(); if (l = r.isArray(l) ? l[1] : l, !r.isNil(l)) { var h = l >= 0 ? s : u; h.has(c) || h.set(c, 0); var f = h.get(c), p = l + f; return h.set(c, p), Object(i.a)(Object(i.a)({}, t), ((o = {})[n] = [f, p], o)) } return t })) })) }, e.prototype.processOneDimStack = function (t) { var e = this, n = this.xField, r = this.height, o = this.reverseOrder, s = o ? this.reverse(t) : t, u = new a; return s.map((function (t) { return t.map((function (t) { var o, a = e.size, s = t[n], l = 2 * a / r; u.has(s) || u.set(s, l / 2); var c = u.get(s); return u.set(s, c + l), Object(i.a)(Object(i.a)({}, t), ((o = {}).y = c, o)) })) })) }, e }(o.a); e.a = s }, function (t, e, n) { "use strict"; var i = n(10), r = n(0), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return Object(i.b)(e, t), e.prototype.process = function (t) { var e = r.flatten(t), n = this.xField, o = this.yField, a = this.getXValuesMaxMap(e), s = Math.max.apply(Math, Object.keys(a).map((function (t) { return a[t] }))); return r.map(t, (function (t) { return r.map(t, (function (t) { var e, u, l = t[o], c = t[n]; if (r.isArray(l)) { var h = (s - a[c]) / 2; return Object(i.a)(Object(i.a)({}, t), ((e = {})[o] = r.map(l, (function (t) { return h + t })), e)) } var f = (s - l) / 2; return Object(i.a)(Object(i.a)({}, t), ((u = {})[o] = [f, l + f], u)) })) })) }, e.prototype.getXValuesMaxMap = function (t) { var e = this, n = this.xField, i = this.yField, o = r.groupBy(t, (function (t) { return t[n] })); return r.mapValues(o, (function (t) { return e.getDimMaxValue(t, i) })) }, e.prototype.getDimMaxValue = function (t, e) { var n = r.map(t, (function (t) { return r.get(t, e, []) })), i = r.flatten(n); return Math.max.apply(Math, i) }, e }(n(29).a); e.a = o }, , , , , , , , function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(30), o = n(177), a = n(115); r.registerTheme("dark", a.createThemeByStyleSheet(o.antvDark)); var s = i.__importStar(n(122)), u = i.__importStar(n(178)), l = n(30); l.registerEngine("canvas", s), l.registerEngine("svg", u); var c = n(30), h = i.__importDefault(n(179)), f = i.__importDefault(n(181)), p = i.__importDefault(n(183)), d = i.__importDefault(n(184)), g = i.__importDefault(n(186)), y = i.__importDefault(n(88)), v = i.__importDefault(n(187)), m = i.__importDefault(n(189)), x = i.__importDefault(n(191)); c.registerGeometry("Polygon", m.default), c.registerGeometry("Interval", d.default), c.registerGeometry("Schema", x.default), c.registerGeometry("Path", y.default), c.registerGeometry("Point", v.default), c.registerGeometry("Line", g.default), c.registerGeometry("Area", h.default), c.registerGeometry("Edge", f.default), c.registerGeometry("Heatmap", p.default), n(193), n(194), n(195), n(196), n(197), n(198), n(199), n(200), n(201), n(202), n(203), n(204), n(205), n(206), n(207), n(208), n(209), n(210); var b = n(30), C = i.__importDefault(n(64)), _ = i.__importDefault(n(211)), O = i.__importDefault(n(212)), M = i.__importDefault(n(127)); b.registerGeometryLabel("base", C.default), b.registerGeometryLabel("interval", _.default), b.registerGeometryLabel("pie", O.default), b.registerGeometryLabel("polar", M.default); var w = n(30), S = n(213), A = n(214), P = n(215), I = n(216), T = n(217), E = n(218), j = n(219), L = n(221), B = n(223), k = n(224), D = n(225), R = n(226), F = n(227); w.registerGeometryLabelLayout("overlap", E.overlap), w.registerGeometryLabelLayout("distribute", S.distribute), w.registerGeometryLabelLayout("fixed-overlap", E.fixedOverlap), w.registerGeometryLabelLayout("hide-overlap", j.hideOverlap), w.registerGeometryLabelLayout("limit-in-shape", T.limitInShape), w.registerGeometryLabelLayout("limit-in-canvas", I.limitInCanvas), w.registerGeometryLabelLayout("limit-in-plot", F.limitInPlot), w.registerGeometryLabelLayout("pie-outer", A.pieOuterLabelLayout), w.registerGeometryLabelLayout("adjust-color", L.adjustColor), w.registerGeometryLabelLayout("interval-adjust-position", B.intervalAdjustPosition), w.registerGeometryLabelLayout("interval-hide-overlap", k.intervalHideOverlap), w.registerGeometryLabelLayout("point-adjust-position", D.pointAdjustPosition), w.registerGeometryLabelLayout("pie-spider", P.pieSpiderLabelLayout), w.registerGeometryLabelLayout("path-adjust-position", R.pathAdjustPosition); var N = n(230), G = n(231), Y = n(233), V = n(234), X = n(235), z = n(236), H = n(237), W = n(238), q = n(30); q.registerAnimation("fade-in", N.fadeIn), q.registerAnimation("fade-out", N.fadeOut), q.registerAnimation("grow-in-x", G.growInX), q.registerAnimation("grow-in-xy", G.growInXY), q.registerAnimation("grow-in-y", G.growInY), q.registerAnimation("scale-in-x", X.scaleInX), q.registerAnimation("scale-in-y", X.scaleInY), q.registerAnimation("wave-in", H.waveIn), q.registerAnimation("zoom-in", W.zoomIn), q.registerAnimation("zoom-out", W.zoomOut), q.registerAnimation("position-update", V.positionUpdate), q.registerAnimation("sector-path-update", z.sectorPathUpdate), q.registerAnimation("path-in", Y.pathIn); var U = n(30), Z = i.__importDefault(n(239)), Q = i.__importDefault(n(240)), K = i.__importDefault(n(241)), $ = i.__importDefault(n(242)), J = i.__importDefault(n(243)), tt = i.__importDefault(n(244)); U.registerFacet("rect", J.default), U.registerFacet("mirror", $.default), U.registerFacet("list", Q.default), U.registerFacet("matrix", K.default), U.registerFacet("circle", Z.default), U.registerFacet("tree", tt.default); var et = n(30), nt = i.__importDefault(n(245)), it = i.__importDefault(n(248)), rt = i.__importDefault(n(250)), ot = i.__importDefault(n(251)), at = i.__importDefault(n(118)), st = i.__importDefault(n(252)); et.registerComponentController("axis", it.default), et.registerComponentController("legend", rt.default), et.registerComponentController("tooltip", at.default), et.registerComponentController("annotation", nt.default), et.registerComponentController("slider", ot.default), et.registerComponentController("scrollbar", st.default); var ut = n(30), lt = i.__importDefault(n(253)), ct = i.__importDefault(n(254)), ht = i.__importDefault(n(129)), ft = i.__importDefault(n(255)), pt = i.__importDefault(n(256)), dt = i.__importDefault(n(257)), gt = i.__importDefault(n(258)), yt = i.__importDefault(n(259)), vt = i.__importDefault(n(97)), mt = i.__importDefault(n(260)), xt = i.__importDefault(n(261)), bt = i.__importDefault(n(262)), Ct = i.__importDefault(n(263)), _t = i.__importDefault(n(264)), Ot = i.__importDefault(n(265)), Mt = i.__importDefault(n(266)), wt = i.__importDefault(n(267)), St = i.__importDefault(n(268)), At = i.__importDefault(n(270)), Pt = i.__importDefault(n(271)), It = i.__importDefault(n(272)), Tt = i.__importDefault(n(273)), Et = i.__importDefault(n(131)), jt = i.__importDefault(n(130)), Lt = i.__importDefault(n(274)), Bt = i.__importDefault(n(275)), kt = i.__importDefault(n(276)), Dt = i.__importDefault(n(132)), Rt = i.__importDefault(n(277)), Ft = i.__importDefault(n(278)), Nt = i.__importDefault(n(279)), Gt = i.__importDefault(n(280)), Yt = i.__importDefault(n(281)), Vt = i.__importDefault(n(282)), Xt = i.__importDefault(n(283)), zt = i.__importDefault(n(284)); ut.registerAction("tooltip", ht.default), ut.registerAction("sibling-tooltip", ct.default), ut.registerAction("ellipsis-text", ft.default), ut.registerAction("element-active", pt.default), ut.registerAction("element-single-active", yt.default), ut.registerAction("element-range-active", gt.default), ut.registerAction("element-highlight", vt.default), ut.registerAction("element-highlight-by-x", xt.default), ut.registerAction("element-highlight-by-color", mt.default), ut.registerAction("element-single-highlight", Ct.default), ut.registerAction("element-range-highlight", bt.default), ut.registerAction("element-sibling-highlight", bt.default, { effectSiblings: !0, effectByRecord: !0 }), ut.registerAction("element-selected", Ot.default), ut.registerAction("element-single-selected", Mt.default), ut.registerAction("element-range-selected", _t.default), ut.registerAction("element-link-by-color", dt.default), ut.registerAction("active-region", lt.default), ut.registerAction("list-active", wt.default), ut.registerAction("list-selected", At.default), ut.registerAction("list-highlight", St.default), ut.registerAction("list-unchecked", Pt.default), ut.registerAction("legend-item-highlight", St.default, { componentNames: ["legend"] }), ut.registerAction("axis-label-highlight", St.default, { componentNames: ["axis"] }), ut.registerAction("rect-mask", jt.default), ut.registerAction("x-rect-mask", Tt.default, { dim: "x" }), ut.registerAction("y-rect-mask", Tt.default, { dim: "y" }), ut.registerAction("circle-mask", It.default), ut.registerAction("path-mask", Et.default), ut.registerAction("smooth-path-mask", Lt.default), ut.registerAction("cursor", Bt.default), ut.registerAction("data-filter", kt.default), ut.registerAction("brush", Dt.default), ut.registerAction("brush-x", Dt.default, { dims: ["x"] }), ut.registerAction("brush-y", Dt.default, { dims: ["y"] }), ut.registerAction("sibling-filter", Rt.default), ut.registerAction("sibling-x-filter", Rt.default), ut.registerAction("sibling-y-filter", Rt.default), ut.registerAction("element-filter", Ft.default), ut.registerAction("element-sibling-filter", Nt.default), ut.registerAction("element-sibling-filter-record", Nt.default, { byRecord: !0 }), ut.registerAction("view-drag", Yt.default), ut.registerAction("view-move", Vt.default), ut.registerAction("scale-translate", Xt.default), ut.registerAction("scale-zoom", zt.default), ut.registerAction("reset-button", Gt.default, { name: "reset-button", text: "reset" }); var Ht = n(30); function Wt(t) { return t.isInPlot() } function qt(t) { return t.gEvent.preventDefault(), t.gEvent.originalEvent.deltaY > 0 } Ht.registerInteraction("tooltip", { start: [{ trigger: "plot:mousemove", action: "tooltip:show", throttle: { wait: 50, leading: !0, trailing: !1 } }, { trigger: "plot:touchmove", action: "tooltip:show", throttle: { wait: 50, leading: !0, trailing: !1 } }], end: [{ trigger: "plot:mouseleave", action: "tooltip:hide" }, { trigger: "plot:leave", action: "tooltip:hide" }, { trigger: "plot:touchend", action: "tooltip:hide" }] }), Ht.registerInteraction("ellipsis-text", { start: [{ trigger: "legend-item-name:mousemove", action: "ellipsis-text:show", throttle: { wait: 50, leading: !0, trailing: !1 } }, { trigger: "legend-item-name:touchstart", action: "ellipsis-text:show", throttle: { wait: 50, leading: !0, trailing: !1 } }, { trigger: "axis-label:mousemove", action: "ellipsis-text:show", throttle: { wait: 50, leading: !0, trailing: !1 } }, { trigger: "axis-label:touchstart", action: "ellipsis-text:show", throttle: { wait: 50, leading: !0, trailing: !1 } }], end: [{ trigger: "legend-item-name:mouseleave", action: "ellipsis-text:hide" }, { trigger: "legend-item-name:touchend", action: "ellipsis-text:hide" }, { trigger: "axis-label:mouseleave", action: "ellipsis-text:hide" }, { trigger: "axis-label:touchend", action: "ellipsis-text:hide" }] }), Ht.registerInteraction("element-active", { start: [{ trigger: "element:mouseenter", action: "element-active:active" }], end: [{ trigger: "element:mouseleave", action: "element-active:reset" }] }), Ht.registerInteraction("element-selected", { start: [{ trigger: "element:click", action: "element-selected:toggle" }] }), Ht.registerInteraction("element-highlight", { start: [{ trigger: "element:mouseenter", action: "element-highlight:highlight" }], end: [{ trigger: "element:mouseleave", action: "element-highlight:reset" }] }), Ht.registerInteraction("element-highlight-by-x", { start: [{ trigger: "element:mouseenter", action: "element-highlight-by-x:highlight" }], end: [{ trigger: "element:mouseleave", action: "element-highlight-by-x:reset" }] }), Ht.registerInteraction("element-highlight-by-color", { start: [{ trigger: "element:mouseenter", action: "element-highlight-by-color:highlight" }], end: [{ trigger: "element:mouseleave", action: "element-highlight-by-color:reset" }] }), Ht.registerInteraction("legend-active", { start: [{ trigger: "legend-item:mouseenter", action: ["list-active:active", "element-active:active"] }], end: [{ trigger: "legend-item:mouseleave", action: ["list-active:reset", "element-active:reset"] }] }), Ht.registerInteraction("legend-highlight", { start: [{ trigger: "legend-item:mouseenter", action: ["legend-item-highlight:highlight", "element-highlight:highlight"] }], end: [{ trigger: "legend-item:mouseleave", action: ["legend-item-highlight:reset", "element-highlight:reset"] }] }), Ht.registerInteraction("axis-label-highlight", { start: [{ trigger: "axis-label:mouseenter", action: ["axis-label-highlight:highlight", "element-highlight:highlight"] }], end: [{ trigger: "axis-label:mouseleave", action: ["axis-label-highlight:reset", "element-highlight:reset"] }] }), Ht.registerInteraction("element-list-highlight", { start: [{ trigger: "element:mouseenter", action: ["list-highlight:highlight", "element-highlight:highlight"] }], end: [{ trigger: "element:mouseleave", action: ["list-highlight:reset", "element-highlight:reset"] }] }), Ht.registerInteraction("element-range-highlight", { showEnable: [{ trigger: "plot:mouseenter", action: "cursor:crosshair" }, { trigger: "mask:mouseenter", action: "cursor:move" }, { trigger: "plot:mouseleave", action: "cursor:default" }, { trigger: "mask:mouseleave", action: "cursor:crosshair" }], start: [{ trigger: "plot:mousedown", isEnable: function (t) { return !t.isInShape("mask") }, action: ["rect-mask:start", "rect-mask:show"] }, { trigger: "mask:dragstart", action: ["rect-mask:moveStart"] }], processing: [{ trigger: "plot:mousemove", action: ["rect-mask:resize"] }, { trigger: "mask:drag", action: ["rect-mask:move"] }, { trigger: "mask:change", action: ["element-range-highlight:highlight"] }], end: [{ trigger: "plot:mouseup", action: ["rect-mask:end"] }, { trigger: "mask:dragend", action: ["rect-mask:moveEnd"] }, { trigger: "document:mouseup", isEnable: function (t) { return !t.isInPlot() }, action: ["element-range-highlight:clear", "rect-mask:end", "rect-mask:hide"] }], rollback: [{ trigger: "dblclick", action: ["element-range-highlight:clear", "rect-mask:hide"] }] }), Ht.registerInteraction("brush", { showEnable: [{ trigger: "plot:mouseenter", action: "cursor:crosshair" }, { trigger: "plot:mouseleave", action: "cursor:default" }], start: [{ trigger: "mousedown", isEnable: Wt, action: ["brush:start", "rect-mask:start", "rect-mask:show"] }], processing: [{ trigger: "mousemove", isEnable: Wt, action: ["rect-mask:resize"] }], end: [{ trigger: "mouseup", isEnable: Wt, action: ["brush:filter", "brush:end", "rect-mask:end", "rect-mask:hide", "reset-button:show"] }], rollback: [{ trigger: "reset-button:click", action: ["brush:reset", "reset-button:hide", "cursor:crosshair"] }] }), Ht.registerInteraction("brush-visible", { showEnable: [{ trigger: "plot:mouseenter", action: "cursor:crosshair" }, { trigger: "plot:mouseleave", action: "cursor:default" }], start: [{ trigger: "plot:mousedown", action: ["rect-mask:start", "rect-mask:show"] }], processing: [{ trigger: "plot:mousemove", action: ["rect-mask:resize"] }, { trigger: "mask:change", action: ["element-range-highlight:highlight"] }], end: [{ trigger: "plot:mouseup", action: ["rect-mask:end", "rect-mask:hide", "element-filter:filter", "element-range-highlight:clear"] }], rollback: [{ trigger: "dblclick", action: ["element-filter:clear"] }] }), Ht.registerInteraction("brush-x", { showEnable: [{ trigger: "plot:mouseenter", action: "cursor:crosshair" }, { trigger: "plot:mouseleave", action: "cursor:default" }], start: [{ trigger: "mousedown", isEnable: Wt, action: ["brush-x:start", "x-rect-mask:start", "x-rect-mask:show"] }], processing: [{ trigger: "mousemove", isEnable: Wt, action: ["x-rect-mask:resize"] }], end: [{ trigger: "mouseup", isEnable: Wt, action: ["brush-x:filter", "brush-x:end", "x-rect-mask:end", "x-rect-mask:hide"] }], rollback: [{ trigger: "dblclick", action: ["brush-x:reset"] }] }), Ht.registerInteraction("element-path-highlight", { showEnable: [{ trigger: "plot:mouseenter", action: "cursor:crosshair" }, { trigger: "plot:mouseleave", action: "cursor:default" }], start: [{ trigger: "mousedown", isEnable: Wt, action: "path-mask:start" }, { trigger: "mousedown", isEnable: Wt, action: "path-mask:show" }], processing: [{ trigger: "mousemove", action: "path-mask:addPoint" }], end: [{ trigger: "mouseup", action: "path-mask:end" }], rollback: [{ trigger: "dblclick", action: "path-mask:hide" }] }), Ht.registerInteraction("element-single-selected", { start: [{ trigger: "element:click", action: "element-single-selected:toggle" }] }), Ht.registerInteraction("legend-filter", { showEnable: [{ trigger: "legend-item:mouseenter", action: "cursor:pointer" }, { trigger: "legend-item:mouseleave", action: "cursor:default" }], start: [{ trigger: "legend-item:click", action: ["list-unchecked:toggle", "data-filter:filter"] }] }), Ht.registerInteraction("continuous-filter", { start: [{ trigger: "legend:valuechanged", action: "data-filter:filter" }] }), Ht.registerInteraction("continuous-visible-filter", { start: [{ trigger: "legend:valuechanged", action: "element-filter:filter" }] }), Ht.registerInteraction("legend-visible-filter", { showEnable: [{ trigger: "legend-item:mouseenter", action: "cursor:pointer" }, { trigger: "legend-item:mouseleave", action: "cursor:default" }], start: [{ trigger: "legend-item:click", action: ["list-unchecked:toggle", "element-filter:filter"] }] }), Ht.registerInteraction("active-region", { start: [{ trigger: "plot:mousemove", action: "active-region:show" }], end: [{ trigger: "plot:mouseleave", action: "active-region:hide" }] }), Ht.registerInteraction("view-zoom", { start: [{ trigger: "plot:mousewheel", isEnable: function (t) { return qt(t.event) }, action: "scale-zoom:zoomOut", throttle: { wait: 100, leading: !0, trailing: !1 } }, { trigger: "plot:mousewheel", isEnable: function (t) { return !qt(t.event) }, action: "scale-zoom:zoomIn", throttle: { wait: 100, leading: !0, trailing: !1 } }] }), Ht.registerInteraction("sibling-tooltip", { start: [{ trigger: "plot:mousemove", action: "sibling-tooltip:show" }], end: [{ trigger: "plot:mouseleave", action: "sibling-tooltip:hide" }] }), i.__exportStar(n(30), e) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(102), s = n(159), u = function (t) { function e(e) { var n = this, u = e.container, l = e.width, c = e.height, h = e.autoFit, f = void 0 !== h && h, p = e.padding, d = e.appendPadding, g = e.renderer, y = void 0 === g ? "canvas" : g, v = e.pixelRatio, m = e.localRefresh, x = void 0 === m || m, b = e.visible, C = void 0 === b || b, _ = e.supportCSSTransform, O = void 0 !== _ && _, M = e.defaultInteractions, w = void 0 === M ? ["tooltip", "legend-filter", "legend-active", "continuous-filter", "ellipsis-text"] : M, S = e.options, A = e.limitInPlot, P = e.theme, I = e.syncViewPadding, T = r.isString(u) ? document.getElementById(u) : u, E = s.createDom('<div style="position:relative;"></div>'); T.appendChild(E); var j = s.getChartSize(T, f, l, c), L = new (a.getEngine(y).Canvas)(i.__assign({ container: E, pixelRatio: v, localRefresh: x, supportCSSTransform: O }, j)); return (n = t.call(this, { parent: null, canvas: L, backgroundGroup: L.addGroup({ zIndex: o.GROUP_Z_INDEX.BG }), middleGroup: L.addGroup({ zIndex: o.GROUP_Z_INDEX.MID }), foregroundGroup: L.addGroup({ zIndex: o.GROUP_Z_INDEX.FORE }), padding: p, appendPadding: d, visible: C, options: S, limitInPlot: A, theme: P, syncViewPadding: I }) || this).onResize = r.debounce((function () { n.forceFit() }), 300), n.ele = T, n.canvas = L, n.width = j.width, n.height = j.height, n.autoFit = f, n.localRefresh = x, n.renderer = y, n.wrapperElement = E, n.updateCanvasStyle(), n.bindAutoFit(), n.initDefaultInteractions(w), n } return i.__extends(e, t), e.prototype.initDefaultInteractions = function (t) { var e = this; r.each(t, (function (t) { e.interaction(t) })) }, e.prototype.changeSize = function (t, e) { return this.width === t && this.height === e || (this.emit(o.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE), this.width = t, this.height = e, this.canvas.changeSize(t, e), this.render(!0), this.emit(o.VIEW_LIFE_CIRCLE.AFTER_CHANGE_SIZE)), this }, e.prototype.destroy = function () { t.prototype.destroy.call(this), this.unbindAutoFit(), this.canvas.destroy(), s.removeDom(this.wrapperElement), this.wrapperElement = null }, e.prototype.changeVisible = function (e) { return t.prototype.changeVisible.call(this, e), this.wrapperElement.style.display = e ? "" : "none", this }, e.prototype.forceFit = function () { if (!this.destroyed) { var t = s.getChartSize(this.ele, !0, this.width, this.height), e = t.width, n = t.height; this.changeSize(e, n) } }, e.prototype.updateCanvasStyle = function () { s.modifyCSS(this.canvas.get("el"), { display: "inline-block", verticalAlign: "middle" }) }, e.prototype.bindAutoFit = function () { this.autoFit && window.addEventListener("resize", this.onResize) }, e.prototype.unbindAutoFit = function () { this.autoFit && window.removeEventListener("resize", this.onResize) }, e }(i.__importDefault(n(103)).default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.removeDom = e.getChartSize = void 0; var i = n(14); function r(t) { return "number" == typeof t && !isNaN(t) } e.getChartSize = function (t, e, n, o) { var a = n, s = o; if (e) { var u = function (t) { var e = getComputedStyle(t); return { width: (t.clientWidth || parseInt(e.width, 10)) - parseInt(e.paddingLeft, 10) - parseInt(e.paddingRight, 10), height: (t.clientHeight || parseInt(e.height, 10)) - parseInt(e.paddingTop, 10) - parseInt(e.paddingBottom, 10) } }(t); a = u.width ? u.width : a, s = u.height ? u.height : s } return { width: Math.max(r(a) ? a : i.MIN_CHART_WIDTH, i.MIN_CHART_WIDTH), height: Math.max(r(s) ? s : i.MIN_CHART_HEIGHT, i.MIN_CHART_HEIGHT) } }, e.removeDom = function (t) { var e = t.parentNode; e && e.removeChild(t) }; var o = n(9); Object.defineProperty(e, "createDom", { enumerable: !0, get: function () { return o.createDom } }), Object.defineProperty(e, "modifyCSS", { enumerable: !0, get: function () { return o.modifyCSS } }) }, function (t, e) { var n, i, r = t.exports = {}; function o() { throw new Error("setTimeout has not been defined") } function a() { throw new Error("clearTimeout has not been defined") } function s(t) { if (n === setTimeout) return setTimeout(t, 0); if ((n === o || !n) && setTimeout) return n = setTimeout, setTimeout(t, 0); try { return n(t, 0) } catch (e) { try { return n.call(null, t, 0) } catch (e) { return n.call(this, t, 0) } } } !function () { try { n = "function" == typeof setTimeout ? setTimeout : o } catch (t) { n = o } try { i = "function" == typeof clearTimeout ? clearTimeout : a } catch (t) { i = a } }(); var u, l = [], c = !1, h = -1; function f() { c && u && (c = !1, u.length ? l = u.concat(l) : h = -1, l.length && p()) } function p() { if (!c) { var t = s(f); c = !0; for (var e = l.length; e;) { for (u = l, l = []; ++h < e;)u && u[h].run(); h = -1, e = l.length } u = null, c = !1, function (t) { if (i === clearTimeout) return clearTimeout(t); if ((i === a || !i) && clearTimeout) return i = clearTimeout, clearTimeout(t); try { i(t) } catch (e) { try { return i.call(null, t) } catch (e) { return i.call(this, t) } } }(t) } } function d(t, e) { this.fun = t, this.array = e } function g() { } r.nextTick = function (t) { var e = new Array(arguments.length - 1); if (arguments.length > 1) for (var n = 1; n < arguments.length; n++)e[n - 1] = arguments[n]; l.push(new d(t, e)), 1 !== l.length || c || s(p) }, d.prototype.run = function () { this.fun.apply(null, this.array) }, r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.version = "", r.versions = {}, r.on = g, r.addListener = g, r.once = g, r.off = g, r.removeListener = g, r.removeAllListeners = g, r.emit = g, r.prependListener = g, r.prependOnceListener = g, r.listeners = function (t) { return [] }, r.binding = function (t) { throw new Error("process.binding is not supported") }, r.cwd = function () { return "/" }, r.chdir = function (t) { throw new Error("process.chdir is not supported") }, r.umask = function () { return 0 } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(111), a = i.__importDefault(n(163)), s = i.__importDefault(n(112)); function u(t, e) { var n = t.split(":"), i = n[0], r = e.getAction(i) || o.createAction(i, e); if (!r) throw new Error("There is no action named " + i); return { action: r, methodName: n[1] } } function l(t) { var e = t.action, n = t.methodName; if (!e[n]) throw new Error("Action(" + e.name + ") doesn't have a method called " + n); e[n]() } var c = "start", h = "showEnable", f = "end", p = "rollback", d = "processing", g = function (t) { function e(e, n) { var i = t.call(this, e, n) || this; return i.callbackCaches = {}, i.emitCaches = {}, i.steps = n, i } return i.__extends(e, t), e.prototype.init = function () { this.initContext(), t.prototype.init.call(this) }, e.prototype.destroy = function () { t.prototype.destroy.call(this), this.steps = null, this.context && (this.context.destroy(), this.context = null), this.callbackCaches = null, this.view = null }, e.prototype.initEvents = function () { var t = this; r.each(this.steps, (function (e, n) { r.each(e, (function (e) { var i = t.getActionCallback(n, e); i && t.bindEvent(e.trigger, i) })) })) }, e.prototype.clearEvents = function () { var t = this; r.each(this.steps, (function (e, n) { r.each(e, (function (e) { var i = t.getActionCallback(n, e); i && t.offEvent(e.trigger, i) })) })) }, e.prototype.initContext = function () { var t = this.view, e = new a.default(t); this.context = e; var n = this.steps; r.each(n, (function (t) { r.each(t, (function (t) { if (r.isFunction(t.action)) t.actionObject = { action: o.createCallbackAction(t.action, e), methodName: "execute" }; else if (r.isString(t.action)) t.actionObject = u(t.action, e); else if (r.isArray(t.action)) { var n = t.action; t.actionObject = [], r.each(n, (function (n) { t.actionObject.push(u(n, e)) })) } })) })) }, e.prototype.isAllowStep = function (t) { var e = this.currentStepName, n = this.steps; if (e === t) return !0; if (t === h) return !0; if (t === d) return e === c; if (t === c) return e !== d; if (t === f) return e === d || e === c; if (t === p) { if (n[f]) return e === f; if (e === c) return !0 } return !1 }, e.prototype.isAllowExecute = function (t, e) { if (this.isAllowStep(t)) { var n = this.getKey(t, e); return (!e.once || !this.emitCaches[n]) && (!e.isEnable || e.isEnable(this.context)) } return !1 }, e.prototype.enterStep = function (t) { this.currentStepName = t, this.emitCaches = {} }, e.prototype.afterExecute = function (t, e) { t !== h && this.currentStepName !== t && this.enterStep(t); var n = this.getKey(t, e); this.emitCaches[n] = !0 }, e.prototype.getKey = function (t, e) { return t + e.trigger + e.action }, e.prototype.getActionCallback = function (t, e) { var n = this, i = this.context, o = this.callbackCaches, a = e.actionObject; if (e.action && a) { var s = this.getKey(t, e); if (!o[s]) { var u = function (o) { i.event = o, n.isAllowExecute(t, e) ? (r.isArray(a) ? r.each(a, (function (t) { i.event = o, l(t) })) : (i.event = o, l(a)), n.afterExecute(t, e), e.callback && (i.event = o, e.callback(i))) : i.event = null }; e.debounce ? o[s] = r.debounce(u, e.debounce.wait, e.debounce.immediate) : e.throttle ? o[s] = r.throttle(u, e.throttle.wait, { leading: e.throttle.leading, trailing: e.throttle.trailing }) : o[s] = u } return o[s] } return null }, e.prototype.bindEvent = function (t, e) { var n = t.split(":"); "window" === n[0] ? window.addEventListener(n[1], e) : "document" === n[0] ? document.addEventListener(n[1], e) : this.view.on(t, e) }, e.prototype.offEvent = function (t, e) { var n = t.split(":"); "window" === n[0] ? window.removeEventListener(n[1], e) : "document" === n[0] ? document.removeEventListener(n[1], e) : this.view.off(t, e) }, e }(s.default); e.default = g }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.execute = function () { this.callback && this.callback(this.context) }, e.prototype.destroy = function () { t.prototype.destroy.call(this), this.callback = null }, e }(i.__importDefault(n(22)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(19), o = function () { function t(t) { this.actions = [], this.event = null, this.cacheMap = {}, this.view = t } return t.prototype.cache = function () { for (var t = [], e = 0; e < arguments.length; e++)t[e] = arguments[e]; if (1 === t.length) return this.cacheMap[t[0]]; 2 === t.length && (this.cacheMap[t[0]] = t[1]) }, t.prototype.getAction = function (t) { return this.actions.find((function (e) { return e.name === t })) }, t.prototype.addAction = function (t) { this.actions.push(t) }, t.prototype.removeAction = function (t) { var e = this.actions, n = this.actions.indexOf(t); n >= 0 && e.splice(n, 1) }, t.prototype.getCurrentPoint = function () { var t = this.event; return t ? t.target instanceof HTMLElement ? this.view.getCanvas().getPointByClient(t.clientX, t.clientY) : { x: t.x, y: t.y } : null }, t.prototype.getCurrentShape = function () { return i.get(this.event, ["gEvent", "shape"]) }, t.prototype.isInPlot = function () { var t = this.getCurrentPoint(); return !!t && this.view.isPointInPlot(t) }, t.prototype.isInShape = function (t) { var e = this.getCurrentShape(); return !!e && e.get("name") === t }, t.prototype.isInComponent = function (t) { var e = r.getComponents(this.view), n = this.getCurrentPoint(); return !!n && !!e.find((function (e) { var i = e.getBBox(); return t ? e.get("name") === t && r.isInBox(i, n) : r.isInBox(i, n) })) }, t.prototype.destroy = function () { this.view = null, this.event = null, i.each(this.actions.slice(), (function (t) { t.destroy() })), this.actions = null, this.cacheMap = null }, t }(); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.createTheme = void 0; var i = n(1), r = n(0), o = n(115), a = n(165); e.createTheme = function (t) { var e = t.styleSheet, n = void 0 === e ? {} : e, s = i.__rest(t, ["styleSheet"]), u = a.createLightStyleSheet(n); return r.deepMix({}, o.createThemeByStyleSheet(u), s) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.antvLight = e.createLightStyleSheet = void 0; var i = "#000", r = "#595959", o = "#8C8C8C", a = "#BFBFBF", s = "#D9D9D9", u = "#F0F0F0", l = "#FFFFFF", c = ["#5B8FF9", "#5AD8A6", "#5D7092", "#F6BD16", "#6F5EF9", "#6DC8EC", "#945FB9", "#FF9845", "#1E9493", "#FF99C3"], h = ["#5B8FF9", "#CDDDFD", "#5AD8A6", "#CDF3E4", "#5D7092", "#CED4DE", "#F6BD16", "#FCEBB9", "#6F5EF9", "#D3CEFD", "#6DC8EC", "#D3EEF9", "#945FB9", "#DECFEA", "#FF9845", "#FFE0C7", "#1E9493", "#BBDEDE", "#FF99C3", "#FFE0ED"]; e.createLightStyleSheet = function (t) { void 0 === t && (t = {}); var e = t.backgroundColor, n = void 0 === e ? "transparent" : e, f = t.paletteQualitative10, p = void 0 === f ? c : f, d = t.paletteQualitative20, g = void 0 === d ? h : d, y = t.paletteSemanticRed, v = void 0 === y ? "#F4664A" : y, m = t.paletteSemanticGreen, x = void 0 === m ? "#30BF78" : m, b = t.paletteSemanticYellow, C = void 0 === b ? "#FAAD14" : b, _ = t.fontFamily, O = void 0 === _ ? '"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"' : _, M = t.brandColor, w = void 0 === M ? p[0] : M; return { backgroundColor: n, brandColor: w, paletteQualitative10: p, paletteQualitative20: g, paletteSemanticRed: v, paletteSemanticGreen: x, paletteSemanticYellow: C, fontFamily: O, axisLineBorderColor: a, axisLineBorder: 1, axisLineDash: null, axisTitleTextFillColor: r, axisTitleTextFontSize: 12, axisTitleTextLineHeight: 12, axisTitleTextFontWeight: "normal", axisTitleSpacing: 12, axisTickLineBorderColor: a, axisTickLineLength: 4, axisTickLineBorder: 1, axisSubTickLineBorderColor: s, axisSubTickLineLength: 2, axisSubTickLineBorder: 1, axisLabelFillColor: o, axisLabelFontSize: 12, axisLabelLineHeight: 12, axisLabelFontWeight: "normal", axisLabelOffset: 8, axisGridBorderColor: s, axisGridBorder: 1, axisGridLineDash: null, legendTitleTextFillColor: o, legendTitleTextFontSize: 12, legendTitleTextLineHeight: 21, legendTitleTextFontWeight: "normal", legendMarkerColor: w, legendMarkerSpacing: 8, legendMarkerSize: 4, legendCircleMarkerSize: 4, legendSquareMarkerSize: 4, legendLineMarkerSize: 5, legendItemNameFillColor: r, legendItemNameFontSize: 12, legendItemNameLineHeight: 12, legendItemNameFontWeight: "normal", legendItemSpacing: 24, legendItemMarginBottom: 12, legendPadding: [8, 8, 8, 8], legendHorizontalPadding: [8, 0, 8, 0], legendVerticalPadding: [0, 8, 0, 8], sliderRailFillColor: s, sliderRailBorder: 0, sliderRailBorderColor: null, sliderRailWidth: 100, sliderRailHeight: 12, sliderLabelTextFillColor: o, sliderLabelTextFontSize: 12, sliderLabelTextLineHeight: 12, sliderLabelTextFontWeight: "normal", sliderHandlerFillColor: u, sliderHandlerWidth: 10, sliderHandlerHeight: 14, sliderHandlerBorder: 1, sliderHandlerBorderColor: a, annotationArcBorderColor: s, annotationArcBorder: 1, annotationLineBorderColor: a, annotationLineBorder: 1, annotationLineDash: null, annotationTextFillColor: r, annotationTextFontSize: 12, annotationTextLineHeight: 12, annotationTextFontWeight: "normal", annotationTextBorderColor: null, annotationTextBorder: 0, annotationRegionFillColor: i, annotationRegionFillOpacity: .06, annotationRegionBorder: 0, annotationRegionBorderColor: null, annotationDataMarkerLineLength: 16, tooltipCrosshairsBorderColor: a, tooltipCrosshairsBorder: 1, tooltipCrosshairsLineDash: null, tooltipContainerFillColor: "rgb(255, 255, 255)", tooltipContainerFillOpacity: .95, tooltipContainerShadow: "0px 0px 10px #aeaeae", tooltipContainerBorderRadius: 3, tooltipTextFillColor: r, tooltipTextFontSize: 12, tooltipTextLineHeight: 12, tooltipTextFontWeight: "bold", labelFillColor: r, labelFillColorDark: "#2c3542", labelFillColorLight: "#ffffff", labelFontSize: 12, labelLineHeight: 12, labelFontWeight: "normal", labelBorderColor: null, labelBorder: 0, innerLabelFillColor: l, innerLabelFontSize: 12, innerLabelLineHeight: 12, innerLabelFontWeight: "normal", innerLabelBorderColor: null, innerLabelBorder: 0, overflowLabelFillColor: r, overflowLabelFontSize: 12, overflowLabelLineHeight: 12, overflowLabelFontWeight: "normal", overflowLabelBorderColor: l, overflowLabelBorder: 1, labelLineBorder: 1, labelLineBorderColor: a, pointFillColor: w, pointFillOpacity: .95, pointSize: 4, pointBorder: 1, pointBorderColor: l, pointBorderOpacity: 1, pointActiveBorderColor: i, pointSelectedBorder: 2, pointSelectedBorderColor: i, pointInactiveFillOpacity: .3, pointInactiveBorderOpacity: .3, hollowPointSize: 4, hollowPointBorder: 1, hollowPointBorderColor: w, hollowPointBorderOpacity: .95, hollowPointFillColor: l, hollowPointActiveBorder: 1, hollowPointActiveBorderColor: i, hollowPointActiveBorderOpacity: 1, hollowPointSelectedBorder: 2, hollowPointSelectedBorderColor: i, hollowPointSelectedBorderOpacity: 1, hollowPointInactiveBorderOpacity: .3, lineBorder: 2, lineBorderColor: w, lineBorderOpacity: 1, lineActiveBorder: 3, lineSelectedBorder: 3, lineInactiveBorderOpacity: .3, areaFillColor: w, areaFillOpacity: .25, areaActiveFillColor: w, areaActiveFillOpacity: .5, areaSelectedFillColor: w, areaSelectedFillOpacity: .5, areaInactiveFillOpacity: .3, hollowAreaBorderColor: w, hollowAreaBorder: 2, hollowAreaBorderOpacity: 1, hollowAreaActiveBorder: 3, hollowAreaActiveBorderColor: i, hollowAreaSelectedBorder: 3, hollowAreaSelectedBorderColor: i, hollowAreaInactiveBorderOpacity: .3, intervalFillColor: w, intervalFillOpacity: .95, intervalActiveBorder: 1, intervalActiveBorderColor: i, intervalActiveBorderOpacity: 1, intervalSelectedBorder: 2, intervalSelectedBorderColor: i, intervalSelectedBorderOpacity: 1, intervalInactiveBorderOpacity: .3, intervalInactiveFillOpacity: .3, hollowIntervalBorder: 2, hollowIntervalBorderColor: w, hollowIntervalBorderOpacity: 1, hollowIntervalFillColor: l, hollowIntervalActiveBorder: 2, hollowIntervalActiveBorderColor: i, hollowIntervalSelectedBorder: 3, hollowIntervalSelectedBorderColor: i, hollowIntervalSelectedBorderOpacity: 1, hollowIntervalInactiveBorderOpacity: .3 } }, e.antvLight = e.createLightStyleSheet() }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(31), a = function () { function t(t) { this.option = this.wrapperOption(t) } return t.prototype.update = function (t) { return this.option = this.wrapperOption(t), this }, t.prototype.hasAction = function (t) { var e = this.option.actions; return r.some(e, (function (e) { return e[0] === t })) }, t.prototype.create = function (t, e) { var n = this.option, r = n.type, a = n.cfg, s = "theta" === r, u = i.__assign({ start: t, end: e }, a), l = o.getCoordinate(s ? "polar" : r); return this.coordinate = new l(u), this.coordinate.type = r, s && (this.hasAction("transpose") || this.transpose()), this.execActions(), this.coordinate }, t.prototype.adjust = function (t, e) { return this.coordinate.update({ start: t, end: e }), this.coordinate.resetMatrix(), this.execActions(["scale", "rotate", "translate"]), this.coordinate }, t.prototype.rotate = function (t) { return this.option.actions.push(["rotate", t]), this }, t.prototype.reflect = function (t) { return this.option.actions.push(["reflect", t]), this }, t.prototype.scale = function (t, e) { return this.option.actions.push(["scale", t, e]), this }, t.prototype.transpose = function () { return this.option.actions.push(["transpose"]), this }, t.prototype.getOption = function () { return this.option }, t.prototype.getCoordinate = function () { return this.coordinate }, t.prototype.wrapperOption = function (t) { return i.__assign({ type: "rect", actions: [], cfg: {} }, t) }, t.prototype.execActions = function (t) { var e = this, n = this.option.actions; r.each(n, (function (n) { var i, o = n[0], a = n.slice(1); (!!r.isNil(t) || t.includes(o)) && (i = e.coordinate)[o].apply(i, a) })) }, t }(); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.default = function (t) { var e = t.getController("axis"), n = t.getController("legend"), i = t.getController("annotation");[e, t.getController("slider"), t.getController("scrollbar"), n, i].forEach((function (t) { t && t.layout() })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.ScalePool = void 0; var i = n(0), r = n(57), o = function () { function t() { this.scales = new Map, this.syncScales = new Map } return t.prototype.createScale = function (t, e, n, o) { var a = n, s = this.getScaleMeta(o); if (0 === e.length && s) { var u = s.scale, l = { type: u.type }; u.isCategory && (l.values = u.values), a = i.deepMix(l, s.scaleDef, n) } var c = r.createScaleByField(t, e, a); return this.cacheScale(c, n, o), c }, t.prototype.sync = function (t, e) { var n = this; this.syncScales.forEach((function (o, a) { var s = Number.MAX_SAFE_INTEGER, u = Number.MIN_SAFE_INTEGER, l = []; i.each(o, (function (t) { var e = n.getScale(t); u = i.isNumber(e.max) ? Math.max(u, e.max) : u, s = i.isNumber(e.min) ? Math.min(s, e.min) : s, i.each(e.values, (function (t) { l.includes(t) || l.push(t) })) })), i.each(o, (function (o) { var a = n.getScale(o); if (a.isContinuous) a.change({ min: s, max: u, values: l }); else if (a.isCategory) { var c = a.range, h = n.getScaleMeta(o); l && !i.get(h, ["scaleDef", "range"]) && (c = r.getDefaultCategoryScaleRange(i.deepMix({}, a, { values: l }), t, e)), a.change({ values: l, range: c }) } })) })) }, t.prototype.cacheScale = function (t, e, n) { var i = this.getScaleMeta(n); i && i.scale.type === t.type ? (r.syncScale(i.scale, t), i.scaleDef = e) : (i = { key: n, scale: t, scaleDef: e }, this.scales.set(n, i)); var o = this.getSyncKey(i); if (i.syncKey = o, this.removeFromSyncScales(n), o) { var a = this.syncScales.get(o); a || (a = [], this.syncScales.set(o, a)), a.push(n) } }, t.prototype.getScale = function (t) { var e = this.getScaleMeta(t); if (!e) { var n = i.last(t.split("-")), r = this.syncScales.get(n); r && r.length && (e = this.getScaleMeta(r[0])) } return e && e.scale }, t.prototype.deleteScale = function (t) { var e = this.getScaleMeta(t); if (e) { var n = e.syncKey, i = this.syncScales.get(n); if (i && i.length) { var r = i.indexOf(t); -1 !== r && i.splice(r, 1) } } this.scales.delete(t) }, t.prototype.clear = function () { this.scales.clear(), this.syncScales.clear() }, t.prototype.removeFromSyncScales = function (t) { var e = this; this.syncScales.forEach((function (n, i) { var r = n.indexOf(t); if (-1 !== r) return n.splice(r, 1), 0 === n.length && e.syncScales.delete(i), !1 })) }, t.prototype.getSyncKey = function (t) { var e = t.scale, n = t.scaleDef, r = e.field, o = i.get(n, ["sync"]); return !0 === o ? r : !1 === o ? void 0 : o }, t.prototype.getScaleMeta = function (t) { return this.scales.get(t) }, t }(); e.ScalePool = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.calculatePadding = void 0; var i = n(1), r = n(0), o = n(14), a = n(34), s = n(83), u = n(117); e.calculatePadding = function (t) { var e = t.padding; if (!s.isAutoPadding(e)) return new (u.PaddingCal.bind.apply(u.PaddingCal, i.__spreadArrays([void 0], s.parsePadding(e)))); var n = t.viewBBox, l = new u.PaddingCal, c = [], h = [], f = []; return r.each(t.getComponents(), (function (t) { var e = t.type; e === o.COMPONENT_TYPE.AXIS ? c.push(t) : [o.COMPONENT_TYPE.LEGEND, o.COMPONENT_TYPE.SLIDER, o.COMPONENT_TYPE.SCROLLBAR].includes(e) ? h.push(t) : e !== o.COMPONENT_TYPE.GRID && e !== o.COMPONENT_TYPE.TOOLTIP && f.push(t) })), r.each(c, (function (t) { var e = t.component.getLayoutBBox(), i = new a.BBox(e.x, e.y, e.width, e.height).exceed(n); l.max(i) })), r.each(h, (function (t) { var e = t.component, n = t.direction, i = e.getLayoutBBox(), r = e.get("padding"), o = new a.BBox(i.x, i.y, i.width, i.height).expand(r); l.inc(o, n) })), r.each(f, (function (t) { var e = t.component, n = t.direction, i = e.getLayoutBBox(), r = new a.BBox(i.x, i.y, i.width, i.height); l.inc(r, n) })), l } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.defaultSyncViewPadding = void 0, e.defaultSyncViewPadding = function (t, e, n) { var i = n.instance(); e.forEach((function (t) { t.autoPadding = i.max(t.autoPadding.getPadding()) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.group = void 0; var i = n(0); e.group = function (t, e, n) { if (void 0 === n && (n = {}), !e) return [t]; var r = i.groupToMap(t, e), o = []; if (1 === e.length && n[e[0]]) for (var a = 0, s = n[e[0]]; a < s.length; a++) { var u = r["_" + s[a]]; u && o.push(u) } else for (var l in r) if (r.hasOwnProperty(l)) { var c = r[l]; o.push(c) } return o } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.parseFields = void 0; var i = n(0); e.parseFields = function (t) { return i.isArray(t) ? t : t.split("*") } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(38), a = n(87), s = n(48), u = n(24), l = n(49), c = n(14), h = n(174), f = function () { function t(t) { this.shapesMap = {}, this.lastShapesMap = {}; var e = t.layout, n = t.container; this.layout = e, this.container = n } return t.prototype.render = function (t, e, n) { var a = this; void 0 === n && (n = !1), this.shapesMap = {}; var s = this.container, u = this.createOffscreenGroup(); if (t.length) { for (var l = 0, c = t; l < c.length; l++) { var f = c[l]; f && this.renderLabel(f, u) } this.doLayout(t, e), this.renderLabelLine(t), this.renderLabelBackground(t), this.adjustLabel(t) } var p = this.lastShapesMap, d = this.shapesMap; r.each(d, (function (t, e) { if (t.destroyed) delete d[e]; else { if (p[e]) { var u = t.get("data"), l = t.get("origin"), c = t.get("coordinate"), f = t.get("animateCfg"), g = p[e]; h.updateLabel(g, d[e], { data: u, origin: l, animateCfg: f, coordinate: c }), a.shapesMap[e] = g } else { s.add(t); var y = r.get(t.get("animateCfg"), n ? "enter" : "appear"); y && o.doAnimate(t, y, { toAttrs: i.__assign({}, t.attr()), coordinate: t.get("coordinate") }) } delete p[e] } })), r.each(p, (function (t) { var e = r.get(t.get("animateCfg"), "leave"); e ? o.doAnimate(t, e, { toAttrs: null, coordinate: t.get("coordinate") }) : t.remove(!0) })), this.lastShapesMap = d, u.destroy() }, t.prototype.clear = function () { this.container.clear(), this.shapesMap = {}, this.lastShapesMap = {} }, t.prototype.destroy = function () { this.container.destroy(), this.shapesMap = null, this.lastShapesMap = null }, t.prototype.renderLabel = function (t, e) { var n, o = t.id, a = t.elementId, s = t.data, u = t.mappingData, h = t.coordinate, f = t.animate, p = t.content, d = { id: o, elementId: a, data: s, origin: i.__assign(i.__assign({}, u), { data: u[c.FIELD_ORIGIN] }), coordinate: h }, g = e.addGroup(i.__assign({ name: "label", animateCfg: !1 !== this.animate && null !== f && !1 !== f && r.deepMix({}, this.animate, f) }, d)); if (p.isGroup && p.isGroup() || p.isShape && p.isShape()) { var y = p.getCanvasBBox(), v = y.width, m = y.height, x = r.get(t, "textAlign", "left"), b = t.x, C = t.y - m / 2; "center" === x ? b -= v / 2 : "right" !== x && "end" !== x || (b -= v), l.translate(p, b, C), n = p, g.add(p) } else { var _ = r.get(t, ["style", "fill"]); n = g.addShape("text", i.__assign({ attrs: i.__assign(i.__assign({ x: t.x, y: t.y, textAlign: t.textAlign, textBaseline: r.get(t, "textBaseline", "middle"), text: t.content }, t.style), { fill: r.isNull(_) ? t.color : _ }) }, d)) } t.rotate && l.rotate(n, t.rotate), this.shapesMap[o] = g }, t.prototype.doLayout = function (t, e) { var n = this; if (this.layout) { var i = r.isArray(this.layout) ? this.layout : [this.layout]; r.each(i, (function (i) { var o = a.getGeometryLabelLayout(r.get(i, "type", "")); if (o) { var s = [], u = []; r.each(n.shapesMap, (function (t, n) { s.push(t), u.push(e[t.get("elementId")]) })), o(t, s, u, n.region, i.cfg) } })) } }, t.prototype.renderLabelLine = function (t) { var e = this; r.each(t, (function (t) { var n = r.get(t, "coordinate"); if (t && n) { var o = n.getCenter(), a = n.getRadius(); if (t.labelLine) { var s = r.get(t, "labelLine", {}), l = t.id, c = s.path; if (!c) { var h = u.polarToCartesian(o.x, o.y, a, t.angle); c = [["M", h.x, h.y], ["L", t.x, t.y]] } var f = e.shapesMap[l]; f.destroyed || f.addShape("path", { capture: !1, attrs: i.__assign({ path: c, stroke: t.color ? t.color : r.get(t, ["style", "fill"], "#000"), fill: null }, s.style), id: l, origin: t.mappingData, data: t.data, coordinate: t.coordinate }) } } })) }, t.prototype.renderLabelBackground = function (t) { var e = this; r.each(t, (function (t) { var n = r.get(t, "coordinate"), o = r.get(t, "background"); if (o && n) { var a = t.id, u = e.shapesMap[a]; if (!u.destroyed) { var l = u.getChildren()[0]; if (l) { var c = s.getlLabelBackgroundInfo(u, t, o.padding), h = c.rotation, f = i.__rest(c, ["rotation"]), p = u.addShape("rect", { attrs: i.__assign(i.__assign({}, f), o.style || {}), id: a, origin: t.mappingData, data: t.data, coordinate: t.coordinate }); if (p.setZIndex(-1), h) { var d = l.getMatrix(); p.setMatrix(d) } } } } })) }, t.prototype.createOffscreenGroup = function () { return new (this.container.getGroupBase())({}) }, t.prototype.adjustLabel = function (t) { var e = this; r.each(t, (function (t) { if (t) { var n = t.id, i = e.shapesMap[n]; if (!i.destroyed) { var o = i.findAll((function (t) { return "path" !== t.get("type") })); r.each(o, (function (e) { e && (t.offsetX && e.attr("x", e.attr("x") + t.offsetX), t.offsetY && e.attr("y", e.attr("y") + t.offsetY)) })) } } })) }, t }(); e.default = f }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.updateLabel = void 0; var i = n(0), r = n(38), o = n(24); e.updateLabel = function t(e, n, a) { var s = a.data, u = a.origin, l = a.animateCfg, c = a.coordinate, h = i.get(l, "update"); e.set("data", s), e.set("origin", u), e.set("animateCfg", l), e.set("coordinate", c), e.set("visible", n.get("visible")), e.getChildren().forEach((function (i, f) { var p = n.getChildByIndex(f); if (p) { i.set("data", s), i.set("origin", u), i.set("animateCfg", l), i.set("coordinate", c); var d = o.getReplaceAttrs(i, p); h ? r.doAnimate(i, h, { toAttrs: d, coordinate: c }) : i.attr(d), p.isGroup() && t(i, p, a) } else e.removeChild(i), i.remove(!0) })), i.each(n.getChildren(), (function (t, n) { n >= e.getCount() && (t.destroyed || e.add(t)) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getMappingValue = void 0; var i = n(1); e.getMappingValue = function (t, e, n) { if (!t) return n; var r; if (t.callback && t.callback.length > 1) { var o = Array(t.callback.length - 1).fill(""); r = t.mapping.apply(t, i.__spreadArrays([e], o)).join("") } else r = t.mapping(e).join(""); return r || n } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.antvDark = e.createDarkStyleSheet = void 0; var i = "#000", r = "#BFBFBF", o = "#F0F0F0", a = "#FFFFFF", s = "#A6A6A6", u = "#737373", l = "#404040", c = "#262626", h = ["#5B8FF9", "#5AD8A6", "#5D7092", "#F6BD16", "#E86452", "#6DC8EC", "#945FB9", "#FF9845", "#1E9493", "#FF99C3"], f = ["#5B8FF9", "#CDDDFD", "#5AD8A6", "#CDF3E4", "#5D7092", "#CED4DE", "#F6BD16", "#FCEBB9", "#E86452", "#F8D0CB", "#6DC8EC", "#D3EEF9", "#945FB9", "#DECFEA", "#FF9845", "#FFE0C7", "#1E9493", "#BBDEDE", "#FF99C3", "#FFE0ED"]; e.createDarkStyleSheet = function (t) { void 0 === t && (t = {}); var e = t.backgroundColor, n = void 0 === e ? "#141414" : e, p = t.paletteQualitative10, d = void 0 === p ? h : p, g = t.paletteQualitative20, y = void 0 === g ? f : g, v = t.paletteSemanticRed, m = void 0 === v ? "#F4664A" : v, x = t.paletteSemanticGreen, b = void 0 === x ? "#30BF78" : x, C = t.paletteSemanticYellow, _ = void 0 === C ? "#FAAD14" : C, O = t.fontFamily, M = void 0 === O ? '"-apple-system", "Segoe UI", Roboto, "Helvetica Neue", Arial,\n    "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",\n    "Noto Color Emoji"' : O, w = t.brandColor; return { backgroundColor: n, brandColor: void 0 === w ? d[0] : w, paletteQualitative10: d, paletteQualitative20: y, paletteSemanticRed: m, paletteSemanticGreen: b, paletteSemanticYellow: _, fontFamily: M, axisLineBorderColor: l, axisLineBorder: 1, axisLineDash: null, axisTitleTextFillColor: s, axisTitleTextFontSize: 12, axisTitleTextLineHeight: 12, axisTitleTextFontWeight: "normal", axisTitleSpacing: 12, axisTickLineBorderColor: l, axisTickLineLength: 4, axisTickLineBorder: 1, axisSubTickLineBorderColor: c, axisSubTickLineLength: 2, axisSubTickLineBorder: 1, axisLabelFillColor: u, axisLabelFontSize: 12, axisLabelLineHeight: 12, axisLabelFontWeight: "normal", axisLabelOffset: 8, axisGridBorderColor: c, axisGridBorder: 1, axisGridLineDash: null, legendTitleTextFillColor: u, legendTitleTextFontSize: 12, legendTitleTextLineHeight: 21, legendTitleTextFontWeight: "normal", legendMarkerColor: h[0], legendMarkerSpacing: 8, legendMarkerSize: 4, legendCircleMarkerSize: 4, legendSquareMarkerSize: 4, legendLineMarkerSize: 5, legendItemNameFillColor: s, legendItemNameFontSize: 12, legendItemNameLineHeight: 12, legendItemNameFontWeight: "normal", legendItemSpacing: 24, legendItemMarginBottom: 12, legendSpacing: 16, legendPadding: [8, 8, 8, 8], legendHorizontalPadding: [8, 0, 8, 0], legendVerticalPadding: [0, 8, 0, 8], sliderRailFillColor: c, sliderRailBorder: 0, sliderRailBorderColor: null, sliderRailWidth: 100, sliderRailHeight: 12, sliderLabelTextFillColor: u, sliderLabelTextFontSize: 12, sliderLabelTextLineHeight: 12, sliderLabelTextFontWeight: "normal", sliderHandlerFillColor: o, sliderHandlerWidth: 10, sliderHandlerHeight: 14, sliderHandlerBorder: 1, sliderHandlerBorderColor: r, annotationArcBorderColor: c, annotationArcBorder: 1, annotationLineBorderColor: l, annotationLineBorder: 1, annotationLineDash: null, annotationTextFillColor: s, annotationTextFontSize: 12, annotationTextLineHeight: 12, annotationTextFontWeight: "normal", annotationTextBorderColor: null, annotationTextBorder: 0, annotationRegionFillColor: a, annotationRegionFillOpacity: .06, annotationRegionBorder: 0, annotationRegionBorderColor: null, annotationDataMarkerLineLength: 16, tooltipCrosshairsBorderColor: l, tooltipCrosshairsBorder: 1, tooltipCrosshairsLineDash: null, tooltipContainerFillColor: "#1f1f1f", tooltipContainerFillOpacity: .95, tooltipContainerShadow: "0px 2px 4px rgba(0,0,0,.5)", tooltipContainerBorderRadius: 3, tooltipTextFillColor: s, tooltipTextFontSize: 12, tooltipTextLineHeight: 12, tooltipTextFontWeight: "bold", labelFillColor: s, labelFillColorDark: "#2c3542", labelFillColorLight: "#ffffff", labelFontSize: 12, labelLineHeight: 12, labelFontWeight: "normal", labelBorderColor: null, labelBorder: 0, innerLabelFillColor: i, innerLabelFontSize: 12, innerLabelLineHeight: 12, innerLabelFontWeight: "normal", innerLabelBorderColor: null, innerLabelBorder: 0, overflowLabelFillColor: s, overflowLabelFillColorDark: "#2c3542", overflowLabelFillColorLight: "#ffffff", overflowLabelFontSize: 12, overflowLabelLineHeight: 12, overflowLabelFontWeight: "normal", overflowLabelBorderColor: i, overflowLabelBorder: 1, labelLineBorder: 1, labelLineBorderColor: l, pointFillColor: h[0], pointFillOpacity: .95, pointSize: 4, pointBorder: 1, pointBorderColor: i, pointBorderOpacity: 1, pointActiveBorderColor: a, pointSelectedBorder: 2, pointSelectedBorderColor: a, pointInactiveFillOpacity: .3, pointInactiveBorderOpacity: .3, hollowPointSize: 4, hollowPointBorder: 1, hollowPointBorderColor: h[0], hollowPointBorderOpacity: .95, hollowPointFillColor: i, hollowPointActiveBorder: 1, hollowPointActiveBorderColor: a, hollowPointActiveBorderOpacity: 1, hollowPointSelectedBorder: 2, hollowPointSelectedBorderColor: a, hollowPointSelectedBorderOpacity: 1, hollowPointInactiveBorderOpacity: .3, lineBorder: 2, lineBorderColor: h[0], lineBorderOpacity: 1, lineActiveBorder: 3, lineSelectedBorder: 3, lineInactiveBorderOpacity: .3, areaFillColor: h[0], areaFillOpacity: .25, areaActiveFillColor: h[0], areaActiveFillOpacity: .5, areaSelectedFillColor: h[0], areaSelectedFillOpacity: .5, areaInactiveFillOpacity: .3, hollowAreaBorderColor: h[0], hollowAreaBorder: 2, hollowAreaBorderOpacity: 1, hollowAreaActiveBorder: 3, hollowAreaActiveBorderColor: a, hollowAreaSelectedBorder: 3, hollowAreaSelectedBorderColor: a, hollowAreaInactiveBorderOpacity: .3, intervalFillColor: h[0], intervalFillOpacity: .95, intervalActiveBorder: 1, intervalActiveBorderColor: a, intervalActiveBorderOpacity: 1, intervalSelectedBorder: 2, intervalSelectedBorderColor: a, intervalSelectedBorderOpacity: 1, intervalInactiveBorderOpacity: .3, intervalInactiveFillOpacity: .3, hollowIntervalBorder: 2, hollowIntervalBorderColor: h[0], hollowIntervalBorderOpacity: 1, hollowIntervalFillColor: i, hollowIntervalActiveBorder: 2, hollowIntervalActiveBorderColor: a, hollowIntervalSelectedBorder: 3, hollowIntervalSelectedBorderColor: a, hollowIntervalSelectedBorderOpacity: 1, hollowIntervalInactiveBorderOpacity: .3 } }, e.antvDark = e.createDarkStyleSheet() }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "version", (function () { return u })); var i = n(55); n.d(e, "Shape", (function () { return i })); var r = n(7); for (var o in r) ["default", "Canvas", "Group", "Shape", "version"].indexOf(o) < 0 && function (t) { n.d(e, t, (function () { return r[t] })) }(o); var a = n(138); n.d(e, "Canvas", (function () { return a.a })); var s = n(54); n.d(e, "Group", (function () { return s.a })); var u = "0.5.6" }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(14), o = i.__importDefault(n(88)); n(180); var a = function (t) { function e(e) { var n = t.call(this, e) || this; n.type = "area", n.shapeType = "area", n.generatePoints = !0, n.startOnZero = !0; var i = e.startOnZero, r = void 0 === i || i, o = e.sortable, a = void 0 !== o && o, s = e.showSinglePoint, u = void 0 !== s && s; return n.startOnZero = r, n.sortable = a, n.showSinglePoint = u, n } return i.__extends(e, t), e.prototype.getPointsAndData = function (t) { for (var e = [], n = [], i = 0, o = t.length; i < o; i++) { var a = t[i]; e.push(a.points), n.push(a[r.FIELD_ORIGIN]) } return { points: e, data: n } }, e.prototype.getYMinValue = function () { return this.startOnZero ? t.prototype.getYMinValue.call(this) : this.getYScale().min }, e }(o.default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(15), o = n(65), a = r.registerShapeFactory("area", { defaultShapeType: "area", getDefaultPoints: function (t) { var e = t.x, n = t.y0; return (i.isArray(t.y) ? t.y : [n, t.y]).map((function (t) { return { x: e, y: t } })) } }); r.registerShape("area", "area", { draw: function (t, e) { var n = o.getShapeAttrs(t, !1, !1, this); return e.addShape({ type: "path", attrs: n, name: "area" }) }, getMarker: function (t) { return { symbol: function (t, e, n) { return void 0 === n && (n = 5.5), [["M", t - n, e - 4], ["L", t + n, e - 4], ["L", t + n, e + 4], ["L", t - n, e + 4], ["Z"]] }, style: { r: 5, fill: t.color } } } }), e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(37)); n(182); var o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "edge", e.shapeType = "edge", e.generatePoints = !0, e } return i.__extends(e, t), e }(r.default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(15), o = n(21), a = n(59), s = n(90), u = r.registerShapeFactory("edge", { defaultShapeType: "line", getDefaultPoints: function (t) { return s.splitPoints(t) } }); r.registerShape("edge", "line", { draw: function (t, e) { var n = o.getStyle(t, !0, !1, "lineWidth"), r = a.getLinePath(this.parsePoints(t.points), this.coordinate.isPolar); return e.addShape("path", { attrs: i.__assign(i.__assign({}, n), { path: r }) }) }, getMarker: function (t) { return { symbol: "circle", style: { r: 4.5, fill: t.color } } } }), e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(51)), o = n(0), a = n(14), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "heatmap", e.paletteCache = {}, e } return i.__extends(e, t), e.prototype.createElements = function (t, e, n) { void 0 === n && (n = !1); var i = this.prepareRange(t), r = this.prepareSize(), a = o.get(this.styleOption, ["style", "shadowBlur"]); return o.isNumber(a) || (a = r / 2), this.prepareGreyScaleBlurredCircle(r, a), this.drawWithRange(t, i, r, a), null }, e.prototype.clear = function () { t.prototype.clear.call(this), this.clearShadowCanvasCtx(), this.paletteCache = {} }, e.prototype.prepareRange = function (t) { var e = this.getAttribute("color").getFields()[0], n = 1 / 0, i = -1 / 0; return t.forEach((function (t) { var r = t[a.FIELD_ORIGIN][e]; r > i && (i = r), r < n && (n = r) })), n === i && (n = i - 1), [n, i] }, e.prototype.prepareSize = function () { var t = this.getDefaultValue("size"); return o.isNumber(t) || (t = this.getDefaultSize()), t }, e.prototype.prepareGreyScaleBlurredCircle = function (t, e) { var n = this.getGrayScaleBlurredCanvas(), i = t + e, r = n.getContext("2d"); n.width = n.height = 2 * i, r.clearRect(0, 0, n.width, n.height), r.shadowOffsetX = r.shadowOffsetY = 2 * i, r.shadowBlur = e, r.shadowColor = "black", r.beginPath(), r.arc(-i, -i, t, 0, 2 * Math.PI, !0), r.closePath(), r.fill() }, e.prototype.drawWithRange = function (t, e, n, i) { var r = this.coordinate, o = r.start, s = r.end, u = this.coordinate.getWidth(), l = this.coordinate.getHeight(), c = this.getAttribute("color").getFields()[0]; this.clearShadowCanvasCtx(); var h = this.getShadowCanvasCtx(); e && (t = t.filter((function (t) { return t[a.FIELD_ORIGIN][c] <= e[1] && t[a.FIELD_ORIGIN][c] >= e[0] }))); for (var f = this.scales[c], p = 0, d = t; p < d.length; p++) { var g = d[p], y = this.getDrawCfg(g), v = y.x, m = y.y, x = f.scale(g[a.FIELD_ORIGIN][c]); this.drawGrayScaleBlurredCircle(v - o.x, m - s.y, n + i, x, h) } var b = h.getImageData(0, 0, u, l); this.clearShadowCanvasCtx(), this.colorize(b), h.putImageData(b, 0, 0); var C = this.getImageShape(); C.attr("x", o.x), C.attr("y", s.y), C.attr("width", u), C.attr("height", l), C.attr("img", h.canvas), C.set("origin", this.getShapeInfo(t)) }, e.prototype.getDefaultSize = function () { var t = this.getAttribute("position"), e = this.coordinate; return Math.min(e.getWidth() / (4 * t.scales[0].ticks.length), e.getHeight() / (4 * t.scales[1].ticks.length)) }, e.prototype.clearShadowCanvasCtx = function () { var t = this.getShadowCanvasCtx(); t.clearRect(0, 0, t.canvas.width, t.canvas.height) }, e.prototype.getShadowCanvasCtx = function () { var t = this.shadowCanvas; return t || (t = document.createElement("canvas"), this.shadowCanvas = t), t.width = this.coordinate.getWidth(), t.height = this.coordinate.getHeight(), t.getContext("2d") }, e.prototype.getGrayScaleBlurredCanvas = function () { return this.grayScaleBlurredCanvas || (this.grayScaleBlurredCanvas = document.createElement("canvas")), this.grayScaleBlurredCanvas }, e.prototype.drawGrayScaleBlurredCircle = function (t, e, n, i, r) { var o = this.getGrayScaleBlurredCanvas(); r.globalAlpha = i, r.drawImage(o, t - n, e - n) }, e.prototype.colorize = function (t) { for (var e = this.getAttribute("color"), n = t.data, i = this.paletteCache, a = 3; a < n.length; a += 4) { var s = n[a]; if (o.isNumber(s)) { var u = i[s] ? i[s] : r.default.rgb2arr(e.gradient(s / 256)); n[a - 3] = u[0], n[a - 2] = u[1], n[a - 1] = u[2], n[a] = s } } }, e.prototype.getImageShape = function () { var t = this.imageShape; return t || (t = this.container.addShape({ type: "image", attrs: {} }), this.imageShape = t, t) }, e.prototype.getShapeInfo = function (t) { var e = this.getDrawCfg(t[0]); return i.__assign(i.__assign({}, e), { mappingData: t, data: this.getData(t) }) }, e.prototype.getData = function (t) { return t.map((function (t) { return t[a.FIELD_ORIGIN] })) }, e }(i.__importDefault(n(37)).default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(26), a = i.__importDefault(n(37)); n(185); var s = n(125), u = function (t) { function e(e) { var n = t.call(this, e) || this; n.type = "interval", n.shapeType = "interval", n.generatePoints = !0; var i = e.background; return n.background = i, n } return i.__extends(e, t), e.prototype.createShapePointsCfg = function (e) { var n, i = t.prototype.createShapePointsCfg.call(this, e), r = this.getAttribute("size"); if (r) { n = this.getAttributeValues(r, e)[0]; var a = this.coordinate; n /= o.getXDimensionLength(a) } else this.defaultSize || (this.defaultSize = s.getDefaultSize(this)), n = this.defaultSize; return i.size = n, i }, e.prototype.adjustScale = function () { t.prototype.adjustScale.call(this); var e = this.getYScale(); if ("theta" === this.coordinate.type) e.change({ nice: !1, min: 0, max: Math.max(Math.max.apply(null, e.values), e.max) }); else { var n = this.scaleDefs, i = e.field, o = e.min, a = e.max; "time" !== e.type && (o > 0 && !r.get(n, [i, "min"]) && e.change({ min: 0 }), a <= 0 && !r.get(n, [i, "max"]) && e.change({ max: 0 })) } }, e.prototype.getDrawCfg = function (e) { var n = t.prototype.getDrawCfg.call(this, e); return n.background = this.background, n }, e }(a.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(15), o = n(86), a = n(21), s = n(61), u = r.registerShapeFactory("interval", { defaultShapeType: "rect", getDefaultPoints: function (t) { return s.getRectPoints(t) } }); r.registerShape("interval", "rect", { draw: function (t, e) { var n, r = a.getStyle(t, !1, !0), u = e, l = null == t ? void 0 : t.background; if (l) { u = e.addGroup(); var c = a.getBackgroundRectStyle(t), h = s.getBackgroundRectPath(t, this.parsePoints(t.points), this.coordinate); u.addShape("path", { attrs: i.__assign(i.__assign({}, c), { path: h }), zIndex: -1, name: o.BACKGROUND_SHAPE }) } n = r.radius && this.coordinate.isRect ? s.getRectWithCornerRadius(this.parsePoints(t.points), this.coordinate, r.radius) : this.parsePath(s.getIntervalRectPath(t.points, r.lineCap, this.coordinate)); var f = u.addShape("path", { attrs: i.__assign(i.__assign({}, r), { path: n }), name: "interval" }); return l ? u : f }, getMarker: function (t) { var e = t.color; return t.isInPolar ? { symbol: "circle", style: { r: 4.5, fill: e } } : { symbol: "square", style: { r: 4, fill: e } } } }), e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(88)); n(123); var o = function (t) { function e(e) { var n = t.call(this, e) || this; n.type = "line"; var i = e.sortable, r = void 0 !== i && i; return n.sortable = r, n } return i.__extends(e, t), e }(r.default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(37)); n(188); var o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "point", e.shapeType = "point", e.generatePoints = !0, e } return i.__extends(e, t), e.prototype.getDrawCfg = function (e) { var n = t.prototype.getDrawCfg.call(this, e); return i.__assign(i.__assign({}, n), { isStack: !!this.getAdjust("stack") }) }, e }(r.default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(60), o = n(15), a = n(90), s = n(91), u = o.registerShapeFactory("point", { defaultShapeType: "hollow-circle", getDefaultPoints: function (t) { return a.splitPoints(t) } }); i.each(s.SHAPES, (function (t) { o.registerShape("point", "hollow-" + t, { draw: function (e, n) { return s.drawPoints(this, e, n, t, !0) }, getMarker: function (e) { var n = e.color; return { symbol: r.MarkerSymbols[t] || t, style: { r: 4.5, stroke: n, fill: null } } } }) })), e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = i.__importDefault(n(37)); n(190); var a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "polygon", e.shapeType = "polygon", e.generatePoints = !0, e } return i.__extends(e, t), e.prototype.createShapePointsCfg = function (e) { var n, i = t.prototype.createShapePointsCfg.call(this, e), o = i.x, a = i.y; if (!r.isArray(o) || !r.isArray(a)) { var s = this.getXScale(), u = this.getYScale(), l = .5 / s.values.length, c = .5 / u.values.length; s.isCategory && u.isCategory ? (o = [o - l, o - l, o + l, o + l], a = [a - c, a + c, a + c, a - c]) : r.isArray(o) ? (o = [(n = o)[0], n[0], n[1], n[1]], a = [a - c / 2, a + c / 2, a + c / 2, a - c / 2]) : r.isArray(a) && (a = [(n = a)[0], n[1], n[1], n[0]], o = [o - l / 2, o - l / 2, o + l / 2, o + l / 2]), i.x = o, i.y = a } return i }, e }(o.default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(15), a = n(21); var s = o.registerShapeFactory("polygon", { defaultShapeType: "polygon", getDefaultPoints: function (t) { var e = []; return r.each(t.x, (function (n, i) { var r = t.y[i]; e.push({ x: n, y: r }) })), e } }); o.registerShape("polygon", "polygon", { draw: function (t, e) { if (!r.isEmpty(t.points)) { var n = a.getStyle(t, !0, !0), o = this.parsePath(function (t) { for (var e = t[0], n = 1, i = [["M", e.x, e.y]]; n < t.length;) { var o = t[n]; o.x === t[n - 1].x && o.y === t[n - 1].y || (i.push(["L", o.x, o.y]), o.x === e.x && o.y === e.y && n < t.length - 1 && (e = t[n + 1], i.push(["Z"]), i.push(["M", e.x, e.y]), n++)), n++ } return r.isEqual(r.last(i), e) || i.push(["L", e.x, e.y]), i.push(["Z"]), i }(t.points)); return e.addShape("path", { attrs: i.__assign(i.__assign({}, n), { path: o }), name: "polygon" }) } }, getMarker: function (t) { return { symbol: "square", style: { r: 4, fill: t.color } } } }), e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(26), o = i.__importDefault(n(37)); n(192); var a = n(125), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.type = "schema", e.shapeType = "schema", e.generatePoints = !0, e } return i.__extends(e, t), e.prototype.createShapePointsCfg = function (e) { var n, i = t.prototype.createShapePointsCfg.call(this, e), o = this.getAttribute("size"); if (o) { n = this.getAttributeValues(o, e)[0]; var s = this.coordinate; n /= r.getXDimensionLength(s) } else this.defaultSize || (this.defaultSize = a.getDefaultSize(this)), n = this.defaultSize; return i.size = n, i }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(15).registerShapeFactory("schema", { defaultShapeType: "" }); e.default = i }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(15), r = n(65); i.registerShape("area", "line", { draw: function (t, e) { var n = r.getShapeAttrs(t, !0, !1, this); return e.addShape({ type: "path", attrs: n, name: "area" }) }, getMarker: function (t) { return { symbol: function (t, e, n) { return void 0 === n && (n = 5.5), [["M", t - n, e - 4], ["L", t + n, e - 4], ["L", t + n, e + 4], ["L", t - n, e + 4], ["Z"]] }, style: { r: 5, stroke: t.color, fill: null } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(15), r = n(65); i.registerShape("area", "smooth", { draw: function (t, e) { var n = this.coordinate, i = r.getShapeAttrs(t, !1, !0, this, r.getConstraint(n)); return e.addShape({ type: "path", attrs: i, name: "area" }) }, getMarker: function (t) { return { symbol: function (t, e, n) { return void 0 === n && (n = 5.5), [["M", t - n, e - 4], ["L", t + n, e - 4], ["L", t + n, e + 4], ["L", t - n, e + 4], ["Z"]] }, style: { r: 5, fill: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(15), r = n(65); i.registerShape("area", "smooth-line", { draw: function (t, e) { var n = this.coordinate, i = r.getShapeAttrs(t, !0, !0, this, r.getConstraint(n)); return e.addShape({ type: "path", attrs: i, name: "area" }) }, getMarker: function (t) { return { symbol: function (t, e, n) { return void 0 === n && (n = 5.5), [["M", t - n, e - 4], ["L", t + n, e - 4], ["L", t + n, e + 4], ["L", t - n, e + 4], ["Z"]] }, style: { r: 5, stroke: t.color, fill: null } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(24), o = n(15), a = n(21), s = n(126); o.registerShape("edge", "arc", { draw: function (t, e) { var n, o = a.getStyle(t, !0, !1, "lineWidth"), u = t.points, l = u.length > 2 ? "weight" : "normal"; if (t.isInCircle) { var c = { x: 0, y: 1 }; return "normal" === l ? n = function (t, e, n) { var i = s.getQPath(e, n), r = [["M", t.x, t.y]]; return r.push(i), r }(u[0], u[1], c) : (o.fill = o.stroke, n = function (t, e) { var n = s.getQPath(t[1], e), i = s.getQPath(t[3], e), r = [["M", t[0].x, t[0].y]]; return r.push(i), r.push(["L", t[3].x, t[3].y]), r.push(["L", t[2].x, t[2].y]), r.push(n), r.push(["L", t[1].x, t[1].y]), r.push(["L", t[0].x, t[0].y]), r.push(["Z"]), r }(u, c)), n = this.parsePath(n), e.addShape("path", { attrs: i.__assign(i.__assign({}, o), { path: n }) }) } if ("normal" === l) return u = this.parsePoints(u), n = r.getArcPath((u[1].x + u[0].x) / 2, u[0].y, Math.abs(u[1].x - u[0].x) / 2, Math.PI, 2 * Math.PI), e.addShape("path", { attrs: i.__assign(i.__assign({}, o), { path: n }) }); var h = s.getCPath(u[1], u[3]), f = s.getCPath(u[2], u[0]); return n = [["M", u[0].x, u[0].y], ["L", u[1].x, u[1].y], h, ["L", u[3].x, u[3].y], ["L", u[2].x, u[2].y], f, ["Z"]], n = this.parsePath(n), o.fill = o.stroke, e.addShape("path", { attrs: i.__assign(i.__assign({}, o), { path: n }) }) }, getMarker: function (t) { return { symbol: "circle", style: { r: 4.5, fill: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(15), o = n(21), a = n(126); r.registerShape("edge", "smooth", { draw: function (t, e) { var n = o.getStyle(t, !0, !1, "lineWidth"), r = t.points, s = this.parsePath(function (t, e) { var n = a.getCPath(t, e), i = [["M", t.x, t.y]]; return i.push(n), i }(r[0], r[1])); return e.addShape("path", { attrs: i.__assign(i.__assign({}, n), { path: s }) }) }, getMarker: function (t) { return { symbol: "circle", style: { r: 4.5, fill: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(15), a = n(21); o.registerShape("edge", "vhv", { draw: function (t, e) { var n = a.getStyle(t, !0, !1, "lineWidth"), o = t.points, s = this.parsePath(function (t, e) { var n = []; n.push({ x: t.x, y: t.y * (1 - 1 / 3) + e.y * (1 / 3) }), n.push({ x: e.x, y: t.y * (1 - 1 / 3) + e.y * (1 / 3) }), n.push(e); var i = [["M", t.x, t.y]]; return r.each(n, (function (t) { i.push(["L", t.x, t.y]) })), i }(o[0], o[1])); return e.addShape("path", { attrs: i.__assign(i.__assign({}, n), { path: s }) }) }, getMarker: function (t) { return { symbol: "circle", style: { r: 4.5, fill: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(15), o = n(21), a = n(61); r.registerShape("interval", "funnel", { getPoints: function (t) { return t.size = 2 * t.size, a.getRectPoints(t) }, draw: function (t, e) { var n = o.getStyle(t, !1, !0), r = this.parsePath(a.getFunnelPath(t.points, t.nextPoints, !1)); return e.addShape("path", { attrs: i.__assign(i.__assign({}, n), { path: r }), name: "interval" }) }, getMarker: function (t) { return { symbol: "square", style: { r: 4, fill: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(15), o = n(86), a = n(21), s = n(61); r.registerShape("interval", "hollow-rect", { draw: function (t, e) { var n = a.getStyle(t, !0, !1), r = e, u = null == t ? void 0 : t.background; if (u) { r = e.addGroup(); var l = a.getBackgroundRectStyle(t), c = s.getBackgroundRectPath(t, this.parsePoints(t.points), this.coordinate); r.addShape("path", { attrs: i.__assign(i.__assign({}, l), { path: c }), zIndex: -1, name: o.BACKGROUND_SHAPE }) } var h = this.parsePath(s.getRectPath(t.points)), f = r.addShape("path", { attrs: i.__assign(i.__assign({}, n), { path: h }), name: "interval" }); return u ? r : f }, getMarker: function (t) { var e = t.color; return t.isInPolar ? { symbol: "circle", style: { r: 4.5, stroke: e, fill: null } } : { symbol: "square", style: { r: 4, stroke: e, fill: null } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(15), a = n(21), s = n(61), u = n(33); o.registerShape("interval", "line", { getPoints: function (t) { return n = (e = t).x, i = e.y, o = e.y0, r.isArray(i) ? i.map((function (t, e) { return { x: r.isArray(n) ? n[e] : n, y: t } })) : [{ x: n, y: o }, { x: n, y: i }]; var e, n, i, o }, draw: function (t, e) { var n = a.getStyle(t, !0, !1, "lineWidth"), r = u.omit(i.__assign({}, n), ["fill"]), o = this.parsePath(s.getRectPath(t.points, !1)); return e.addShape("path", { attrs: i.__assign(i.__assign({}, r), { path: o }), name: "interval" }) }, getMarker: function (t) { return { symbol: function (t, e, n) { return [["M", t, e - n], ["L", t, e + n]] }, style: { r: 5, stroke: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(15), o = n(21), a = n(61); r.registerShape("interval", "pyramid", { getPoints: function (t) { return t.size = 2 * t.size, a.getRectPoints(t, !0) }, draw: function (t, e) { var n = o.getStyle(t, !1, !0), r = this.parsePath(a.getFunnelPath(t.points, t.nextPoints, !0)); return e.addShape("path", { attrs: i.__assign(i.__assign({}, n), { path: r }), name: "interval" }) }, getMarker: function (t) { return { symbol: "square", style: { r: 4, fill: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(15), a = n(21); o.registerShape("interval", "tick", { getPoints: function (t) { return function (t) { var e, n, i = t.x, o = t.y, a = t.y0, s = t.size; r.isArray(o) ? (e = o[0], n = o[1]) : (e = a, n = o); var u = i + s / 2, l = i - s / 2; return [{ x: i, y: e }, { x: i, y: n }, { x: l, y: e }, { x: u, y: e }, { x: l, y: n }, { x: u, y: n }] }(t) }, draw: function (t, e) { var n, r = a.getStyle(t, !0, !1), o = this.parsePath([["M", (n = t.points)[0].x, n[0].y], ["L", n[1].x, n[1].y], ["M", n[2].x, n[2].y], ["L", n[3].x, n[3].y], ["M", n[4].x, n[4].y], ["L", n[5].x, n[5].y]]); return e.addShape("path", { attrs: i.__assign(i.__assign({}, r), { path: o }), name: "interval" }) }, getMarker: function (t) { return { symbol: function (t, e, n) { return [["M", t - n / 2, e - n], ["L", t + n / 2, e - n], ["M", t, e - n], ["L", t, e + n], ["M", t - n / 2, e + n], ["L", t + n / 2, e + n]] }, style: { r: 5, stroke: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(15), a = n(89), s = n(21), u = n(124); function l(t, e) { var n = a.getPathPoints(t.points, t.connectNulls, t.showSinglePoint), o = []; return r.each(n, (function (t) { var n = function (t, e) { var n = []; return r.each(t, (function (i, r) { var o = t[r + 1]; if (n.push(i), o) { var a = function (t, e, n) { var i, r = t.x, o = t.y, a = e.x, s = e.y; switch (n) { case "hv": i = [{ x: a, y: o }]; break; case "vh": i = [{ x: r, y: s }]; break; case "hvh": var u = (a + r) / 2; i = [{ x: u, y: o }, { x: u, y: s }]; break; case "vhv": var l = (o + s) / 2; i = [{ x: r, y: l }, { x: a, y: l }] }return i }(i, o, e); n = n.concat(a) } })), n }(t, e); o = o.concat(function (t) { return t.map((function (t, e) { return 0 === e ? ["M", t.x, t.y] : ["L", t.x, t.y] })) }(n)) })), i.__assign(i.__assign({}, s.getStyle(t, !0, !1, "lineWidth")), { path: o }) } r.each(["hv", "vh", "hvh", "vhv"], (function (t) { o.registerShape("line", t, { draw: function (e, n) { var i = l(e, t); return n.addShape({ type: "path", attrs: i, name: "line" }) }, getMarker: function (e) { return u.getLineMarker(e, t) } }) })) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(60), o = n(15), a = n(91); i.each(a.HOLLOW_SHAPES, (function (t) { o.registerShape("point", t, { draw: function (e, n) { return a.drawPoints(this, e, n, t, !0) }, getMarker: function (e) { var n = e.color; return { symbol: r.MarkerSymbols[t], style: { r: 4.5, stroke: n, fill: null } } } }) })) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(15), r = n(21); i.registerShape("point", "image", { draw: function (t, e) { var n = r.getStyle(t, !1, !1, "r").r, i = this.parsePoints(t.points), o = i[0]; if (t.isStack) o = i[1]; else if (i.length > 1) { for (var a = e.addGroup(), s = 0, u = i; s < u.length; s++) { var l = u[s]; a.addShape("image", { attrs: { x: l.x - n / 2, y: l.y - n, width: n, height: n, img: t.shape[1] } }) } return a } return e.addShape("image", { attrs: { x: o.x - n / 2, y: o.y - n, width: n, height: n, img: t.shape[1] } }) }, getMarker: function (t) { return { symbol: "circle", style: { r: 4.5, fill: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(0), r = n(60), o = n(15), a = n(91); i.each(a.SHAPES, (function (t) { o.registerShape("point", t, { draw: function (e, n) { return a.drawPoints(this, e, n, t, !1) }, getMarker: function (e) { var n = e.color; return { symbol: r.MarkerSymbols[t] || t, style: { r: 4.5, fill: n } } } }) })) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(15), a = n(21); function s(t) { var e = r.isArray(t) ? t : [t], n = e[0], i = e[e.length - 1], o = e.length > 1 ? e[1] : n; return { min: n, max: i, min1: o, max1: e.length > 3 ? e[3] : i, median: e.length > 2 ? e[2] : o } } function u(t, e, n) { var i, o = n / 2; if (r.isArray(e)) { var a = s(e), u = a.min, l = a.max, c = a.median, h = a.min1, f = t - o, p = t + o; i = [[f, l], [p, l], [t, l], [t, d = a.max1], [f, h], [f, d], [p, d], [p, h], [t, h], [t, u], [f, u], [p, u], [f, c], [p, c]] } else { e = r.isNil(e) ? .5 : e; var d, g = s(t), y = (u = g.min, l = g.max, c = g.median, e - o), v = e + o; i = [[u, y], [u, v], [u, e], [h = g.min1, e], [h, y], [h, v], [d = g.max1, v], [d, y], [d, e], [l, e], [l, y], [l, v], [c, y], [c, v]] } return i.map((function (t) { return { x: t[0], y: t[1] } })) } o.registerShape("schema", "box", { getPoints: function (t) { return u(t.x, t.y, t.size) }, draw: function (t, e) { var n, r = a.getStyle(t, !0, !1), o = this.parsePath([["M", (n = t.points)[0].x, n[0].y], ["L", n[1].x, n[1].y], ["M", n[2].x, n[2].y], ["L", n[3].x, n[3].y], ["M", n[4].x, n[4].y], ["L", n[5].x, n[5].y], ["L", n[6].x, n[6].y], ["L", n[7].x, n[7].y], ["L", n[4].x, n[4].y], ["Z"], ["M", n[8].x, n[8].y], ["L", n[9].x, n[9].y], ["M", n[10].x, n[10].y], ["L", n[11].x, n[11].y], ["M", n[12].x, n[12].y], ["L", n[13].x, n[13].y]]); return e.addShape("path", { attrs: i.__assign(i.__assign({}, r), { path: o, name: "schema" }) }) }, getMarker: function (t) { return { symbol: function (t, e, n) { var i = u(t, [e - 6, e - 3, e, e + 3, e + 6], n); return [["M", i[0].x + 1, i[0].y], ["L", i[1].x - 1, i[1].y], ["M", i[2].x, i[2].y], ["L", i[3].x, i[3].y], ["M", i[4].x, i[4].y], ["L", i[5].x, i[5].y], ["L", i[6].x, i[6].y], ["L", i[7].x, i[7].y], ["L", i[4].x, i[4].y], ["Z"], ["M", i[8].x, i[8].y], ["L", i[9].x, i[9].y], ["M", i[10].x + 1, i[10].y], ["L", i[11].x - 1, i[11].y], ["M", i[12].x, i[12].y], ["L", i[13].x, i[13].y]] }, style: { r: 6, lineWidth: 1, stroke: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(33), a = n(15), s = n(21); function u(t, e, n) { var i, a, s = (i = e, a = (r.isArray(i) ? i : [i]).sort((function (t, e) { return e - t })), o.padEnd(a, 4, a[a.length - 1])); return [{ x: t, y: s[0] }, { x: t, y: s[1] }, { x: t - n / 2, y: s[2] }, { x: t - n / 2, y: s[1] }, { x: t + n / 2, y: s[1] }, { x: t + n / 2, y: s[2] }, { x: t, y: s[2] }, { x: t, y: s[3] }] } a.registerShape("schema", "candle", { getPoints: function (t) { return u(t.x, t.y, t.size) }, draw: function (t, e) { var n, r = s.getStyle(t, !0, !0), o = this.parsePath([["M", (n = t.points)[0].x, n[0].y], ["L", n[1].x, n[1].y], ["M", n[2].x, n[2].y], ["L", n[3].x, n[3].y], ["L", n[4].x, n[4].y], ["L", n[5].x, n[5].y], ["Z"], ["M", n[6].x, n[6].y], ["L", n[7].x, n[7].y]]); return e.addShape("path", { attrs: i.__assign(i.__assign({}, r), { path: o, name: "schema" }) }) }, getMarker: function (t) { var e = t.color; return { symbol: function (t, e, n) { var i = u(t, [e + 7.5, e + 3, e - 3, e - 7.5], n); return [["M", i[0].x, i[0].y], ["L", i[1].x, i[1].y], ["M", i[2].x, i[2].y], ["L", i[3].x, i[3].y], ["L", i[4].x, i[4].y], ["L", i[5].x, i[5].y], ["Z"], ["M", i[6].x, i[6].y], ["L", i[7].x, i[7].y]] }, style: { lineWidth: 1, stroke: e, fill: e, r: 6 } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(15), a = n(21); function s(t, e) { var n = Math.abs(t[0].x - t[2].x), i = Math.abs(t[0].y - t[2].y), o = Math.min(n, i); return e && (o = r.clamp(e, 0, Math.min(n, i))), o /= 2, { x: (t[0].x + t[2].x) / 2 - o, y: (t[0].y + t[2].y) / 2 - o, width: 2 * o, height: 2 * o } } o.registerShape("polygon", "square", { draw: function (t, e) { if (!r.isEmpty(t.points)) { var n = a.getStyle(t, !0, !0), o = this.parsePoints(t.points); return e.addShape("rect", { attrs: i.__assign(i.__assign({}, n), s(o, t.size)), name: "polygon" }) } }, getMarker: function (t) { return { symbol: "square", style: { r: 4, fill: t.color } } } }) }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getLabelValueDir = function (t) { var e = t.points; return e[0].y <= e[2].y ? 1 : -1 }, e.prototype.getLabelOffsetPoint = function (e, n, r) { var o, a = t.prototype.getLabelOffsetPoint.call(this, e, n, r), s = this.getCoordinate().isTransposed ? "x" : "y", u = this.getLabelValueDir(e.mappingData); return i.__assign(i.__assign({}, a), ((o = {})[s] = a[s] * u, o)) }, e.prototype.getThemedLabelCfg = function (t) { var e = this.geometry, n = this.getDefaultLabelCfg(), i = e.theme; return r.deepMix({}, n, i.labels, "middle" === t.position ? { offset: 0 } : {}, t) }, e.prototype.setLabelPosition = function (t, e, n, i) { var o, a, s, u, l = this.getCoordinate(), c = l.isTransposed, h = e.points, f = l.convert(h[0]), p = l.convert(h[2]), d = this.getLabelValueDir(e), g = r.isArray(e.shape) ? e.shape[0] : e.shape; if ("funnel" === g || "pyramid" === g) { var y = r.get(e, "nextPoints"), v = r.get(e, "points"); if (y) { var m = l.convert(v[0]), x = l.convert(v[1]), b = l.convert(y[0]), C = l.convert(y[1]); c ? (o = Math.min(b.y, m.y), s = Math.max(b.y, m.y), a = (x.x + C.x) / 2, u = (m.x + b.x) / 2) : (o = Math.min((x.y + C.y) / 2, (m.y + b.y) / 2), s = Math.max((x.y + C.y) / 2, (m.y + b.y) / 2), a = C.x, u = m.x) } else o = Math.min(p.y, f.y), s = Math.max(p.y, f.y), a = p.x, u = f.x } else o = Math.min(p.y, f.y), s = Math.max(p.y, f.y), a = p.x, u = f.x; switch (i) { case "right": t.x = a, t.y = (o + s) / 2, t.textAlign = r.get(t, "textAlign", d > 0 ? "left" : "right"); break; case "left": t.x = u, t.y = (o + s) / 2, t.textAlign = r.get(t, "textAlign", d > 0 ? "left" : "right"); break; case "bottom": c && (t.x = (a + u) / 2), t.y = s, t.textAlign = r.get(t, "textAlign", "center"), t.textBaseline = r.get(t, "textBaseline", d > 0 ? "bottom" : "top"); break; case "middle": c && (t.x = (a + u) / 2), t.y = (o + s) / 2, t.textAlign = r.get(t, "textAlign", "center"), t.textBaseline = r.get(t, "textBaseline", "middle"); break; case "top": c && (t.x = (a + u) / 2), t.y = o, t.textAlign = r.get(t, "textAlign", "center"), t.textBaseline = r.get(t, "textBaseline", d > 0 ? "bottom" : "top") } }, e }(i.__importDefault(n(64)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(26), a = n(24), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.defaultLayout = "distribute", e } return i.__extends(e, t), e.prototype.getDefaultLabelCfg = function (e, n) { var i = t.prototype.getDefaultLabelCfg.call(this, e, n); return r.deepMix({}, i, r.get(this.geometry.theme, "pieLabels", {})) }, e.prototype.getLabelOffset = function (e) { return t.prototype.getLabelOffset.call(this, e) || 0 }, e.prototype.getLabelRotate = function (t, e, n) { var i; return e < 0 && ((i = t) > Math.PI / 2 && (i -= Math.PI), i < -Math.PI / 2 && (i += Math.PI)), i }, e.prototype.getLabelAlign = function (t) { var e, n = this.getCoordinate().getCenter(); return e = t.angle <= Math.PI / 2 && t.x >= n.x ? "left" : "right", t.offset <= 0 && (e = "right" === e ? "left" : "right"), e }, e.prototype.getArcPoint = function (t) { return t }, e.prototype.getPointAngle = function (t) { var e, n = this.getCoordinate(), i = { x: r.isArray(t.x) ? t.x[0] : t.x, y: t.y[0] }, a = { x: r.isArray(t.x) ? t.x[1] : t.x, y: t.y[1] }, s = o.getAngleByPoint(n, i); if (t.points && t.points[0].y === t.points[1].y) e = s; else { var u = o.getAngleByPoint(n, a); s >= u && (u += 2 * Math.PI), e = s + (u - s) / 2 } return e }, e.prototype.getCirclePoint = function (t, e) { var n = this.getCoordinate(), r = n.getCenter(), o = n.getRadius() + e; return i.__assign(i.__assign({}, a.polarToCartesian(r.x, r.y, o, t)), { angle: t, r: o }) }, e }(i.__importDefault(n(127)).default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.distribute = void 0; var i = n(0), r = n(24); e.distribute = function (t, e, n, o) { if (t.length && e.length) { var a = t[0] ? t[0].offset : 0, s = e[0].get("coordinate"), u = s.getRadius(), l = s.getCenter(); if (a > 0) { var c = 2 * (u + a) + 28, h = { start: s.start, end: s.end }, f = [[], []]; t.forEach((function (t) { t && ("right" === t.textAlign ? f[0].push(t) : f[1].push(t)) })), f.forEach((function (t, n) { var r = c / 14; t.length > r && (t.sort((function (t, e) { return e["..percent"] - t["..percent"] })), t.splice(r, t.length - r)), t.sort((function (t, e) { return t.y - e.y })), function (t, e, n, r, o, a) { var s, u = !0, l = r.start, c = r.end, h = Math.min(l.y, c.y), f = Math.abs(l.y - c.y), p = 0, d = Number.MIN_VALUE, g = e.map((function (t) { return t.y > p && (p = t.y), t.y < d && (d = t.y), { size: n, targets: [t.y - h] } })); for (d -= h, p - h > f && (f = p - h); u;)for (g.forEach((function (t) { var e = (Math.min.apply(d, t.targets) + Math.max.apply(d, t.targets)) / 2; t.pos = Math.min(Math.max(d, e - t.size / 2), f - t.size) })), u = !1, s = g.length; s--;)if (s > 0) { var y = g[s - 1], v = g[s]; y.pos + y.size > v.pos && (y.size += v.size, y.targets = y.targets.concat(v.targets), y.pos + y.size > f && (y.pos = f - y.size), g.splice(s, 1), u = !0) } s = 0, g.forEach((function (t) { var i = h + n / 2; t.targets.forEach((function () { e[s].y = t.pos + i, i += n, s++ })) })); for (var m = {}, x = 0, b = t; x < b.length; x++) { var C = b[x]; m[C.get("id")] = C } e.forEach((function (t) { var e = t.r * t.r, n = Math.pow(Math.abs(t.y - o.y), 2); if (e < n) t.x = o.x; else { var r = Math.sqrt(e - n); t.x = a ? o.x + r : o.x - r } var s = m[t.id]; s.attr("x", t.x), s.attr("y", t.y); var u = i.find(s.getChildren(), (function (t) { return "text" === t.get("type") })); u && (u.attr("y", t.y), u.attr("x", t.x)) })) }(e, t, 14, h, l, n) })) } i.each(t, (function (t) { if (t && t.labelLine) { var e = t.offset, n = t.angle, o = r.polarToCartesian(l.x, l.y, u, n), a = r.polarToCartesian(l.x, l.y, u + e / 2, n), s = t.x + i.get(t, "offsetX", 0), c = t.y + i.get(t, "offsetY", 0), h = { x: s - 4 * Math.cos(n), y: c - 4 * Math.sin(n) }; i.isObject(t.labelLine) || (t.labelLine = {}), t.labelLine.path = ["M " + o.x, o.y + " Q" + a.x, a.y + " " + h.x, h.y].join(",") } })) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.pieOuterLabelLayout = void 0; var i = n(0), r = n(24), o = n(128); e.pieOuterLabelLayout = function (t, e, n, a) { var s = i.filter(t, (function (t) { return !i.isNil(t) })), u = e[0] && e[0].get("coordinate"); if (u) { for (var l = u.getCenter(), c = u.getRadius(), h = {}, f = 0, p = e; f < p.length; f++) { var d = p[f]; h[d.get("id")] = d } var g = i.get(s[0], "labelHeight", 14), y = i.get(s[0], "offset", 0); if (!(y <= 0)) { var v = i.groupBy(s, (function (t) { return t.x < l.x ? "left" : "right" })), m = u.start, x = u.end, b = Math.min(2 * (c + y + g), u.getHeight()), C = b / 2, _ = { minX: m.x, maxX: x.x, minY: l.y - C, maxY: l.y + C }; i.each(v, (function (t, e) { var n = Math.floor(b / g); t.length > n && (t.sort((function (t, e) { return e.percent - t.percent })), i.each(t, (function (t, e) { e + 1 > n && (h[t.id].set("visible", !1), t.invisible = !0) }))), o.antiCollision(t, g, _) })), i.each(v, (function (t, e) { i.each(t, (function (t) { var n = "right" === e, o = h[t.id].getChildByIndex(0); if (o) { var a = c + y, s = t.y - l.y, f = Math.pow(a, 2), p = Math.pow(s, 2), d = f - p > 0 ? f - p : 0, g = Math.sqrt(d), v = Math.abs(Math.cos(t.angle) * a); t.x = n ? l.x + Math.max(g, v) : l.x - Math.max(g, v) } o && (o.attr("y", t.y), o.attr("x", t.x)), function (t, e) { var n = e.getCenter(), o = e.getRadius(); if (t && t.labelLine) { var a = t.angle, s = t.offset, u = r.polarToCartesian(n.x, n.y, o, a), l = t.x + i.get(t, "offsetX", 0) * (Math.cos(a) > 0 ? 1 : -1), c = t.y + i.get(t, "offsetY", 0) * (Math.sin(a) > 0 ? 1 : -1), h = { x: l - 4 * Math.cos(a), y: c - 4 * Math.sin(a) }, f = t.labelLine.smooth, p = [], d = h.x - n.x, g = h.y - n.y, y = Math.atan(g / d); if (d < 0 && (y += Math.PI), !1 === f) { i.isObject(t.labelLine) || (t.labelLine = {}); var v = 0; (a < 0 && a > -Math.PI / 2 || a > 1.5 * Math.PI) && h.y > u.y && (v = 1), a >= 0 && a < Math.PI / 2 && h.y > u.y && (v = 1), a >= Math.PI / 2 && a < Math.PI && u.y > h.y && (v = 1), (a < -Math.PI / 2 || a >= Math.PI && a < 1.5 * Math.PI) && u.y > h.y && (v = 1); var m = s / 2 > 4 ? 4 : Math.max(s / 2 - 1, 0), x = r.polarToCartesian(n.x, n.y, o + m, a), b = r.polarToCartesian(n.x, n.y, o + s / 2, y); p.push("M " + u.x + " " + u.y), p.push("L " + x.x + " " + x.y), p.push("A " + n.x + " " + n.y + " 0 0 " + v + " " + b.x + " " + b.y), p.push("L " + h.x + " " + h.y) } else { x = r.polarToCartesian(n.x, n.y, o + (s / 2 > 4 ? 4 : Math.max(s / 2 - 1, 0)), a); var C = u.x < n.x ? 1 : -1; p.push("M " + h.x + " " + h.y); var _ = (u.y - n.y) / (u.x - n.x), O = (h.y - n.y) / (h.x - n.x); Math.abs(_ - O) > Math.pow(Math.E, -16) && p.push.apply(p, ["C", h.x + 4 * C, h.y, 2 * x.x - u.x, 2 * x.y - u.y, u.x, u.y]), p.push("L " + u.x + " " + u.y) } t.labelLine.path = p.join(" ") } }(t, u) })) })) } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.pieSpiderLabelLayout = void 0; var i = n(0), r = n(24), o = n(128), a = n(49); e.pieSpiderLabelLayout = function (t, e, n, s) { var u = e[0] && e[0].get("coordinate"); if (u) { for (var l = u.getCenter(), c = u.getRadius(), h = {}, f = 0, p = e; f < p.length; f++) { var d = p[f]; h[d.get("id")] = d } var g = i.get(t[0], "labelHeight", 14), y = Math.max(i.get(t[0], "offset", 0), 4); i.each(t, (function (t) { if (i.get(h, t.id)) { var e = t.x > l.x || t.x === l.x && t.y > l.y, n = i.isNil(t.offsetX) ? 4 : t.offsetX, o = r.polarToCartesian(l.x, l.y, c + 4, t.angle), a = y + n; t.x = l.x + (e ? 1 : -1) * (c + a), t.y = o.y } })); var v = u.start, m = u.end, x = i.groupBy(t, (function (t) { return t.x < l.x ? "left" : "right" })), b = 2 * (c + y) + g; i.each(x, (function (t) { var e = t.length * g; e > b && (b = Math.min(e, Math.abs(v.y - m.y))) })); var C = { minX: v.x, maxX: m.x, minY: l.y - b / 2, maxY: l.y + b / 2 }; i.each(x, (function (t, e) { var n = b / g; t.length > n && (t.sort((function (t, e) { return e.percent - t.percent })), i.each(t, (function (t, e) { e > n && (h[t.id].set("visible", !1), t.invisible = !0) }))), o.antiCollision(t, g, C) })); var _ = C.minY, O = C.maxY; i.each(x, (function (t, e) { var n = "right" === e; i.each(t, (function (t) { var e = i.get(h, t && t.id); if (e) if (t.y < _ || t.y > O) e.set("visible", !1); else { var o = e.getChildByIndex(0), s = o.getCanvasBBox(), l = n ? s.x : s.maxX, c = s.y + s.height / 2; a.translate(o, t.x - l, t.y - c), t.labelLine && function (t, e, n) { var o, a = e.getCenter(), s = e.getRadius(), u = { x: t.x - (n ? 4 : -4), y: t.y }, l = r.polarToCartesian(a.x, a.y, s + 4, t.angle), c = { x: u.x, y: u.y }, h = { x: l.x, y: l.y }, f = r.polarToCartesian(a.x, a.y, s, t.angle); if (u.y !== l.y) { var p = n ? 4 : -4; c.y = u.y, t.angle < 0 && t.angle >= -Math.PI / 2 && (c.x = Math.max(l.x, u.x - p), u.y < l.y ? h.y = c.y : (h.y = l.y, h.x = Math.max(h.x, c.x - p))), t.angle > 0 && t.angle < Math.PI / 2 && (c.x = Math.max(l.x, u.x - p), u.y > l.y ? h.y = c.y : (h.y = l.y, h.x = Math.max(h.x, c.x - p))), t.angle > Math.PI / 2 && (c.x = Math.min(l.x, u.x - p), u.y > l.y ? h.y = c.y : (h.y = l.y, h.x = Math.min(h.x, c.x - p))), t.angle < -Math.PI / 2 && (c.x = Math.min(l.x, u.x - p), u.y < l.y ? h.y = c.y : (h.y = l.y, h.x = Math.min(h.x, c.x - p))) } o = ["M " + u.x + "," + u.y, "L " + c.x + "," + c.y, "L " + h.x + "," + h.y, "L " + l.x + "," + l.y, "L " + f.x + "," + f.y].join(" "), t.labelLine = i.deepMix({}, t.labelLine, { path: o }) }(t, u, n) } })) })) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.limitInCanvas = void 0; var i = n(0), r = n(49); e.limitInCanvas = function (t, e, n, o) { i.each(e, (function (t) { var e = o.minX, n = o.minY, i = o.maxX, a = o.maxY, s = t.getCanvasBBox(), u = s.minX, l = s.minY, c = s.maxX, h = s.maxY, f = s.x, p = s.y, d = s.width, g = s.height, y = f, v = p; (u < e || c < e) && (y = e), (l < n || h < n) && (v = n), u > i ? y = i - d : c > i && (y -= c - i), l > a ? v = a - g : h > a && (v -= h - a), y === f && v === p || r.translate(t, y - f, v - p) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.limitInShape = void 0; var i = n(0); e.limitInShape = function (t, e, n, r) { i.each(e, (function (t, e) { var i = t.getCanvasBBox(), r = n[e].getBBox(); (i.minX < r.minX || i.minY < r.minY || i.maxX > r.maxX || i.maxY > r.maxY) && t.remove(!0) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.overlap = e.fixedOverlap = void 0; var i = n(0), r = function () { function t(t) { void 0 === t && (t = {}), this.bitmap = {}; var e = t.xGap, n = void 0 === e ? 1 : e, i = t.yGap, r = void 0 === i ? 8 : i; this.xGap = n, this.yGap = r } return t.prototype.hasGap = function (t) { for (var e = !0, n = this.bitmap, i = Math.round(t.minX), r = Math.round(t.maxX), o = Math.round(t.minY), a = Math.round(t.maxY), s = i; s <= r; s += 1)if (n[s]) { if (s === i || s === r) { for (var u = o; u <= a; u++)if (n[s][u]) { e = !1; break } } else if (n[s][o] || n[s][a]) { e = !1; break } } else n[s] = {}; return e }, t.prototype.fillGap = function (t) { for (var e = this.bitmap, n = Math.round(t.minX), i = Math.round(t.maxX), r = Math.round(t.minY), o = Math.round(t.maxY), a = n; a <= i; a += 1)e[a] || (e[a] = {}); for (a = n; a <= i; a += this.xGap) { for (var s = r; s <= o; s += this.yGap)e[a][s] = !0; e[a][o] = !0 } if (1 !== this.yGap) for (a = r; a <= o; a += 1)e[n][a] = !0, e[i][a] = !0; if (1 !== this.xGap) for (a = n; a <= i; a += 1)e[a][r] = !0, e[a][o] = !0 }, t.prototype.destroy = function () { this.bitmap = {} }, t }(); function o(t, e, n, i) { var r = t.getCanvasBBox(), o = r.width, a = r.height, s = { x: e, y: n, textAlign: "center" }; switch (i) { case 0: s.y -= a + 1, s.x += 1, s.textAlign = "left"; break; case 1: s.y -= a + 1, s.x -= 1, s.textAlign = "right"; break; case 2: s.y += a + 1, s.x -= 1, s.textAlign = "right"; break; case 3: s.y += a + 1, s.x += 1, s.textAlign = "left"; break; case 5: s.y -= 2 * a + 2; break; case 6: s.y += 2 * a + 2; break; case 7: s.x += o + 1, s.textAlign = "left"; break; case 8: s.x -= o + 1, s.textAlign = "right" }return t.attr(s), t.getCanvasBBox() } e.fixedOverlap = function (t, e, n, o) { var a = new r; i.each(e, (function (t) { (function (t, e, n) { void 0 === n && (n = 100); var i, r = t.attr(), o = r.x, a = r.y, s = t.getCanvasBBox(), u = Math.sqrt(s.width * s.width + s.height * s.height), l = 1, c = 0, h = 0; if (e.hasGap(s)) return e.fillGap(s), !0; for (var f, p, d = !1, g = 0, y = {}; Math.min(Math.abs(c), Math.abs(h)) < u && g < n;)if (f = l += -1, p = void 0, h = ~~(i = [(p = .1 * f) * Math.cos(p), p * Math.sin(p)])[1], ((c = ~~i[0]) || h) && !y[c + "-" + h] && (t.attr({ x: o + c, y: a + h }), c + h < 0 && t.attr("textAlign", "right"), g++, e.hasGap(t.getCanvasBBox()))) { e.fillGap(t.getCanvasBBox()), d = !0, y[c + "-" + h] = !0; break } return d })(t.find((function (t) { return "text" === t.get("type") })), a) || t.remove(!0) })), a.destroy() }, e.overlap = function (t, e, n, a) { var s = new r; i.each(e, (function (t) { for (var e = t.find((function (t) { return "text" === t.get("type") })), n = e.attr(), i = n.x, r = n.y, a = !1, u = 0; u <= 8; u++) { var l = o(e, i, r, u); if (s.hasGap(l)) { s.fillGap(l), a = !0; break } } a || t.remove(!0) })), s.destroy() } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.hideOverlap = void 0; var i = n(0), r = n(220), o = n(48); e.hideOverlap = function (t, e, n, a) { for (var s = 0; s < e.length; s++) { var u = e[s]; if (e[s].get("visible")) for (var l = s + 1; l < e.length; l++) { var c = e[l]; if (u && c && u !== c && c.get("visible")) { var h = o.getlLabelBackgroundInfo(u, t[s], i.get(t[s], "background.padding")), f = o.getlLabelBackgroundInfo(c, t[l], i.get(t[l], "background.padding")); r.isIntersect(h, f) && e[l].set("visible", !1) } } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.isIntersect = e.isIntersectRect = void 0; var i = n(1), r = n(6).vec2.dot; function o(t) { if (t.length > 4) return []; var e = function (t, e) { return [e.x - t.x, e.y - t.y] }; return [e(t[0], t[1]), e(t[1], t[2])] } function a(t, e, n) { void 0 === e && (e = 0), void 0 === n && (n = { x: 0, y: 0 }); var i = t.x, r = t.y; return { x: (i - n.x) * Math.cos(-e) + (r - n.y) * Math.sin(-e) + n.x, y: (n.x - i) * Math.sin(-e) + (r - n.y) * Math.cos(-e) + n.y } } function s(t) { var e = [{ x: t.x, y: t.y }, { x: t.x + t.width, y: t.y }, { x: t.x + t.width, y: t.y + t.height }, { x: t.x, y: t.y + t.height }], n = t.rotation; return n ? [a(e[0], n, e[0]), a(e[1], n, e[0]), a(e[2], n, e[0]), a(e[3], n, e[0])] : e } function u(t, e) { if (t.length > 4) return { min: 0, max: 0 }; var n = []; return t.forEach((function (t) { n.push(r([t.x, t.y], e)) })), { min: Math.min.apply(Math, n), max: Math.max.apply(Math, n) } } function l(t, e) { return t.max > e.min && t.min < e.max } function c(t, e, n) { return void 0 === n && (n = 0), !(e.x > t.x + t.width + n || e.x + e.width < t.x - n || e.y > t.y + t.height + n || e.y + e.height < t.y - n) } e.isIntersectRect = c, e.isIntersect = function (t, e) { if (!t.rotation && !e.rotation) return c(t, e); for (var n = s(t), r = s(e), a = i.__spreadArrays(o(n), o(r)), h = 0; h < a.length; h++) { var f = a[h]; if (!l(u(n, f), u(r, f))) return !1 } return !0 } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.adjustColor = void 0; var i = n(34), r = n(222); e.adjustColor = function (t, e, n) { if (0 !== n.length) { var o = n[0].get("element").geometry.theme, a = o.labels || {}, s = a.fillColorLight, u = a.fillColorDark; n.forEach((function (t, n) { var a = e[n].find((function (t) { return "text" === t.get("type") })), l = i.BBox.fromObject(t.getBBox()), c = i.BBox.fromObject(a.getCanvasBBox()), h = !l.contains(c), f = t.attr("fill"), p = r.isContrastColorWhite(f); h ? a.attr(o.overflowLabels.style) : p ? s && a.attr("fill", s) : u && a.attr("fill", u) })) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.isContrastColorWhite = void 0; var i = n(1).__importDefault(n(51)), r = { "#5B8FF9": !0 }; e.isContrastColorWhite = function (t) { var e = i.default.toRGB(t).toUpperCase(); if (r[e]) return r[e]; var n = i.default.rgb2arr(e); return (299 * n[0] + 587 * n[1] + 114 * n[2]) / 1e3 < 128 } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.intervalAdjustPosition = void 0; var i = n(34), r = n(48); function o(t, e, n) { return !!t.getAdjust("stack") || e.every((function (e, o) { var a = n[o]; return function (t, e, n) { var o = t.coordinate, a = r.findLabelTextShape(e), s = i.BBox.fromObject(a.getCanvasBBox()), u = i.BBox.fromObject(n.getBBox()); return o.isTransposed ? u.height >= s.height : u.width >= s.width }(t, e, a) })) } e.intervalAdjustPosition = function (t, e, n) { var a; if (0 !== n.length) { var s = null === (a = n[0]) || void 0 === a ? void 0 : a.get("element"), u = null == s ? void 0 : s.geometry; if (u && "interval" === u.type) o(u, e, n) && n.forEach((function (t, n) { var o = e[n]; !function (t, e, n) { var o = t.coordinate, a = i.BBox.fromObject(n.getBBox()), s = r.findLabelTextShape(e); o.isTransposed ? s.attr({ x: a.minX + a.width / 2, textAlign: "center" }) : s.attr({ y: a.minY + a.height / 2, textBaseline: "middle" }) }(u, o, t) })) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.intervalHideOverlap = void 0; var i = n(0), r = n(48); e.intervalHideOverlap = function (t, e, n) { var o; if (0 !== n.length) { var a = null === (o = n[0]) || void 0 === o ? void 0 : o.get("element"), s = null == a ? void 0 : a.geometry; if (s && "interval" === s.type) { var u, l = function (t) { var e = [], n = Math.max(Math.floor(t.length / 500), 1); return i.each(t, (function (t, i) { i % n == 0 ? e.push(t) : t.set("visible", !1) })), e }(e), c = s.getXYFields()[0], h = [], f = [], p = i.groupBy(l, (function (t) { return t.get("data")[c] })), d = i.uniq(i.map(l, (function (t) { return t.get("data")[c] }))); l.forEach((function (t) { t.set("visible", !0) })); var g = function (t) { t && (t.length && f.push(t.pop()), f.push.apply(f, t)) }; for (i.size(d) > 0 && (u = d.shift(), g(p[u])), i.size(d) > 0 && (u = d.pop(), g(p[u])), i.each(d.reverse(), (function (t) { g(p[t]) })); f.length > 0;) { var y = f.shift(); y.get("visible") && (r.checkShapeOverlap(y, h) ? y.set("visible", !1) : h.push(y)) } } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.pointAdjustPosition = void 0; var i = n(0), r = n(48); function o(t, e, n) { return t.some((function (t) { return n(t, e) })) } function a(t, e) { return o(t, e, (function (t, e) { var n, i, o, a = r.findLabelTextShape(t), s = r.findLabelTextShape(e); return n = a.getCanvasBBox(), i = s.getCanvasBBox(), void 0 === (o = 2) && (o = 0), Math.max(0, Math.min(n.x + n.width + o, i.x + i.width + o) - Math.max(n.x - o, i.x - o)) * Math.max(0, Math.min(n.y + n.height + o, i.y + i.height + o) - Math.max(n.y - o, i.y - o)) > 0 })) } e.pointAdjustPosition = function (t, e, n, s, u) { var l, c; if (0 !== n.length) { var h = null === (l = n[0]) || void 0 === l ? void 0 : l.get("element"), f = null == h ? void 0 : h.geometry; if (f && "point" === f.type) { var p = f.getXYFields(), d = p[0], g = p[1], y = i.groupBy(e, (function (t) { return t.get("data")[d] })), v = [], m = u && u.offset || (null === (c = t[0]) || void 0 === c ? void 0 : c.offset) || 12; i.map(i.keys(y).reverse(), (function (t) { for (var e = function (t, e) { var n = t.getXYFields()[1], i = [], r = e.sort((function (t, e) { return t.get("data")[n] - t.get("data")[n] })); return r.length > 0 && i.push(r.shift()), r.length > 0 && i.push(r.pop()), i.push.apply(i, r), i }(f, y[t]); e.length;) { var n = e.shift(), i = r.findLabelTextShape(n); if (o(v, n, (function (t, e) { return t.get("data")[d] === e.get("data")[d] && t.get("data")[g] === e.get("data")[g] }))) i.set("visible", !1); else { var s = !1; a(v, n) && (i.attr("y", i.attr("y") + 2 * m), s = a(v, n)), s ? i.set("visible", !1) : v.push(n) } } })) } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.pathAdjustPosition = void 0; var i = n(0), r = n(48); function o(t, e, n) { return t.some((function (t) { return n(t, e) })) } function a(t, e) { return o(t, e, (function (t, e) { var n, i, o, a = r.findLabelTextShape(t), s = r.findLabelTextShape(e); return n = a.getCanvasBBox(), i = s.getCanvasBBox(), void 0 === (o = 2) && (o = 0), Math.max(0, Math.min(n.x + n.width + o, i.x + i.width + o) - Math.max(n.x - o, i.x - o)) * Math.max(0, Math.min(n.y + n.height + o, i.y + i.height + o) - Math.max(n.y - o, i.y - o)) > 0 })) } e.pathAdjustPosition = function (t, e, n, s, u) { var l, c; if (0 !== n.length) { var h = null === (l = n[0]) || void 0 === l ? void 0 : l.get("element"), f = null == h ? void 0 : h.geometry; if (f && !(["path", "line", "area"].indexOf(f.type) < 0)) { var p = f.getXYFields(), d = p[0], g = p[1], y = i.groupBy(e, (function (t) { return t.get("data")[d] })), v = [], m = u && u.offset || (null === (c = t[0]) || void 0 === c ? void 0 : c.offset) || 12; i.map(i.keys(y).reverse(), (function (t) { for (var e = function (t, e) { var n = t.getXYFields()[1], i = [], r = e.sort((function (t, e) { return t.get("data")[n] - t.get("data")[n] })); return r.length > 0 && i.push(r.shift()), r.length > 0 && i.push(r.pop()), i.push.apply(i, r), i }(f, y[t]); e.length;) { var n = e.shift(), i = r.findLabelTextShape(n); if (o(v, n, (function (t, e) { return t.get("data")[d] === e.get("data")[d] && t.get("data")[g] === e.get("data")[g] }))) i.set("visible", !1); else { var s = !1; a(v, n) && (i.attr("y", i.attr("y") + 2 * m), s = a(v, n)), s ? i.set("visible", !1) : v.push(n) } } })) } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.limitInPlot = void 0; var i = n(0), r = n(26), o = n(228), a = n(49); e.limitInPlot = function (t, e, n, s, u) { if (!(e.length <= 0)) { var l = (null == u ? void 0 : u.direction) || ["top", "right", "bottom", "left"], c = (null == u ? void 0 : u.action) || "translate", h = (null == u ? void 0 : u.margin) || 0, f = e[0].get("coordinate"); if (f) { var p = r.getCoordinateBBox(f, h), d = p.minX, g = p.minY, y = p.maxX, v = p.maxY; i.each(e, (function (t) { var e = t.getCanvasBBox(), n = e.minX, r = e.minY, s = e.maxX, u = e.maxY, h = e.x, f = e.y, p = e.width, m = e.height, x = h, b = f; if (l.indexOf("left") >= 0 && (n < d || s < d) && (x = d), l.indexOf("top") >= 0 && (r < g || u < g) && (b = g), l.indexOf("right") >= 0 && (n > y ? x = y - p : s > y && (x -= s - y)), l.indexOf("bottom") >= 0 && (r > v ? b = v - m : u > v && (b -= u - v)), x !== h || b !== f) { var C = x - h; if ("translate" === c) a.translate(t, C, b - f); else if ("ellipsis" === c) { t.findAll((function (t) { return "text" === t.get("type") })).forEach((function (t) { var e = i.pick(t.attr(), ["fontSize", "fontFamily", "fontWeight", "fontStyle", "fontVariant"]), n = t.getCanvasBBox(), r = o.getEllipsisText(t.attr("text"), n.width - Math.abs(C), e); t.attr("text", r) })) } else t.hide() } })) } } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getEllipsisText = e.measureTextWidth = void 0; var i = n(1), r = n(0), o = n(229); e.measureTextWidth = r.memoize((function (t, e) { void 0 === e && (e = {}); var n = e.fontSize, i = e.fontFamily, a = e.fontWeight, s = e.fontStyle, u = e.fontVariant, l = o.getCanvasContext(); return l.font = [s, u, a, n + "px", i].join(" "), l.measureText(r.isString(t) ? t : "").width }), (function (t, e) { return void 0 === e && (e = {}), i.__spreadArrays([t], r.values(e)).join("") })), e.getEllipsisText = function (t, n, i) { var o, a = e.measureTextWidth("...", i); o = r.isString(t) ? t : r.toString(t); var s, u, l = n, c = []; if (e.measureTextWidth(t, i) <= n) return t; for (; s = o.substr(0, 16), !((u = e.measureTextWidth(s, i)) + a > l && u > l);)if (c.push(s), l -= u, !(o = o.substr(16))) return c.join(""); for (; s = o.substr(0, 1), !((u = e.measureTextWidth(s, i)) + a > l);)if (c.push(s), l -= u, !(o = o.substr(1))) return c.join(""); return c.join("") + "..." } }, function (t, e, n) { "use strict"; var i; Object.defineProperty(e, "__esModule", { value: !0 }), e.getCanvasContext = void 0, e.getCanvasContext = function () { return i || (i = document.createElement("canvas").getContext("2d")), i } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.fadeOut = e.fadeIn = void 0; var i = n(0); e.fadeIn = function (t, e, n) { var r = { fillOpacity: i.isNil(t.attr("fillOpacity")) ? 1 : t.attr("fillOpacity"), strokeOpacity: i.isNil(t.attr("strokeOpacity")) ? 1 : t.attr("strokeOpacity"), opacity: i.isNil(t.attr("opacity")) ? 1 : t.attr("opacity") }; t.attr({ fillOpacity: 0, strokeOpacity: 0, opacity: 0 }), t.animate(r, e) }, e.fadeOut = function (t, e, n) { var i = e.easing, r = e.duration, o = e.delay; t.animate({ fillOpacity: 0, strokeOpacity: 0, opacity: 0 }, r, i, (function () { t.remove(!0) }), o) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.growInXY = e.growInY = e.growInX = void 0; var i = n(232); e.growInX = function (t, e, n) { var r = n.coordinate, o = n.minYPoint; i.doScaleAnimate(t, e, r, o, "x") }, e.growInY = function (t, e, n) { var r = n.coordinate, o = n.minYPoint; i.doScaleAnimate(t, e, r, o, "y") }, e.growInXY = function (t, e, n) { var r = n.coordinate, o = n.minYPoint; i.doScaleAnimate(t, e, r, o, "xy") } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.doScaleAnimate = e.transformShape = void 0; var i = n(6); function r(t, e, n) { var r, o = e[0], a = e[1]; return t.applyToMatrix([o, a, 1]), "x" === n ? (t.setMatrix(i.ext.transform(t.getMatrix(), [["t", -o, -a], ["s", .01, 1], ["t", o, a]])), r = i.ext.transform(t.getMatrix(), [["t", -o, -a], ["s", 100, 1], ["t", o, a]])) : "y" === n ? (t.setMatrix(i.ext.transform(t.getMatrix(), [["t", -o, -a], ["s", 1, .01], ["t", o, a]])), r = i.ext.transform(t.getMatrix(), [["t", -o, -a], ["s", 1, 100], ["t", o, a]])) : "xy" === n && (t.setMatrix(i.ext.transform(t.getMatrix(), [["t", -o, -a], ["s", .01, .01], ["t", o, a]])), r = i.ext.transform(t.getMatrix(), [["t", -o, -a], ["s", 100, 100], ["t", o, a]])), r } e.transformShape = r, e.doScaleAnimate = function (t, e, n, i, o) { var a, s, u = n.start, l = n.end, c = n.getWidth(), h = n.getHeight(); "y" === o ? (a = u.x + c / 2, s = i.y < u.y ? i.y : u.y) : "x" === o ? (a = i.x > u.x ? i.x : u.x, s = u.y + h / 2) : "xy" === o && (n.isPolar ? (a = n.getCenter().x, s = n.getCenter().y) : (a = (u.x + l.x) / 2, s = (u.y + l.y) / 2)); var f = r(t, [a, s], o); t.animate({ matrix: f }, e) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.pathIn = void 0, e.pathIn = function (t, e, n) { var i = t.getTotalLength(); t.attr("lineDash", [i]), t.animate((function (t) { return { lineDashOffset: (1 - t) * i } }), e) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.positionUpdate = void 0, e.positionUpdate = function (t, e, n) { var i = n.toAttrs, r = i.x, o = i.y; delete i.x, delete i.y, t.attr(i), t.animate({ x: r, y: o }, e) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.scaleInY = e.scaleInX = void 0; var i = n(6); e.scaleInX = function (t, e, n) { var r = t.getBBox(), o = t.get("origin").mappingData.points, a = o[0].y - o[1].y > 0 ? r.maxX : r.minX, s = (r.minY + r.maxY) / 2; t.applyToMatrix([a, s, 1]); var u = i.ext.transform(t.getMatrix(), [["t", -a, -s], ["s", .01, 1], ["t", a, s]]); t.setMatrix(u), t.animate({ matrix: i.ext.transform(t.getMatrix(), [["t", -a, -s], ["s", 100, 1], ["t", a, s]]) }, e) }, e.scaleInY = function (t, e, n) { var r = t.getBBox(), o = t.get("origin").mappingData, a = (r.minX + r.maxX) / 2, s = o.points, u = s[0].y - s[1].y <= 0 ? r.maxY : r.minY; t.applyToMatrix([a, u, 1]); var l = i.ext.transform(t.getMatrix(), [["t", -a, -u], ["s", 1, .01], ["t", a, u]]); t.setMatrix(l), t.animate({ matrix: i.ext.transform(t.getMatrix(), [["t", -a, -u], ["s", 1, 100], ["t", a, u]]) }, e) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.sectorPathUpdate = void 0; var i = n(1), r = n(122), o = n(0), a = n(24); function s(t, e) { var n, i = r.getArcParams(t, e), a = i.startAngle, s = i.endAngle; return !o.isNumberEqual(a, .5 * -Math.PI) && a < .5 * -Math.PI && (a += 2 * Math.PI), !o.isNumberEqual(s, .5 * -Math.PI) && s < .5 * -Math.PI && (s += 2 * Math.PI), 0 === e[5] && (a = (n = [s, a])[0], s = n[1]), o.isNumberEqual(a, 1.5 * Math.PI) && (a = -.5 * Math.PI), o.isNumberEqual(s, -.5 * Math.PI) && (s = 1.5 * Math.PI), { startAngle: a, endAngle: s } } function u(t) { var e; return "M" === t[0] || "L" === t[0] ? e = [t[1], t[2]] : "a" !== t[0] && "A" !== t[0] || (e = [t[t.length - 2], t[t.length - 1]]), e } function l(t) { var e, n, i, r = t.filter((function (t) { return "A" === t[0] || "a" === t[0] })), a = r[0], l = r.length > 1 ? r[1] : r[0], c = t.indexOf(a), h = t.indexOf(l), f = u(t[c - 1]), p = u(t[h - 1]), d = s(f, a), g = d.startAngle, y = d.endAngle, v = s(p, l), m = v.startAngle, x = v.endAngle; o.isNumberEqual(g, m) && o.isNumberEqual(y, x) ? (n = g, i = y) : (n = Math.min(g, m), i = Math.max(y, x)); var b = a[1], C = r[r.length - 1][1]; return b < C ? (b = (e = [C, b])[0], C = e[1]) : b === C && (C = 0), { startAngle: n, endAngle: i, radius: b, innerRadius: C } } e.sectorPathUpdate = function (t, e, n) { var r = n.toAttrs, s = n.coordinate, u = r.path || [], c = u.map((function (t) { return t[0] })); if (!(u.length < 1)) { var h = l(u), f = h.startAngle, p = h.endAngle, d = h.radius, g = h.innerRadius, y = l(t.attr("path")), v = y.startAngle, m = y.endAngle, x = s.getCenter(), b = f - v, C = p - m; t.animate((function (t) { var e = v + t * b, n = m + t * C; return i.__assign(i.__assign({}, r), { path: o.isEqual(c, ["M", "A", "A", "Z"]) ? a.getArcPath(x.x, x.y, d, e, n) : a.getSectorPath(x.x, x.y, d, e, n, g) }) }), i.__assign(i.__assign({}, e), { callback: function () { t.attr("path", u) } })) } } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.waveIn = void 0; var i = n(1), r = n(26); e.waveIn = function (t, e, n) { var o = r.getCoordinateClipCfg(n.coordinate, 20), a = o.type, s = o.startState, u = o.endState, l = t.setClip({ type: a, attrs: s }); l.animate(u, i.__assign(i.__assign({}, e), { callback: function () { t && !t.get("destroyed") && t.set("clipShape", null), l.remove(!0) } })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.zoomOut = e.zoomIn = void 0; var i = n(1), r = n(6), o = n(0); function a(t, e, n) { if (t.isGroup()) o.each(t.getChildren(), (function (t) { a(t, e, n) })); else { var s = t.getBBox(), u = (s.minX + s.maxX) / 2, l = (s.minY + s.maxY) / 2; if (t.applyToMatrix([u, l, 1]), "zoomIn" === n) { var c = r.ext.transform(t.getMatrix(), [["t", -u, -l], ["s", .01, .01], ["t", u, l]]); t.setMatrix(c), t.animate({ matrix: r.ext.transform(t.getMatrix(), [["t", -u, -l], ["s", 100, 100], ["t", u, l]]) }, e) } else t.animate({ matrix: r.ext.transform(t.getMatrix(), [["t", -u, -l], ["s", .01, .01], ["t", u, l]]) }, i.__assign(i.__assign({}, e), { callback: function () { t.remove(!0) } })) } } e.zoomIn = function (t, e, n) { a(t, e, "zoomIn") }, e.zoomOut = function (t, e, n) { a(t, e, "zoomOut") } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(50), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getDefaultCfg = function () { return r.deepMix({}, t.prototype.getDefaultCfg.call(this), { type: "circle", showTitle: !0, title: t.prototype.getDefaultTitleCfg.call(this) }) }, e.prototype.render = function () { t.prototype.render.call(this), this.cfg.showTitle && this.renderTitle() }, e.prototype.getRegion = function (t, e) { var n = 2 * Math.PI / t, i = -1 * Math.PI / 2 + n * e, r = .5 / (1 + 1 / Math.sin(n / 2)), o = a.getAnglePoint({ x: .5, y: .5 }, .5 - r, i), s = 5 * Math.PI / 4, u = 1 * Math.PI / 4; return { start: a.getAnglePoint(o, r, s), end: a.getAnglePoint(o, r, u) } }, e.prototype.afterEachView = function (t, e) { this.processAxis(t, e) }, e.prototype.beforeEachView = function (t, e) { }, e.prototype.generateFacets = function (t) { var e = this, n = this.cfg, i = n.fields, o = n.type, a = i[0]; if (!a) throw new Error("No `fields` specified!"); var s = this.getFieldValues(t, a), u = s.length, l = []; return s.forEach((function (n, i) { var c = [{ field: a, value: n, values: s }], h = r.filter(t, e.getFacetDataFilter(c)), f = { type: o, data: h, region: e.getRegion(u, i), columnValue: n, columnField: a, columnIndex: i, columnValuesLength: u, rowValue: null, rowField: null, rowIndex: 0, rowValuesLength: 1 }; l.push(f) })), l }, e.prototype.getXAxisOption = function (t, e, n, i) { return n }, e.prototype.getYAxisOption = function (t, e, n, i) { return n }, e.prototype.renderTitle = function () { var t = this; r.each(this.facets, (function (e) { var n = e.columnValue, i = e.view, s = r.get(t.cfg.title, "formatter"), u = r.deepMix({ position: ["50%", "0%"], content: s ? s(n) : n }, a.getFactTitleConfig(o.DIRECTION.TOP), t.cfg.title); i.annotation().text(u) })) }, e }(n(41).Facet); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(50), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getDefaultCfg = function () { return r.deepMix({}, t.prototype.getDefaultCfg.call(this), { type: "list", cols: null, showTitle: !0, title: t.prototype.getDefaultTitleCfg.call(this) }) }, e.prototype.render = function () { t.prototype.render.call(this), this.cfg.showTitle && this.renderTitle() }, e.prototype.afterEachView = function (t, e) { this.processAxis(t, e) }, e.prototype.beforeEachView = function (t, e) { }, e.prototype.generateFacets = function (t) { var e = this, n = this.cfg.fields, i = this.cfg.cols, o = n[0]; if (!o) throw new Error("No `fields` specified!"); var a = this.getFieldValues(t, o), s = a.length; i = i || s; var u = this.getPageCount(s, i), l = []; return a.forEach((function (n, c) { var h = e.getRowCol(c, i), f = h.row, p = h.col, d = [{ field: o, value: n, values: a }], g = r.filter(t, e.getFacetDataFilter(d)), y = { type: e.cfg.type, data: g, region: e.getRegion(u, i, p, f), columnValue: n, rowValue: n, columnField: o, rowField: null, columnIndex: p, rowIndex: f, columnValuesLength: i, rowValuesLength: u, total: s }; l.push(y) })), l }, e.prototype.getXAxisOption = function (t, e, n, r) { return r.rowIndex !== r.rowValuesLength - 1 && r.columnValuesLength * r.rowIndex + r.columnIndex + 1 + r.columnValuesLength <= r.total ? i.__assign(i.__assign({}, n), { label: null, title: null }) : n }, e.prototype.getYAxisOption = function (t, e, n, r) { return 0 !== r.columnIndex ? i.__assign(i.__assign({}, n), { title: null, label: null }) : n }, e.prototype.renderTitle = function () { var t = this; r.each(this.facets, (function (e) { var n = e.columnValue, i = e.view, s = r.get(t.cfg.title, "formatter"), u = r.deepMix({ position: ["50%", "0%"], content: s ? s(n) : n }, a.getFactTitleConfig(o.DIRECTION.TOP), t.cfg.title); i.annotation().text(u) })) }, e.prototype.getPageCount = function (t, e) { return Math.floor((t + e - 1) / e) }, e.prototype.getRowCol = function (t, e) { return { row: Math.floor(t / e), col: t % e } }, e }(n(41).Facet); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(50), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getDefaultCfg = function () { return r.deepMix({}, t.prototype.getDefaultCfg.call(this), { type: "matrix", showTitle: !1, columnTitle: i.__assign({}, t.prototype.getDefaultTitleCfg.call(this)), rowTitle: i.__assign({}, t.prototype.getDefaultTitleCfg.call(this)) }) }, e.prototype.render = function () { t.prototype.render.call(this), this.cfg.showTitle && this.renderTitle() }, e.prototype.afterEachView = function (t, e) { this.processAxis(t, e) }, e.prototype.beforeEachView = function (t, e) { }, e.prototype.generateFacets = function (t) { for (var e = this.cfg, n = e.fields, i = e.type, r = n.length, o = r, a = [], s = 0; s < o; s++)for (var u = n[s], l = 0; l < r; l++) { var c = n[l], h = { type: i, data: t, region: this.getRegion(r, o, s, l), columnValue: u, rowValue: c, columnField: u, rowField: c, columnIndex: s, rowIndex: l, columnValuesLength: o, rowValuesLength: r }; a.push(h) } return a }, e.prototype.getXAxisOption = function (t, e, n, r) { return r.rowIndex !== r.rowValuesLength - 1 ? i.__assign(i.__assign({}, n), { label: null, title: null }) : n }, e.prototype.getYAxisOption = function (t, e, n, r) { return 0 !== r.columnIndex ? i.__assign(i.__assign({}, n), { title: null, label: null }) : n }, e.prototype.renderTitle = function () { var t = this; r.each(this.facets, (function (e, n) { var i = e.columnIndex, s = e.rowIndex, u = e.columnValuesLength, l = (e.rowValuesLength, e.columnValue), c = e.rowValue, h = e.view; if (0 === s) { var f = r.get(t.cfg.columnTitle, "formatter"), p = r.deepMix({ position: ["50%", "0%"], content: f ? f(l) : l }, a.getFactTitleConfig(o.DIRECTION.TOP), t.cfg.columnTitle); h.annotation().text(p) } if (i === u - 1) { f = r.get(t.cfg.rowTitle, "formatter"), p = r.deepMix({ position: ["100%", "50%"], content: f ? f(c) : c }, a.getFactTitleConfig(o.DIRECTION.RIGHT), t.cfg.rowTitle); h.annotation().text(p) } })) }, e }(n(41).Facet); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(50), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getDefaultCfg = function () { return r.deepMix({}, t.prototype.getDefaultCfg.call(this), { type: "mirror", showTitle: !0, title: t.prototype.getDefaultTitleCfg.call(this), transpose: !1 }) }, e.prototype.render = function () { t.prototype.render.call(this), this.cfg.showTitle && this.renderTitle() }, e.prototype.beforeEachView = function (t, e) { this.cfg.transpose ? e.columnIndex % 2 == 0 ? t.coordinate().transpose().reflect("x") : t.coordinate().transpose() : e.rowIndex % 2 != 0 && t.coordinate().reflect("y") }, e.prototype.afterEachView = function (t, e) { this.processAxis(t, e) }, e.prototype.generateFacets = function (t) { var e, n, i = this, o = this.cfg.fields[0], a = [], s = 1, u = 1, l = [""], c = [""]; return this.cfg.transpose ? (e = o, l = this.getFieldValues(t, e).slice(0, 2), s = l.length) : (n = o, c = this.getFieldValues(t, n).slice(0, 2), u = c.length), l.forEach((function (o, h) { c.forEach((function (f, p) { var d = [{ field: e, value: o, values: l }, { field: n, value: f, values: c }], g = r.filter(t, i.getFacetDataFilter(d)), y = { type: i.cfg.type, data: g, region: i.getRegion(u, s, h, p), columnValue: o, rowValue: f, columnField: e, rowField: n, columnIndex: h, rowIndex: p, columnValuesLength: s, rowValuesLength: u }; a.push(y) })) })), a }, e.prototype.getXAxisOption = function (t, e, n, r) { return 1 === r.columnIndex || 1 === r.rowIndex ? i.__assign(i.__assign({}, n), { label: null, title: null }) : n }, e.prototype.getYAxisOption = function (t, e, n, i) { return n }, e.prototype.renderTitle = function () { var t = this; r.each(this.facets, (function (e, n) { var i = e.columnValue, s = e.rowValue, u = e.view, l = r.get(t.cfg.title, "formatter"); if (t.cfg.transpose) { var c = r.deepMix({ position: ["50%", "0%"], content: l ? l(i) : i }, a.getFactTitleConfig(o.DIRECTION.TOP), t.cfg.title); u.annotation().text(c) } else { c = r.deepMix({ position: ["100%", "50%"], content: l ? l(s) : s }, a.getFactTitleConfig(o.DIRECTION.RIGHT), t.cfg.title); u.annotation().text(c) } })) }, e }(n(41).Facet); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(50), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.afterEachView = function (t, e) { this.processAxis(t, e) }, e.prototype.beforeEachView = function (t, e) { }, e.prototype.getDefaultCfg = function () { return r.deepMix({}, t.prototype.getDefaultCfg.call(this), { type: "rect", columnTitle: i.__assign({}, t.prototype.getDefaultTitleCfg.call(this)), rowTitle: i.__assign({}, t.prototype.getDefaultTitleCfg.call(this)) }) }, e.prototype.render = function () { t.prototype.render.call(this), this.cfg.showTitle && this.renderTitle() }, e.prototype.generateFacets = function (t) { var e = this, n = this.cfg.fields, i = n[0], o = n[1], a = [], s = 1, u = 1, l = [""], c = [""]; return i && (l = this.getFieldValues(t, i), s = l.length), o && (c = this.getFieldValues(t, o), u = c.length), l.forEach((function (n, h) { c.forEach((function (f, p) { var d = [{ field: i, value: n, values: l }, { field: o, value: f, values: c }], g = r.filter(t, e.getFacetDataFilter(d)), y = { type: e.cfg.type, data: g, region: e.getRegion(u, s, h, p), columnValue: n, rowValue: f, columnField: i, rowField: o, columnIndex: h, rowIndex: p, columnValuesLength: s, rowValuesLength: u }; a.push(y) })) })), a }, e.prototype.renderTitle = function () { var t = this; r.each(this.facets, (function (e, n) { var i = e.columnIndex, s = e.rowIndex, u = e.columnValuesLength, l = e.columnValue, c = e.rowValue, h = e.view; if (0 === s) { var f = r.get(t.cfg.columnTitle, "formatter"), p = r.deepMix({ position: ["50%", "0%"], content: f ? f(l) : l }, a.getFactTitleConfig(o.DIRECTION.TOP), t.cfg.columnTitle); h.annotation().text(p) } if (i === u - 1) { f = r.get(t.cfg.rowTitle, "formatter"), p = r.deepMix({ position: ["100%", "50%"], content: f ? f(c) : c }, a.getFactTitleConfig(o.DIRECTION.RIGHT), t.cfg.rowTitle); h.annotation().text(p) } })) }, e.prototype.getXAxisOption = function (t, e, n, r) { return r.rowIndex !== r.rowValuesLength - 1 ? i.__assign(i.__assign({}, n), { title: null, label: null }) : r.columnIndex !== Math.floor((r.columnValuesLength - 1) / 2) ? i.__assign(i.__assign({}, n), { title: null }) : n }, e.prototype.getYAxisOption = function (t, e, n, r) { return 0 !== r.columnIndex ? i.__assign(i.__assign({}, n), { title: null, label: null }) : r.rowIndex !== Math.floor((r.rowValuesLength - 1) / 2) ? i.__assign(i.__assign({}, n), { title: null }) : n }, e }(n(41).Facet); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(50), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.afterChartRender = function () { e.facets && e.cfg.line && (e.container.clear(), e.drawLines(e.facets)) }, e } return i.__extends(e, t), e.prototype.afterEachView = function (t, e) { this.processAxis(t, e) }, e.prototype.beforeEachView = function (t, e) { }, e.prototype.init = function () { t.prototype.init.call(this), this.view.on(o.VIEW_LIFE_CIRCLE.AFTER_RENDER, this.afterChartRender) }, e.prototype.getDefaultCfg = function () { return r.deepMix({}, t.prototype.getDefaultCfg.call(this), { type: "tree", line: { style: { lineWidth: 1, stroke: "#ddd" }, smooth: !1 }, showTitle: !0, title: t.prototype.getDefaultTitleCfg.call(this) }) }, e.prototype.generateFacets = function (t) { if (!this.cfg.fields.length) throw new Error("Please specify for the fields for rootFacet!"); var e = [], n = { type: this.cfg.type, data: t, region: null, rowValuesLength: this.getRows(), columnValuesLength: 1, rowIndex: 0, columnIndex: 0, rowField: "", columnField: "", rowValue: "", columnValue: "" }; return e.push(n), n.children = this.getChildFacets(t, 1, e), this.setRegion(e), e }, e.prototype.setRegion = function (t) { var e = this; this.forceColIndex(t), t.forEach((function (t) { t.region = e.getRegion(t.rowValuesLength, t.columnValuesLength, t.columnIndex, t.rowIndex) })) }, e.prototype.getRegion = function (t, e, n, i) { var r = 1 / e, o = 1 / t, a = { x: r * n, y: o * i }; return { start: a, end: { x: a.x + r, y: a.y + 2 * o / 3 } } }, e.prototype.forceColIndex = function (t) { var e = this, n = [], i = 0; t.forEach((function (t) { e.isLeaf(t) && (n.push(t), t.columnIndex = i, i++) })), n.forEach((function (t) { t.columnValuesLength = n.length })); for (var r = this.cfg.fields.length - 1; r >= 0; r--)for (var o = 0, a = this.getFacetsByLevel(t, r); o < a.length; o++) { var s = a[o]; this.isLeaf(s) || (s.originColIndex = s.columnIndex, s.columnIndex = this.getRegionIndex(s.children), s.columnValuesLength = n.length) } }, e.prototype.getFacetsByLevel = function (t, e) { var n = []; return t.forEach((function (t) { t.rowIndex === e && n.push(t) })), n }, e.prototype.getRegionIndex = function (t) { var e = t[0]; return (t[t.length - 1].columnIndex - e.columnIndex) / 2 + e.columnIndex }, e.prototype.isLeaf = function (t) { return !t.children || !t.children.length }, e.prototype.getRows = function () { return this.cfg.fields.length + 1 }, e.prototype.getChildFacets = function (t, e, n) { var i = this, r = this.cfg.fields; if (!(r.length < e)) { var o = [], a = r[e - 1], s = this.getFieldValues(t, a); return s.forEach((function (r, u) { var l = [{ field: a, value: r, values: s }], c = t.filter(i.getFacetDataFilter(l)); if (c.length) { var h = { type: i.cfg.type, data: c, region: null, columnValue: r, rowValue: "", columnField: a, rowField: "", columnIndex: u, rowValuesLength: i.getRows(), columnValuesLength: 1, rowIndex: e, children: i.getChildFacets(c, e + 1, n) }; o.push(h), n.push(h) } })), o } }, e.prototype.render = function () { t.prototype.render.call(this), this.cfg.showTitle && this.renderTitle() }, e.prototype.renderTitle = function () { var t = this; r.each(this.facets, (function (e) { var n = e.columnValue, i = e.view, s = r.get(t.cfg.title, "formatter"), u = r.deepMix({ position: ["50%", "0%"], content: s ? s(n) : n }, a.getFactTitleConfig(o.DIRECTION.TOP), t.cfg.title); i.annotation().text(u) })) }, e.prototype.drawLines = function (t) { var e = this; t.forEach((function (t) { if (!e.isLeaf(t)) { var n = t.children; e.addFacetLines(t, n) } })) }, e.prototype.addFacetLines = function (t, e) { var n = this, i = t.view.coordinateBBox, r = { x: i.x + i.width / 2, y: i.y + i.height }; e.forEach((function (t) { var e = t.view.coordinateBBox, i = { x: e.bl.x + (e.tr.x - e.bl.x) / 2, y: e.tr.y }, o = { x: r.x, y: r.y + (i.y - r.y) / 2 }, a = { x: i.x, y: o.y }; n.drawLine([r, o, a, i]) })) }, e.prototype.getPath = function (t) { var e = []; return this.cfg.line.smooth ? (e.push(["M", t[0].x, t[0].y]), e.push(["C", t[1].x, t[1].y, t[2].x, t[2].y, t[3].x, t[3].y])) : t.forEach((function (t, n) { 0 === n ? e.push(["M", t.x, t.y]) : e.push(["L", t.x, t.y]) })), e }, e.prototype.drawLine = function (t) { var e = this.getPath(t), n = this.cfg.line.style; this.container.addShape("path", { attrs: r.assign({ path: e }, n) }) }, e.prototype.getXAxisOption = function (t, e, n, r) { return r.rowIndex !== r.rowValuesLength - 1 ? i.__assign(i.__assign({}, n), { title: null, label: null }) : n }, e.prototype.getYAxisOption = function (t, e, n, r) { return 0 !== r.originColIndex && 0 !== r.columnIndex ? i.__assign(i.__assign({}, n), { title: null, label: null }) : n }, e }(n(41).Facet); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(31), a = n(38), s = n(14), u = n(26), l = n(33), c = n(246), h = n(42), f = ["regionFilter", "shape"], p = function (t) { function e(e) { var n = t.call(this, e) || this; return n.cache = new Map, n.foregroundContainer = n.view.getLayer(s.LAYER.FORE).addGroup(), n.backgroundContainer = n.view.getLayer(s.LAYER.BG).addGroup(), n.option = [], n } return i.__extends(e, t), Object.defineProperty(e.prototype, "name", { get: function () { return "annotation" }, enumerable: !1, configurable: !0 }), e.prototype.init = function () { }, e.prototype.layout = function () { this.update() }, e.prototype.render = function () { }, e.prototype.update = function () { var t = this; this.onAfterRender((function () { var e = new Map; r.each(t.option, (function (n) { if (r.includes(f, n.type)) { var i = t.updateOrCreate(n); i && e.set(t.getCacheKey(n), i) } })), t.cache = t.syncCache(e) })); var e = new Map; r.each(this.option, (function (n) { if (!r.includes(f, n.type)) { var i = t.updateOrCreate(n); i && e.set(t.getCacheKey(n), i) } })), this.cache = this.syncCache(e) }, e.prototype.clear = function (e) { void 0 === e && (e = !1), t.prototype.clear.call(this), this.clearComponents(), this.foregroundContainer.clear(), this.backgroundContainer.clear(), e && (this.option = []) }, e.prototype.destroy = function () { this.clear(!0), this.foregroundContainer.remove(!0), this.backgroundContainer.remove(!0) }, e.prototype.getComponents = function () { var t = []; return this.cache.forEach((function (e) { t.push(e) })), t }, e.prototype.clearComponents = function () { this.getComponents().forEach((function (t) { t.component.destroy() })), this.cache.clear() }, e.prototype.onAfterRender = function (t) { this.view.getOptions().animate ? this.view.geometries.forEach((function (e) { e.animateOption && e.once(s.GEOMETRY_LIFE_CIRCLE.AFTER_DRAW_ANIMATE, (function () { t() })) })) : this.view.getRootView().once(s.VIEW_LIFE_CIRCLE.AFTER_RENDER, (function () { t() })) }, e.prototype.createAnnotation = function (t) { var e = t.type, n = o.Annotation[r.upperFirst(e)]; if (n) { var i = this.getAnnotationTheme(e), a = this.getAnnotationCfg(e, t, i); return { component: new n(a), layer: this.isTop(a) ? s.LAYER.FORE : s.LAYER.BG, direction: s.DIRECTION.NONE, type: s.COMPONENT_TYPE.ANNOTATION, extra: t } } }, e.prototype.annotation = function (t) { this.option.push(t) }, e.prototype.arc = function (t) { return this.annotation(i.__assign({ type: "arc" }, t)), this }, e.prototype.image = function (t) { return this.annotation(i.__assign({ type: "image" }, t)), this }, e.prototype.line = function (t) { return this.annotation(i.__assign({ type: "line" }, t)), this }, e.prototype.region = function (t) { return this.annotation(i.__assign({ type: "region" }, t)), this }, e.prototype.text = function (t) { return this.annotation(i.__assign({ type: "text" }, t)), this }, e.prototype.dataMarker = function (t) { return this.annotation(i.__assign({ type: "dataMarker" }, t)), this }, e.prototype.dataRegion = function (t) { this.annotation(i.__assign({ type: "dataRegion" }, t)) }, e.prototype.regionFilter = function (t) { this.annotation(i.__assign({ type: "regionFilter" }, t)) }, e.prototype.shape = function (t) { this.annotation(i.__assign({ type: "shape" }, t)) }, e.prototype.html = function (t) { this.annotation(i.__assign({ type: "html" }, t)) }, e.prototype.parsePosition = function (t) { var e = this.view.getXScale(), n = this.view.getScalesByDim("y"), i = r.isFunction(t) ? t.call(null, e, n) : t, o = 0, a = 0; if (r.isArray(i)) { var s = i[0], u = i[1]; if (r.isString(s) && -1 !== s.indexOf("%") && !isNaN(s.slice(0, -1))) return this.parsePercentPosition(i); o = c.getNormalizedValue(s, e), a = c.getNormalizedValue(u, Object.values(n)[0]) } else if (!r.isNil(i)) for (var l = 0, h = r.keys(i); l < h.length; l++) { var f = h[l], p = i[f]; f === e.field && (o = c.getNormalizedValue(p, e)), n[f] && (a = c.getNormalizedValue(p, n[f])) } return this.view.getCoordinate().convert({ x: o, y: a }) }, e.prototype.getRegionPoints = function (t, e) { var n, i = this, o = this.view.getXScale(), a = this.view.getScalesByDim("y"), s = Object.values(a)[0], u = o.field, l = this.view.getData(), c = r.isArray(t) ? t[0] : t[u], h = r.isArray(e) ? e[0] : e[u], f = []; return r.each(l, (function (t, e) { if (t[u] === c && (n = e), e >= n) { var r = i.parsePosition([t[u], t[s.field]]); r && f.push(r) } if (t[u] === h) return !1 })), f }, e.prototype.parsePercentPosition = function (t) { var e = parseFloat(t[0]) / 100, n = parseFloat(t[1]) / 100, i = this.view.getCoordinate(), r = i.start, o = i.end, a = Math.min(r.x, o.x), s = Math.min(r.y, o.y); return { x: i.getWidth() * e + a, y: i.getHeight() * n + s } }, e.prototype.getCoordinateBBox = function () { var t = this.view.getCoordinate(), e = t.start, n = t.end, i = t.getWidth(), r = t.getHeight(), o = { x: Math.min(e.x, n.x), y: Math.min(e.y, n.y) }; return { x: o.x, y: o.y, minX: o.x, minY: o.y, maxX: o.x + i, maxY: o.y + r, width: i, height: r } }, e.prototype.getAnnotationCfg = function (t, e, n) { var o = this, s = this.view.getCoordinate(), l = this.view.getCanvas(), c = {}; if (r.isNil(e)) return null; if ("arc" === t) { var h = e, f = h.start, p = h.end, d = this.parsePosition(f), g = this.parsePosition(p), y = u.getAngleByPoint(s, d), v = u.getAngleByPoint(s, g); y > v && (v = 2 * Math.PI + v), c = { center: s.getCenter(), radius: u.getDistanceToCenter(s, d), startAngle: y, endAngle: v } } else if ("image" === t) { var m = e; f = m.start, p = m.end; c = { start: this.parsePosition(f), end: this.parsePosition(p), src: e.src } } else if ("line" === t) { var x = e; f = x.start, p = x.end; c = { start: this.parsePosition(f), end: this.parsePosition(p), text: r.get(e, "text", null) } } else if ("region" === t) { var b = e; f = b.start, p = b.end; c = { start: this.parsePosition(f), end: this.parsePosition(p) } } else if ("text" === t) { var C = this.view.getData(), _ = e, O = _.position, M = _.content, w = i.__rest(_, ["position", "content"]), S = M; r.isFunction(M) && (S = M(C)), c = i.__assign(i.__assign(i.__assign({}, this.parsePosition(O)), w), { content: S }) } else if ("dataMarker" === t) { var A = e, P = (O = A.position, A.point), I = A.line, T = A.text, E = A.autoAdjust, j = A.direction; c = i.__assign(i.__assign({}, this.parsePosition(O)), { coordinateBBox: this.getCoordinateBBox(), point: P, line: I, text: T, autoAdjust: E, direction: j }) } else if ("dataRegion" === t) { var L = e, B = (f = L.start, p = L.end, L.region), k = (T = L.text, L.lineLength); c = { points: this.getRegionPoints(f, p), region: B, text: T, lineLength: k } } else if ("regionFilter" === t) { var D = e, R = (f = D.start, p = D.end, D.apply), F = D.color, N = this.view.geometries, G = [], Y = function (t) { t && (t.isGroup() ? t.getChildren().forEach((function (t) { return Y(t) })) : G.push(t)) }; r.each(N, (function (t) { R ? r.contains(R, t.type) && r.each(t.elements, (function (t) { Y(t.shape) })) : r.each(t.elements, (function (t) { Y(t.shape) })) })), c = { color: F, shapes: G, start: this.parsePosition(f), end: this.parsePosition(p) } } else if ("shape" === t) { var V = e, X = V.render, z = i.__rest(V, ["render"]); c = i.__assign(i.__assign({}, z), { render: function (t) { if (r.isFunction(e.render)) return X(t, o.view, { parsePosition: o.parsePosition.bind(o) }) } }) } else if ("html" === t) { var H = e, W = H.html; O = H.position, z = i.__rest(H, ["html", "position"]); c = i.__assign(i.__assign(i.__assign({}, z), this.parsePosition(O)), { parent: l.get("el").parentNode, html: function (t) { return r.isFunction(W) ? W(t, o.view) : W } }) } var q = r.deepMix({}, n, i.__assign(i.__assign({}, c), { top: e.top, style: e.style, offsetX: e.offsetX, offsetY: e.offsetY })); return "html" !== t && (q.container = this.getComponentContainer(q)), q.animate = this.view.getOptions().animate && q.animate && r.get(e, "animate", q.animate), q.animateOption = r.deepMix({}, a.DEFAULT_ANIMATE_CFG, q.animateOption, e.animateOption), q }, e.prototype.isTop = function (t) { return r.get(t, "top", !0) }, e.prototype.getComponentContainer = function (t) { return this.isTop(t) ? this.foregroundContainer : this.backgroundContainer }, e.prototype.getAnnotationTheme = function (t) { return r.get(this.view.getTheme(), ["components", "annotation", t], {}) }, e.prototype.updateOrCreate = function (t) { var e = this.cache.get(this.getCacheKey(t)); if (e) { var n = t.type, i = this.getAnnotationTheme(n), o = this.getAnnotationCfg(n, t, i); l.omit(o, ["container"]), e.component.update(o), r.includes(f, t.type) && e.component.render() } else (e = this.createAnnotation(t)) && (e.component.init(), r.includes(f, t.type) && e.component.render()); return e }, e.prototype.syncCache = function (t) { var e = this, n = new Map(this.cache); return t.forEach((function (t, e) { n.set(e, t) })), n.forEach((function (t, i) { r.find(e.option, (function (t) { return i === e.getCacheKey(t) })) || (t.component.destroy(), n.delete(i)) })), n }, e.prototype.getCacheKey = function (t) { return t }, e }(h.Controller); e.default = p }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getNormalizedValue = void 0; var i = n(247); e.getNormalizedValue = function (t, e) { var n; switch (t) { case "start": return 0; case "end": return 1; case "median": n = e.isCategory ? i.getMedian(e.values.map((function (t, e) { return e }))) : i.getMedian(e.values); break; case "mean": n = e.isCategory ? (e.values.length - 1) / 2 : i.getMean(e.values); break; case "min": n = e.isCategory ? 0 : e[t]; break; case "max": n = e.isCategory ? e.values.length - 1 : e[t]; break; default: n = t }return e.scale(n) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.getMean = e.getMedian = void 0; var i = n(1), r = n(0); e.getMedian = function (t) { var e = i.__spreadArrays(t); e.sort((function (t, e) { return t - e })); var n = e.length; return 0 === n ? 0 : n % 2 == 1 ? e[(n - 1) / 2] : (e[n / 2] + e[n / 2 - 1]) / 2 }, e.getMean = function (t) { var e = r.reduce(t, (function (t, e) { return t + (isNaN(e) || !r.isNumber(e) ? 0 : e) }), 0); return 0 === t.length ? 0 : e / t.length } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(31), s = n(38), u = n(79), l = n(79), c = n(249), h = n(33), f = n(42), p = ["container"], d = i.__assign(i.__assign({}, s.DEFAULT_ANIMATE_CFG), { appear: null }), g = function (t) { function e(e) { var n = t.call(this, e) || this; return n.cache = new Map, n.gridContainer = n.view.getLayer(o.LAYER.BG).addGroup(), n.axisContainer = n.view.getLayer(o.LAYER.BG).addGroup(), n } return i.__extends(e, t), Object.defineProperty(e.prototype, "name", { get: function () { return "axis" }, enumerable: !1, configurable: !0 }), e.prototype.init = function () { }, e.prototype.render = function () { this.update() }, e.prototype.layout = function () { var t = this, e = this.view.getCoordinate(); r.each(this.getComponents(), (function (n) { var i, r = n.component, a = n.direction, s = n.type, l = n.extra, h = l.dim, f = l.scale, p = l.alignTick; if (s === o.COMPONENT_TYPE.AXIS) e.isPolar ? "x" === h ? i = e.isTransposed ? u.getAxisRegion(e, a) : u.getCircleAxisCenterRadius(e) : "y" === h && (i = e.isTransposed ? u.getCircleAxisCenterRadius(e) : u.getAxisRegion(e, a)) : i = u.getAxisRegion(e, a); else if (s === o.COMPONENT_TYPE.GRID) if (e.isPolar) { i = { items: e.isTransposed ? "x" === h ? c.getCircleGridItems(e, t.view.getYScales()[0], f, p, h) : c.getLineGridItems(e, f, h, p) : "x" === h ? c.getLineGridItems(e, f, h, p) : c.getCircleGridItems(e, t.view.getXScale(), f, p, h), center: t.view.getCoordinate().getCenter() } } else i = { items: c.getLineGridItems(e, f, h, p) }; r.update(i) })) }, e.prototype.update = function () { this.option = this.view.getOptions().axes; var t = new Map; this.updateXAxes(t), this.updateYAxes(t); var e = new Map; this.cache.forEach((function (n, i) { t.has(i) ? e.set(i, n) : n.component.destroy() })), this.cache = e }, e.prototype.clear = function () { t.prototype.clear.call(this), this.cache.clear(), this.gridContainer.clear(), this.axisContainer.clear() }, e.prototype.destroy = function () { t.prototype.destroy.call(this), this.gridContainer.remove(!0), this.axisContainer.remove(!0) }, e.prototype.getComponents = function () { var t = []; return this.cache.forEach((function (e) { t.push(e) })), t }, e.prototype.updateXAxes = function (t) { var e = this.view.getXScale(); if (e && !e.isIdentity) { var n = l.getAxisOption(this.option, e.field); if (!1 !== n) { var i = u.getAxisDirection(n, o.DIRECTION.BOTTOM), a = o.LAYER.BG, s = this.view.getCoordinate(), c = this.getId("axis", e.field), f = this.getId("grid", e.field); if (s.isRect) { if (g = this.cache.get(c)) { var d = this.getLineAxisCfg(e, n, i); h.omit(d, p), g.component.update(d), t.set(c, g) } else g = this.createLineAxis(e, n, a, i, "x"), this.cache.set(c, g), t.set(c, g); if (y = this.cache.get(f)) { d = this.getLineGridCfg(e, n, i, "x"); h.omit(d, p), y.component.update(d), t.set(f, y) } else (y = this.createLineGrid(e, n, a, i, "x")) && (this.cache.set(f, y), t.set(f, y)) } else if (s.isPolar) { var g, y; if (g = this.cache.get(c)) { d = s.isTransposed ? this.getLineAxisCfg(e, n, o.DIRECTION.RADIUS) : this.getCircleAxisCfg(e, n, i); h.omit(d, p), g.component.update(d), t.set(c, g) } else { if (s.isTransposed) { if (r.isUndefined(n)) return; g = this.createLineAxis(e, n, a, o.DIRECTION.RADIUS, "x") } else g = this.createCircleAxis(e, n, a, i, "x"); this.cache.set(c, g), t.set(c, g) } if (y = this.cache.get(f)) { d = s.isTransposed ? this.getCircleGridCfg(e, n, o.DIRECTION.RADIUS, "x") : this.getLineGridCfg(e, n, o.DIRECTION.CIRCLE, "x"); h.omit(d, p), y.component.update(d), t.set(f, y) } else { if (s.isTransposed) { if (r.isUndefined(n)) return; y = this.createCircleGrid(e, n, a, o.DIRECTION.RADIUS, "x") } else y = this.createLineGrid(e, n, a, o.DIRECTION.CIRCLE, "x"); y && (this.cache.set(f, y), t.set(f, y)) } } } } }, e.prototype.updateYAxes = function (t) { var e = this, n = this.view.getYScales(); r.each(n, (function (n, i) { if (n && !n.isIdentity) { var a = n.field, s = l.getAxisOption(e.option, a); if (!1 !== s) { var c = o.LAYER.BG, f = e.getId("axis", a), d = e.getId("grid", a), g = e.view.getCoordinate(); if (g.isRect) { var y = u.getAxisDirection(s, 0 === i ? o.DIRECTION.LEFT : o.DIRECTION.RIGHT); if (m = e.cache.get(f)) { var v = e.getLineAxisCfg(n, s, y); h.omit(v, p), m.component.update(v), t.set(f, m) } else m = e.createLineAxis(n, s, c, y, "y"), e.cache.set(f, m), t.set(f, m); if (x = e.cache.get(d)) { v = e.getLineGridCfg(n, s, y, "y"); h.omit(v, p), x.component.update(v), t.set(d, x) } else (x = e.createLineGrid(n, s, c, y, "y")) && (e.cache.set(d, x), t.set(d, x)) } else if (g.isPolar) { var m, x; if (m = e.cache.get(f)) { v = g.isTransposed ? e.getCircleAxisCfg(n, s, o.DIRECTION.CIRCLE) : e.getLineAxisCfg(n, s, o.DIRECTION.RADIUS); h.omit(v, p), m.component.update(v), t.set(f, m) } else { if (g.isTransposed) { if (r.isUndefined(s)) return; m = e.createCircleAxis(n, s, c, o.DIRECTION.CIRCLE, "y") } else m = e.createLineAxis(n, s, c, o.DIRECTION.RADIUS, "y"); e.cache.set(f, m), t.set(f, m) } if (x = e.cache.get(d)) { v = g.isTransposed ? e.getLineGridCfg(n, s, o.DIRECTION.CIRCLE, "y") : e.getCircleGridCfg(n, s, o.DIRECTION.RADIUS, "y"); h.omit(v, p), x.component.update(v), t.set(d, x) } else { if (g.isTransposed) { if (r.isUndefined(s)) return; x = e.createLineGrid(n, s, c, o.DIRECTION.CIRCLE, "y") } else x = e.createCircleGrid(n, s, c, o.DIRECTION.RADIUS, "y"); x && (e.cache.set(d, x), t.set(d, x)) } } } } })) }, e.prototype.createLineAxis = function (t, e, n, i, r) { var s = { component: new a.LineAxis(this.getLineAxisCfg(t, e, i)), layer: n, direction: i === o.DIRECTION.RADIUS ? o.DIRECTION.NONE : i, type: o.COMPONENT_TYPE.AXIS, extra: { dim: r, scale: t } }; return s.component.set("field", t.field), s.component.init(), s }, e.prototype.createLineGrid = function (t, e, n, i, s) { var u = this.getLineGridCfg(t, e, i, s); if (u) { var l = { component: new a.LineGrid(u), layer: n, direction: o.DIRECTION.NONE, type: o.COMPONENT_TYPE.GRID, extra: { dim: s, scale: t, alignTick: r.get(u, "alignTick", !0) } }; return l.component.init(), l } }, e.prototype.createCircleAxis = function (t, e, n, i, r) { var s = { component: new a.CircleAxis(this.getCircleAxisCfg(t, e, i)), layer: n, direction: i, type: o.COMPONENT_TYPE.AXIS, extra: { dim: r, scale: t } }; return s.component.set("field", t.field), s.component.init(), s }, e.prototype.createCircleGrid = function (t, e, n, i, s) { var u = this.getCircleGridCfg(t, e, i, s); if (u) { var l = { component: new a.CircleGrid(u), layer: n, direction: o.DIRECTION.NONE, type: o.COMPONENT_TYPE.GRID, extra: { dim: s, scale: t, alignTick: r.get(u, "alignTick", !0) } }; return l.component.init(), l } }, e.prototype.getLineAxisCfg = function (t, e, n) { var o = this.axisContainer, a = this.view.getCoordinate(), s = u.getAxisRegion(a, n), l = u.getAxisTitleText(t, e), c = u.getAxisThemeCfg(this.view.getTheme(), n), h = r.get(e, ["title"]) ? r.deepMix({ title: { style: { text: l } } }, { title: r.get(u.getAxisThemeCfg(this.view.getTheme(), "common"), "title") }, e) : e, f = r.deepMix(i.__assign(i.__assign({ container: o }, s), { ticks: t.getTicks().map((function (t) { return { id: "" + t.tickValue, name: t.text, value: t.value } })), verticalFactor: a.isPolar ? -1 * u.getAxisFactorByRegion(s, a.getCenter()) : u.getAxisFactorByRegion(s, a.getCenter()), theme: c }), c, h), p = this.getAnimateCfg(f), d = p.animate, g = p.animateOption; f.animateOption = g, f.animate = d; var y = u.isVertical(s), v = r.get(f, "verticalLimitLength", y ? 1 / 3 : .5); if (v <= 1) { var m = this.view.getCanvas().get("width"), x = this.view.getCanvas().get("height"); f.verticalLimitLength = v * (y ? m : x) } return f }, e.prototype.getLineGridCfg = function (t, e, n, i) { if (c.showGrid(u.getAxisThemeCfg(this.view.getTheme(), n), e)) { var o = c.getGridThemeCfg(this.view.getTheme(), n), a = r.deepMix({ container: this.gridContainer }, o, r.get(e, "grid"), this.getAnimateCfg(e)); return a.items = c.getLineGridItems(this.view.getCoordinate(), t, i, r.get(a, "alignTick", !0)), a } }, e.prototype.getCircleAxisCfg = function (t, e, n) { var a = this.axisContainer, s = this.view.getCoordinate(), l = t.getTicks().map((function (t) { return { id: "" + t.tickValue, name: t.text, value: t.value } })); t.isCategory || Math.abs(s.endAngle - s.startAngle) !== 2 * Math.PI || l.pop(); var c = u.getAxisTitleText(t, e), h = u.getAxisThemeCfg(this.view.getTheme(), o.DIRECTION.CIRCLE), f = r.get(e, ["title"]) ? r.deepMix({ title: { style: { text: c } } }, { title: r.get(u.getAxisThemeCfg(this.view.getTheme(), "common"), "title") }, e) : e, p = r.deepMix(i.__assign(i.__assign({ container: a }, u.getCircleAxisCenterRadius(this.view.getCoordinate())), { ticks: l, verticalFactor: 1, theme: h }), h, f), d = this.getAnimateCfg(p), g = d.animate, y = d.animateOption; return p.animate = g, p.animateOption = y, p }, e.prototype.getCircleGridCfg = function (t, e, n, i) { if (c.showGrid(u.getAxisThemeCfg(this.view.getTheme(), n), e)) { var a = c.getGridThemeCfg(this.view.getTheme(), o.DIRECTION.RADIUS), s = r.deepMix({ container: this.gridContainer, center: this.view.getCoordinate().getCenter() }, a, r.get(e, "grid"), this.getAnimateCfg(e)), l = r.get(s, "alignTick", !0), h = "x" === i ? this.view.getYScales()[0] : this.view.getXScale(); return s.items = c.getCircleGridItems(this.view.getCoordinate(), h, t, l, i), s } }, e.prototype.getId = function (t, e) { return t + "-" + e + "-" + this.view.getCoordinate().type }, e.prototype.getAnimateCfg = function (t) { return { animate: this.view.getOptions().animate && r.get(t, "animate"), animateOption: t && t.animateOption ? r.deepMix({}, d, t.animateOption) : d } }, e }(f.Controller); e.default = g }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.showGrid = e.getCircleGridItems = e.getLineGridItems = e.getGridThemeCfg = void 0; var i = n(0); e.getGridThemeCfg = function (t, e) { return i.get(t, ["components", "axis", e, "grid"], {}) }, e.getLineGridItems = function (t, e, n, i) { var r = [], o = e.getTicks(); return t.isPolar && o.push({ value: 1, text: "", tickValue: "" }), o.reduce((function (e, o, a) { var s = o.value; if (i) r.push({ points: [t.convert("y" === n ? { x: 0, y: s } : { x: s, y: 0 }), t.convert("y" === n ? { x: 1, y: s } : { x: s, y: 1 })] }); else if (a) { var u = (e.value + s) / 2; r.push({ points: [t.convert("y" === n ? { x: 0, y: u } : { x: u, y: 0 }), t.convert("y" === n ? { x: 1, y: u } : { x: u, y: 1 })] }) } return o }), o[0]), r }, e.getCircleGridItems = function (t, e, n, r, o) { var a = e.values.length, s = [], u = n.getTicks(); return u.reduce((function (e, n) { var u = e ? e.value : n.value, l = n.value, c = (u + l) / 2; return "x" === o ? s.push({ points: [t.convert({ x: r ? l : c, y: 0 }), t.convert({ x: r ? l : c, y: 1 })] }) : s.push({ points: i.map(Array(a + 1), (function (e, n) { return t.convert({ x: n / a, y: r ? l : c }) })) }), n }), u[0]), s }, e.showGrid = function (t, e) { var n = i.get(e, "grid"); if (null === n) return !1; var r = i.get(t, "grid"); return !(void 0 === n && null === r) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(31), s = n(38), u = n(34), l = n(92), c = n(33), h = n(121), f = n(57); function p(t, e) { return r.isBoolean(t) ? !1 !== t && {} : r.get(t, [e], t) } function d(t) { return r.get(t, "position", o.DIRECTION.BOTTOM) } var g = function (t) { function e(e) { var n = t.call(this, e) || this; return n.container = n.view.getLayer(o.LAYER.FORE).addGroup(), n } return i.__extends(e, t), Object.defineProperty(e.prototype, "name", { get: function () { return "legend" }, enumerable: !1, configurable: !0 }), e.prototype.init = function () { }, e.prototype.render = function () { this.update() }, e.prototype.layout = function () { var t = this; this.layoutBBox = this.view.viewBBox, r.each(this.components, (function (e) { var n = e.component, i = e.direction, r = h.getLegendLayout(i), o = t.getCategoryLegendSizeCfg(r), a = n.get("maxWidth"), s = n.get("maxHeight"); n.update({ maxWidth: Math.min(o.maxWidth, a || 0), maxHeight: Math.min(o.maxHeight, s || 0) }); var c = n.get("padding"), f = n.getLayoutBBox(), p = new u.BBox(f.x, f.y, f.width, f.height).expand(c), d = l.directionToPosition(t.view.viewBBox, p, i), g = d[0], y = d[1], v = l.directionToPosition(t.layoutBBox, p, i), m = v[0], x = v[1], b = 0, C = 0; i.startsWith("top") || i.startsWith("bottom") ? (b = g, C = x) : (b = m, C = y), n.setLocation({ x: b + c[3], y: C + c[0] }), t.layoutBBox = t.layoutBBox.cut(p, i) })) }, e.prototype.update = function () { var t = this; this.option = this.view.getOptions().legends; var e = {}; if (r.get(this.option, "custom")) { var n = "global-custom", i = this.getComponentById(n); if (i) { var a = this.getCategoryCfg(void 0, void 0, void 0, this.option, !0); c.omit(a, ["container"]), i.component.update(a), e[n] = !0 } else { var s = this.createCustomLegend(void 0, void 0, void 0, this.option); if (s) { s.init(); var u = o.LAYER.FORE, l = d(this.option); this.components.push({ id: n, component: s, layer: u, direction: l, type: o.COMPONENT_TYPE.LEGEND, extra: void 0 }), e[n] = !0 } } } else this.loopLegends((function (n, i, o) { var a = t.getId(o.field), s = t.getComponentById(a); if (s) { var u = void 0, l = p(t.option, o.field); !1 !== l && (r.get(l, "custom") ? u = t.getCategoryCfg(n, i, o, l, !0) : o.isLinear ? u = t.getContinuousCfg(n, i, o, l) : o.isCategory && (u = t.getCategoryCfg(n, i, o, l))), u && (c.omit(u, ["container"]), s.direction = d(l), s.component.update(u), e[a] = !0) } else { var h = t.createFieldLegend(n, i, o); h && (h.component.init(), t.components.push(h), e[a] = !0) } })); var h = []; r.each(this.getComponents(), (function (t) { e[t.id] ? h.push(t) : t.component.destroy() })), this.components = h }, e.prototype.clear = function () { t.prototype.clear.call(this), this.container.clear() }, e.prototype.destroy = function () { t.prototype.destroy.call(this), this.container.remove(!0) }, e.prototype.getGeometries = function (t) { var e = this, n = t.geometries; return r.each(t.views, (function (t) { n = n.concat(e.getGeometries(t)) })), n }, e.prototype.loopLegends = function (t) { if (this.view.getRootView() === this.view) { var e = this.getGeometries(this.view), n = {}; r.each(e, (function (e) { var i = e.getGroupAttributes(); r.each(i, (function (i) { var r = i.getScale(i.type); r && "identity" !== r.type && !n[r.field] && (t(e, i, r), n[r.field] = !0) })) })) } }, e.prototype.createFieldLegend = function (t, e, n) { var i, a = p(this.option, n.field), s = o.LAYER.FORE, u = d(a); if (!1 !== a && (r.get(a, "custom") ? i = this.createCustomLegend(t, e, n, a) : n.isLinear ? i = this.createContinuousLegend(t, e, n, a) : n.isCategory && (i = this.createCategoryLegend(t, e, n, a))), i) return i.set("field", n.field), { id: this.getId(n.field), component: i, layer: s, direction: u, type: o.COMPONENT_TYPE.LEGEND, extra: { scale: n } } }, e.prototype.createCustomLegend = function (t, e, n, i) { var r = this.getCategoryCfg(t, e, n, i, !0); return new a.CategoryLegend(r) }, e.prototype.createContinuousLegend = function (t, e, n, i) { var r = this.getContinuousCfg(t, e, n, i); return new a.ContinuousLegend(r) }, e.prototype.createCategoryLegend = function (t, e, n, i) { var r = this.getCategoryCfg(t, e, n, i); return new a.CategoryLegend(r) }, e.prototype.getContinuousCfg = function (t, e, n, i) { var o = n.getTicks(), a = r.find(o, (function (t) { return 0 === t.value })), u = r.find(o, (function (t) { return 1 === t.value })), l = o.map((function (t) { var i = t.value, r = t.tickValue, o = e.mapping(n.invert(i)).join(""); return { value: r, attrValue: o, color: o, scaleValue: i } })); a || l.push({ value: n.min, attrValue: e.mapping(n.invert(0)).join(""), color: e.mapping(n.invert(0)).join(""), scaleValue: 0 }), u || l.push({ value: n.max, attrValue: e.mapping(n.invert(1)).join(""), color: e.mapping(n.invert(1)).join(""), scaleValue: 1 }), l.sort((function (t, e) { return t.value - e.value })); var c = { min: r.head(l).value, max: r.last(l).value, colors: [], rail: { type: e.type }, track: {} }; "size" === e.type && (c.track = { style: { fill: "size" === e.type ? this.view.getTheme().defaultColor : void 0 } }), "color" === e.type && (c.colors = l.map((function (t) { return t.attrValue }))); var p = this.container, g = d(i), y = h.getLegendLayout(g), v = r.get(i, "title"); return v && (v = r.deepMix({ text: f.getName(n) }, v)), c.container = p, c.layout = y, c.title = v, c.animateOption = s.DEFAULT_ANIMATE_CFG, this.mergeLegendCfg(c, i, "continuous") }, e.prototype.getCategoryCfg = function (t, e, n, i, a) { var u = this.container, l = r.get(i, "position", o.DIRECTION.BOTTOM), c = r.get(this.view.getTheme(), ["components", "legend", l, "marker"]), p = r.get(i, "marker"), d = h.getLegendLayout(l), g = a ? h.getCustomLegendItems(c, p, i.items) : h.getLegendItems(this.view, t, e, c, p), y = r.get(i, "title"); y && (y = r.deepMix({ text: n ? f.getName(n) : "" }, y)); var v = this.getCategoryLegendSizeCfg(d); v.container = u, v.layout = d, v.items = g, v.title = y, v.animateOption = s.DEFAULT_ANIMATE_CFG; var m = this.mergeLegendCfg(v, i, l); m.reversed && m.items.reverse(); var x = r.get(m, "maxItemWidth"); return x && x <= 1 && (m.maxItemWidth = this.view.viewBBox.width * x), m }, e.prototype.mergeLegendCfg = function (t, e, n) { var i = n.split("-")[0], o = r.get(this.view.getTheme(), ["components", "legend", i], {}); return r.deepMix({}, o, t, e) }, e.prototype.getId = function (t) { return this.name + "-" + t }, e.prototype.getComponentById = function (t) { return r.find(this.components, (function (e) { return e.id === t })) }, e.prototype.getCategoryLegendSizeCfg = function (t) { var e = this.view.viewBBox, n = e.width, i = e.height; return "vertical" === t ? { maxWidth: n * o.COMPONENT_MAX_VIEW_PERCENTAGE, maxHeight: i } : { maxWidth: n, maxHeight: i * o.COMPONENT_MAX_VIEW_PERCENTAGE } }, e }(n(42).Controller); e.default = g }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(14), a = n(31), s = n(34), u = n(92), l = n(33), c = function (t) { function e(e) { var n = t.call(this, e) || this; return n.onChangeFn = r.noop, n.resetMeasure = function () { n.clear() }, n.onValueChange = function (t) { var e = t[0], i = t[1]; n.start = e, n.end = i, n.changeViewData(e, i) }, n.container = n.view.getLayer(o.LAYER.FORE).addGroup(), n.onChangeFn = r.throttle(n.onValueChange, 20, { leading: !0 }), n.width = 0, n.view.on(o.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, n.resetMeasure), n.view.on(o.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, n.resetMeasure), n } return i.__extends(e, t), Object.defineProperty(e.prototype, "name", { get: function () { return "slider" }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function () { t.prototype.destroy.call(this), this.view.off(o.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, this.resetMeasure), this.view.off(o.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, this.resetMeasure) }, e.prototype.init = function () { }, e.prototype.render = function () { this.option = this.view.getOptions().slider; var t = this.getSliderCfg(), e = t.start, n = t.end; r.isNil(this.start) && (this.start = e, this.end = n); var i = this.view.getOptions().data; this.option && !r.isEmpty(i) ? this.slider ? this.slider = this.updateSlider() : (this.slider = this.createSlider(), this.slider.component.on("sliderchange", this.onChangeFn)) : this.slider && (this.slider.component.destroy(), this.slider = void 0) }, e.prototype.layout = function () { var t = this; if (this.option && !this.width && (this.measureSlider(), setTimeout((function () { t.view.destroyed || t.changeViewData(t.start, t.end) }), 0)), this.slider) { var e = this.view.coordinateBBox.width, n = this.slider.component.get("padding"), r = n[0], a = (n[1], n[2], n[3]), l = this.slider.component.getLayoutBBox(), c = new s.BBox(l.x, l.y, Math.min(l.width, e), l.height).expand(n), h = this.getMinMaxText(this.start, this.end), f = h.minText, p = h.maxText, d = u.directionToPosition(this.view.viewBBox, c, o.DIRECTION.BOTTOM), g = (d[0], d[1]), y = u.directionToPosition(this.view.coordinateBBox, c, o.DIRECTION.BOTTOM), v = y[0]; y[1]; this.slider.component.update(i.__assign(i.__assign({}, this.getSliderCfg()), { x: v + a, y: g + r, width: this.width, start: this.start, end: this.end, minText: f, maxText: p })), this.view.viewBBox = this.view.viewBBox.cut(c, o.DIRECTION.BOTTOM) } }, e.prototype.update = function () { this.render() }, e.prototype.createSlider = function () { var t = this.getSliderCfg(), e = new a.Slider(i.__assign({ container: this.container }, t)); return e.init(), { component: e, layer: o.LAYER.FORE, direction: o.DIRECTION.BOTTOM, type: o.COMPONENT_TYPE.SLIDER } }, e.prototype.updateSlider = function () { var t = this.getSliderCfg(); if (this.width) { var e = this.getMinMaxText(this.start, this.end), n = e.minText, r = e.maxText; t = i.__assign(i.__assign({}, t), { width: this.width, start: this.start, end: this.end, minText: n, maxText: r }) } return this.slider.component.update(t), this.slider }, e.prototype.measureSlider = function () { var t = this.getSliderCfg().width; this.width = t }, e.prototype.getSliderCfg = function () { var t = { height: 16, start: 0, end: 1, minText: "", maxText: "", x: 0, y: 0, width: this.view.coordinateBBox.width }; if (r.isObject(this.option)) { var e = i.__assign({ data: this.getData() }, r.get(this.option, "trendCfg", {})); t = r.deepMix({}, t, this.getThemeOptions(), this.option), t = i.__assign(i.__assign({}, t), { trendCfg: e }) } return t.start = r.clamp(Math.min(r.isNil(t.start) ? 0 : t.start, r.isNil(t.end) ? 1 : t.end), 0, 1), t.end = r.clamp(Math.max(r.isNil(t.start) ? 0 : t.start, r.isNil(t.end) ? 1 : t.end), 0, 1), t }, e.prototype.getData = function () { var t = this.view.getOptions().data, e = this.view.getYScales()[0], n = this.view.getGroupScales(); if (n.length) { var i = n[0], r = i.field, o = i.ticks; return t.reduce((function (t, n) { return n[r] === o[0] && t.push(n[e.field]), t }), []) } return t.map((function (t) { return t[e.field] || 0 })) }, e.prototype.getThemeOptions = function () { var t = this.view.getTheme(); return r.get(t, ["components", "slider", "common"], {}) }, e.prototype.getMinMaxText = function (t, e) { var n = this.view.getOptions().data, i = this.view.getXScale(), o = r.valuesOfKey(n, i.field), a = o, s = r.size(n); if (!i || !s) return {}; var u = r.size(a), l = Math.floor(t * (u - 1)), c = Math.floor(e * (u - 1)), h = r.get(a, [l]), f = r.get(a, [c]), p = this.getSliderCfg().formatter; return p && (h = p(h, n[l], l), f = p(f, n[c], c)), { minText: h, maxText: f } }, e.prototype.changeViewData = function (t, e) { var n = this.view.getOptions().data, i = this.view.getXScale(), o = r.valuesOfKey(n, i.field), a = o, s = r.size(n); if (i && s) { var u = r.size(a), c = Math.floor(t * (u - 1)), h = Math.floor(e * (u - 1)); this.view.filter(i.field, (function (t, e) { var n = a.indexOf(t); return !(n > -1) || l.isBetween(n, c, h) })), this.view.render(!0) } }, e.prototype.getComponents = function () { return this.slider ? [this.slider] : [] }, e.prototype.clear = function () { this.slider && (this.slider.component.destroy(), this.slider = void 0), this.width = 0, this.start = void 0, this.end = void 0 }, e }(n(42).Controller); e.default = c }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(42), o = n(31), a = n(34), s = n(92), u = n(14), l = n(0), c = n(33), h = function (t) { function e(e) { var n = t.call(this, e) || this; return n.onChangeFn = l.noop, n.resetMeasure = function () { n.clear() }, n.onValueChange = function (t) { var e = t.ratio, i = n.getValidScrollbarCfg().animate; n.ratio = l.clamp(e, 0, 1); var r = n.view.getOptions().animate; i || n.view.animate(!1), n.changeViewData(n.getScrollRange(), !0), n.view.animate(r) }, n.container = n.view.getLayer(u.LAYER.FORE).addGroup(), n.onChangeFn = l.throttle(n.onValueChange, 20, { leading: !0 }), n.trackLen = 0, n.thumbLen = 0, n.ratio = 0, n.view.on(u.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, n.resetMeasure), n.view.on(u.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, n.resetMeasure), n } return i.__extends(e, t), Object.defineProperty(e.prototype, "name", { get: function () { return "scrollbar" }, enumerable: !1, configurable: !0 }), e.prototype.destroy = function () { t.prototype.destroy.call(this), this.view.off(u.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_DATA, this.resetMeasure), this.view.off(u.VIEW_LIFE_CIRCLE.BEFORE_CHANGE_SIZE, this.resetMeasure) }, e.prototype.init = function () { }, e.prototype.render = function () { this.option = this.view.getOptions().scrollbar, this.option ? this.scrollbar ? this.scrollbar = this.updateScrollbar() : (this.scrollbar = this.createScrollbar(), this.scrollbar.component.on("scrollchange", this.onChangeFn)) : this.scrollbar && (this.scrollbar.component.destroy(), this.scrollbar = void 0) }, e.prototype.layout = function () { var t = this; if (this.option && !this.trackLen && (this.measureScrollbar(), setTimeout((function () { t.view.destroyed || t.changeViewData(t.getScrollRange(), !0) }))), this.scrollbar) { var e = this.view.coordinateBBox.width, n = this.scrollbar.component.get("padding"), r = this.scrollbar.component.getLayoutBBox(), o = new a.BBox(r.x, r.y, Math.min(r.width, e), r.height).expand(n), l = this.getScrollbarComponentCfg(), c = void 0, h = void 0; if (l.isHorizontal) { var f = s.directionToPosition(this.view.viewBBox, o, u.DIRECTION.BOTTOM), p = (f[0], f[1]), d = s.directionToPosition(this.view.coordinateBBox, o, u.DIRECTION.BOTTOM), g = d[0]; d[1]; c = g, h = p } else { var y = s.directionToPosition(this.view.viewBBox, o, u.DIRECTION.RIGHT), v = (y[0], p = y[1], s.directionToPosition(this.view.viewBBox, o, u.DIRECTION.RIGHT)); g = v[0], v[1]; c = g, h = p } c += n[3], h += n[0], this.trackLen ? this.scrollbar.component.update(i.__assign(i.__assign({}, l), { x: c, y: h, trackLen: this.trackLen, thumbLen: this.thumbLen, thumbOffset: (this.trackLen - this.thumbLen) * this.ratio })) : this.scrollbar.component.update(i.__assign(i.__assign({}, l), { x: c, y: h })), this.view.viewBBox = this.view.viewBBox.cut(o, l.isHorizontal ? u.DIRECTION.BOTTOM : u.DIRECTION.RIGHT) } }, e.prototype.update = function () { this.render() }, e.prototype.getComponents = function () { return this.scrollbar ? [this.scrollbar] : [] }, e.prototype.clear = function () { this.scrollbar && (this.scrollbar.component.destroy(), this.scrollbar = void 0), this.trackLen = 0, this.thumbLen = 0, this.ratio = 0, this.cnt = 0, this.step = 0, this.data = void 0, this.xScaleCfg = void 0, this.yScalesCfg = [] }, e.prototype.getThemeOptions = function () { var t = this.view.getTheme(); return l.get(t, ["components", "slider", "common"], {}) }, e.prototype.measureScrollbar = function () { var t = this.view.getXScale(), e = this.view.getYScales().slice(); this.data = this.view.getOptions().data, this.step = this.getStep(), this.cnt = this.getCnt(); var n = this.getScrollbarComponentCfg(), i = n.trackLen, r = n.thumbLen; this.trackLen = i, this.thumbLen = r, this.xScaleCfg = { field: t.field, values: t.values || [] }, this.yScalesCfg = e }, e.prototype.getScrollRange = function () { var t = Math.floor((this.cnt - this.step) * l.clamp(this.ratio, 0, 1)); return [t, Math.min(t + this.step - 1, this.cnt - 1)] }, e.prototype.changeViewData = function (t, e) { var n = this, i = t[0], r = t[1], o = "vertical" !== this.getValidScrollbarCfg().type, a = l.valuesOfKey(this.data, this.xScaleCfg.field), s = o ? a : a.reverse(); this.yScalesCfg.forEach((function (t) { n.view.scale(t.field, { formatter: t.formatter, type: t.type, min: t.min, max: t.max }) })), this.view.filter(this.xScaleCfg.field, (function (t) { var e = s.indexOf(t); return !(e > -1) || c.isBetween(e, i, r) })), this.view.render(!0) }, e.prototype.createScrollbar = function () { var t = "vertical" !== this.getValidScrollbarCfg().type, e = new o.Scrollbar(i.__assign(i.__assign({ container: this.container }, this.getScrollbarComponentCfg()), { x: 0, y: 0 })); return e.init(), { component: e, layer: u.LAYER.FORE, direction: t ? u.DIRECTION.BOTTOM : u.DIRECTION.RIGHT, type: u.COMPONENT_TYPE.SCROLLBAR } }, e.prototype.updateScrollbar = function () { var t = this.getScrollbarComponentCfg(), e = this.trackLen ? i.__assign(i.__assign({}, t), { trackLen: this.trackLen, thumbLen: this.thumbLen, thumbOffset: (this.trackLen - this.thumbLen) * this.ratio }) : i.__assign({}, t); return this.scrollbar.component.update(e), this.scrollbar }, e.prototype.getStep = function () { if (this.step) return this.step; var t = this.view.coordinateBBox, e = this.getValidScrollbarCfg(), n = e.type, i = e.categorySize, r = "vertical" !== n; return Math.floor((r ? t.width : t.height) / i) }, e.prototype.getCnt = function () { if (this.cnt) return this.cnt; var t = this.view.getXScale(), e = this.view.getOptions().data, n = l.valuesOfKey(e, t.field); return l.size(n) }, e.prototype.getScrollbarComponentCfg = function () { var t = this.view, e = t.coordinateBBox, n = t.viewBBox, r = (this.view.getXScale(), this.getValidScrollbarCfg()), o = r.type, a = r.padding, s = r.width, u = r.height, c = "vertical" !== o, h = a[0], f = a[1], p = a[2], d = a[3], g = c ? { x: e.minX + d, y: n.maxY - u - p } : { x: n.maxX - s - f, y: e.minY + h }, y = this.getStep(), v = this.getCnt(), m = c ? e.width - d - f : e.height - h - p, x = Math.max(m * l.clamp(y / v, 0, 1), 20); return i.__assign(i.__assign({}, this.getThemeOptions()), { x: g.x, y: g.y, size: c ? u : s, isHorizontal: c, trackLen: m, thumbLen: x, thumbOffset: 0 }) }, e.prototype.getValidScrollbarCfg = function () { var t = { type: "horizontal", categorySize: 32, width: 8, height: 8, padding: [0, 0, 0, 0], animate: !0 }; return l.isObject(this.option) && (t = i.__assign(i.__assign({}, t), this.option)), l.isObject(this.option) && this.option.padding || (t.padding = (t.type, [0, 0, 0, 0])), t }, e }(r.Controller); e.default = h }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(24), a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.show = function () { var t = this.context.view, e = this.context.event, n = t.getTooltipItems({ x: e.x, y: e.y }); if (!r.isEqual(n, this.items) && (this.items = n, n.length)) { var i = t.getXScale().field, a = n[0].data[i], s = [], u = t.geometries; if (r.each(u, (function (t) { if ("interval" === t.type || "schema" === t.type) { var e = t.getElementsBy((function (t) { return t.getData()[i] === a })); s = s.concat(e) } })), s.length) { var l = t.getCoordinate(), c = s[0].shape.getCanvasBBox(), h = s[0].shape.getCanvasBBox(), f = c; r.each(s, (function (t) { var e = t.shape.getCanvasBBox(); l.isTransposed ? (e.minY < c.minY && (c = e), e.maxY > h.maxY && (h = e)) : (e.minX < c.minX && (c = e), e.maxX > h.maxX && (h = e)), f.x = Math.min(e.minX, f.minX), f.y = Math.min(e.minY, f.minY), f.width = Math.max(e.maxX, f.maxX) - f.x, f.height = Math.max(e.maxY, f.maxY) - f.y })); var p = t.backgroundGroup, d = t.coordinateBBox, g = void 0; if (l.isRect) { var y = t.getXScale().isLinear ? 0 : .25, v = void 0, m = void 0, x = void 0, b = void 0; l.isTransposed ? (v = d.minX, m = Math.min(h.minY, c.minY) - y * h.height, x = d.width, b = f.height + 2 * y * h.height) : (v = Math.min(c.minX, h.minX) - y * c.width, m = Math.min(d.minY, c.minY), x = f.width + 2 * y * c.width, b = d.height), g = [["M", v, m], ["L", v + x, m], ["L", v + x, m + b], ["L", v, m + b], ["Z"]] } else { var C = r.head(s), _ = r.last(s), O = o.getAngle(C.getModel(), l).startAngle, M = o.getAngle(_.getModel(), l).endAngle, w = l.getCenter(), S = l.getRadius(), A = l.innerRadius * S; g = o.getSectorPath(w.x, w.y, S, O, M, A) } this.regionPath ? (this.regionPath.attr("path", g), this.regionPath.show()) : this.regionPath = p.addShape({ type: "path", name: "active-region", capture: !1, attrs: { path: g, fill: "#CCD6EC", opacity: .3 } }) } } }, e.prototype.hide = function () { this.regionPath && this.regionPath.hide(), this.items = null }, e.prototype.destroy = function () { this.hide(), this.regionPath && this.regionPath.remove(!0), t.prototype.destroy.call(this) }, e }(i.__importDefault(n(22)).default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(19), a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.showTooltip = function (t, e) { var n = o.getSilbings(t); r.each(n, (function (n) { var i = o.getSiblingPoint(t, n, e); n.showTooltip(i) })) }, e.prototype.hideTooltip = function (t) { var e = o.getSilbings(t); r.each(e, (function (t) { t.hideTooltip() })) }, e }(i.__importDefault(n(129)).default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(58), a = i.__importDefault(n(22)), s = n(31), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.timeStamp = 0, e } return i.__extends(e, t), e.prototype.destroy = function () { t.prototype.destroy.call(this), this.tooltip && this.tooltip.destroy() }, e.prototype.show = function () { var t = this.context.event, e = this.timeStamp, n = +new Date; if (n - e > 16) { var i = this.location, o = { x: t.x, y: t.y }; i && r.isEqual(i, o) || this.showTooltip(o), this.timeStamp = n, this.location = o } }, e.prototype.hide = function () { this.hideTooltip(), this.location = null }, e.prototype.showTooltip = function (t) { var e = this.context.event.target; if (e && e.get("tip")) { this.tooltip || this.renderTooltip(); var n = e.get("tip"); this.tooltip.update(i.__assign({ title: n }, t)), this.tooltip.show() } }, e.prototype.hideTooltip = function () { this.tooltip && this.tooltip.hide() }, e.prototype.renderTooltip = function () { var t, e = this.context.view, n = e.canvas, a = { start: { x: 0, y: 0 }, end: { x: n.get("width"), y: n.get("height") } }, u = e.getTheme(), l = r.get(u, ["components", "tooltip", "domStyles"], {}), c = new s.HtmlTooltip({ parent: n.get("el").parentNode, region: a, visible: !1, crosshairs: null, domStyles: i.__assign({}, r.deepMix({}, l, (t = {}, t[o.TOOLTIP_CSS_CONST.CONTAINER_CLASS] = { "max-width": "50%" }, t[o.TOOLTIP_CSS_CONST.TITLE_CLASS] = { "word-break": "break-all" }, t))) }); c.init(), c.setCapture(!1), this.tooltip = c }, e }(a.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "active", e } return i.__extends(e, t), e.prototype.active = function () { this.setState() }, e }(i.__importDefault(n(93)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(22)), o = n(19), a = n(0), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.cache = {}, e } return i.__extends(e, t), e.prototype.getColorScale = function (t, e) { var n = e.geometry.getAttribute("color"); return n ? t.getScaleByField(n.getFields()[0]) : null }, e.prototype.getLinkPath = function (t, e) { var n = this.context.view.getCoordinate().isTransposed, i = t.shape.getCanvasBBox(), r = e.shape.getCanvasBBox(); return n ? [["M", i.minX, i.minY], ["L", r.minX, r.maxY], ["L", r.maxX, r.maxY], ["L", i.maxX, i.minY], ["Z"]] : [["M", i.maxX, i.minY], ["L", r.minX, r.minY], ["L", r.minX, r.maxY], ["L", i.maxX, i.maxY], ["Z"]] }, e.prototype.addLinkShape = function (t, e, n) { t.addShape({ type: "path", attrs: { opacity: .4, fill: e.shape.attr("fill"), path: this.getLinkPath(e, n) } }) }, e.prototype.linkByElement = function (t) { var e = this, n = this.context.view, i = this.getColorScale(n, t); if (i) { var r = o.getElementValue(t, i.field); if (!this.cache[r]) { var s = o.getElementsByField(n, i.field, r), u = this.linkGroup.addGroup(); this.cache[r] = u; var l = s.length; a.each(s, (function (t, n) { if (n < l - 1) { var i = s[n + 1]; e.addLinkShape(u, t, i) } })) } } }, e.prototype.removeLink = function (t) { var e = this.getColorScale(this.context.view, t); if (e) { var n = o.getElementValue(t, e.field); this.cache[n] && (this.cache[n].remove(), this.cache[n] = null) } }, e.prototype.link = function () { var t = this.context; this.linkGroup || (this.linkGroup = t.view.foregroundGroup.addGroup({ capture: !1 })); var e = o.getCurrentElement(t); e && this.linkByElement(e) }, e.prototype.unlink = function () { var t = o.getCurrentElement(this.context); t && this.removeLink(t) }, e.prototype.clear = function () { this.linkGroup && this.linkGroup.clear(), this.cache = {} }, e.prototype.destroy = function () { t.prototype.destroy.call(this), this.linkGroup && this.linkGroup.remove() }, e }(r.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "active", e } return i.__extends(e, t), e.prototype.active = function () { this.setState() }, e }(i.__importDefault(n(95)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "active", e } return i.__extends(e, t), e.prototype.active = function () { this.setState() }, e }(i.__importDefault(n(96)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(19), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.setStateByElement = function (t, e) { var n = this.context.view, i = t.geometry.getAttribute("color"); if (i) { var o = n.getScaleByField(i.getFields()[0]), a = r.getElementValue(t, o.field), s = r.getElements(n), u = s.filter((function (t) { return r.getElementValue(t, o.field) === a })); this.setHighlightBy(s, (function (t) { return u.includes(t) }), e) } }, e }(i.__importDefault(n(97)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(19), o = i.__importStar(n(97)), a = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.setElementHighlight = function (t, e) { e(t) ? (t.hasState(o.STATUS_UNACTIVE) && t.setState(o.STATUS_UNACTIVE, !1), t.setState(o.STATUS_ACTIVE, !0)) : (t.setState(o.STATUS_UNACTIVE, !0), t.hasState(o.STATUS_ACTIVE) && t.setState(o.STATUS_ACTIVE, !1)) }, e.prototype.setStateByElement = function (t, e) { var n = this.context.view, i = n.getXScale(), o = r.getElementValue(t, i.field), a = r.getElements(n), s = a.filter((function (t) { return r.getElementValue(t, i.field) === o })); this.setHighlightBy(a, (function (t) { return s.includes(t) }), e) }, e.prototype.toggle = function () { var t = r.getCurrentElement(this.context); if (t) { var e = t.hasState(this.stateName); this.setStateByElement(t, !e) } }, e }(o.default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(98), o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "active", e } return i.__extends(e, t), e.prototype.clearViewState = function (t) { r.clearHighlight(t) }, e.prototype.highlight = function () { this.setState() }, e.prototype.setElementsState = function (t, e, n) { r.setHighlightBy(n, (function (e) { return t.indexOf(e) >= 0 }), e) }, e }(i.__importDefault(n(95)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(19), o = n(98), a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "active", e } return i.__extends(e, t), e.prototype.highlight = function () { this.setState() }, e.prototype.setElementState = function (t, e) { var n = this.context.view, i = r.getElements(n); o.setHighlightBy(i, (function (e) { return t === e }), e) }, e.prototype.clear = function () { var t = this.context.view; o.clearHighlight(t) }, e }(i.__importDefault(n(96)).default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "selected", e } return i.__extends(e, t), e.prototype.selected = function () { this.setState() }, e }(i.__importDefault(n(95)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "selected", e } return i.__extends(e, t), e.prototype.selected = function () { this.setState() }, e }(i.__importDefault(n(93)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "selected", e } return i.__extends(e, t), e.prototype.selected = function () { this.setState() }, e }(i.__importDefault(n(96)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "active", e } return i.__extends(e, t), e.prototype.active = function () { this.setState() }, e }(i.__importDefault(n(66)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(269), a = i.__importDefault(n(66)), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "active", e.ignoreItemStates = ["unchecked"], e } return i.__extends(e, t), e.prototype.setItemsState = function (t, e, n) { this.setHighlightBy(t, (function (t) { return t.name === e }), n) }, e.prototype.setItemState = function (t, e, n) { t.getItems(); this.setHighlightBy(t, (function (t) { return t === e }), n) }, e.prototype.setHighlightBy = function (t, e, n) { var i = t.getItems(); if (n) r.each(i, (function (n) { e(n) ? (t.hasState(n, "inactive") && t.setItemState(n, "inactive", !1), t.setItemState(n, "active", !0)) : t.hasState(n, "active") || t.setItemState(n, "inactive", !0) })); else { var o = t.getItemsByState("active"), a = !0; r.each(o, (function (t) { if (!e(t)) return a = !1, !1 })), a ? this.clear() : r.each(i, (function (n) { e(n) && (t.hasState(n, "active") && t.setItemState(n, "active", !1), t.setItemState(n, "inactive", !0)) })) } }, e.prototype.highlight = function () { this.setState() }, e.prototype.clear = function () { var t = this.getTriggerListInfo(); if (t) o.clearList(t.list); else { var e = this.getAllowComponents(); r.each(e, (function (t) { t.clearItemsState("active"), t.clearItemsState("inactive") })) } }, e }(a.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }), e.clearList = void 0; var i = n(0); e.clearList = function (t) { var e = t.getItems(); i.each(e, (function (e) { t.hasState(e, "active") && t.setItemState(e, "active", !1), t.hasState(e, "inactive") && t.setItemState(e, "inactive", !1) })) } }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "selected", e } return i.__extends(e, t), e.prototype.selected = function () { this.setState() }, e }(i.__importDefault(n(66)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.stateName = "unchecked", e } return i.__extends(e, t), e.prototype.unchecked = function () { this.setState() }, e }(i.__importDefault(n(66)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = n(19), a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.shapeType = "circle", e } return i.__extends(e, t), e.prototype.getMaskAttrs = function () { var t = this.points, e = r.last(this.points), n = 0, i = 0, a = 0; if (t.length) { var s = t[0]; n = o.distance(s, e) / 2, i = (e.x + s.x) / 2, a = (e.y + s.y) / 2 } return { x: i, y: a, r: n } }, e }(i.__importDefault(n(99)).default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0); function o(t) { t.x = r.clamp(t.x, 0, 1), t.y = r.clamp(t.y, 0, 1) } var a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.dim = "x", e.inPlot = !0, e } return i.__extends(e, t), e.prototype.getRegion = function () { var t = null, e = null, n = this.points, i = this.dim, a = this.context.view.getCoordinate(), s = a.invert(r.head(n)), u = a.invert(r.last(n)); return this.inPlot && (o(s), o(u)), "x" === i ? (t = a.convert({ x: s.x, y: 0 }), e = a.convert({ x: u.x, y: 1 })) : (t = a.convert({ x: 0, y: s.y }), e = a.convert({ x: 1, y: u.y })), { start: t, end: e } }, e }(i.__importDefault(n(130)).default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(19), o = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.getMaskPath = function () { var t = this.points; return r.getSpline(t, !0) }, e }(i.__importDefault(n(131)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.setCursor = function (t) { this.context.view.getCanvas().setCursor(t) }, e.prototype.default = function () { this.setCursor("default") }, e.prototype.pointer = function () { this.setCursor("pointer") }, e.prototype.move = function () { this.setCursor("move") }, e.prototype.crosshair = function () { this.setCursor("crosshair") }, e.prototype.wait = function () { this.setCursor("wait") }, e.prototype.help = function () { this.setCursor("help") }, e.prototype.text = function () { this.setCursor("text") }, e.prototype.eResize = function () { this.setCursor("e-resize") }, e.prototype.wResize = function () { this.setCursor("w-resize") }, e.prototype.nResize = function () { this.setCursor("n-resize") }, e.prototype.sResize = function () { this.setCursor("s-resize") }, e.prototype.neResize = function () { this.setCursor("ne-resize") }, e.prototype.nwResize = function () { this.setCursor("nw-resize") }, e.prototype.seResize = function () { this.setCursor("se-resize") }, e.prototype.swResize = function () { this.setCursor("sw-resize") }, e.prototype.nsResize = function () { this.setCursor("ns-resize") }, e.prototype.ewResize = function () { this.setCursor("ew-resize") }, e }(i.__importDefault(n(22)).default); e.default = r }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = i.__importDefault(n(22)), a = n(19), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.filterView = function (t, e, n) { var i = this; t.getScaleByField(e) && t.filter(e, n), t.views && t.views.length && r.each(t.views, (function (t) { i.filterView(t, e, n) })) }, e.prototype.filter = function () { var t = a.getDelegationObject(this.context); if (t) { var e = this.context.view, n = t.component, i = n.get("field"); if (a.isList(t)) { if (i) { var r = n.getItemsByState("unchecked"), o = a.getScaleByField(e, i), s = r.map((function (t) { return t.name })); s.length ? this.filterView(e, i, (function (t) { var e = o.getText(t); return !s.includes(e) })) : this.filterView(e, i, null), e.render(!0) } } else if (a.isSlider(t)) { var u = n.getValue(), l = u[0], c = u[1]; this.filterView(e, i, (function (t) { return t >= l && t <= c })), e.render(!0) } } }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = i.__importDefault(n(132)), a = n(19), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.filterView = function (t, e, n) { var i = a.getSilbings(t); r.each(i, (function (t) { t.filter(e, n) })) }, e.prototype.reRender = function (t) { var e = a.getSilbings(t); r.each(e, (function (t) { t.render(!0) })) }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = i.__importDefault(n(22)), a = n(19), s = function (t) { function e() { return null !== t && t.apply(this, arguments) || this } return i.__extends(e, t), e.prototype.filter = function () { var t = a.getDelegationObject(this.context), e = this.context.view, n = a.getElements(e); if (a.isMask(this.context)) { var i = a.getMaskedElements(this.context, 10); i && r.each(n, (function (t) { i.includes(t) ? t.show() : t.hide() })) } else if (t) { var o = t.component, s = o.get("field"); if (a.isList(t)) { if (s) { var u = o.getItemsByState("unchecked"), l = a.getScaleByField(e, s), c = u.map((function (t) { return t.name })); r.each(n, (function (t) { var e = a.getElementValue(t, s), n = l.getText(e); c.indexOf(n) >= 0 ? t.hide() : t.show() })) } } else if (a.isSlider(t)) { var h = o.getValue(), f = h[0], p = h[1]; r.each(n, (function (t) { var e = a.getElementValue(t, s); e >= f && e <= p ? t.show() : t.hide() })) } } }, e.prototype.clear = function () { var t = a.getElements(this.context.view); r.each(t, (function (t) { t.show() })) }, e.prototype.reset = function () { this.clear() }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = i.__importDefault(n(22)), a = n(19), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.byRecord = !1, e } return i.__extends(e, t), e.prototype.filter = function () { a.isMask(this.context) && (this.byRecord ? this.filterByRecord() : this.filterByBBox()) }, e.prototype.filterByRecord = function () { var t = this.context.view, e = a.getMaskedElements(this.context, 10); if (e) { var n = t.getXScale().field, i = t.getYScales()[0].field, o = e.map((function (t) { return t.getModel().data })), s = a.getSilbings(t); r.each(s, (function (t) { var e = a.getElements(t); r.each(e, (function (t) { var e = t.getModel().data; a.isInRecords(o, e, n, i) ? t.show() : t.hide() })) })) } }, e.prototype.filterByBBox = function () { var t = this, e = this.context.view, n = a.getSilbings(e); r.each(n, (function (e) { var n = a.getSiblingMaskElements(t.context, e, 10), i = a.getElements(e); n && r.each(i, (function (t) { n.includes(t) ? t.show() : t.hide() })) })) }, e.prototype.reset = function () { var t = a.getSilbings(this.context.view); r.each(t, (function (t) { var e = a.getElements(t); r.each(e, (function (t) { t.show() })) })) }, e }(o.default); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(6), o = n(0), a = n(83), s = i.__importDefault(n(22)), u = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.buttonGroup = null, e.buttonCfg = { name: "button", text: "button", textStyle: { x: 0, y: 0, fontSize: 12, fill: "#333333", cursor: "pointer" }, padding: [8, 10], style: { fill: "#f7f7f7", stroke: "#cccccc", cursor: "pointer" }, activeStyle: { fill: "#e6e6e6" } }, e } return i.__extends(e, t), e.prototype.getButtonCfg = function () { return o.deepMix(this.buttonCfg, this.cfg) }, e.prototype.drawButton = function () { var t = this.getButtonCfg(), e = this.context.view.foregroundGroup.addGroup({ name: t.name }), n = e.addShape({ type: "text", name: "button-text", attrs: i.__assign({ text: t.text }, t.textStyle) }).getBBox(), r = a.parsePadding(t.padding), o = e.addShape({ type: "rect", name: "button-rect", attrs: i.__assign({ x: n.x - r[3], y: n.y - r[0], width: n.width + r[1] + r[3], height: n.height + r[0] + r[2] }, t.style) }); o.toBack(), e.on("mouseenter", (function () { o.attr(t.activeStyle) })), e.on("mouseleave", (function () { o.attr(t.style) })), this.buttonGroup = e }, e.prototype.resetPosition = function () { var t = this.context.view.getCoordinate().convert({ x: 1, y: 1 }), e = this.buttonGroup, n = e.getBBox(), i = r.ext.transform(null, [["t", t.x - n.width - 10, t.y + n.height + 5]]); e.setMatrix(i) }, e.prototype.show = function () { this.buttonGroup || this.drawButton(), this.resetPosition(), this.buttonGroup.show() }, e.prototype.hide = function () { this.buttonGroup && this.buttonGroup.hide() }, e.prototype.destroy = function () { var e = this.buttonGroup; e && e.remove(), t.prototype.destroy.call(this) }, e }(s.default); e.default = u }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = i.__importDefault(n(22)), o = n(19), a = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.starting = !1, e.dragStart = !1, e } return i.__extends(e, t), e.prototype.start = function () { this.starting = !0, this.startPoint = this.context.getCurrentPoint() }, e.prototype.drag = function () { if (this.startPoint) { var t = this.context.getCurrentPoint(), e = this.context.view, n = this.context.event; this.dragStart ? e.emit("drag", { target: n.target, x: n.x, y: n.y }) : o.distance(t, this.startPoint) > 4 && (e.emit("dragstart", { target: n.target, x: n.x, y: n.y }), this.dragStart = !0) } }, e.prototype.end = function () { if (this.dragStart) { var t = this.context.view, e = this.context.event; t.emit("dragend", { target: e.target, x: e.x, y: e.y }) } this.starting = !1, this.dragStart = !1 }, e }(r.default); e.default = a }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(6), o = n(81), a = n(19), s = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.starting = !1, e.isMoving = !1, e.startPoint = null, e.startMatrix = null, e } return i.__extends(e, t), e.prototype.start = function () { this.starting = !0, this.startPoint = this.context.getCurrentPoint(), this.startMatrix = this.context.view.middleGroup.getMatrix() }, e.prototype.move = function () { if (this.starting) { var t = this.startPoint, e = this.context.getCurrentPoint(); if (a.distance(t, e) > 5 && !this.isMoving && (this.isMoving = !0), this.isMoving) { var n = this.context.view, i = r.ext.transform(this.startMatrix, [["t", e.x - t.x, e.y - t.y]]); n.backgroundGroup.setMatrix(i), n.foregroundGroup.setMatrix(i), n.middleGroup.setMatrix(i) } } }, e.prototype.end = function () { this.isMoving && (this.isMoving = !1), this.startMatrix = null, this.starting = !1, this.startPoint = null }, e.prototype.reset = function () { this.starting = !1, this.startPoint = null, this.isMoving = !1; var t = this.context.view; t.backgroundGroup.resetMatrix(), t.foregroundGroup.resetMatrix(), t.middleGroup.resetMatrix(), this.isMoving = !1 }, e }(o.Action); e.default = s }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.startPoint = null, e.starting = !1, e.startCache = {}, e } return i.__extends(e, t), e.prototype.start = function () { var t = this; this.startPoint = this.context.getCurrentPoint(), this.starting = !0; var e = this.dims; r.each(e, (function (e) { var n = t.getScale(e), i = n.min, r = n.max, o = n.values; t.startCache[e] = { min: i, max: r, values: o } })) }, e.prototype.end = function () { this.startPoint = null, this.starting = !1, this.startCache = {} }, e.prototype.translate = function () { var t = this; if (this.starting) { var e = this.startPoint, n = this.context.view.getCoordinate(), i = this.context.getCurrentPoint(), o = n.invert(e), a = n.invert(i), s = a.x - o.x, u = a.y - o.y, l = this.context.view, c = this.dims; r.each(c, (function (e) { t.translateDim(e, { x: -1 * s, y: -1 * u }) })), l.render(!0) } }, e.prototype.translateDim = function (t, e) { if (this.hasDim(t)) { var n = this.getScale(t); n.isLinear && this.translateLinear(t, n, e) } }, e.prototype.translateLinear = function (t, e, n) { var i = this.context.view, r = this.startCache[t], o = r.min, a = r.max, s = a - o, u = n[t] * s; this.cacheScaleDefs[t] || (this.cacheScaleDefs[t] = { nice: e.nice, min: o, max: a }), i.scale(e.field, { nice: !1, min: o + u, max: a + u }) }, e.prototype.reset = function () { t.prototype.reset.call(this), this.startPoint = null, this.starting = !1 }, e }(i.__importDefault(n(133)).default); e.default = o }, function (t, e, n) { "use strict"; Object.defineProperty(e, "__esModule", { value: !0 }); var i = n(1), r = n(0), o = function (t) { function e() { var e = null !== t && t.apply(this, arguments) || this; return e.zoomRatio = .05, e } return i.__extends(e, t), e.prototype.zoomIn = function () { this.zoom(this.zoomRatio) }, e.prototype.zoom = function (t) { var e = this, n = this.dims; r.each(n, (function (n) { e.zoomDim(n, t) })), this.context.view.render(!0) }, e.prototype.zoomOut = function () { this.zoom(-1 * this.zoomRatio) }, e.prototype.zoomDim = function (t, e) { if (this.hasDim(t)) { var n = this.getScale(t); n.isLinear && this.zoomLinear(t, n, e) } }, e.prototype.zoomLinear = function (t, e, n) { var i = this.context.view; this.cacheScaleDefs[t] || (this.cacheScaleDefs[t] = { nice: e.nice, min: e.min, max: e.max }); var r = this.cacheScaleDefs[t], o = r.max - r.min, a = e.min, s = e.max, u = n * o, l = a - u, c = s + u, h = (c - l) / o; c > l && h < 100 && h > .01 && i.scale(e.field, { nice: !1, min: a - u, max: s + u }) }, e }(i.__importDefault(n(133)).default); e.default = o }, function (t, e, n) { "use strict"; n.r(e), n.d(e, "getCoordinate", (function () { return h })), n.d(e, "registerCoordinate", (function () { return f })), n.d(e, "Coordinate", (function () { return a })); var i = n(10), r = n(6), o = n(0), a = function () { function t(t) { this.type = "coordinate", this.isRect = !1, this.isHelix = !1, this.isPolar = !1, this.isReflectX = !1, this.isReflectY = !1; var e = t.start, n = t.end, r = t.matrix, o = void 0 === r ? [1, 0, 0, 0, 1, 0, 0, 0, 1] : r, a = t.isTransposed, s = void 0 !== a && a; this.start = e, this.end = n, this.matrix = o, this.originalMatrix = Object(i.c)(o), this.isTransposed = s } return t.prototype.initial = function () { this.center = { x: (this.start.x + this.end.x) / 2, y: (this.start.y + this.end.y) / 2 }, this.width = Math.abs(this.end.x - this.start.x), this.height = Math.abs(this.end.y - this.start.y) }, t.prototype.update = function (t) { Object(o.assign)(this, t), this.initial() }, t.prototype.convertDim = function (t, e) { var n, i = this[e], r = i.start, o = i.end; return this.isReflect(e) && (r = (n = [o, r])[0], o = n[1]), r + t * (o - r) }, t.prototype.invertDim = function (t, e) { var n, i = this[e], r = i.start, o = i.end; return this.isReflect(e) && (r = (n = [o, r])[0], o = n[1]), (t - r) / (o - r) }, t.prototype.applyMatrix = function (t, e, n) { void 0 === n && (n = 0); var i = this.matrix, o = [t, e, n]; return r.vec3.transformMat3(o, o, i), o }, t.prototype.invertMatrix = function (t, e, n) { void 0 === n && (n = 0); var i = this.matrix, o = r.mat3.invert([0, 0, 0, 0, 0, 0, 0, 0, 0], i), a = [t, e, n]; return o && r.vec3.transformMat3(a, a, o), a }, t.prototype.convert = function (t) { var e = this.convertPoint(t), n = e.x, i = e.y, r = this.applyMatrix(n, i, 1); return { x: r[0], y: r[1] } }, t.prototype.invert = function (t) { var e = this.invertMatrix(t.x, t.y, 1); return this.invertPoint({ x: e[0], y: e[1] }) }, t.prototype.rotate = function (t) { var e = this.matrix, n = this.center; return r.ext.leftTranslate(e, e, [-n.x, -n.y]), r.ext.leftRotate(e, e, t), r.ext.leftTranslate(e, e, [n.x, n.y]), this }, t.prototype.reflect = function (t) { return "x" === t ? this.isReflectX = !this.isReflectX : this.isReflectY = !this.isReflectY, this }, t.prototype.scale = function (t, e) { var n = this.matrix, i = this.center; return r.ext.leftTranslate(n, n, [-i.x, -i.y]), r.ext.leftScale(n, n, [t, e]), r.ext.leftTranslate(n, n, [i.x, i.y]), this }, t.prototype.translate = function (t, e) { var n = this.matrix; return r.ext.leftTranslate(n, n, [t, e]), this }, t.prototype.transpose = function () { return this.isTransposed = !this.isTransposed, this }, t.prototype.getCenter = function () { return this.center }, t.prototype.getWidth = function () { return this.width }, t.prototype.getHeight = function () { return this.height }, t.prototype.getRadius = function () { return this.radius }, t.prototype.isReflect = function (t) { return "x" === t ? this.isReflectX : this.isReflectY }, t.prototype.resetMatrix = function (t) { this.matrix = t || Object(i.c)(this.originalMatrix) }, t }(), s = function (t) { function e(e) { var n = t.call(this, e) || this; return n.isRect = !0, n.type = "cartesian", n.initial(), n } return Object(i.b)(e, t), e.prototype.initial = function () { t.prototype.initial.call(this); var e = this.start, n = this.end; this.x = { start: e.x, end: n.x }, this.y = { start: e.y, end: n.y } }, e.prototype.convertPoint = function (t) { var e, n = t.x, i = t.y; return this.isTransposed && (n = (e = [i, n])[0], i = e[1]), { x: this.convertDim(n, "x"), y: this.convertDim(i, "y") } }, e.prototype.invertPoint = function (t) { var e, n = this.invertDim(t.x, "x"), i = this.invertDim(t.y, "y"); return this.isTransposed && (n = (e = [i, n])[0], i = e[1]), { x: n, y: i } }, e }(a), u = function (t) { function e(e) { var n = t.call(this, e) || this; n.isHelix = !0, n.type = "helix"; var i = e.startAngle, r = void 0 === i ? 1.25 * Math.PI : i, o = e.endAngle, a = void 0 === o ? 7.25 * Math.PI : o, s = e.innerRadius, u = void 0 === s ? 0 : s, l = e.radius; return n.startAngle = r, n.endAngle = a, n.innerRadius = u, n.radius = l, n.initial(), n } return Object(i.b)(e, t), e.prototype.initial = function () { t.prototype.initial.call(this); var e = (this.endAngle - this.startAngle) / (2 * Math.PI) + 1, n = Math.min(this.width, this.height) / 2; this.radius && this.radius >= 0 && this.radius <= 1 && (n *= this.radius), this.d = Math.floor(n * (1 - this.innerRadius) / e), this.a = this.d / (2 * Math.PI), this.x = { start: this.startAngle, end: this.endAngle }, this.y = { start: this.innerRadius * n, end: this.innerRadius * n + .99 * this.d } }, e.prototype.convertPoint = function (t) { var e, n = t.x, i = t.y; this.isTransposed && (n = (e = [i, n])[0], i = e[1]); var r = this.convertDim(n, "x"), o = this.a * r, a = this.convertDim(i, "y"); return { x: this.center.x + Math.cos(r) * (o + a), y: this.center.y + Math.sin(r) * (o + a) } }, e.prototype.invertPoint = function (t) { var e, n = this.d + this.y.start, i = r.vec2.subtract([0, 0], [t.x, t.y], [this.center.x, this.center.y]), a = r.ext.angleTo(i, [1, 0], !0), s = a * this.a; r.vec2.length(i) < s && (s = r.vec2.length(i)), a = 2 * Math.floor((r.vec2.length(i) - s) / n) * Math.PI + a; var u = this.a * a, l = r.vec2.length(i) - u; l = Object(o.isNumberEqual)(l, 0) ? 0 : l; var c = this.invertDim(a, "x"), h = this.invertDim(l, "y"); return c = Object(o.isNumberEqual)(c, 0) ? 0 : c, h = Object(o.isNumberEqual)(h, 0) ? 0 : h, this.isTransposed && (c = (e = [h, c])[0], h = e[1]), { x: c, y: h } }, e }(a), l = function (t) { function e(e) { var n = t.call(this, e) || this; n.isPolar = !0, n.type = "polar"; var i = e.startAngle, r = void 0 === i ? -Math.PI / 2 : i, o = e.endAngle, a = void 0 === o ? 3 * Math.PI / 2 : o, s = e.innerRadius, u = void 0 === s ? 0 : s, l = e.radius; return n.startAngle = r, n.endAngle = a, n.innerRadius = u, n.radius = l, n.initial(), n } return Object(i.b)(e, t), e.prototype.initial = function () { for (t.prototype.initial.call(this); this.endAngle < this.startAngle;)this.endAngle += 2 * Math.PI; var e, n = this.getOneBox(), i = n.maxX - n.minX, r = n.maxY - n.minY, o = Math.abs(n.minX) / i, a = Math.abs(n.minY) / r; this.height / r > this.width / i ? (e = this.width / i, this.circleCenter = { x: this.center.x - (.5 - o) * this.width, y: this.center.y - (.5 - a) * e * r }) : (e = this.height / r, this.circleCenter = { x: this.center.x - (.5 - o) * e * i, y: this.center.y - (.5 - a) * this.height }), this.polarRadius = this.radius, this.radius ? this.radius > 0 && this.radius <= 1 ? this.polarRadius = e * this.radius : (this.radius <= 0 || this.radius > e) && (this.polarRadius = e) : this.polarRadius = e, this.x = { start: this.startAngle, end: this.endAngle }, this.y = { start: this.innerRadius * this.polarRadius, end: this.polarRadius } }, e.prototype.getRadius = function () { return this.polarRadius }, e.prototype.convertPoint = function (t) { var e, n = this.getCenter(), i = t.x, r = t.y; return this.isTransposed && (i = (e = [r, i])[0], r = e[1]), i = this.convertDim(i, "x"), r = this.convertDim(r, "y"), { x: n.x + Math.cos(i) * r, y: n.y + Math.sin(i) * r } }, e.prototype.invertPoint = function (t) { var e = this.getCenter(), n = [t.x - e.x, t.y - e.y], i = [1, 0, 0, 0, 1, 0, 0, 0, 1]; r.ext.leftRotate(i, i, this.startAngle); var a = [1, 0, 0]; r.vec3.transformMat3(a, a, i); var s = [a[0], a[1]], u = r.ext.angleTo(s, n, this.endAngle < this.startAngle); Object(o.isNumberEqual)(u, 2 * Math.PI) && (u = 0); var l = r.vec2.length(n), c = u / (this.endAngle - this.startAngle); c = this.endAngle - this.startAngle > 0 ? c : -c; var h = this.invertDim(l, "y"), f = { x: 0, y: 0 }; return f.x = this.isTransposed ? h : c, f.y = this.isTransposed ? c : h, f }, e.prototype.getCenter = function () { return this.circleCenter }, e.prototype.getOneBox = function () { var t = this.startAngle, e = this.endAngle; if (Math.abs(e - t) >= 2 * Math.PI) return { minX: -1, maxX: 1, minY: -1, maxY: 1 }; for (var n = [0, Math.cos(t), Math.cos(e)], i = [0, Math.sin(t), Math.sin(e)], r = Math.min(t, e); r < Math.max(t, e); r += Math.PI / 18)n.push(Math.cos(r)), i.push(Math.sin(r)); return { minX: Math.min.apply(Math, n), maxX: Math.max.apply(Math, n), minY: Math.min.apply(Math, i), maxY: Math.max.apply(Math, i) } }, e }(a), c = {}, h = function (t) { return c[t.toLowerCase()] }, f = function (t, e) { c[t.toLowerCase()] = e }; f("rect", s), f("cartesian", s), f("polar", l), f("helix", u) }])
}));
//# sourceMappingURL=g2.min.js.map